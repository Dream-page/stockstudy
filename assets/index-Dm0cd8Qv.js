var rL=Object.defineProperty;var Ek=i=>{throw TypeError(i)};var sL=(i,e,t)=>e in i?rL(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var le=(i,e,t)=>sL(i,typeof e!="symbol"?e+"":e,t),Ew=(i,e,t)=>e.has(i)||Ek("Cannot "+t);var c=(i,e,t)=>(Ew(i,e,"read from private field"),t?t.call(i):e.get(i)),_=(i,e,t)=>e.has(i)?Ek("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),b=(i,e,t,n)=>(Ew(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),P=(i,e,t)=>(Ew(i,e,"access private method"),t);var mn=(i,e,t,n)=>({set _(r){b(i,e,r,t)},get _(){return c(i,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function bv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Aw={exports:{}},Af={},kw={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak;function oL(){if(Ak)return Ke;Ak=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function k(B,U,I){this.props=B,this.context=U,this.refs=A,this.updater=I||v}k.prototype.isReactComponent={},k.prototype.setState=function(B,U){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,U,"setState")},k.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function C(){}C.prototype=k.prototype;function N(B,U,I){this.props=B,this.context=U,this.refs=A,this.updater=I||v}var T=N.prototype=new C;T.constructor=N,E(T,k.prototype),T.isPureReactComponent=!0;var D=Array.isArray,F=Object.prototype.hasOwnProperty,L={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function G(B,U,I){var pe,ye={},de=null,xe=null;if(U!=null)for(pe in U.ref!==void 0&&(xe=U.ref),U.key!==void 0&&(de=""+U.key),U)F.call(U,pe)&&!j.hasOwnProperty(pe)&&(ye[pe]=U[pe]);var Ee=arguments.length-2;if(Ee===1)ye.children=I;else if(1<Ee){for(var Re=Array(Ee),tt=0;tt<Ee;tt++)Re[tt]=arguments[tt+2];ye.children=Re}if(B&&B.defaultProps)for(pe in Ee=B.defaultProps,Ee)ye[pe]===void 0&&(ye[pe]=Ee[pe]);return{$$typeof:i,type:B,key:de,ref:xe,props:ye,_owner:L.current}}function K(B,U){return{$$typeof:i,type:B.type,key:U,ref:B.ref,props:B.props,_owner:B._owner}}function ee(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}function q(B){var U={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(I){return U[I]})}var re=/\/+/g;function ue(B,U){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):U.toString(36)}function ie(B,U,I,pe,ye){var de=typeof B;(de==="undefined"||de==="boolean")&&(B=null);var xe=!1;if(B===null)xe=!0;else switch(de){case"string":case"number":xe=!0;break;case"object":switch(B.$$typeof){case i:case e:xe=!0}}if(xe)return xe=B,ye=ye(xe),B=pe===""?"."+ue(xe,0):pe,D(ye)?(I="",B!=null&&(I=B.replace(re,"$&/")+"/"),ie(ye,U,I,"",function(tt){return tt})):ye!=null&&(ee(ye)&&(ye=K(ye,I+(!ye.key||xe&&xe.key===ye.key?"":(""+ye.key).replace(re,"$&/")+"/")+B)),U.push(ye)),1;if(xe=0,pe=pe===""?".":pe+":",D(B))for(var Ee=0;Ee<B.length;Ee++){de=B[Ee];var Re=pe+ue(de,Ee);xe+=ie(de,U,I,Re,ye)}else if(Re=y(B),typeof Re=="function")for(B=Re.call(B),Ee=0;!(de=B.next()).done;)de=de.value,Re=pe+ue(de,Ee++),xe+=ie(de,U,I,Re,ye);else if(de==="object")throw U=String(B),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return xe}function Z(B,U,I){if(B==null)return B;var pe=[],ye=0;return ie(B,pe,"","",function(de){return U.call(I,de,ye++)}),pe}function se(B){if(B._status===-1){var U=B._result;U=U(),U.then(function(I){(B._status===0||B._status===-1)&&(B._status=1,B._result=I)},function(I){(B._status===0||B._status===-1)&&(B._status=2,B._result=I)}),B._status===-1&&(B._status=0,B._result=U)}if(B._status===1)return B._result.default;throw B._result}var J={current:null},Q={transition:null},me={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Q,ReactCurrentOwner:L};function M(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:Z,forEach:function(B,U,I){Z(B,function(){U.apply(this,arguments)},I)},count:function(B){var U=0;return Z(B,function(){U++}),U},toArray:function(B){return Z(B,function(U){return U})||[]},only:function(B){if(!ee(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ke.Component=k,Ke.Fragment=t,Ke.Profiler=r,Ke.PureComponent=N,Ke.StrictMode=n,Ke.Suspense=h,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ke.act=M,Ke.cloneElement=function(B,U,I){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var pe=E({},B.props),ye=B.key,de=B.ref,xe=B._owner;if(U!=null){if(U.ref!==void 0&&(de=U.ref,xe=L.current),U.key!==void 0&&(ye=""+U.key),B.type&&B.type.defaultProps)var Ee=B.type.defaultProps;for(Re in U)F.call(U,Re)&&!j.hasOwnProperty(Re)&&(pe[Re]=U[Re]===void 0&&Ee!==void 0?Ee[Re]:U[Re])}var Re=arguments.length-2;if(Re===1)pe.children=I;else if(1<Re){Ee=Array(Re);for(var tt=0;tt<Re;tt++)Ee[tt]=arguments[tt+2];pe.children=Ee}return{$$typeof:i,type:B.type,key:ye,ref:de,props:pe,_owner:xe}},Ke.createContext=function(B){return B={$$typeof:a,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:s,_context:B},B.Consumer=B},Ke.createElement=G,Ke.createFactory=function(B){var U=G.bind(null,B);return U.type=B,U},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(B){return{$$typeof:u,render:B}},Ke.isValidElement=ee,Ke.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:se}},Ke.memo=function(B,U){return{$$typeof:d,type:B,compare:U===void 0?null:U}},Ke.startTransition=function(B){var U=Q.transition;Q.transition={};try{B()}finally{Q.transition=U}},Ke.unstable_act=M,Ke.useCallback=function(B,U){return J.current.useCallback(B,U)},Ke.useContext=function(B){return J.current.useContext(B)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(B){return J.current.useDeferredValue(B)},Ke.useEffect=function(B,U){return J.current.useEffect(B,U)},Ke.useId=function(){return J.current.useId()},Ke.useImperativeHandle=function(B,U,I){return J.current.useImperativeHandle(B,U,I)},Ke.useInsertionEffect=function(B,U){return J.current.useInsertionEffect(B,U)},Ke.useLayoutEffect=function(B,U){return J.current.useLayoutEffect(B,U)},Ke.useMemo=function(B,U){return J.current.useMemo(B,U)},Ke.useReducer=function(B,U,I){return J.current.useReducer(B,U,I)},Ke.useRef=function(B){return J.current.useRef(B)},Ke.useState=function(B){return J.current.useState(B)},Ke.useSyncExternalStore=function(B,U,I){return J.current.useSyncExternalStore(B,U,I)},Ke.useTransition=function(){return J.current.useTransition()},Ke.version="18.3.1",Ke}var kk;function Q1(){return kk||(kk=1,kw.exports=oL()),kw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck;function aL(){if(Ck)return Af;Ck=1;var i=Q1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,h,d){var p,m={},y=null,v=null;d!==void 0&&(y=""+d),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(v=h.ref);for(p in h)n.call(h,p)&&!s.hasOwnProperty(p)&&(m[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:e,type:u,key:y,ref:v,props:m,_owner:r.current}}return Af.Fragment=t,Af.jsx=a,Af.jsxs=a,Af}var _k;function lL(){return _k||(_k=1,Aw.exports=aL()),Aw.exports}var x=lL(),$=Q1();const cL=bv($);var Dy={},Cw={exports:{}},ki={},_w={exports:{}},Tw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk;function uL(){return Tk||(Tk=1,(function(i){function e(Q,me){var M=Q.length;Q.push(me);e:for(;0<M;){var B=M-1>>>1,U=Q[B];if(0<r(U,me))Q[B]=me,Q[M]=U,M=B;else break e}}function t(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var me=Q[0],M=Q.pop();if(M!==me){Q[0]=M;e:for(var B=0,U=Q.length,I=U>>>1;B<I;){var pe=2*(B+1)-1,ye=Q[pe],de=pe+1,xe=Q[de];if(0>r(ye,M))de<U&&0>r(xe,ye)?(Q[B]=xe,Q[de]=M,B=de):(Q[B]=ye,Q[pe]=M,B=pe);else if(de<U&&0>r(xe,M))Q[B]=xe,Q[de]=M,B=de;else break e}}return me}function r(Q,me){var M=Q.sortIndex-me.sortIndex;return M!==0?M:Q.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();i.unstable_now=function(){return a.now()-u}}var h=[],d=[],p=1,m=null,y=3,v=!1,E=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Q){for(var me=t(d);me!==null;){if(me.callback===null)n(d);else if(me.startTime<=Q)n(d),me.sortIndex=me.expirationTime,e(h,me);else break;me=t(d)}}function D(Q){if(A=!1,T(Q),!E)if(t(h)!==null)E=!0,se(F);else{var me=t(d);me!==null&&J(D,me.startTime-Q)}}function F(Q,me){E=!1,A&&(A=!1,C(G),G=-1),v=!0;var M=y;try{for(T(me),m=t(h);m!==null&&(!(m.expirationTime>me)||Q&&!q());){var B=m.callback;if(typeof B=="function"){m.callback=null,y=m.priorityLevel;var U=B(m.expirationTime<=me);me=i.unstable_now(),typeof U=="function"?m.callback=U:m===t(h)&&n(h),T(me)}else n(h);m=t(h)}if(m!==null)var I=!0;else{var pe=t(d);pe!==null&&J(D,pe.startTime-me),I=!1}return I}finally{m=null,y=M,v=!1}}var L=!1,j=null,G=-1,K=5,ee=-1;function q(){return!(i.unstable_now()-ee<K)}function re(){if(j!==null){var Q=i.unstable_now();ee=Q;var me=!0;try{me=j(!0,Q)}finally{me?ue():(L=!1,j=null)}}else L=!1}var ue;if(typeof N=="function")ue=function(){N(re)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Z=ie.port2;ie.port1.onmessage=re,ue=function(){Z.postMessage(null)}}else ue=function(){k(re,0)};function se(Q){j=Q,L||(L=!0,ue())}function J(Q,me){G=k(function(){Q(i.unstable_now())},me)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_continueExecution=function(){E||v||(E=!0,se(F))},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(h)},i.unstable_next=function(Q){switch(y){case 1:case 2:case 3:var me=3;break;default:me=y}var M=y;y=me;try{return Q()}finally{y=M}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Q,me){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var M=y;y=Q;try{return me()}finally{y=M}},i.unstable_scheduleCallback=function(Q,me,M){var B=i.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?B+M:B):M=B,Q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=M+U,Q={id:p++,callback:me,priorityLevel:Q,startTime:M,expirationTime:U,sortIndex:-1},M>B?(Q.sortIndex=M,e(d,Q),t(h)===null&&Q===t(d)&&(A?(C(G),G=-1):A=!0,J(D,M-B))):(Q.sortIndex=U,e(h,Q),E||v||(E=!0,se(F))),Q},i.unstable_shouldYield=q,i.unstable_wrapCallback=function(Q){var me=y;return function(){var M=y;y=me;try{return Q.apply(this,arguments)}finally{y=M}}}})(Tw)),Tw}var Pk;function hL(){return Pk||(Pk=1,_w.exports=uL()),_w.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk;function dL(){if(Rk)return ki;Rk=1;var i=Q1(),e=hL();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(r[o]=l,o=0;o<l.length;o++)n.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function y(o){return h.call(m,o)?!0:h.call(p,o)?!1:d.test(o)?m[o]=!0:(p[o]=!0,!1)}function v(o,l,f,g){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function E(o,l,f,g){if(l===null||typeof l>"u"||v(o,l,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function A(o,l,f,g,w,S,R){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=f,this.propertyName=o,this.type=l,this.sanitizeURL=S,this.removeEmptyString=R}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){k[o]=new A(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];k[l]=new A(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){k[o]=new A(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){k[o]=new A(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){k[o]=new A(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){k[o]=new A(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){k[o]=new A(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){k[o]=new A(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){k[o]=new A(o,5,!1,o.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function N(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(C,N);k[l]=new A(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(C,N);k[l]=new A(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(C,N);k[l]=new A(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){k[o]=new A(o,1,!1,o.toLowerCase(),null,!1,!1)}),k.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){k[o]=new A(o,1,!1,o.toLowerCase(),null,!0,!0)});function T(o,l,f,g){var w=k.hasOwnProperty(l)?k[l]:null;(w!==null?w.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,f,w,g)&&(f=null),g||w===null?y(l)&&(f===null?o.removeAttribute(l):o.setAttribute(l,""+f)):w.mustUseProperty?o[w.propertyName]=f===null?w.type===3?!1:"":f:(l=w.attributeName,g=w.attributeNamespace,f===null?o.removeAttribute(l):(w=w.type,f=w===3||w===4&&f===!0?"":""+f,g?o.setAttributeNS(g,l,f):o.setAttribute(l,f))))}var D=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),L=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),q=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),Q=Symbol.iterator;function me(o){return o===null||typeof o!="object"?null:(o=Q&&o[Q]||o["@@iterator"],typeof o=="function"?o:null)}var M=Object.assign,B;function U(o){if(B===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||""}return`
`+B+o}var I=!1;function pe(o,l){if(!o||I)return"";I=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(X){var g=X}Reflect.construct(o,[],l)}else{try{l.call()}catch(X){g=X}o.call(l.prototype)}else{try{throw Error()}catch(X){g=X}o()}}catch(X){if(X&&g&&typeof X.stack=="string"){for(var w=X.stack.split(`
`),S=g.stack.split(`
`),R=w.length-1,O=S.length-1;1<=R&&0<=O&&w[R]!==S[O];)O--;for(;1<=R&&0<=O;R--,O--)if(w[R]!==S[O]){if(R!==1||O!==1)do if(R--,O--,0>O||w[R]!==S[O]){var z=`
`+w[R].replace(" at new "," at ");return o.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",o.displayName)),z}while(1<=R&&0<=O);break}}}finally{I=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?U(o):""}function ye(o){switch(o.tag){case 5:return U(o.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return o=pe(o.type,!1),o;case 11:return o=pe(o.type.render,!1),o;case 1:return o=pe(o.type,!0),o;default:return""}}function de(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case L:return"Portal";case K:return"Profiler";case G:return"StrictMode";case ue:return"Suspense";case ie:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case q:return(o.displayName||"Context")+".Consumer";case ee:return(o._context.displayName||"Context")+".Provider";case re:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Z:return l=o.displayName||null,l!==null?l:de(o.type)||"Memo";case se:l=o._payload,o=o._init;try{return de(o(l))}catch{}}return null}function xe(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(l);case 8:return l===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ee(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Re(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function tt(o){var l=Re(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),g=""+o[l];if(!o.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var w=f.get,S=f.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return w.call(this)},set:function(R){g=""+R,S.call(this,R)}}),Object.defineProperty(o,l,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(R){g=""+R},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function te(o){o._valueTracker||(o._valueTracker=tt(o))}function Me(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return o&&(g=Re(o)?o.checked?"true":"false":o.value),o=g,o!==f?(l.setValue(o),!0):!1}function je(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function et(o,l){var f=l.checked;return M({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function dn(o,l){var f=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;f=Ee(l.value!=null?l.value:f),o._wrapperState={initialChecked:g,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ln(o,l){l=l.checked,l!=null&&T(o,"checked",l,!1)}function Dt(o,l){Ln(o,l);var f=Ee(l.value),g=l.type;if(f!=null)g==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?en(o,l.type,f):l.hasOwnProperty("defaultValue")&&en(o,l.type,Ee(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function vi(o,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,f||l===o.value||(o.value=l),o.defaultValue=l}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function en(o,l,f){(l!=="number"||je(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var Dn=Array.isArray;function In(o,l,f,g){if(o=o.options,l){l={};for(var w=0;w<f.length;w++)l["$"+f[w]]=!0;for(f=0;f<o.length;f++)w=l.hasOwnProperty("$"+o[f].value),o[f].selected!==w&&(o[f].selected=w),w&&g&&(o[f].defaultSelected=!0)}else{for(f=""+Ee(f),l=null,w=0;w<o.length;w++){if(o[w].value===f){o[w].selected=!0,g&&(o[w].defaultSelected=!0);return}l!==null||o[w].disabled||(l=o[w])}l!==null&&(l.selected=!0)}}function xi(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return M({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function zi(o,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(t(92));if(Dn(f)){if(1<f.length)throw Error(t(93));f=f[0]}l=f}l==null&&(l=""),f=l}o._wrapperState={initialValue:Ee(f)}}function Ui(o,l){var f=Ee(l.value),g=Ee(l.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),l.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),g!=null&&(o.defaultValue=""+g)}function Cl(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function ne(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ge(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?ne(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ie,Xe=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,g,w){MSApp.execUnsafeLocalFunction(function(){return o(l,f,g,w)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Ie=Ie||document.createElement("div"),Ie.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ie.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function nt(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var Mn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},no=["Webkit","ms","Moz","O"];Object.keys(Mn).forEach(function(o){no.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Mn[l]=Mn[o]})});function xr(o,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||Mn.hasOwnProperty(o)&&Mn[o]?(""+l).trim():l+"px"}function oa(o,l){o=o.style;for(var f in l)if(l.hasOwnProperty(f)){var g=f.indexOf("--")===0,w=xr(f,l[f],g);f==="float"&&(f="cssFloat"),g?o.setProperty(f,w):o[f]=w}}var _l=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fn(o,l){if(l){if(_l[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function ys(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function jv(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Bv=null,yu=null,vu=null;function zS(o){if(o=cf(o)){if(typeof Bv!="function")throw Error(t(280));var l=o.stateNode;l&&(l=Xg(l),Bv(o.stateNode,o.type,l))}}function US(o){yu?vu?vu.push(o):vu=[o]:yu=o}function HS(){if(yu){var o=yu,l=vu;if(vu=yu=null,zS(o),l)for(o=0;o<l.length;o++)zS(l[o])}}function $S(o,l){return o(l)}function VS(){}var zv=!1;function WS(o,l,f){if(zv)return o(l,f);zv=!0;try{return $S(o,l,f)}finally{zv=!1,(yu!==null||vu!==null)&&(VS(),HS())}}function Ud(o,l){var f=o.stateNode;if(f===null)return null;var g=Xg(f);if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(t(231,l,typeof f));return f}var Uv=!1;if(u)try{var Hd={};Object.defineProperty(Hd,"passive",{get:function(){Uv=!0}}),window.addEventListener("test",Hd,Hd),window.removeEventListener("test",Hd,Hd)}catch{Uv=!1}function u2(o,l,f,g,w,S,R,O,z){var X=Array.prototype.slice.call(arguments,3);try{l.apply(f,X)}catch(ae){this.onError(ae)}}var $d=!1,Cg=null,_g=!1,Hv=null,h2={onError:function(o){$d=!0,Cg=o}};function d2(o,l,f,g,w,S,R,O,z){$d=!1,Cg=null,u2.apply(h2,arguments)}function f2(o,l,f,g,w,S,R,O,z){if(d2.apply(this,arguments),$d){if($d){var X=Cg;$d=!1,Cg=null}else throw Error(t(198));_g||(_g=!0,Hv=X)}}function Tl(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function GS(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function qS(o){if(Tl(o)!==o)throw Error(t(188))}function p2(o){var l=o.alternate;if(!l){if(l=Tl(o),l===null)throw Error(t(188));return l!==o?null:o}for(var f=o,g=l;;){var w=f.return;if(w===null)break;var S=w.alternate;if(S===null){if(g=w.return,g!==null){f=g;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===f)return qS(w),o;if(S===g)return qS(w),l;S=S.sibling}throw Error(t(188))}if(f.return!==g.return)f=w,g=S;else{for(var R=!1,O=w.child;O;){if(O===f){R=!0,f=w,g=S;break}if(O===g){R=!0,g=w,f=S;break}O=O.sibling}if(!R){for(O=S.child;O;){if(O===f){R=!0,f=S,g=w;break}if(O===g){R=!0,g=S,f=w;break}O=O.sibling}if(!R)throw Error(t(189))}}if(f.alternate!==g)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?o:l}function XS(o){return o=p2(o),o!==null?KS(o):null}function KS(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=KS(o);if(l!==null)return l;o=o.sibling}return null}var YS=e.unstable_scheduleCallback,QS=e.unstable_cancelCallback,m2=e.unstable_shouldYield,g2=e.unstable_requestPaint,tn=e.unstable_now,y2=e.unstable_getCurrentPriorityLevel,$v=e.unstable_ImmediatePriority,JS=e.unstable_UserBlockingPriority,Tg=e.unstable_NormalPriority,v2=e.unstable_LowPriority,ZS=e.unstable_IdlePriority,Pg=null,vs=null;function x2(o){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(Pg,o,void 0,(o.current.flags&128)===128)}catch{}}var Wr=Math.clz32?Math.clz32:S2,w2=Math.log,b2=Math.LN2;function S2(o){return o>>>=0,o===0?32:31-(w2(o)/b2|0)|0}var Rg=64,Ng=4194304;function Vd(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Lg(o,l){var f=o.pendingLanes;if(f===0)return 0;var g=0,w=o.suspendedLanes,S=o.pingedLanes,R=f&268435455;if(R!==0){var O=R&~w;O!==0?g=Vd(O):(S&=R,S!==0&&(g=Vd(S)))}else R=f&~w,R!==0?g=Vd(R):S!==0&&(g=Vd(S));if(g===0)return 0;if(l!==0&&l!==g&&(l&w)===0&&(w=g&-g,S=l&-l,w>=S||w===16&&(S&4194240)!==0))return l;if((g&4)!==0&&(g|=f&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=g;0<l;)f=31-Wr(l),w=1<<f,g|=o[f],l&=~w;return g}function E2(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A2(o,l){for(var f=o.suspendedLanes,g=o.pingedLanes,w=o.expirationTimes,S=o.pendingLanes;0<S;){var R=31-Wr(S),O=1<<R,z=w[R];z===-1?((O&f)===0||(O&g)!==0)&&(w[R]=E2(O,l)):z<=l&&(o.expiredLanes|=O),S&=~O}}function Vv(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function eE(){var o=Rg;return Rg<<=1,(Rg&4194240)===0&&(Rg=64),o}function Wv(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function Wd(o,l,f){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Wr(l),o[l]=f}function k2(o,l){var f=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<f;){var w=31-Wr(f),S=1<<w;l[w]=0,g[w]=-1,o[w]=-1,f&=~S}}function Gv(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var g=31-Wr(f),w=1<<g;w&l|o[g]&l&&(o[g]|=l),f&=~w}}var ut=0;function tE(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var nE,qv,iE,rE,sE,Xv=!1,Dg=[],aa=null,la=null,ca=null,Gd=new Map,qd=new Map,ua=[],C2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oE(o,l){switch(o){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":Gd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":qd.delete(l.pointerId)}}function Xd(o,l,f,g,w,S){return o===null||o.nativeEvent!==S?(o={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:S,targetContainers:[w]},l!==null&&(l=cf(l),l!==null&&qv(l)),o):(o.eventSystemFlags|=g,l=o.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),o)}function _2(o,l,f,g,w){switch(l){case"focusin":return aa=Xd(aa,o,l,f,g,w),!0;case"dragenter":return la=Xd(la,o,l,f,g,w),!0;case"mouseover":return ca=Xd(ca,o,l,f,g,w),!0;case"pointerover":var S=w.pointerId;return Gd.set(S,Xd(Gd.get(S)||null,o,l,f,g,w)),!0;case"gotpointercapture":return S=w.pointerId,qd.set(S,Xd(qd.get(S)||null,o,l,f,g,w)),!0}return!1}function aE(o){var l=Pl(o.target);if(l!==null){var f=Tl(l);if(f!==null){if(l=f.tag,l===13){if(l=GS(f),l!==null){o.blockedOn=l,sE(o.priority,function(){iE(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ig(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=Yv(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var g=new f.constructor(f.type,f);Hi=g,f.target.dispatchEvent(g),Hi=null}else return l=cf(f),l!==null&&qv(l),o.blockedOn=f,!1;l.shift()}return!0}function lE(o,l,f){Ig(o)&&f.delete(l)}function T2(){Xv=!1,aa!==null&&Ig(aa)&&(aa=null),la!==null&&Ig(la)&&(la=null),ca!==null&&Ig(ca)&&(ca=null),Gd.forEach(lE),qd.forEach(lE)}function Kd(o,l){o.blockedOn===l&&(o.blockedOn=null,Xv||(Xv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,T2)))}function Yd(o){function l(w){return Kd(w,o)}if(0<Dg.length){Kd(Dg[0],o);for(var f=1;f<Dg.length;f++){var g=Dg[f];g.blockedOn===o&&(g.blockedOn=null)}}for(aa!==null&&Kd(aa,o),la!==null&&Kd(la,o),ca!==null&&Kd(ca,o),Gd.forEach(l),qd.forEach(l),f=0;f<ua.length;f++)g=ua[f],g.blockedOn===o&&(g.blockedOn=null);for(;0<ua.length&&(f=ua[0],f.blockedOn===null);)aE(f),f.blockedOn===null&&ua.shift()}var xu=D.ReactCurrentBatchConfig,Mg=!0;function P2(o,l,f,g){var w=ut,S=xu.transition;xu.transition=null;try{ut=1,Kv(o,l,f,g)}finally{ut=w,xu.transition=S}}function R2(o,l,f,g){var w=ut,S=xu.transition;xu.transition=null;try{ut=4,Kv(o,l,f,g)}finally{ut=w,xu.transition=S}}function Kv(o,l,f,g){if(Mg){var w=Yv(o,l,f,g);if(w===null)fx(o,l,g,Fg,f),oE(o,g);else if(_2(w,o,l,f,g))g.stopPropagation();else if(oE(o,g),l&4&&-1<C2.indexOf(o)){for(;w!==null;){var S=cf(w);if(S!==null&&nE(S),S=Yv(o,l,f,g),S===null&&fx(o,l,g,Fg,f),S===w)break;w=S}w!==null&&g.stopPropagation()}else fx(o,l,g,null,f)}}var Fg=null;function Yv(o,l,f,g){if(Fg=null,o=jv(g),o=Pl(o),o!==null)if(l=Tl(o),l===null)o=null;else if(f=l.tag,f===13){if(o=GS(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Fg=o,null}function cE(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(y2()){case $v:return 1;case JS:return 4;case Tg:case v2:return 16;case ZS:return 536870912;default:return 16}default:return 16}}var ha=null,Qv=null,Og=null;function uE(){if(Og)return Og;var o,l=Qv,f=l.length,g,w="value"in ha?ha.value:ha.textContent,S=w.length;for(o=0;o<f&&l[o]===w[o];o++);var R=f-o;for(g=1;g<=R&&l[f-g]===w[S-g];g++);return Og=w.slice(o,1<g?1-g:void 0)}function jg(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Bg(){return!0}function hE(){return!1}function $i(o){function l(f,g,w,S,R){this._reactName=f,this._targetInst=w,this.type=g,this.nativeEvent=S,this.target=R,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(f=o[O],this[O]=f?f(S):S[O]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Bg:hE,this.isPropagationStopped=hE,this}return M(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Bg)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Bg)},persist:function(){},isPersistent:Bg}),l}var wu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jv=$i(wu),Qd=M({},wu,{view:0,detail:0}),N2=$i(Qd),Zv,ex,Jd,zg=M({},Qd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nx,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Jd&&(Jd&&o.type==="mousemove"?(Zv=o.screenX-Jd.screenX,ex=o.screenY-Jd.screenY):ex=Zv=0,Jd=o),Zv)},movementY:function(o){return"movementY"in o?o.movementY:ex}}),dE=$i(zg),L2=M({},zg,{dataTransfer:0}),D2=$i(L2),I2=M({},Qd,{relatedTarget:0}),tx=$i(I2),M2=M({},wu,{animationName:0,elapsedTime:0,pseudoElement:0}),F2=$i(M2),O2=M({},wu,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),j2=$i(O2),B2=M({},wu,{data:0}),fE=$i(B2),z2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $2(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=H2[o])?!!l[o]:!1}function nx(){return $2}var V2=M({},Qd,{key:function(o){if(o.key){var l=z2[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=jg(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?U2[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nx,charCode:function(o){return o.type==="keypress"?jg(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?jg(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),W2=$i(V2),G2=M({},zg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pE=$i(G2),q2=M({},Qd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nx}),X2=$i(q2),K2=M({},wu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y2=$i(K2),Q2=M({},zg,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),J2=$i(Q2),Z2=[9,13,27,32],ix=u&&"CompositionEvent"in window,Zd=null;u&&"documentMode"in document&&(Zd=document.documentMode);var eN=u&&"TextEvent"in window&&!Zd,mE=u&&(!ix||Zd&&8<Zd&&11>=Zd),gE=" ",yE=!1;function vE(o,l){switch(o){case"keyup":return Z2.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xE(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var bu=!1;function tN(o,l){switch(o){case"compositionend":return xE(l);case"keypress":return l.which!==32?null:(yE=!0,gE);case"textInput":return o=l.data,o===gE&&yE?null:o;default:return null}}function nN(o,l){if(bu)return o==="compositionend"||!ix&&vE(o,l)?(o=uE(),Og=Qv=ha=null,bu=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return mE&&l.locale!=="ko"?null:l.data;default:return null}}var iN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wE(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!iN[o.type]:l==="textarea"}function bE(o,l,f,g){US(g),l=Wg(l,"onChange"),0<l.length&&(f=new Jv("onChange","change",null,f,g),o.push({event:f,listeners:l}))}var ef=null,tf=null;function rN(o){BE(o,0)}function Ug(o){var l=Cu(o);if(Me(l))return o}function sN(o,l){if(o==="change")return l}var SE=!1;if(u){var rx;if(u){var sx="oninput"in document;if(!sx){var EE=document.createElement("div");EE.setAttribute("oninput","return;"),sx=typeof EE.oninput=="function"}rx=sx}else rx=!1;SE=rx&&(!document.documentMode||9<document.documentMode)}function AE(){ef&&(ef.detachEvent("onpropertychange",kE),tf=ef=null)}function kE(o){if(o.propertyName==="value"&&Ug(tf)){var l=[];bE(l,tf,o,jv(o)),WS(rN,l)}}function oN(o,l,f){o==="focusin"?(AE(),ef=l,tf=f,ef.attachEvent("onpropertychange",kE)):o==="focusout"&&AE()}function aN(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ug(tf)}function lN(o,l){if(o==="click")return Ug(l)}function cN(o,l){if(o==="input"||o==="change")return Ug(l)}function uN(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Gr=typeof Object.is=="function"?Object.is:uN;function nf(o,l){if(Gr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var w=f[g];if(!h.call(l,w)||!Gr(o[w],l[w]))return!1}return!0}function CE(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function _E(o,l){var f=CE(o);o=0;for(var g;f;){if(f.nodeType===3){if(g=o+f.textContent.length,o<=l&&g>=l)return{node:f,offset:l-o};o=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=CE(f)}}function TE(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?TE(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function PE(){for(var o=window,l=je();l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=je(o.document)}return l}function ox(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function hN(o){var l=PE(),f=o.focusedElem,g=o.selectionRange;if(l!==f&&f&&f.ownerDocument&&TE(f.ownerDocument.documentElement,f)){if(g!==null&&ox(f)){if(l=g.start,o=g.end,o===void 0&&(o=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(o,f.value.length);else if(o=(l=f.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var w=f.textContent.length,S=Math.min(g.start,w);g=g.end===void 0?S:Math.min(g.end,w),!o.extend&&S>g&&(w=g,g=S,S=w),w=_E(f,S);var R=_E(f,g);w&&R&&(o.rangeCount!==1||o.anchorNode!==w.node||o.anchorOffset!==w.offset||o.focusNode!==R.node||o.focusOffset!==R.offset)&&(l=l.createRange(),l.setStart(w.node,w.offset),o.removeAllRanges(),S>g?(o.addRange(l),o.extend(R.node,R.offset)):(l.setEnd(R.node,R.offset),o.addRange(l)))}}for(l=[],o=f;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)o=l[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var dN=u&&"documentMode"in document&&11>=document.documentMode,Su=null,ax=null,rf=null,lx=!1;function RE(o,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;lx||Su==null||Su!==je(g)||(g=Su,"selectionStart"in g&&ox(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),rf&&nf(rf,g)||(rf=g,g=Wg(ax,"onSelect"),0<g.length&&(l=new Jv("onSelect","select",null,l,f),o.push({event:l,listeners:g}),l.target=Su)))}function Hg(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var Eu={animationend:Hg("Animation","AnimationEnd"),animationiteration:Hg("Animation","AnimationIteration"),animationstart:Hg("Animation","AnimationStart"),transitionend:Hg("Transition","TransitionEnd")},cx={},NE={};u&&(NE=document.createElement("div").style,"AnimationEvent"in window||(delete Eu.animationend.animation,delete Eu.animationiteration.animation,delete Eu.animationstart.animation),"TransitionEvent"in window||delete Eu.transitionend.transition);function $g(o){if(cx[o])return cx[o];if(!Eu[o])return o;var l=Eu[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in NE)return cx[o]=l[f];return o}var LE=$g("animationend"),DE=$g("animationiteration"),IE=$g("animationstart"),ME=$g("transitionend"),FE=new Map,OE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function da(o,l){FE.set(o,l),s(l,[o])}for(var ux=0;ux<OE.length;ux++){var hx=OE[ux],fN=hx.toLowerCase(),pN=hx[0].toUpperCase()+hx.slice(1);da(fN,"on"+pN)}da(LE,"onAnimationEnd"),da(DE,"onAnimationIteration"),da(IE,"onAnimationStart"),da("dblclick","onDoubleClick"),da("focusin","onFocus"),da("focusout","onBlur"),da(ME,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mN=new Set("cancel close invalid load scroll toggle".split(" ").concat(sf));function jE(o,l,f){var g=o.type||"unknown-event";o.currentTarget=f,f2(g,l,void 0,o),o.currentTarget=null}function BE(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var g=o[f],w=g.event;g=g.listeners;e:{var S=void 0;if(l)for(var R=g.length-1;0<=R;R--){var O=g[R],z=O.instance,X=O.currentTarget;if(O=O.listener,z!==S&&w.isPropagationStopped())break e;jE(w,O,X),S=z}else for(R=0;R<g.length;R++){if(O=g[R],z=O.instance,X=O.currentTarget,O=O.listener,z!==S&&w.isPropagationStopped())break e;jE(w,O,X),S=z}}}if(_g)throw o=Hv,_g=!1,Hv=null,o}function Rt(o,l){var f=l[xx];f===void 0&&(f=l[xx]=new Set);var g=o+"__bubble";f.has(g)||(zE(l,o,2,!1),f.add(g))}function dx(o,l,f){var g=0;l&&(g|=4),zE(f,o,g,l)}var Vg="_reactListening"+Math.random().toString(36).slice(2);function of(o){if(!o[Vg]){o[Vg]=!0,n.forEach(function(f){f!=="selectionchange"&&(mN.has(f)||dx(f,!1,o),dx(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Vg]||(l[Vg]=!0,dx("selectionchange",!1,l))}}function zE(o,l,f,g){switch(cE(l)){case 1:var w=P2;break;case 4:w=R2;break;default:w=Kv}f=w.bind(null,l,f,o),w=void 0,!Uv||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),g?w!==void 0?o.addEventListener(l,f,{capture:!0,passive:w}):o.addEventListener(l,f,!0):w!==void 0?o.addEventListener(l,f,{passive:w}):o.addEventListener(l,f,!1)}function fx(o,l,f,g,w){var S=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var R=g.tag;if(R===3||R===4){var O=g.stateNode.containerInfo;if(O===w||O.nodeType===8&&O.parentNode===w)break;if(R===4)for(R=g.return;R!==null;){var z=R.tag;if((z===3||z===4)&&(z=R.stateNode.containerInfo,z===w||z.nodeType===8&&z.parentNode===w))return;R=R.return}for(;O!==null;){if(R=Pl(O),R===null)return;if(z=R.tag,z===5||z===6){g=S=R;continue e}O=O.parentNode}}g=g.return}WS(function(){var X=S,ae=jv(f),ce=[];e:{var oe=FE.get(o);if(oe!==void 0){var be=Jv,Ce=o;switch(o){case"keypress":if(jg(f)===0)break e;case"keydown":case"keyup":be=W2;break;case"focusin":Ce="focus",be=tx;break;case"focusout":Ce="blur",be=tx;break;case"beforeblur":case"afterblur":be=tx;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=dE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=D2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=X2;break;case LE:case DE:case IE:be=F2;break;case ME:be=Y2;break;case"scroll":be=N2;break;case"wheel":be=J2;break;case"copy":case"cut":case"paste":be=j2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=pE}var _e=(l&4)!==0,nn=!_e&&o==="scroll",V=_e?oe!==null?oe+"Capture":null:oe;_e=[];for(var H=X,W;H!==null;){W=H;var fe=W.stateNode;if(W.tag===5&&fe!==null&&(W=fe,V!==null&&(fe=Ud(H,V),fe!=null&&_e.push(af(H,fe,W)))),nn)break;H=H.return}0<_e.length&&(oe=new be(oe,Ce,null,f,ae),ce.push({event:oe,listeners:_e}))}}if((l&7)===0){e:{if(oe=o==="mouseover"||o==="pointerover",be=o==="mouseout"||o==="pointerout",oe&&f!==Hi&&(Ce=f.relatedTarget||f.fromElement)&&(Pl(Ce)||Ce[io]))break e;if((be||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,be?(Ce=f.relatedTarget||f.toElement,be=X,Ce=Ce?Pl(Ce):null,Ce!==null&&(nn=Tl(Ce),Ce!==nn||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(be=null,Ce=X),be!==Ce)){if(_e=dE,fe="onMouseLeave",V="onMouseEnter",H="mouse",(o==="pointerout"||o==="pointerover")&&(_e=pE,fe="onPointerLeave",V="onPointerEnter",H="pointer"),nn=be==null?oe:Cu(be),W=Ce==null?oe:Cu(Ce),oe=new _e(fe,H+"leave",be,f,ae),oe.target=nn,oe.relatedTarget=W,fe=null,Pl(ae)===X&&(_e=new _e(V,H+"enter",Ce,f,ae),_e.target=W,_e.relatedTarget=nn,fe=_e),nn=fe,be&&Ce)t:{for(_e=be,V=Ce,H=0,W=_e;W;W=Au(W))H++;for(W=0,fe=V;fe;fe=Au(fe))W++;for(;0<H-W;)_e=Au(_e),H--;for(;0<W-H;)V=Au(V),W--;for(;H--;){if(_e===V||V!==null&&_e===V.alternate)break t;_e=Au(_e),V=Au(V)}_e=null}else _e=null;be!==null&&UE(ce,oe,be,_e,!1),Ce!==null&&nn!==null&&UE(ce,nn,Ce,_e,!0)}}e:{if(oe=X?Cu(X):window,be=oe.nodeName&&oe.nodeName.toLowerCase(),be==="select"||be==="input"&&oe.type==="file")var Pe=sN;else if(wE(oe))if(SE)Pe=cN;else{Pe=aN;var Ne=oN}else(be=oe.nodeName)&&be.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Pe=lN);if(Pe&&(Pe=Pe(o,X))){bE(ce,Pe,f,ae);break e}Ne&&Ne(o,oe,X),o==="focusout"&&(Ne=oe._wrapperState)&&Ne.controlled&&oe.type==="number"&&en(oe,"number",oe.value)}switch(Ne=X?Cu(X):window,o){case"focusin":(wE(Ne)||Ne.contentEditable==="true")&&(Su=Ne,ax=X,rf=null);break;case"focusout":rf=ax=Su=null;break;case"mousedown":lx=!0;break;case"contextmenu":case"mouseup":case"dragend":lx=!1,RE(ce,f,ae);break;case"selectionchange":if(dN)break;case"keydown":case"keyup":RE(ce,f,ae)}var Le;if(ix)e:{switch(o){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else bu?vE(o,f)&&(Fe="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Fe="onCompositionStart");Fe&&(mE&&f.locale!=="ko"&&(bu||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&bu&&(Le=uE()):(ha=ae,Qv="value"in ha?ha.value:ha.textContent,bu=!0)),Ne=Wg(X,Fe),0<Ne.length&&(Fe=new fE(Fe,o,null,f,ae),ce.push({event:Fe,listeners:Ne}),Le?Fe.data=Le:(Le=xE(f),Le!==null&&(Fe.data=Le)))),(Le=eN?tN(o,f):nN(o,f))&&(X=Wg(X,"onBeforeInput"),0<X.length&&(ae=new fE("onBeforeInput","beforeinput",null,f,ae),ce.push({event:ae,listeners:X}),ae.data=Le))}BE(ce,l)})}function af(o,l,f){return{instance:o,listener:l,currentTarget:f}}function Wg(o,l){for(var f=l+"Capture",g=[];o!==null;){var w=o,S=w.stateNode;w.tag===5&&S!==null&&(w=S,S=Ud(o,f),S!=null&&g.unshift(af(o,S,w)),S=Ud(o,l),S!=null&&g.push(af(o,S,w))),o=o.return}return g}function Au(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function UE(o,l,f,g,w){for(var S=l._reactName,R=[];f!==null&&f!==g;){var O=f,z=O.alternate,X=O.stateNode;if(z!==null&&z===g)break;O.tag===5&&X!==null&&(O=X,w?(z=Ud(f,S),z!=null&&R.unshift(af(f,z,O))):w||(z=Ud(f,S),z!=null&&R.push(af(f,z,O)))),f=f.return}R.length!==0&&o.push({event:l,listeners:R})}var gN=/\r\n?/g,yN=/\u0000|\uFFFD/g;function HE(o){return(typeof o=="string"?o:""+o).replace(gN,`
`).replace(yN,"")}function Gg(o,l,f){if(l=HE(l),HE(o)!==l&&f)throw Error(t(425))}function qg(){}var px=null,mx=null;function gx(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var yx=typeof setTimeout=="function"?setTimeout:void 0,vN=typeof clearTimeout=="function"?clearTimeout:void 0,$E=typeof Promise=="function"?Promise:void 0,xN=typeof queueMicrotask=="function"?queueMicrotask:typeof $E<"u"?function(o){return $E.resolve(null).then(o).catch(wN)}:yx;function wN(o){setTimeout(function(){throw o})}function vx(o,l){var f=l,g=0;do{var w=f.nextSibling;if(o.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(g===0){o.removeChild(w),Yd(l);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=w}while(f);Yd(l)}function fa(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function VE(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return o;l--}else f==="/$"&&l++}o=o.previousSibling}return null}var ku=Math.random().toString(36).slice(2),xs="__reactFiber$"+ku,lf="__reactProps$"+ku,io="__reactContainer$"+ku,xx="__reactEvents$"+ku,bN="__reactListeners$"+ku,SN="__reactHandles$"+ku;function Pl(o){var l=o[xs];if(l)return l;for(var f=o.parentNode;f;){if(l=f[io]||f[xs]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=VE(o);o!==null;){if(f=o[xs])return f;o=VE(o)}return l}o=f,f=o.parentNode}return null}function cf(o){return o=o[xs]||o[io],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Cu(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Xg(o){return o[lf]||null}var wx=[],_u=-1;function pa(o){return{current:o}}function Nt(o){0>_u||(o.current=wx[_u],wx[_u]=null,_u--)}function At(o,l){_u++,wx[_u]=o.current,o.current=l}var ma={},Xn=pa(ma),wi=pa(!1),Rl=ma;function Tu(o,l){var f=o.type.contextTypes;if(!f)return ma;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var w={},S;for(S in f)w[S]=l[S];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=w),w}function bi(o){return o=o.childContextTypes,o!=null}function Kg(){Nt(wi),Nt(Xn)}function WE(o,l,f){if(Xn.current!==ma)throw Error(t(168));At(Xn,l),At(wi,f)}function GE(o,l,f){var g=o.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var w in g)if(!(w in l))throw Error(t(108,xe(o)||"Unknown",w));return M({},f,g)}function Yg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ma,Rl=Xn.current,At(Xn,o),At(wi,wi.current),!0}function qE(o,l,f){var g=o.stateNode;if(!g)throw Error(t(169));f?(o=GE(o,l,Rl),g.__reactInternalMemoizedMergedChildContext=o,Nt(wi),Nt(Xn),At(Xn,o)):Nt(wi),At(wi,f)}var ro=null,Qg=!1,bx=!1;function XE(o){ro===null?ro=[o]:ro.push(o)}function EN(o){Qg=!0,XE(o)}function ga(){if(!bx&&ro!==null){bx=!0;var o=0,l=ut;try{var f=ro;for(ut=1;o<f.length;o++){var g=f[o];do g=g(!0);while(g!==null)}ro=null,Qg=!1}catch(w){throw ro!==null&&(ro=ro.slice(o+1)),YS($v,ga),w}finally{ut=l,bx=!1}}return null}var Pu=[],Ru=0,Jg=null,Zg=0,wr=[],br=0,Nl=null,so=1,oo="";function Ll(o,l){Pu[Ru++]=Zg,Pu[Ru++]=Jg,Jg=o,Zg=l}function KE(o,l,f){wr[br++]=so,wr[br++]=oo,wr[br++]=Nl,Nl=o;var g=so;o=oo;var w=32-Wr(g)-1;g&=~(1<<w),f+=1;var S=32-Wr(l)+w;if(30<S){var R=w-w%5;S=(g&(1<<R)-1).toString(32),g>>=R,w-=R,so=1<<32-Wr(l)+w|f<<w|g,oo=S+o}else so=1<<S|f<<w|g,oo=o}function Sx(o){o.return!==null&&(Ll(o,1),KE(o,1,0))}function Ex(o){for(;o===Jg;)Jg=Pu[--Ru],Pu[Ru]=null,Zg=Pu[--Ru],Pu[Ru]=null;for(;o===Nl;)Nl=wr[--br],wr[br]=null,oo=wr[--br],wr[br]=null,so=wr[--br],wr[br]=null}var Vi=null,Wi=null,It=!1,qr=null;function YE(o,l){var f=kr(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=o,l=o.deletions,l===null?(o.deletions=[f],o.flags|=16):l.push(f)}function QE(o,l){switch(o.tag){case 5:var f=o.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Vi=o,Wi=fa(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Vi=o,Wi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=Nl!==null?{id:so,overflow:oo}:null,o.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=kr(18,null,null,0),f.stateNode=l,f.return=o,o.child=f,Vi=o,Wi=null,!0):!1;default:return!1}}function Ax(o){return(o.mode&1)!==0&&(o.flags&128)===0}function kx(o){if(It){var l=Wi;if(l){var f=l;if(!QE(o,l)){if(Ax(o))throw Error(t(418));l=fa(f.nextSibling);var g=Vi;l&&QE(o,l)?YE(g,f):(o.flags=o.flags&-4097|2,It=!1,Vi=o)}}else{if(Ax(o))throw Error(t(418));o.flags=o.flags&-4097|2,It=!1,Vi=o}}}function JE(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Vi=o}function ey(o){if(o!==Vi)return!1;if(!It)return JE(o),It=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!gx(o.type,o.memoizedProps)),l&&(l=Wi)){if(Ax(o))throw ZE(),Error(t(418));for(;l;)YE(o,l),l=fa(l.nextSibling)}if(JE(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(l===0){Wi=fa(o.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}o=o.nextSibling}Wi=null}}else Wi=Vi?fa(o.stateNode.nextSibling):null;return!0}function ZE(){for(var o=Wi;o;)o=fa(o.nextSibling)}function Nu(){Wi=Vi=null,It=!1}function Cx(o){qr===null?qr=[o]:qr.push(o)}var AN=D.ReactCurrentBatchConfig;function uf(o,l,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var g=f.stateNode}if(!g)throw Error(t(147,o));var w=g,S=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===S?l.ref:(l=function(R){var O=w.refs;R===null?delete O[S]:O[S]=R},l._stringRef=S,l)}if(typeof o!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,o))}return o}function ty(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function eA(o){var l=o._init;return l(o._payload)}function tA(o){function l(V,H){if(o){var W=V.deletions;W===null?(V.deletions=[H],V.flags|=16):W.push(H)}}function f(V,H){if(!o)return null;for(;H!==null;)l(V,H),H=H.sibling;return null}function g(V,H){for(V=new Map;H!==null;)H.key!==null?V.set(H.key,H):V.set(H.index,H),H=H.sibling;return V}function w(V,H){return V=Aa(V,H),V.index=0,V.sibling=null,V}function S(V,H,W){return V.index=W,o?(W=V.alternate,W!==null?(W=W.index,W<H?(V.flags|=2,H):W):(V.flags|=2,H)):(V.flags|=1048576,H)}function R(V){return o&&V.alternate===null&&(V.flags|=2),V}function O(V,H,W,fe){return H===null||H.tag!==6?(H=yw(W,V.mode,fe),H.return=V,H):(H=w(H,W),H.return=V,H)}function z(V,H,W,fe){var Pe=W.type;return Pe===j?ae(V,H,W.props.children,fe,W.key):H!==null&&(H.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===se&&eA(Pe)===H.type)?(fe=w(H,W.props),fe.ref=uf(V,H,W),fe.return=V,fe):(fe=ky(W.type,W.key,W.props,null,V.mode,fe),fe.ref=uf(V,H,W),fe.return=V,fe)}function X(V,H,W,fe){return H===null||H.tag!==4||H.stateNode.containerInfo!==W.containerInfo||H.stateNode.implementation!==W.implementation?(H=vw(W,V.mode,fe),H.return=V,H):(H=w(H,W.children||[]),H.return=V,H)}function ae(V,H,W,fe,Pe){return H===null||H.tag!==7?(H=zl(W,V.mode,fe,Pe),H.return=V,H):(H=w(H,W),H.return=V,H)}function ce(V,H,W){if(typeof H=="string"&&H!==""||typeof H=="number")return H=yw(""+H,V.mode,W),H.return=V,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case F:return W=ky(H.type,H.key,H.props,null,V.mode,W),W.ref=uf(V,null,H),W.return=V,W;case L:return H=vw(H,V.mode,W),H.return=V,H;case se:var fe=H._init;return ce(V,fe(H._payload),W)}if(Dn(H)||me(H))return H=zl(H,V.mode,W,null),H.return=V,H;ty(V,H)}return null}function oe(V,H,W,fe){var Pe=H!==null?H.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Pe!==null?null:O(V,H,""+W,fe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case F:return W.key===Pe?z(V,H,W,fe):null;case L:return W.key===Pe?X(V,H,W,fe):null;case se:return Pe=W._init,oe(V,H,Pe(W._payload),fe)}if(Dn(W)||me(W))return Pe!==null?null:ae(V,H,W,fe,null);ty(V,W)}return null}function be(V,H,W,fe,Pe){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return V=V.get(W)||null,O(H,V,""+fe,Pe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case F:return V=V.get(fe.key===null?W:fe.key)||null,z(H,V,fe,Pe);case L:return V=V.get(fe.key===null?W:fe.key)||null,X(H,V,fe,Pe);case se:var Ne=fe._init;return be(V,H,W,Ne(fe._payload),Pe)}if(Dn(fe)||me(fe))return V=V.get(W)||null,ae(H,V,fe,Pe,null);ty(H,fe)}return null}function Ce(V,H,W,fe){for(var Pe=null,Ne=null,Le=H,Fe=H=0,An=null;Le!==null&&Fe<W.length;Fe++){Le.index>Fe?(An=Le,Le=null):An=Le.sibling;var ot=oe(V,Le,W[Fe],fe);if(ot===null){Le===null&&(Le=An);break}o&&Le&&ot.alternate===null&&l(V,Le),H=S(ot,H,Fe),Ne===null?Pe=ot:Ne.sibling=ot,Ne=ot,Le=An}if(Fe===W.length)return f(V,Le),It&&Ll(V,Fe),Pe;if(Le===null){for(;Fe<W.length;Fe++)Le=ce(V,W[Fe],fe),Le!==null&&(H=S(Le,H,Fe),Ne===null?Pe=Le:Ne.sibling=Le,Ne=Le);return It&&Ll(V,Fe),Pe}for(Le=g(V,Le);Fe<W.length;Fe++)An=be(Le,V,Fe,W[Fe],fe),An!==null&&(o&&An.alternate!==null&&Le.delete(An.key===null?Fe:An.key),H=S(An,H,Fe),Ne===null?Pe=An:Ne.sibling=An,Ne=An);return o&&Le.forEach(function(ka){return l(V,ka)}),It&&Ll(V,Fe),Pe}function _e(V,H,W,fe){var Pe=me(W);if(typeof Pe!="function")throw Error(t(150));if(W=Pe.call(W),W==null)throw Error(t(151));for(var Ne=Pe=null,Le=H,Fe=H=0,An=null,ot=W.next();Le!==null&&!ot.done;Fe++,ot=W.next()){Le.index>Fe?(An=Le,Le=null):An=Le.sibling;var ka=oe(V,Le,ot.value,fe);if(ka===null){Le===null&&(Le=An);break}o&&Le&&ka.alternate===null&&l(V,Le),H=S(ka,H,Fe),Ne===null?Pe=ka:Ne.sibling=ka,Ne=ka,Le=An}if(ot.done)return f(V,Le),It&&Ll(V,Fe),Pe;if(Le===null){for(;!ot.done;Fe++,ot=W.next())ot=ce(V,ot.value,fe),ot!==null&&(H=S(ot,H,Fe),Ne===null?Pe=ot:Ne.sibling=ot,Ne=ot);return It&&Ll(V,Fe),Pe}for(Le=g(V,Le);!ot.done;Fe++,ot=W.next())ot=be(Le,V,Fe,ot.value,fe),ot!==null&&(o&&ot.alternate!==null&&Le.delete(ot.key===null?Fe:ot.key),H=S(ot,H,Fe),Ne===null?Pe=ot:Ne.sibling=ot,Ne=ot);return o&&Le.forEach(function(iL){return l(V,iL)}),It&&Ll(V,Fe),Pe}function nn(V,H,W,fe){if(typeof W=="object"&&W!==null&&W.type===j&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case F:e:{for(var Pe=W.key,Ne=H;Ne!==null;){if(Ne.key===Pe){if(Pe=W.type,Pe===j){if(Ne.tag===7){f(V,Ne.sibling),H=w(Ne,W.props.children),H.return=V,V=H;break e}}else if(Ne.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===se&&eA(Pe)===Ne.type){f(V,Ne.sibling),H=w(Ne,W.props),H.ref=uf(V,Ne,W),H.return=V,V=H;break e}f(V,Ne);break}else l(V,Ne);Ne=Ne.sibling}W.type===j?(H=zl(W.props.children,V.mode,fe,W.key),H.return=V,V=H):(fe=ky(W.type,W.key,W.props,null,V.mode,fe),fe.ref=uf(V,H,W),fe.return=V,V=fe)}return R(V);case L:e:{for(Ne=W.key;H!==null;){if(H.key===Ne)if(H.tag===4&&H.stateNode.containerInfo===W.containerInfo&&H.stateNode.implementation===W.implementation){f(V,H.sibling),H=w(H,W.children||[]),H.return=V,V=H;break e}else{f(V,H);break}else l(V,H);H=H.sibling}H=vw(W,V.mode,fe),H.return=V,V=H}return R(V);case se:return Ne=W._init,nn(V,H,Ne(W._payload),fe)}if(Dn(W))return Ce(V,H,W,fe);if(me(W))return _e(V,H,W,fe);ty(V,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,H!==null&&H.tag===6?(f(V,H.sibling),H=w(H,W),H.return=V,V=H):(f(V,H),H=yw(W,V.mode,fe),H.return=V,V=H),R(V)):f(V,H)}return nn}var Lu=tA(!0),nA=tA(!1),ny=pa(null),iy=null,Du=null,_x=null;function Tx(){_x=Du=iy=null}function Px(o){var l=ny.current;Nt(ny),o._currentValue=l}function Rx(o,l,f){for(;o!==null;){var g=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),o===f)break;o=o.return}}function Iu(o,l){iy=o,_x=Du=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Si=!0),o.firstContext=null)}function Sr(o){var l=o._currentValue;if(_x!==o)if(o={context:o,memoizedValue:l,next:null},Du===null){if(iy===null)throw Error(t(308));Du=o,iy.dependencies={lanes:0,firstContext:o}}else Du=Du.next=o;return l}var Dl=null;function Nx(o){Dl===null?Dl=[o]:Dl.push(o)}function iA(o,l,f,g){var w=l.interleaved;return w===null?(f.next=f,Nx(l)):(f.next=w.next,w.next=f),l.interleaved=f,ao(o,g)}function ao(o,l){o.lanes|=l;var f=o.alternate;for(f!==null&&(f.lanes|=l),f=o,o=o.return;o!==null;)o.childLanes|=l,f=o.alternate,f!==null&&(f.childLanes|=l),f=o,o=o.return;return f.tag===3?f.stateNode:null}var ya=!1;function Lx(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rA(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function lo(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function va(o,l,f){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(it&2)!==0){var w=g.pending;return w===null?l.next=l:(l.next=w.next,w.next=l),g.pending=l,ao(o,f)}return w=g.interleaved,w===null?(l.next=l,Nx(g)):(l.next=w.next,w.next=l),g.interleaved=l,ao(o,f)}function ry(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var g=l.lanes;g&=o.pendingLanes,f|=g,l.lanes=f,Gv(o,f)}}function sA(o,l){var f=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var w=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var R={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};S===null?w=S=R:S=S.next=R,f=f.next}while(f!==null);S===null?w=S=l:S=S.next=l}else w=S=l;f={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:g.shared,effects:g.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}function sy(o,l,f,g){var w=o.updateQueue;ya=!1;var S=w.firstBaseUpdate,R=w.lastBaseUpdate,O=w.shared.pending;if(O!==null){w.shared.pending=null;var z=O,X=z.next;z.next=null,R===null?S=X:R.next=X,R=z;var ae=o.alternate;ae!==null&&(ae=ae.updateQueue,O=ae.lastBaseUpdate,O!==R&&(O===null?ae.firstBaseUpdate=X:O.next=X,ae.lastBaseUpdate=z))}if(S!==null){var ce=w.baseState;R=0,ae=X=z=null,O=S;do{var oe=O.lane,be=O.eventTime;if((g&oe)===oe){ae!==null&&(ae=ae.next={eventTime:be,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Ce=o,_e=O;switch(oe=l,be=f,_e.tag){case 1:if(Ce=_e.payload,typeof Ce=="function"){ce=Ce.call(be,ce,oe);break e}ce=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=_e.payload,oe=typeof Ce=="function"?Ce.call(be,ce,oe):Ce,oe==null)break e;ce=M({},ce,oe);break e;case 2:ya=!0}}O.callback!==null&&O.lane!==0&&(o.flags|=64,oe=w.effects,oe===null?w.effects=[O]:oe.push(O))}else be={eventTime:be,lane:oe,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ae===null?(X=ae=be,z=ce):ae=ae.next=be,R|=oe;if(O=O.next,O===null){if(O=w.shared.pending,O===null)break;oe=O,O=oe.next,oe.next=null,w.lastBaseUpdate=oe,w.shared.pending=null}}while(!0);if(ae===null&&(z=ce),w.baseState=z,w.firstBaseUpdate=X,w.lastBaseUpdate=ae,l=w.shared.interleaved,l!==null){w=l;do R|=w.lane,w=w.next;while(w!==l)}else S===null&&(w.shared.lanes=0);Fl|=R,o.lanes=R,o.memoizedState=ce}}function oA(o,l,f){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var g=o[l],w=g.callback;if(w!==null){if(g.callback=null,g=f,typeof w!="function")throw Error(t(191,w));w.call(g)}}}var hf={},ws=pa(hf),df=pa(hf),ff=pa(hf);function Il(o){if(o===hf)throw Error(t(174));return o}function Dx(o,l){switch(At(ff,l),At(df,o),At(ws,hf),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ge(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=ge(l,o)}Nt(ws),At(ws,l)}function Mu(){Nt(ws),Nt(df),Nt(ff)}function aA(o){Il(ff.current);var l=Il(ws.current),f=ge(l,o.type);l!==f&&(At(df,o),At(ws,f))}function Ix(o){df.current===o&&(Nt(ws),Nt(df))}var jt=pa(0);function oy(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Mx=[];function Fx(){for(var o=0;o<Mx.length;o++)Mx[o]._workInProgressVersionPrimary=null;Mx.length=0}var ay=D.ReactCurrentDispatcher,Ox=D.ReactCurrentBatchConfig,Ml=0,Bt=null,fn=null,Sn=null,ly=!1,pf=!1,mf=0,kN=0;function Kn(){throw Error(t(321))}function jx(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!Gr(o[f],l[f]))return!1;return!0}function Bx(o,l,f,g,w,S){if(Ml=S,Bt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ay.current=o===null||o.memoizedState===null?PN:RN,o=f(g,w),pf){S=0;do{if(pf=!1,mf=0,25<=S)throw Error(t(301));S+=1,Sn=fn=null,l.updateQueue=null,ay.current=NN,o=f(g,w)}while(pf)}if(ay.current=hy,l=fn!==null&&fn.next!==null,Ml=0,Sn=fn=Bt=null,ly=!1,l)throw Error(t(300));return o}function zx(){var o=mf!==0;return mf=0,o}function bs(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Bt.memoizedState=Sn=o:Sn=Sn.next=o,Sn}function Er(){if(fn===null){var o=Bt.alternate;o=o!==null?o.memoizedState:null}else o=fn.next;var l=Sn===null?Bt.memoizedState:Sn.next;if(l!==null)Sn=l,fn=o;else{if(o===null)throw Error(t(310));fn=o,o={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},Sn===null?Bt.memoizedState=Sn=o:Sn=Sn.next=o}return Sn}function gf(o,l){return typeof l=="function"?l(o):l}function Ux(o){var l=Er(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=o;var g=fn,w=g.baseQueue,S=f.pending;if(S!==null){if(w!==null){var R=w.next;w.next=S.next,S.next=R}g.baseQueue=w=S,f.pending=null}if(w!==null){S=w.next,g=g.baseState;var O=R=null,z=null,X=S;do{var ae=X.lane;if((Ml&ae)===ae)z!==null&&(z=z.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),g=X.hasEagerState?X.eagerState:o(g,X.action);else{var ce={lane:ae,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};z===null?(O=z=ce,R=g):z=z.next=ce,Bt.lanes|=ae,Fl|=ae}X=X.next}while(X!==null&&X!==S);z===null?R=g:z.next=O,Gr(g,l.memoizedState)||(Si=!0),l.memoizedState=g,l.baseState=R,l.baseQueue=z,f.lastRenderedState=g}if(o=f.interleaved,o!==null){w=o;do S=w.lane,Bt.lanes|=S,Fl|=S,w=w.next;while(w!==o)}else w===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function Hx(o){var l=Er(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=o;var g=f.dispatch,w=f.pending,S=l.memoizedState;if(w!==null){f.pending=null;var R=w=w.next;do S=o(S,R.action),R=R.next;while(R!==w);Gr(S,l.memoizedState)||(Si=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),f.lastRenderedState=S}return[S,g]}function lA(){}function cA(o,l){var f=Bt,g=Er(),w=l(),S=!Gr(g.memoizedState,w);if(S&&(g.memoizedState=w,Si=!0),g=g.queue,$x(dA.bind(null,f,g,o),[o]),g.getSnapshot!==l||S||Sn!==null&&Sn.memoizedState.tag&1){if(f.flags|=2048,yf(9,hA.bind(null,f,g,w,l),void 0,null),En===null)throw Error(t(349));(Ml&30)!==0||uA(f,l,w)}return w}function uA(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=Bt.updateQueue,l===null?(l={lastEffect:null,stores:null},Bt.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function hA(o,l,f,g){l.value=f,l.getSnapshot=g,fA(l)&&pA(o)}function dA(o,l,f){return f(function(){fA(l)&&pA(o)})}function fA(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!Gr(o,f)}catch{return!0}}function pA(o){var l=ao(o,1);l!==null&&Qr(l,o,1,-1)}function mA(o){var l=bs();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:o},l.queue=o,o=o.dispatch=TN.bind(null,Bt,o),[l.memoizedState,o]}function yf(o,l,f,g){return o={tag:o,create:l,destroy:f,deps:g,next:null},l=Bt.updateQueue,l===null?(l={lastEffect:null,stores:null},Bt.updateQueue=l,l.lastEffect=o.next=o):(f=l.lastEffect,f===null?l.lastEffect=o.next=o:(g=f.next,f.next=o,o.next=g,l.lastEffect=o)),o}function gA(){return Er().memoizedState}function cy(o,l,f,g){var w=bs();Bt.flags|=o,w.memoizedState=yf(1|l,f,void 0,g===void 0?null:g)}function uy(o,l,f,g){var w=Er();g=g===void 0?null:g;var S=void 0;if(fn!==null){var R=fn.memoizedState;if(S=R.destroy,g!==null&&jx(g,R.deps)){w.memoizedState=yf(l,f,S,g);return}}Bt.flags|=o,w.memoizedState=yf(1|l,f,S,g)}function yA(o,l){return cy(8390656,8,o,l)}function $x(o,l){return uy(2048,8,o,l)}function vA(o,l){return uy(4,2,o,l)}function xA(o,l){return uy(4,4,o,l)}function wA(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function bA(o,l,f){return f=f!=null?f.concat([o]):null,uy(4,4,wA.bind(null,l,o),f)}function Vx(){}function SA(o,l){var f=Er();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&jx(l,g[1])?g[0]:(f.memoizedState=[o,l],o)}function EA(o,l){var f=Er();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&jx(l,g[1])?g[0]:(o=o(),f.memoizedState=[o,l],o)}function AA(o,l,f){return(Ml&21)===0?(o.baseState&&(o.baseState=!1,Si=!0),o.memoizedState=f):(Gr(f,l)||(f=eE(),Bt.lanes|=f,Fl|=f,o.baseState=!0),l)}function CN(o,l){var f=ut;ut=f!==0&&4>f?f:4,o(!0);var g=Ox.transition;Ox.transition={};try{o(!1),l()}finally{ut=f,Ox.transition=g}}function kA(){return Er().memoizedState}function _N(o,l,f){var g=Sa(o);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},CA(o))_A(l,f);else if(f=iA(o,l,f,g),f!==null){var w=li();Qr(f,o,g,w),TA(f,l,g)}}function TN(o,l,f){var g=Sa(o),w={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(CA(o))_A(l,w);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var R=l.lastRenderedState,O=S(R,f);if(w.hasEagerState=!0,w.eagerState=O,Gr(O,R)){var z=l.interleaved;z===null?(w.next=w,Nx(l)):(w.next=z.next,z.next=w),l.interleaved=w;return}}catch{}finally{}f=iA(o,l,w,g),f!==null&&(w=li(),Qr(f,o,g,w),TA(f,l,g))}}function CA(o){var l=o.alternate;return o===Bt||l!==null&&l===Bt}function _A(o,l){pf=ly=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function TA(o,l,f){if((f&4194240)!==0){var g=l.lanes;g&=o.pendingLanes,f|=g,l.lanes=f,Gv(o,f)}}var hy={readContext:Sr,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useInsertionEffect:Kn,useLayoutEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useMutableSource:Kn,useSyncExternalStore:Kn,useId:Kn,unstable_isNewReconciler:!1},PN={readContext:Sr,useCallback:function(o,l){return bs().memoizedState=[o,l===void 0?null:l],o},useContext:Sr,useEffect:yA,useImperativeHandle:function(o,l,f){return f=f!=null?f.concat([o]):null,cy(4194308,4,wA.bind(null,l,o),f)},useLayoutEffect:function(o,l){return cy(4194308,4,o,l)},useInsertionEffect:function(o,l){return cy(4,2,o,l)},useMemo:function(o,l){var f=bs();return l=l===void 0?null:l,o=o(),f.memoizedState=[o,l],o},useReducer:function(o,l,f){var g=bs();return l=f!==void 0?f(l):l,g.memoizedState=g.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},g.queue=o,o=o.dispatch=_N.bind(null,Bt,o),[g.memoizedState,o]},useRef:function(o){var l=bs();return o={current:o},l.memoizedState=o},useState:mA,useDebugValue:Vx,useDeferredValue:function(o){return bs().memoizedState=o},useTransition:function(){var o=mA(!1),l=o[0];return o=CN.bind(null,o[1]),bs().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,f){var g=Bt,w=bs();if(It){if(f===void 0)throw Error(t(407));f=f()}else{if(f=l(),En===null)throw Error(t(349));(Ml&30)!==0||uA(g,l,f)}w.memoizedState=f;var S={value:f,getSnapshot:l};return w.queue=S,yA(dA.bind(null,g,S,o),[o]),g.flags|=2048,yf(9,hA.bind(null,g,S,f,l),void 0,null),f},useId:function(){var o=bs(),l=En.identifierPrefix;if(It){var f=oo,g=so;f=(g&~(1<<32-Wr(g)-1)).toString(32)+f,l=":"+l+"R"+f,f=mf++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=kN++,l=":"+l+"r"+f.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},RN={readContext:Sr,useCallback:SA,useContext:Sr,useEffect:$x,useImperativeHandle:bA,useInsertionEffect:vA,useLayoutEffect:xA,useMemo:EA,useReducer:Ux,useRef:gA,useState:function(){return Ux(gf)},useDebugValue:Vx,useDeferredValue:function(o){var l=Er();return AA(l,fn.memoizedState,o)},useTransition:function(){var o=Ux(gf)[0],l=Er().memoizedState;return[o,l]},useMutableSource:lA,useSyncExternalStore:cA,useId:kA,unstable_isNewReconciler:!1},NN={readContext:Sr,useCallback:SA,useContext:Sr,useEffect:$x,useImperativeHandle:bA,useInsertionEffect:vA,useLayoutEffect:xA,useMemo:EA,useReducer:Hx,useRef:gA,useState:function(){return Hx(gf)},useDebugValue:Vx,useDeferredValue:function(o){var l=Er();return fn===null?l.memoizedState=o:AA(l,fn.memoizedState,o)},useTransition:function(){var o=Hx(gf)[0],l=Er().memoizedState;return[o,l]},useMutableSource:lA,useSyncExternalStore:cA,useId:kA,unstable_isNewReconciler:!1};function Xr(o,l){if(o&&o.defaultProps){l=M({},l),o=o.defaultProps;for(var f in o)l[f]===void 0&&(l[f]=o[f]);return l}return l}function Wx(o,l,f,g){l=o.memoizedState,f=f(g,l),f=f==null?l:M({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var dy={isMounted:function(o){return(o=o._reactInternals)?Tl(o)===o:!1},enqueueSetState:function(o,l,f){o=o._reactInternals;var g=li(),w=Sa(o),S=lo(g,w);S.payload=l,f!=null&&(S.callback=f),l=va(o,S,w),l!==null&&(Qr(l,o,w,g),ry(l,o,w))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var g=li(),w=Sa(o),S=lo(g,w);S.tag=1,S.payload=l,f!=null&&(S.callback=f),l=va(o,S,w),l!==null&&(Qr(l,o,w,g),ry(l,o,w))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=li(),g=Sa(o),w=lo(f,g);w.tag=2,l!=null&&(w.callback=l),l=va(o,w,g),l!==null&&(Qr(l,o,g,f),ry(l,o,g))}};function PA(o,l,f,g,w,S,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,R):l.prototype&&l.prototype.isPureReactComponent?!nf(f,g)||!nf(w,S):!0}function RA(o,l,f){var g=!1,w=ma,S=l.contextType;return typeof S=="object"&&S!==null?S=Sr(S):(w=bi(l)?Rl:Xn.current,g=l.contextTypes,S=(g=g!=null)?Tu(o,w):ma),l=new l(f,S),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=dy,o.stateNode=l,l._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=w,o.__reactInternalMemoizedMaskedChildContext=S),l}function NA(o,l,f,g){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==o&&dy.enqueueReplaceState(l,l.state,null)}function Gx(o,l,f,g){var w=o.stateNode;w.props=f,w.state=o.memoizedState,w.refs={},Lx(o);var S=l.contextType;typeof S=="object"&&S!==null?w.context=Sr(S):(S=bi(l)?Rl:Xn.current,w.context=Tu(o,S)),w.state=o.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Wx(o,l,S,f),w.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(l=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),l!==w.state&&dy.enqueueReplaceState(w,w.state,null),sy(o,f,w,g),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308)}function Fu(o,l){try{var f="",g=l;do f+=ye(g),g=g.return;while(g);var w=f}catch(S){w=`
Error generating stack: `+S.message+`
`+S.stack}return{value:o,source:l,stack:w,digest:null}}function qx(o,l,f){return{value:o,source:null,stack:f??null,digest:l??null}}function Xx(o,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var LN=typeof WeakMap=="function"?WeakMap:Map;function LA(o,l,f){f=lo(-1,f),f.tag=3,f.payload={element:null};var g=l.value;return f.callback=function(){xy||(xy=!0,cw=g),Xx(o,l)},f}function DA(o,l,f){f=lo(-1,f),f.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var w=l.value;f.payload=function(){return g(w)},f.callback=function(){Xx(o,l)}}var S=o.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(f.callback=function(){Xx(o,l),typeof g!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})}),f}function IA(o,l,f){var g=o.pingCache;if(g===null){g=o.pingCache=new LN;var w=new Set;g.set(l,w)}else w=g.get(l),w===void 0&&(w=new Set,g.set(l,w));w.has(f)||(w.add(f),o=GN.bind(null,o,l,f),l.then(o,o))}function MA(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function FA(o,l,f,g,w){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=lo(-1,1),l.tag=2,va(f,l,1))),f.lanes|=1),o):(o.flags|=65536,o.lanes=w,o)}var DN=D.ReactCurrentOwner,Si=!1;function ai(o,l,f,g){l.child=o===null?nA(l,null,f,g):Lu(l,o.child,f,g)}function OA(o,l,f,g,w){f=f.render;var S=l.ref;return Iu(l,w),g=Bx(o,l,f,g,S,w),f=zx(),o!==null&&!Si?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~w,co(o,l,w)):(It&&f&&Sx(l),l.flags|=1,ai(o,l,g,w),l.child)}function jA(o,l,f,g,w){if(o===null){var S=f.type;return typeof S=="function"&&!gw(S)&&S.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=S,BA(o,l,S,g,w)):(o=ky(f.type,null,g,l,l.mode,w),o.ref=l.ref,o.return=l,l.child=o)}if(S=o.child,(o.lanes&w)===0){var R=S.memoizedProps;if(f=f.compare,f=f!==null?f:nf,f(R,g)&&o.ref===l.ref)return co(o,l,w)}return l.flags|=1,o=Aa(S,g),o.ref=l.ref,o.return=l,l.child=o}function BA(o,l,f,g,w){if(o!==null){var S=o.memoizedProps;if(nf(S,g)&&o.ref===l.ref)if(Si=!1,l.pendingProps=g=S,(o.lanes&w)!==0)(o.flags&131072)!==0&&(Si=!0);else return l.lanes=o.lanes,co(o,l,w)}return Kx(o,l,f,g,w)}function zA(o,l,f){var g=l.pendingProps,w=g.children,S=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(ju,Gi),Gi|=f;else{if((f&1073741824)===0)return o=S!==null?S.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,At(ju,Gi),Gi|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:f,At(ju,Gi),Gi|=g}else S!==null?(g=S.baseLanes|f,l.memoizedState=null):g=f,At(ju,Gi),Gi|=g;return ai(o,l,w,f),l.child}function UA(o,l){var f=l.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function Kx(o,l,f,g,w){var S=bi(f)?Rl:Xn.current;return S=Tu(l,S),Iu(l,w),f=Bx(o,l,f,g,S,w),g=zx(),o!==null&&!Si?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~w,co(o,l,w)):(It&&g&&Sx(l),l.flags|=1,ai(o,l,f,w),l.child)}function HA(o,l,f,g,w){if(bi(f)){var S=!0;Yg(l)}else S=!1;if(Iu(l,w),l.stateNode===null)py(o,l),RA(l,f,g),Gx(l,f,g,w),g=!0;else if(o===null){var R=l.stateNode,O=l.memoizedProps;R.props=O;var z=R.context,X=f.contextType;typeof X=="object"&&X!==null?X=Sr(X):(X=bi(f)?Rl:Xn.current,X=Tu(l,X));var ae=f.getDerivedStateFromProps,ce=typeof ae=="function"||typeof R.getSnapshotBeforeUpdate=="function";ce||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(O!==g||z!==X)&&NA(l,R,g,X),ya=!1;var oe=l.memoizedState;R.state=oe,sy(l,g,R,w),z=l.memoizedState,O!==g||oe!==z||wi.current||ya?(typeof ae=="function"&&(Wx(l,f,ae,g),z=l.memoizedState),(O=ya||PA(l,f,O,g,oe,z,X))?(ce||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(l.flags|=4194308)):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=z),R.props=g,R.state=z,R.context=X,g=O):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{R=l.stateNode,rA(o,l),O=l.memoizedProps,X=l.type===l.elementType?O:Xr(l.type,O),R.props=X,ce=l.pendingProps,oe=R.context,z=f.contextType,typeof z=="object"&&z!==null?z=Sr(z):(z=bi(f)?Rl:Xn.current,z=Tu(l,z));var be=f.getDerivedStateFromProps;(ae=typeof be=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(O!==ce||oe!==z)&&NA(l,R,g,z),ya=!1,oe=l.memoizedState,R.state=oe,sy(l,g,R,w);var Ce=l.memoizedState;O!==ce||oe!==Ce||wi.current||ya?(typeof be=="function"&&(Wx(l,f,be,g),Ce=l.memoizedState),(X=ya||PA(l,f,X,g,oe,Ce,z)||!1)?(ae||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(g,Ce,z),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(g,Ce,z)),typeof R.componentDidUpdate=="function"&&(l.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof R.componentDidUpdate!="function"||O===o.memoizedProps&&oe===o.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&oe===o.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Ce),R.props=g,R.state=Ce,R.context=z,g=X):(typeof R.componentDidUpdate!="function"||O===o.memoizedProps&&oe===o.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&oe===o.memoizedState||(l.flags|=1024),g=!1)}return Yx(o,l,f,g,S,w)}function Yx(o,l,f,g,w,S){UA(o,l);var R=(l.flags&128)!==0;if(!g&&!R)return w&&qE(l,f,!1),co(o,l,S);g=l.stateNode,DN.current=l;var O=R&&typeof f.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,o!==null&&R?(l.child=Lu(l,o.child,null,S),l.child=Lu(l,null,O,S)):ai(o,l,O,S),l.memoizedState=g.state,w&&qE(l,f,!0),l.child}function $A(o){var l=o.stateNode;l.pendingContext?WE(o,l.pendingContext,l.pendingContext!==l.context):l.context&&WE(o,l.context,!1),Dx(o,l.containerInfo)}function VA(o,l,f,g,w){return Nu(),Cx(w),l.flags|=256,ai(o,l,f,g),l.child}var Qx={dehydrated:null,treeContext:null,retryLane:0};function Jx(o){return{baseLanes:o,cachePool:null,transitions:null}}function WA(o,l,f){var g=l.pendingProps,w=jt.current,S=!1,R=(l.flags&128)!==0,O;if((O=R)||(O=o!==null&&o.memoizedState===null?!1:(w&2)!==0),O?(S=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(w|=1),At(jt,w&1),o===null)return kx(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(R=g.children,o=g.fallback,S?(g=l.mode,S=l.child,R={mode:"hidden",children:R},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=R):S=Cy(R,g,0,null),o=zl(o,g,f,null),S.return=l,o.return=l,S.sibling=o,l.child=S,l.child.memoizedState=Jx(f),l.memoizedState=Qx,o):Zx(l,R));if(w=o.memoizedState,w!==null&&(O=w.dehydrated,O!==null))return IN(o,l,R,g,O,w,f);if(S){S=g.fallback,R=l.mode,w=o.child,O=w.sibling;var z={mode:"hidden",children:g.children};return(R&1)===0&&l.child!==w?(g=l.child,g.childLanes=0,g.pendingProps=z,l.deletions=null):(g=Aa(w,z),g.subtreeFlags=w.subtreeFlags&14680064),O!==null?S=Aa(O,S):(S=zl(S,R,f,null),S.flags|=2),S.return=l,g.return=l,g.sibling=S,l.child=g,g=S,S=l.child,R=o.child.memoizedState,R=R===null?Jx(f):{baseLanes:R.baseLanes|f,cachePool:null,transitions:R.transitions},S.memoizedState=R,S.childLanes=o.childLanes&~f,l.memoizedState=Qx,g}return S=o.child,o=S.sibling,g=Aa(S,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=f),g.return=l,g.sibling=null,o!==null&&(f=l.deletions,f===null?(l.deletions=[o],l.flags|=16):f.push(o)),l.child=g,l.memoizedState=null,g}function Zx(o,l){return l=Cy({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function fy(o,l,f,g){return g!==null&&Cx(g),Lu(l,o.child,null,f),o=Zx(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function IN(o,l,f,g,w,S,R){if(f)return l.flags&256?(l.flags&=-257,g=qx(Error(t(422))),fy(o,l,R,g)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(S=g.fallback,w=l.mode,g=Cy({mode:"visible",children:g.children},w,0,null),S=zl(S,w,R,null),S.flags|=2,g.return=l,S.return=l,g.sibling=S,l.child=g,(l.mode&1)!==0&&Lu(l,o.child,null,R),l.child.memoizedState=Jx(R),l.memoizedState=Qx,S);if((l.mode&1)===0)return fy(o,l,R,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var O=g.dgst;return g=O,S=Error(t(419)),g=qx(S,g,void 0),fy(o,l,R,g)}if(O=(R&o.childLanes)!==0,Si||O){if(g=En,g!==null){switch(R&-R){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|R))!==0?0:w,w!==0&&w!==S.retryLane&&(S.retryLane=w,ao(o,w),Qr(g,o,w,-1))}return mw(),g=qx(Error(t(421))),fy(o,l,R,g)}return w.data==="$?"?(l.flags|=128,l.child=o.child,l=qN.bind(null,o),w._reactRetry=l,null):(o=S.treeContext,Wi=fa(w.nextSibling),Vi=l,It=!0,qr=null,o!==null&&(wr[br++]=so,wr[br++]=oo,wr[br++]=Nl,so=o.id,oo=o.overflow,Nl=l),l=Zx(l,g.children),l.flags|=4096,l)}function GA(o,l,f){o.lanes|=l;var g=o.alternate;g!==null&&(g.lanes|=l),Rx(o.return,l,f)}function ew(o,l,f,g,w){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:w}:(S.isBackwards=l,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=f,S.tailMode=w)}function qA(o,l,f){var g=l.pendingProps,w=g.revealOrder,S=g.tail;if(ai(o,l,g.children,f),g=jt.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&GA(o,f,l);else if(o.tag===19)GA(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(At(jt,g),(l.mode&1)===0)l.memoizedState=null;else switch(w){case"forwards":for(f=l.child,w=null;f!==null;)o=f.alternate,o!==null&&oy(o)===null&&(w=f),f=f.sibling;f=w,f===null?(w=l.child,l.child=null):(w=f.sibling,f.sibling=null),ew(l,!1,w,f,S);break;case"backwards":for(f=null,w=l.child,l.child=null;w!==null;){if(o=w.alternate,o!==null&&oy(o)===null){l.child=w;break}o=w.sibling,w.sibling=f,f=w,w=o}ew(l,!0,f,null,S);break;case"together":ew(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function py(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function co(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),Fl|=l.lanes,(f&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,f=Aa(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=Aa(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function MN(o,l,f){switch(l.tag){case 3:$A(l),Nu();break;case 5:aA(l);break;case 1:bi(l.type)&&Yg(l);break;case 4:Dx(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,w=l.memoizedProps.value;At(ny,g._currentValue),g._currentValue=w;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(At(jt,jt.current&1),l.flags|=128,null):(f&l.child.childLanes)!==0?WA(o,l,f):(At(jt,jt.current&1),o=co(o,l,f),o!==null?o.sibling:null);At(jt,jt.current&1);break;case 19:if(g=(f&l.childLanes)!==0,(o.flags&128)!==0){if(g)return qA(o,l,f);l.flags|=128}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),At(jt,jt.current),g)break;return null;case 22:case 23:return l.lanes=0,zA(o,l,f)}return co(o,l,f)}var XA,tw,KA,YA;XA=function(o,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},tw=function(){},KA=function(o,l,f,g){var w=o.memoizedProps;if(w!==g){o=l.stateNode,Il(ws.current);var S=null;switch(f){case"input":w=et(o,w),g=et(o,g),S=[];break;case"select":w=M({},w,{value:void 0}),g=M({},g,{value:void 0}),S=[];break;case"textarea":w=xi(o,w),g=xi(o,g),S=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=qg)}Fn(f,g);var R;f=null;for(X in w)if(!g.hasOwnProperty(X)&&w.hasOwnProperty(X)&&w[X]!=null)if(X==="style"){var O=w[X];for(R in O)O.hasOwnProperty(R)&&(f||(f={}),f[R]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(r.hasOwnProperty(X)?S||(S=[]):(S=S||[]).push(X,null));for(X in g){var z=g[X];if(O=w!=null?w[X]:void 0,g.hasOwnProperty(X)&&z!==O&&(z!=null||O!=null))if(X==="style")if(O){for(R in O)!O.hasOwnProperty(R)||z&&z.hasOwnProperty(R)||(f||(f={}),f[R]="");for(R in z)z.hasOwnProperty(R)&&O[R]!==z[R]&&(f||(f={}),f[R]=z[R])}else f||(S||(S=[]),S.push(X,f)),f=z;else X==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,O=O?O.__html:void 0,z!=null&&O!==z&&(S=S||[]).push(X,z)):X==="children"?typeof z!="string"&&typeof z!="number"||(S=S||[]).push(X,""+z):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(r.hasOwnProperty(X)?(z!=null&&X==="onScroll"&&Rt("scroll",o),S||O===z||(S=[])):(S=S||[]).push(X,z))}f&&(S=S||[]).push("style",f);var X=S;(l.updateQueue=X)&&(l.flags|=4)}},YA=function(o,l,f,g){f!==g&&(l.flags|=4)};function vf(o,l){if(!It)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Yn(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,g=0;if(l)for(var w=o.child;w!==null;)f|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)f|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=g,o.childLanes=f,l}function FN(o,l,f){var g=l.pendingProps;switch(Ex(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(l),null;case 1:return bi(l.type)&&Kg(),Yn(l),null;case 3:return g=l.stateNode,Mu(),Nt(wi),Nt(Xn),Fx(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(ey(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,qr!==null&&(dw(qr),qr=null))),tw(o,l),Yn(l),null;case 5:Ix(l);var w=Il(ff.current);if(f=l.type,o!==null&&l.stateNode!=null)KA(o,l,f,g,w),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return Yn(l),null}if(o=Il(ws.current),ey(l)){g=l.stateNode,f=l.type;var S=l.memoizedProps;switch(g[xs]=l,g[lf]=S,o=(l.mode&1)!==0,f){case"dialog":Rt("cancel",g),Rt("close",g);break;case"iframe":case"object":case"embed":Rt("load",g);break;case"video":case"audio":for(w=0;w<sf.length;w++)Rt(sf[w],g);break;case"source":Rt("error",g);break;case"img":case"image":case"link":Rt("error",g),Rt("load",g);break;case"details":Rt("toggle",g);break;case"input":dn(g,S),Rt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},Rt("invalid",g);break;case"textarea":zi(g,S),Rt("invalid",g)}Fn(f,S),w=null;for(var R in S)if(S.hasOwnProperty(R)){var O=S[R];R==="children"?typeof O=="string"?g.textContent!==O&&(S.suppressHydrationWarning!==!0&&Gg(g.textContent,O,o),w=["children",O]):typeof O=="number"&&g.textContent!==""+O&&(S.suppressHydrationWarning!==!0&&Gg(g.textContent,O,o),w=["children",""+O]):r.hasOwnProperty(R)&&O!=null&&R==="onScroll"&&Rt("scroll",g)}switch(f){case"input":te(g),vi(g,S,!0);break;case"textarea":te(g),Cl(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=qg)}g=w,l.updateQueue=g,g!==null&&(l.flags|=4)}else{R=w.nodeType===9?w:w.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ne(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=R.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=R.createElement(f,{is:g.is}):(o=R.createElement(f),f==="select"&&(R=o,g.multiple?R.multiple=!0:g.size&&(R.size=g.size))):o=R.createElementNS(o,f),o[xs]=l,o[lf]=g,XA(o,l,!1,!1),l.stateNode=o;e:{switch(R=ys(f,g),f){case"dialog":Rt("cancel",o),Rt("close",o),w=g;break;case"iframe":case"object":case"embed":Rt("load",o),w=g;break;case"video":case"audio":for(w=0;w<sf.length;w++)Rt(sf[w],o);w=g;break;case"source":Rt("error",o),w=g;break;case"img":case"image":case"link":Rt("error",o),Rt("load",o),w=g;break;case"details":Rt("toggle",o),w=g;break;case"input":dn(o,g),w=et(o,g),Rt("invalid",o);break;case"option":w=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},w=M({},g,{value:void 0}),Rt("invalid",o);break;case"textarea":zi(o,g),w=xi(o,g),Rt("invalid",o);break;default:w=g}Fn(f,w),O=w;for(S in O)if(O.hasOwnProperty(S)){var z=O[S];S==="style"?oa(o,z):S==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Xe(o,z)):S==="children"?typeof z=="string"?(f!=="textarea"||z!=="")&&nt(o,z):typeof z=="number"&&nt(o,""+z):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(r.hasOwnProperty(S)?z!=null&&S==="onScroll"&&Rt("scroll",o):z!=null&&T(o,S,z,R))}switch(f){case"input":te(o),vi(o,g,!1);break;case"textarea":te(o),Cl(o);break;case"option":g.value!=null&&o.setAttribute("value",""+Ee(g.value));break;case"select":o.multiple=!!g.multiple,S=g.value,S!=null?In(o,!!g.multiple,S,!1):g.defaultValue!=null&&In(o,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(o.onclick=qg)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Yn(l),null;case 6:if(o&&l.stateNode!=null)YA(o,l,o.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(f=Il(ff.current),Il(ws.current),ey(l)){if(g=l.stateNode,f=l.memoizedProps,g[xs]=l,(S=g.nodeValue!==f)&&(o=Vi,o!==null))switch(o.tag){case 3:Gg(g.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Gg(g.nodeValue,f,(o.mode&1)!==0)}S&&(l.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[xs]=l,l.stateNode=g}return Yn(l),null;case 13:if(Nt(jt),g=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(It&&Wi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)ZE(),Nu(),l.flags|=98560,S=!1;else if(S=ey(l),g!==null&&g.dehydrated!==null){if(o===null){if(!S)throw Error(t(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[xs]=l}else Nu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Yn(l),S=!1}else qr!==null&&(dw(qr),qr=null),S=!0;if(!S)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=f,l):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(jt.current&1)!==0?pn===0&&(pn=3):mw())),l.updateQueue!==null&&(l.flags|=4),Yn(l),null);case 4:return Mu(),tw(o,l),o===null&&of(l.stateNode.containerInfo),Yn(l),null;case 10:return Px(l.type._context),Yn(l),null;case 17:return bi(l.type)&&Kg(),Yn(l),null;case 19:if(Nt(jt),S=l.memoizedState,S===null)return Yn(l),null;if(g=(l.flags&128)!==0,R=S.rendering,R===null)if(g)vf(S,!1);else{if(pn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(R=oy(o),R!==null){for(l.flags|=128,vf(S,!1),g=R.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=f,f=l.child;f!==null;)S=f,o=g,S.flags&=14680066,R=S.alternate,R===null?(S.childLanes=0,S.lanes=o,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=R.childLanes,S.lanes=R.lanes,S.child=R.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=R.memoizedProps,S.memoizedState=R.memoizedState,S.updateQueue=R.updateQueue,S.type=R.type,o=R.dependencies,S.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return At(jt,jt.current&1|2),l.child}o=o.sibling}S.tail!==null&&tn()>Bu&&(l.flags|=128,g=!0,vf(S,!1),l.lanes=4194304)}else{if(!g)if(o=oy(R),o!==null){if(l.flags|=128,g=!0,f=o.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),vf(S,!0),S.tail===null&&S.tailMode==="hidden"&&!R.alternate&&!It)return Yn(l),null}else 2*tn()-S.renderingStartTime>Bu&&f!==1073741824&&(l.flags|=128,g=!0,vf(S,!1),l.lanes=4194304);S.isBackwards?(R.sibling=l.child,l.child=R):(f=S.last,f!==null?f.sibling=R:l.child=R,S.last=R)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=tn(),l.sibling=null,f=jt.current,At(jt,g?f&1|2:f&1),l):(Yn(l),null);case 22:case 23:return pw(),g=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Gi&1073741824)!==0&&(Yn(l),l.subtreeFlags&6&&(l.flags|=8192)):Yn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function ON(o,l){switch(Ex(l),l.tag){case 1:return bi(l.type)&&Kg(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Mu(),Nt(wi),Nt(Xn),Fx(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return Ix(l),null;case 13:if(Nt(jt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Nu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Nt(jt),null;case 4:return Mu(),null;case 10:return Px(l.type._context),null;case 22:case 23:return pw(),null;case 24:return null;default:return null}}var my=!1,Qn=!1,jN=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Ou(o,l){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){Wt(o,l,g)}else f.current=null}function nw(o,l,f){try{f()}catch(g){Wt(o,l,g)}}var QA=!1;function BN(o,l){if(px=Mg,o=PE(),ox(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var w=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var R=0,O=-1,z=-1,X=0,ae=0,ce=o,oe=null;t:for(;;){for(var be;ce!==f||w!==0&&ce.nodeType!==3||(O=R+w),ce!==S||g!==0&&ce.nodeType!==3||(z=R+g),ce.nodeType===3&&(R+=ce.nodeValue.length),(be=ce.firstChild)!==null;)oe=ce,ce=be;for(;;){if(ce===o)break t;if(oe===f&&++X===w&&(O=R),oe===S&&++ae===g&&(z=R),(be=ce.nextSibling)!==null)break;ce=oe,oe=ce.parentNode}ce=be}f=O===-1||z===-1?null:{start:O,end:z}}else f=null}f=f||{start:0,end:0}}else f=null;for(mx={focusedElem:o,selectionRange:f},Mg=!1,ke=l;ke!==null;)if(l=ke,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,ke=o;else for(;ke!==null;){l=ke;try{var Ce=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var _e=Ce.memoizedProps,nn=Ce.memoizedState,V=l.stateNode,H=V.getSnapshotBeforeUpdate(l.elementType===l.type?_e:Xr(l.type,_e),nn);V.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var W=l.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){Wt(l,l.return,fe)}if(o=l.sibling,o!==null){o.return=l.return,ke=o;break}ke=l.return}return Ce=QA,QA=!1,Ce}function xf(o,l,f){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&o)===o){var S=w.destroy;w.destroy=void 0,S!==void 0&&nw(l,f,S)}w=w.next}while(w!==g)}}function gy(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&o)===o){var g=f.create;f.destroy=g()}f=f.next}while(f!==l)}}function iw(o){var l=o.ref;if(l!==null){var f=o.stateNode;switch(o.tag){case 5:o=f;break;default:o=f}typeof l=="function"?l(o):l.current=o}}function JA(o){var l=o.alternate;l!==null&&(o.alternate=null,JA(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[xs],delete l[lf],delete l[xx],delete l[bN],delete l[SN])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function ZA(o){return o.tag===5||o.tag===3||o.tag===4}function ek(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||ZA(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function rw(o,l,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(o,l):f.insertBefore(o,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(o,f)):(l=f,l.appendChild(o)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=qg));else if(g!==4&&(o=o.child,o!==null))for(rw(o,l,f),o=o.sibling;o!==null;)rw(o,l,f),o=o.sibling}function sw(o,l,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(sw(o,l,f),o=o.sibling;o!==null;)sw(o,l,f),o=o.sibling}var On=null,Kr=!1;function xa(o,l,f){for(f=f.child;f!==null;)tk(o,l,f),f=f.sibling}function tk(o,l,f){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(Pg,f)}catch{}switch(f.tag){case 5:Qn||Ou(f,l);case 6:var g=On,w=Kr;On=null,xa(o,l,f),On=g,Kr=w,On!==null&&(Kr?(o=On,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):On.removeChild(f.stateNode));break;case 18:On!==null&&(Kr?(o=On,f=f.stateNode,o.nodeType===8?vx(o.parentNode,f):o.nodeType===1&&vx(o,f),Yd(o)):vx(On,f.stateNode));break;case 4:g=On,w=Kr,On=f.stateNode.containerInfo,Kr=!0,xa(o,l,f),On=g,Kr=w;break;case 0:case 11:case 14:case 15:if(!Qn&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var S=w,R=S.destroy;S=S.tag,R!==void 0&&((S&2)!==0||(S&4)!==0)&&nw(f,l,R),w=w.next}while(w!==g)}xa(o,l,f);break;case 1:if(!Qn&&(Ou(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(O){Wt(f,l,O)}xa(o,l,f);break;case 21:xa(o,l,f);break;case 22:f.mode&1?(Qn=(g=Qn)||f.memoizedState!==null,xa(o,l,f),Qn=g):xa(o,l,f);break;default:xa(o,l,f)}}function nk(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new jN),l.forEach(function(g){var w=XN.bind(null,o,g);f.has(g)||(f.add(g),g.then(w,w))})}}function Yr(o,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var w=f[g];try{var S=o,R=l,O=R;e:for(;O!==null;){switch(O.tag){case 5:On=O.stateNode,Kr=!1;break e;case 3:On=O.stateNode.containerInfo,Kr=!0;break e;case 4:On=O.stateNode.containerInfo,Kr=!0;break e}O=O.return}if(On===null)throw Error(t(160));tk(S,R,w),On=null,Kr=!1;var z=w.alternate;z!==null&&(z.return=null),w.return=null}catch(X){Wt(w,l,X)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)ik(l,o),l=l.sibling}function ik(o,l){var f=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Yr(l,o),Ss(o),g&4){try{xf(3,o,o.return),gy(3,o)}catch(_e){Wt(o,o.return,_e)}try{xf(5,o,o.return)}catch(_e){Wt(o,o.return,_e)}}break;case 1:Yr(l,o),Ss(o),g&512&&f!==null&&Ou(f,f.return);break;case 5:if(Yr(l,o),Ss(o),g&512&&f!==null&&Ou(f,f.return),o.flags&32){var w=o.stateNode;try{nt(w,"")}catch(_e){Wt(o,o.return,_e)}}if(g&4&&(w=o.stateNode,w!=null)){var S=o.memoizedProps,R=f!==null?f.memoizedProps:S,O=o.type,z=o.updateQueue;if(o.updateQueue=null,z!==null)try{O==="input"&&S.type==="radio"&&S.name!=null&&Ln(w,S),ys(O,R);var X=ys(O,S);for(R=0;R<z.length;R+=2){var ae=z[R],ce=z[R+1];ae==="style"?oa(w,ce):ae==="dangerouslySetInnerHTML"?Xe(w,ce):ae==="children"?nt(w,ce):T(w,ae,ce,X)}switch(O){case"input":Dt(w,S);break;case"textarea":Ui(w,S);break;case"select":var oe=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!S.multiple;var be=S.value;be!=null?In(w,!!S.multiple,be,!1):oe!==!!S.multiple&&(S.defaultValue!=null?In(w,!!S.multiple,S.defaultValue,!0):In(w,!!S.multiple,S.multiple?[]:"",!1))}w[lf]=S}catch(_e){Wt(o,o.return,_e)}}break;case 6:if(Yr(l,o),Ss(o),g&4){if(o.stateNode===null)throw Error(t(162));w=o.stateNode,S=o.memoizedProps;try{w.nodeValue=S}catch(_e){Wt(o,o.return,_e)}}break;case 3:if(Yr(l,o),Ss(o),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Yd(l.containerInfo)}catch(_e){Wt(o,o.return,_e)}break;case 4:Yr(l,o),Ss(o);break;case 13:Yr(l,o),Ss(o),w=o.child,w.flags&8192&&(S=w.memoizedState!==null,w.stateNode.isHidden=S,!S||w.alternate!==null&&w.alternate.memoizedState!==null||(lw=tn())),g&4&&nk(o);break;case 22:if(ae=f!==null&&f.memoizedState!==null,o.mode&1?(Qn=(X=Qn)||ae,Yr(l,o),Qn=X):Yr(l,o),Ss(o),g&8192){if(X=o.memoizedState!==null,(o.stateNode.isHidden=X)&&!ae&&(o.mode&1)!==0)for(ke=o,ae=o.child;ae!==null;){for(ce=ke=ae;ke!==null;){switch(oe=ke,be=oe.child,oe.tag){case 0:case 11:case 14:case 15:xf(4,oe,oe.return);break;case 1:Ou(oe,oe.return);var Ce=oe.stateNode;if(typeof Ce.componentWillUnmount=="function"){g=oe,f=oe.return;try{l=g,Ce.props=l.memoizedProps,Ce.state=l.memoizedState,Ce.componentWillUnmount()}catch(_e){Wt(g,f,_e)}}break;case 5:Ou(oe,oe.return);break;case 22:if(oe.memoizedState!==null){ok(ce);continue}}be!==null?(be.return=oe,ke=be):ok(ce)}ae=ae.sibling}e:for(ae=null,ce=o;;){if(ce.tag===5){if(ae===null){ae=ce;try{w=ce.stateNode,X?(S=w.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(O=ce.stateNode,z=ce.memoizedProps.style,R=z!=null&&z.hasOwnProperty("display")?z.display:null,O.style.display=xr("display",R))}catch(_e){Wt(o,o.return,_e)}}}else if(ce.tag===6){if(ae===null)try{ce.stateNode.nodeValue=X?"":ce.memoizedProps}catch(_e){Wt(o,o.return,_e)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===o)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===o)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===o)break e;ae===ce&&(ae=null),ce=ce.return}ae===ce&&(ae=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Yr(l,o),Ss(o),g&4&&nk(o);break;case 21:break;default:Yr(l,o),Ss(o)}}function Ss(o){var l=o.flags;if(l&2){try{e:{for(var f=o.return;f!==null;){if(ZA(f)){var g=f;break e}f=f.return}throw Error(t(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(nt(w,""),g.flags&=-33);var S=ek(o);sw(o,S,w);break;case 3:case 4:var R=g.stateNode.containerInfo,O=ek(o);rw(o,O,R);break;default:throw Error(t(161))}}catch(z){Wt(o,o.return,z)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function zN(o,l,f){ke=o,rk(o)}function rk(o,l,f){for(var g=(o.mode&1)!==0;ke!==null;){var w=ke,S=w.child;if(w.tag===22&&g){var R=w.memoizedState!==null||my;if(!R){var O=w.alternate,z=O!==null&&O.memoizedState!==null||Qn;O=my;var X=Qn;if(my=R,(Qn=z)&&!X)for(ke=w;ke!==null;)R=ke,z=R.child,R.tag===22&&R.memoizedState!==null?ak(w):z!==null?(z.return=R,ke=z):ak(w);for(;S!==null;)ke=S,rk(S),S=S.sibling;ke=w,my=O,Qn=X}sk(o)}else(w.subtreeFlags&8772)!==0&&S!==null?(S.return=w,ke=S):sk(o)}}function sk(o){for(;ke!==null;){var l=ke;if((l.flags&8772)!==0){var f=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Qn||gy(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Qn)if(f===null)g.componentDidMount();else{var w=l.elementType===l.type?f.memoizedProps:Xr(l.type,f.memoizedProps);g.componentDidUpdate(w,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=l.updateQueue;S!==null&&oA(l,S,g);break;case 3:var R=l.updateQueue;if(R!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}oA(l,R,f)}break;case 5:var O=l.stateNode;if(f===null&&l.flags&4){f=O;var z=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&f.focus();break;case"img":z.src&&(f.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var X=l.alternate;if(X!==null){var ae=X.memoizedState;if(ae!==null){var ce=ae.dehydrated;ce!==null&&Yd(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qn||l.flags&512&&iw(l)}catch(oe){Wt(l,l.return,oe)}}if(l===o){ke=null;break}if(f=l.sibling,f!==null){f.return=l.return,ke=f;break}ke=l.return}}function ok(o){for(;ke!==null;){var l=ke;if(l===o){ke=null;break}var f=l.sibling;if(f!==null){f.return=l.return,ke=f;break}ke=l.return}}function ak(o){for(;ke!==null;){var l=ke;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{gy(4,l)}catch(z){Wt(l,f,z)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var w=l.return;try{g.componentDidMount()}catch(z){Wt(l,w,z)}}var S=l.return;try{iw(l)}catch(z){Wt(l,S,z)}break;case 5:var R=l.return;try{iw(l)}catch(z){Wt(l,R,z)}}}catch(z){Wt(l,l.return,z)}if(l===o){ke=null;break}var O=l.sibling;if(O!==null){O.return=l.return,ke=O;break}ke=l.return}}var UN=Math.ceil,yy=D.ReactCurrentDispatcher,ow=D.ReactCurrentOwner,Ar=D.ReactCurrentBatchConfig,it=0,En=null,on=null,jn=0,Gi=0,ju=pa(0),pn=0,wf=null,Fl=0,vy=0,aw=0,bf=null,Ei=null,lw=0,Bu=1/0,uo=null,xy=!1,cw=null,wa=null,wy=!1,ba=null,by=0,Sf=0,uw=null,Sy=-1,Ey=0;function li(){return(it&6)!==0?tn():Sy!==-1?Sy:Sy=tn()}function Sa(o){return(o.mode&1)===0?1:(it&2)!==0&&jn!==0?jn&-jn:AN.transition!==null?(Ey===0&&(Ey=eE()),Ey):(o=ut,o!==0||(o=window.event,o=o===void 0?16:cE(o.type)),o)}function Qr(o,l,f,g){if(50<Sf)throw Sf=0,uw=null,Error(t(185));Wd(o,f,g),((it&2)===0||o!==En)&&(o===En&&((it&2)===0&&(vy|=f),pn===4&&Ea(o,jn)),Ai(o,g),f===1&&it===0&&(l.mode&1)===0&&(Bu=tn()+500,Qg&&ga()))}function Ai(o,l){var f=o.callbackNode;A2(o,l);var g=Lg(o,o===En?jn:0);if(g===0)f!==null&&QS(f),o.callbackNode=null,o.callbackPriority=0;else if(l=g&-g,o.callbackPriority!==l){if(f!=null&&QS(f),l===1)o.tag===0?EN(ck.bind(null,o)):XE(ck.bind(null,o)),xN(function(){(it&6)===0&&ga()}),f=null;else{switch(tE(g)){case 1:f=$v;break;case 4:f=JS;break;case 16:f=Tg;break;case 536870912:f=ZS;break;default:f=Tg}f=yk(f,lk.bind(null,o))}o.callbackPriority=l,o.callbackNode=f}}function lk(o,l){if(Sy=-1,Ey=0,(it&6)!==0)throw Error(t(327));var f=o.callbackNode;if(zu()&&o.callbackNode!==f)return null;var g=Lg(o,o===En?jn:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||l)l=Ay(o,g);else{l=g;var w=it;it|=2;var S=hk();(En!==o||jn!==l)&&(uo=null,Bu=tn()+500,jl(o,l));do try{VN();break}catch(O){uk(o,O)}while(!0);Tx(),yy.current=S,it=w,on!==null?l=0:(En=null,jn=0,l=pn)}if(l!==0){if(l===2&&(w=Vv(o),w!==0&&(g=w,l=hw(o,w))),l===1)throw f=wf,jl(o,0),Ea(o,g),Ai(o,tn()),f;if(l===6)Ea(o,g);else{if(w=o.current.alternate,(g&30)===0&&!HN(w)&&(l=Ay(o,g),l===2&&(S=Vv(o),S!==0&&(g=S,l=hw(o,S))),l===1))throw f=wf,jl(o,0),Ea(o,g),Ai(o,tn()),f;switch(o.finishedWork=w,o.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:Bl(o,Ei,uo);break;case 3:if(Ea(o,g),(g&130023424)===g&&(l=lw+500-tn(),10<l)){if(Lg(o,0)!==0)break;if(w=o.suspendedLanes,(w&g)!==g){li(),o.pingedLanes|=o.suspendedLanes&w;break}o.timeoutHandle=yx(Bl.bind(null,o,Ei,uo),l);break}Bl(o,Ei,uo);break;case 4:if(Ea(o,g),(g&4194240)===g)break;for(l=o.eventTimes,w=-1;0<g;){var R=31-Wr(g);S=1<<R,R=l[R],R>w&&(w=R),g&=~S}if(g=w,g=tn()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*UN(g/1960))-g,10<g){o.timeoutHandle=yx(Bl.bind(null,o,Ei,uo),g);break}Bl(o,Ei,uo);break;case 5:Bl(o,Ei,uo);break;default:throw Error(t(329))}}}return Ai(o,tn()),o.callbackNode===f?lk.bind(null,o):null}function hw(o,l){var f=bf;return o.current.memoizedState.isDehydrated&&(jl(o,l).flags|=256),o=Ay(o,l),o!==2&&(l=Ei,Ei=f,l!==null&&dw(l)),o}function dw(o){Ei===null?Ei=o:Ei.push.apply(Ei,o)}function HN(o){for(var l=o;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var w=f[g],S=w.getSnapshot;w=w.value;try{if(!Gr(S(),w))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ea(o,l){for(l&=~aw,l&=~vy,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var f=31-Wr(l),g=1<<f;o[f]=-1,l&=~g}}function ck(o){if((it&6)!==0)throw Error(t(327));zu();var l=Lg(o,0);if((l&1)===0)return Ai(o,tn()),null;var f=Ay(o,l);if(o.tag!==0&&f===2){var g=Vv(o);g!==0&&(l=g,f=hw(o,g))}if(f===1)throw f=wf,jl(o,0),Ea(o,l),Ai(o,tn()),f;if(f===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Bl(o,Ei,uo),Ai(o,tn()),null}function fw(o,l){var f=it;it|=1;try{return o(l)}finally{it=f,it===0&&(Bu=tn()+500,Qg&&ga())}}function Ol(o){ba!==null&&ba.tag===0&&(it&6)===0&&zu();var l=it;it|=1;var f=Ar.transition,g=ut;try{if(Ar.transition=null,ut=1,o)return o()}finally{ut=g,Ar.transition=f,it=l,(it&6)===0&&ga()}}function pw(){Gi=ju.current,Nt(ju)}function jl(o,l){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,vN(f)),on!==null)for(f=on.return;f!==null;){var g=f;switch(Ex(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Kg();break;case 3:Mu(),Nt(wi),Nt(Xn),Fx();break;case 5:Ix(g);break;case 4:Mu();break;case 13:Nt(jt);break;case 19:Nt(jt);break;case 10:Px(g.type._context);break;case 22:case 23:pw()}f=f.return}if(En=o,on=o=Aa(o.current,null),jn=Gi=l,pn=0,wf=null,aw=vy=Fl=0,Ei=bf=null,Dl!==null){for(l=0;l<Dl.length;l++)if(f=Dl[l],g=f.interleaved,g!==null){f.interleaved=null;var w=g.next,S=f.pending;if(S!==null){var R=S.next;S.next=w,g.next=R}f.pending=g}Dl=null}return o}function uk(o,l){do{var f=on;try{if(Tx(),ay.current=hy,ly){for(var g=Bt.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}ly=!1}if(Ml=0,Sn=fn=Bt=null,pf=!1,mf=0,ow.current=null,f===null||f.return===null){pn=1,wf=l,on=null;break}e:{var S=o,R=f.return,O=f,z=l;if(l=jn,O.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var X=z,ae=O,ce=ae.tag;if((ae.mode&1)===0&&(ce===0||ce===11||ce===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var be=MA(R);if(be!==null){be.flags&=-257,FA(be,R,O,S,l),be.mode&1&&IA(S,X,l),l=be,z=X;var Ce=l.updateQueue;if(Ce===null){var _e=new Set;_e.add(z),l.updateQueue=_e}else Ce.add(z);break e}else{if((l&1)===0){IA(S,X,l),mw();break e}z=Error(t(426))}}else if(It&&O.mode&1){var nn=MA(R);if(nn!==null){(nn.flags&65536)===0&&(nn.flags|=256),FA(nn,R,O,S,l),Cx(Fu(z,O));break e}}S=z=Fu(z,O),pn!==4&&(pn=2),bf===null?bf=[S]:bf.push(S),S=R;do{switch(S.tag){case 3:S.flags|=65536,l&=-l,S.lanes|=l;var V=LA(S,z,l);sA(S,V);break e;case 1:O=z;var H=S.type,W=S.stateNode;if((S.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(wa===null||!wa.has(W)))){S.flags|=65536,l&=-l,S.lanes|=l;var fe=DA(S,O,l);sA(S,fe);break e}}S=S.return}while(S!==null)}fk(f)}catch(Pe){l=Pe,on===f&&f!==null&&(on=f=f.return);continue}break}while(!0)}function hk(){var o=yy.current;return yy.current=hy,o===null?hy:o}function mw(){(pn===0||pn===3||pn===2)&&(pn=4),En===null||(Fl&268435455)===0&&(vy&268435455)===0||Ea(En,jn)}function Ay(o,l){var f=it;it|=2;var g=hk();(En!==o||jn!==l)&&(uo=null,jl(o,l));do try{$N();break}catch(w){uk(o,w)}while(!0);if(Tx(),it=f,yy.current=g,on!==null)throw Error(t(261));return En=null,jn=0,pn}function $N(){for(;on!==null;)dk(on)}function VN(){for(;on!==null&&!m2();)dk(on)}function dk(o){var l=gk(o.alternate,o,Gi);o.memoizedProps=o.pendingProps,l===null?fk(o):on=l,ow.current=null}function fk(o){var l=o;do{var f=l.alternate;if(o=l.return,(l.flags&32768)===0){if(f=FN(f,l,Gi),f!==null){on=f;return}}else{if(f=ON(f,l),f!==null){f.flags&=32767,on=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{pn=6,on=null;return}}if(l=l.sibling,l!==null){on=l;return}on=l=o}while(l!==null);pn===0&&(pn=5)}function Bl(o,l,f){var g=ut,w=Ar.transition;try{Ar.transition=null,ut=1,WN(o,l,f,g)}finally{Ar.transition=w,ut=g}return null}function WN(o,l,f,g){do zu();while(ba!==null);if((it&6)!==0)throw Error(t(327));f=o.finishedWork;var w=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var S=f.lanes|f.childLanes;if(k2(o,S),o===En&&(on=En=null,jn=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||wy||(wy=!0,yk(Tg,function(){return zu(),null})),S=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||S){S=Ar.transition,Ar.transition=null;var R=ut;ut=1;var O=it;it|=4,ow.current=null,BN(o,f),ik(f,o),hN(mx),Mg=!!px,mx=px=null,o.current=f,zN(f),g2(),it=O,ut=R,Ar.transition=S}else o.current=f;if(wy&&(wy=!1,ba=o,by=w),S=o.pendingLanes,S===0&&(wa=null),x2(f.stateNode),Ai(o,tn()),l!==null)for(g=o.onRecoverableError,f=0;f<l.length;f++)w=l[f],g(w.value,{componentStack:w.stack,digest:w.digest});if(xy)throw xy=!1,o=cw,cw=null,o;return(by&1)!==0&&o.tag!==0&&zu(),S=o.pendingLanes,(S&1)!==0?o===uw?Sf++:(Sf=0,uw=o):Sf=0,ga(),null}function zu(){if(ba!==null){var o=tE(by),l=Ar.transition,f=ut;try{if(Ar.transition=null,ut=16>o?16:o,ba===null)var g=!1;else{if(o=ba,ba=null,by=0,(it&6)!==0)throw Error(t(331));var w=it;for(it|=4,ke=o.current;ke!==null;){var S=ke,R=S.child;if((ke.flags&16)!==0){var O=S.deletions;if(O!==null){for(var z=0;z<O.length;z++){var X=O[z];for(ke=X;ke!==null;){var ae=ke;switch(ae.tag){case 0:case 11:case 15:xf(8,ae,S)}var ce=ae.child;if(ce!==null)ce.return=ae,ke=ce;else for(;ke!==null;){ae=ke;var oe=ae.sibling,be=ae.return;if(JA(ae),ae===X){ke=null;break}if(oe!==null){oe.return=be,ke=oe;break}ke=be}}}var Ce=S.alternate;if(Ce!==null){var _e=Ce.child;if(_e!==null){Ce.child=null;do{var nn=_e.sibling;_e.sibling=null,_e=nn}while(_e!==null)}}ke=S}}if((S.subtreeFlags&2064)!==0&&R!==null)R.return=S,ke=R;else e:for(;ke!==null;){if(S=ke,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:xf(9,S,S.return)}var V=S.sibling;if(V!==null){V.return=S.return,ke=V;break e}ke=S.return}}var H=o.current;for(ke=H;ke!==null;){R=ke;var W=R.child;if((R.subtreeFlags&2064)!==0&&W!==null)W.return=R,ke=W;else e:for(R=H;ke!==null;){if(O=ke,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:gy(9,O)}}catch(Pe){Wt(O,O.return,Pe)}if(O===R){ke=null;break e}var fe=O.sibling;if(fe!==null){fe.return=O.return,ke=fe;break e}ke=O.return}}if(it=w,ga(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(Pg,o)}catch{}g=!0}return g}finally{ut=f,Ar.transition=l}}return!1}function pk(o,l,f){l=Fu(f,l),l=LA(o,l,1),o=va(o,l,1),l=li(),o!==null&&(Wd(o,1,l),Ai(o,l))}function Wt(o,l,f){if(o.tag===3)pk(o,o,f);else for(;l!==null;){if(l.tag===3){pk(l,o,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(wa===null||!wa.has(g))){o=Fu(f,o),o=DA(l,o,1),l=va(l,o,1),o=li(),l!==null&&(Wd(l,1,o),Ai(l,o));break}}l=l.return}}function GN(o,l,f){var g=o.pingCache;g!==null&&g.delete(l),l=li(),o.pingedLanes|=o.suspendedLanes&f,En===o&&(jn&f)===f&&(pn===4||pn===3&&(jn&130023424)===jn&&500>tn()-lw?jl(o,0):aw|=f),Ai(o,l)}function mk(o,l){l===0&&((o.mode&1)===0?l=1:(l=Ng,Ng<<=1,(Ng&130023424)===0&&(Ng=4194304)));var f=li();o=ao(o,l),o!==null&&(Wd(o,l,f),Ai(o,f))}function qN(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),mk(o,f)}function XN(o,l){var f=0;switch(o.tag){case 13:var g=o.stateNode,w=o.memoizedState;w!==null&&(f=w.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),mk(o,f)}var gk;gk=function(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps||wi.current)Si=!0;else{if((o.lanes&f)===0&&(l.flags&128)===0)return Si=!1,MN(o,l,f);Si=(o.flags&131072)!==0}else Si=!1,It&&(l.flags&1048576)!==0&&KE(l,Zg,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;py(o,l),o=l.pendingProps;var w=Tu(l,Xn.current);Iu(l,f),w=Bx(null,l,g,o,w,f);var S=zx();return l.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,bi(g)?(S=!0,Yg(l)):S=!1,l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Lx(l),w.updater=dy,l.stateNode=w,w._reactInternals=l,Gx(l,g,o,f),l=Yx(null,l,g,!0,S,f)):(l.tag=0,It&&S&&Sx(l),ai(null,l,w,f),l=l.child),l;case 16:g=l.elementType;e:{switch(py(o,l),o=l.pendingProps,w=g._init,g=w(g._payload),l.type=g,w=l.tag=YN(g),o=Xr(g,o),w){case 0:l=Kx(null,l,g,o,f);break e;case 1:l=HA(null,l,g,o,f);break e;case 11:l=OA(null,l,g,o,f);break e;case 14:l=jA(null,l,g,Xr(g.type,o),f);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:Xr(g,w),Kx(o,l,g,w,f);case 1:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:Xr(g,w),HA(o,l,g,w,f);case 3:e:{if($A(l),o===null)throw Error(t(387));g=l.pendingProps,S=l.memoizedState,w=S.element,rA(o,l),sy(l,g,null,f);var R=l.memoizedState;if(g=R.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){w=Fu(Error(t(423)),l),l=VA(o,l,g,f,w);break e}else if(g!==w){w=Fu(Error(t(424)),l),l=VA(o,l,g,f,w);break e}else for(Wi=fa(l.stateNode.containerInfo.firstChild),Vi=l,It=!0,qr=null,f=nA(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Nu(),g===w){l=co(o,l,f);break e}ai(o,l,g,f)}l=l.child}return l;case 5:return aA(l),o===null&&kx(l),g=l.type,w=l.pendingProps,S=o!==null?o.memoizedProps:null,R=w.children,gx(g,w)?R=null:S!==null&&gx(g,S)&&(l.flags|=32),UA(o,l),ai(o,l,R,f),l.child;case 6:return o===null&&kx(l),null;case 13:return WA(o,l,f);case 4:return Dx(l,l.stateNode.containerInfo),g=l.pendingProps,o===null?l.child=Lu(l,null,g,f):ai(o,l,g,f),l.child;case 11:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:Xr(g,w),OA(o,l,g,w,f);case 7:return ai(o,l,l.pendingProps,f),l.child;case 8:return ai(o,l,l.pendingProps.children,f),l.child;case 12:return ai(o,l,l.pendingProps.children,f),l.child;case 10:e:{if(g=l.type._context,w=l.pendingProps,S=l.memoizedProps,R=w.value,At(ny,g._currentValue),g._currentValue=R,S!==null)if(Gr(S.value,R)){if(S.children===w.children&&!wi.current){l=co(o,l,f);break e}}else for(S=l.child,S!==null&&(S.return=l);S!==null;){var O=S.dependencies;if(O!==null){R=S.child;for(var z=O.firstContext;z!==null;){if(z.context===g){if(S.tag===1){z=lo(-1,f&-f),z.tag=2;var X=S.updateQueue;if(X!==null){X=X.shared;var ae=X.pending;ae===null?z.next=z:(z.next=ae.next,ae.next=z),X.pending=z}}S.lanes|=f,z=S.alternate,z!==null&&(z.lanes|=f),Rx(S.return,f,l),O.lanes|=f;break}z=z.next}}else if(S.tag===10)R=S.type===l.type?null:S.child;else if(S.tag===18){if(R=S.return,R===null)throw Error(t(341));R.lanes|=f,O=R.alternate,O!==null&&(O.lanes|=f),Rx(R,f,l),R=S.sibling}else R=S.child;if(R!==null)R.return=S;else for(R=S;R!==null;){if(R===l){R=null;break}if(S=R.sibling,S!==null){S.return=R.return,R=S;break}R=R.return}S=R}ai(o,l,w.children,f),l=l.child}return l;case 9:return w=l.type,g=l.pendingProps.children,Iu(l,f),w=Sr(w),g=g(w),l.flags|=1,ai(o,l,g,f),l.child;case 14:return g=l.type,w=Xr(g,l.pendingProps),w=Xr(g.type,w),jA(o,l,g,w,f);case 15:return BA(o,l,l.type,l.pendingProps,f);case 17:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:Xr(g,w),py(o,l),l.tag=1,bi(g)?(o=!0,Yg(l)):o=!1,Iu(l,f),RA(l,g,w),Gx(l,g,w,f),Yx(null,l,g,!0,o,f);case 19:return qA(o,l,f);case 22:return zA(o,l,f)}throw Error(t(156,l.tag))};function yk(o,l){return YS(o,l)}function KN(o,l,f,g){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(o,l,f,g){return new KN(o,l,f,g)}function gw(o){return o=o.prototype,!(!o||!o.isReactComponent)}function YN(o){if(typeof o=="function")return gw(o)?1:0;if(o!=null){if(o=o.$$typeof,o===re)return 11;if(o===Z)return 14}return 2}function Aa(o,l){var f=o.alternate;return f===null?(f=kr(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function ky(o,l,f,g,w,S){var R=2;if(g=o,typeof o=="function")gw(o)&&(R=1);else if(typeof o=="string")R=5;else e:switch(o){case j:return zl(f.children,w,S,l);case G:R=8,w|=8;break;case K:return o=kr(12,f,l,w|2),o.elementType=K,o.lanes=S,o;case ue:return o=kr(13,f,l,w),o.elementType=ue,o.lanes=S,o;case ie:return o=kr(19,f,l,w),o.elementType=ie,o.lanes=S,o;case J:return Cy(f,w,S,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ee:R=10;break e;case q:R=9;break e;case re:R=11;break e;case Z:R=14;break e;case se:R=16,g=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=kr(R,f,l,w),l.elementType=o,l.type=g,l.lanes=S,l}function zl(o,l,f,g){return o=kr(7,o,g,l),o.lanes=f,o}function Cy(o,l,f,g){return o=kr(22,o,g,l),o.elementType=J,o.lanes=f,o.stateNode={isHidden:!1},o}function yw(o,l,f){return o=kr(6,o,null,l),o.lanes=f,o}function vw(o,l,f){return l=kr(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function QN(o,l,f,g,w){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wv(0),this.expirationTimes=Wv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wv(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function xw(o,l,f,g,w,S,R,O,z){return o=new QN(o,l,f,O,z),l===1?(l=1,S===!0&&(l|=8)):l=0,S=kr(3,null,null,l),o.current=S,S.stateNode=o,S.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lx(S),o}function JN(o,l,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:g==null?null:""+g,children:o,containerInfo:l,implementation:f}}function vk(o){if(!o)return ma;o=o._reactInternals;e:{if(Tl(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(bi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var f=o.type;if(bi(f))return GE(o,f,l)}return l}function xk(o,l,f,g,w,S,R,O,z){return o=xw(f,g,!0,o,w,S,R,O,z),o.context=vk(null),f=o.current,g=li(),w=Sa(f),S=lo(g,w),S.callback=l??null,va(f,S,w),o.current.lanes=w,Wd(o,w,g),Ai(o,g),o}function _y(o,l,f,g){var w=l.current,S=li(),R=Sa(w);return f=vk(f),l.context===null?l.context=f:l.pendingContext=f,l=lo(S,R),l.payload={element:o},g=g===void 0?null:g,g!==null&&(l.callback=g),o=va(w,l,R),o!==null&&(Qr(o,w,R,S),ry(o,w,R)),R}function Ty(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function wk(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function ww(o,l){wk(o,l),(o=o.alternate)&&wk(o,l)}function ZN(){return null}var bk=typeof reportError=="function"?reportError:function(o){console.error(o)};function bw(o){this._internalRoot=o}Py.prototype.render=bw.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));_y(o,l,null,null)},Py.prototype.unmount=bw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Ol(function(){_y(null,o,null,null)}),l[io]=null}};function Py(o){this._internalRoot=o}Py.prototype.unstable_scheduleHydration=function(o){if(o){var l=rE();o={blockedOn:null,target:o,priority:l};for(var f=0;f<ua.length&&l!==0&&l<ua[f].priority;f++);ua.splice(f,0,o),f===0&&aE(o)}};function Sw(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Ry(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Sk(){}function eL(o,l,f,g,w){if(w){if(typeof g=="function"){var S=g;g=function(){var X=Ty(R);S.call(X)}}var R=xk(l,g,o,0,null,!1,!1,"",Sk);return o._reactRootContainer=R,o[io]=R.current,of(o.nodeType===8?o.parentNode:o),Ol(),R}for(;w=o.lastChild;)o.removeChild(w);if(typeof g=="function"){var O=g;g=function(){var X=Ty(z);O.call(X)}}var z=xw(o,0,!1,null,null,!1,!1,"",Sk);return o._reactRootContainer=z,o[io]=z.current,of(o.nodeType===8?o.parentNode:o),Ol(function(){_y(l,z,f,g)}),z}function Ny(o,l,f,g,w){var S=f._reactRootContainer;if(S){var R=S;if(typeof w=="function"){var O=w;w=function(){var z=Ty(R);O.call(z)}}_y(l,R,o,w)}else R=eL(f,l,o,w,g);return Ty(R)}nE=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var f=Vd(l.pendingLanes);f!==0&&(Gv(l,f|1),Ai(l,tn()),(it&6)===0&&(Bu=tn()+500,ga()))}break;case 13:Ol(function(){var g=ao(o,1);if(g!==null){var w=li();Qr(g,o,1,w)}}),ww(o,1)}},qv=function(o){if(o.tag===13){var l=ao(o,134217728);if(l!==null){var f=li();Qr(l,o,134217728,f)}ww(o,134217728)}},iE=function(o){if(o.tag===13){var l=Sa(o),f=ao(o,l);if(f!==null){var g=li();Qr(f,o,l,g)}ww(o,l)}},rE=function(){return ut},sE=function(o,l){var f=ut;try{return ut=o,l()}finally{ut=f}},Bv=function(o,l,f){switch(l){case"input":if(Dt(o,f),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==o&&g.form===o.form){var w=Xg(g);if(!w)throw Error(t(90));Me(g),Dt(g,w)}}}break;case"textarea":Ui(o,f);break;case"select":l=f.value,l!=null&&In(o,!!f.multiple,l,!1)}},$S=fw,VS=Ol;var tL={usingClientEntryPoint:!1,Events:[cf,Cu,Xg,US,HS,fw]},Ef={findFiberByHostInstance:Pl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nL={bundleType:Ef.bundleType,version:Ef.version,rendererPackageName:Ef.rendererPackageName,rendererConfig:Ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=XS(o),o===null?null:o.stateNode},findFiberByHostInstance:Ef.findFiberByHostInstance||ZN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ly.isDisabled&&Ly.supportsFiber)try{Pg=Ly.inject(nL),vs=Ly}catch{}}return ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tL,ki.createPortal=function(o,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sw(l))throw Error(t(200));return JN(o,l,null,f)},ki.createRoot=function(o,l){if(!Sw(o))throw Error(t(299));var f=!1,g="",w=bk;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),l=xw(o,1,!1,null,null,f,!1,g,w),o[io]=l.current,of(o.nodeType===8?o.parentNode:o),new bw(l)},ki.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=XS(l),o=o===null?null:o.stateNode,o},ki.flushSync=function(o){return Ol(o)},ki.hydrate=function(o,l,f){if(!Ry(l))throw Error(t(200));return Ny(null,o,l,!0,f)},ki.hydrateRoot=function(o,l,f){if(!Sw(o))throw Error(t(405));var g=f!=null&&f.hydratedSources||null,w=!1,S="",R=bk;if(f!=null&&(f.unstable_strictMode===!0&&(w=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onRecoverableError!==void 0&&(R=f.onRecoverableError)),l=xk(l,null,o,1,f??null,w,!1,S,R),o[io]=l.current,of(o),g)for(o=0;o<g.length;o++)f=g[o],w=f._getVersion,w=w(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,w]:l.mutableSourceEagerHydrationData.push(f,w);return new Py(l)},ki.render=function(o,l,f){if(!Ry(l))throw Error(t(200));return Ny(null,o,l,!1,f)},ki.unmountComponentAtNode=function(o){if(!Ry(o))throw Error(t(40));return o._reactRootContainer?(Ol(function(){Ny(null,null,o,!1,function(){o._reactRootContainer=null,o[io]=null})}),!0):!1},ki.unstable_batchedUpdates=fw,ki.unstable_renderSubtreeIntoContainer=function(o,l,f,g){if(!Ry(f))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Ny(o,l,f,!1,g)},ki.version="18.3.1-next-f1338f8080-20240426",ki}var Nk;function fL(){if(Nk)return Cw.exports;Nk=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Cw.exports=dL(),Cw.exports}var Lk;function pL(){if(Lk)return Dy;Lk=1;var i=fL();return Dy.createRoot=i.createRoot,Dy.hydrateRoot=i.hydrateRoot,Dy}var mL=pL();const gL=bv(mL);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Dk="popstate";function yL(i={}){function e(n,r){let{pathname:s,search:a,hash:u}=n.location;return rb("",{pathname:s,search:a,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:up(r)}return xL(e,t,null,i)}function Ht(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ps(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vL(){return Math.random().toString(36).substring(2,10)}function Ik(i,e){return{usr:i.state,key:i.key,idx:e}}function rb(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Md(e):e,state:t,key:e&&e.key||n||vL()}}function up({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Md(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function xL(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:s=!1}=n,a=r.history,u="POP",h=null,d=p();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function p(){return(a.state||{idx:null}).idx}function m(){u="POP";let k=p(),C=k==null?null:k-d;d=k,h&&h({action:u,location:A.location,delta:C})}function y(k,C){u="PUSH";let N=rb(A.location,k,C);d=p()+1;let T=Ik(N,d),D=A.createHref(N);try{a.pushState(T,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;r.location.assign(D)}s&&h&&h({action:u,location:A.location,delta:1})}function v(k,C){u="REPLACE";let N=rb(A.location,k,C);d=p();let T=Ik(N,d),D=A.createHref(N);a.replaceState(T,"",D),s&&h&&h({action:u,location:A.location,delta:0})}function E(k){return wL(k)}let A={get action(){return u},get location(){return i(r,a)},listen(k){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(Dk,m),h=k,()=>{r.removeEventListener(Dk,m),h=null}},createHref(k){return e(r,k)},createURL:E,encodeLocation(k){let C=E(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:v,go(k){return a.go(k)}};return A}function wL(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:up(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function y_(i,e,t="/"){return bL(i,e,t,!1)}function bL(i,e,t,n){let r=typeof e=="string"?Md(e):e,s=na(r.pathname||"/",t);if(s==null)return null;let a=v_(i);SL(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let d=DL(s);u=NL(a[h],d,n)}return u}function v_(i,e=[],t=[],n="",r=!1){let s=(a,u,h=r,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&h)return;Ht(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let m=Jo([n,p.relativePath]),y=t.concat(p);a.children&&a.children.length>0&&(Ht(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),v_(a.children,e,y,m,h)),!(a.path==null&&!a.index)&&e.push({path:m,score:PL(m,a.index),routesMeta:y})};return i.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,u);else for(let d of x_(a.path))s(a,u,!0,d)}),e}function x_(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let a=x_(n.join("/")),u=[];return u.push(...a.map(h=>h===""?s:[s,h].join("/"))),r&&u.push(...a),u.map(h=>i.startsWith("/")&&h===""?"/":h)}function SL(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:RL(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var EL=/^:[\w-]+$/,AL=3,kL=2,CL=1,_L=10,TL=-2,Mk=i=>i==="*";function PL(i,e){let t=i.split("/"),n=t.length;return t.some(Mk)&&(n+=TL),e&&(n+=kL),t.filter(r=>!Mk(r)).reduce((r,s)=>r+(EL.test(s)?AL:s===""?CL:_L),n)}function RL(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function NL(i,e,t=!1){let{routesMeta:n}=i,r={},s="/",a=[];for(let u=0;u<n.length;++u){let h=n[u],d=u===n.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=F0({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},p),y=h.route;if(!m&&d&&t&&!n[n.length-1].route.index&&(m=F0({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!m)return null;Object.assign(r,m.params),a.push({params:r,pathname:Jo([s,m.pathname]),pathnameBase:OL(Jo([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=Jo([s,m.pathnameBase]))}return a}function F0(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=LL(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((d,{paramName:p,isOptional:m},y)=>{if(p==="*"){let E=u[y]||"";a=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const v=u[y];return m&&!v?d[p]=void 0:d[p]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:i}}function LL(i,e=!1,t=!0){ps(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function DL(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ps(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function na(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}var w_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IL=i=>w_.test(i);function ML(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Md(i):i,s;if(t)if(IL(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),ps(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${t}`)}t.startsWith("/")?s=Fk(t.substring(1),"/"):s=Fk(t,e)}else s=e;return{pathname:s,search:jL(n),hash:BL(r)}}function Fk(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Pw(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FL(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function b_(i){let e=FL(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function S_(i,e,t,n=!1){let r;typeof i=="string"?r=Md(i):(r={...i},Ht(!r.pathname||!r.pathname.includes("?"),Pw("?","pathname","search",r)),Ht(!r.pathname||!r.pathname.includes("#"),Pw("#","pathname","hash",r)),Ht(!r.search||!r.search.includes("#"),Pw("#","search","hash",r)));let s=i===""||r.pathname==="",a=s?"/":r.pathname,u;if(a==null)u=t;else{let m=e.length-1;if(!n&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;r.pathname=y.join("/")}u=m>=0?e[m]:"/"}let h=ML(r,u),d=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||p)&&(h.pathname+="/"),h}var Jo=i=>i.join("/").replace(/\/\/+/g,"/"),OL=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),jL=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,BL=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,zL=class{constructor(i,e,t,n=!1){this.status=i,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function UL(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function HL(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var E_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function A_(i,e){let t=i;if(typeof t!="string"||!w_.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,r=!1;if(E_)try{let s=new URL(window.location.href),a=t.startsWith("//")?new URL(s.protocol+t):new URL(t),u=na(a.pathname,e);a.origin===s.origin&&u!=null?t=u+a.search+a.hash:r=!0}catch{ps(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var k_=["POST","PUT","PATCH","DELETE"];new Set(k_);var $L=["GET",...k_];new Set($L);var Fd=$.createContext(null);Fd.displayName="DataRouter";var Sv=$.createContext(null);Sv.displayName="DataRouterState";var VL=$.createContext(!1),C_=$.createContext({isTransitioning:!1});C_.displayName="ViewTransition";var WL=$.createContext(new Map);WL.displayName="Fetchers";var GL=$.createContext(null);GL.displayName="Await";var Vr=$.createContext(null);Vr.displayName="Navigation";var lg=$.createContext(null);lg.displayName="Location";var sa=$.createContext({outlet:null,matches:[],isDataRoute:!1});sa.displayName="Route";var J1=$.createContext(null);J1.displayName="RouteError";var __="REACT_ROUTER_ERROR",qL="REDIRECT",XL="ROUTE_ERROR_RESPONSE";function KL(i){if(i.startsWith(`${__}:${qL}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function YL(i){if(i.startsWith(`${__}:${XL}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new zL(e.status,e.statusText,e.data)}catch{}}function QL(i,{relative:e}={}){Ht(cg(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=$.useContext(Vr),{hash:r,pathname:s,search:a}=ug(i,{relative:e}),u=s;return t!=="/"&&(u=s==="/"?t:Jo([t,s])),n.createHref({pathname:u,search:a,hash:r})}function cg(){return $.useContext(lg)!=null}function Al(){return Ht(cg(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(lg).location}var T_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P_(i){$.useContext(Vr).static||$.useLayoutEffect(i)}function R_(){let{isDataRoute:i}=$.useContext(sa);return i?uD():JL()}function JL(){Ht(cg(),"useNavigate() may be used only in the context of a <Router> component.");let i=$.useContext(Fd),{basename:e,navigator:t}=$.useContext(Vr),{matches:n}=$.useContext(sa),{pathname:r}=Al(),s=JSON.stringify(b_(n)),a=$.useRef(!1);return P_(()=>{a.current=!0}),$.useCallback((h,d={})=>{if(ps(a.current,T_),!a.current)return;if(typeof h=="number"){t.go(h);return}let p=S_(h,JSON.parse(s),r,d.relative==="path");i==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Jo([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,s,r,i])}$.createContext(null);function ug(i,{relative:e}={}){let{matches:t}=$.useContext(sa),{pathname:n}=Al(),r=JSON.stringify(b_(t));return $.useMemo(()=>S_(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function ZL(i,e){return N_(i,e)}function N_(i,e,t,n,r){var N;Ht(cg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=$.useContext(Vr),{matches:a}=$.useContext(sa),u=a[a.length-1],h=u?u.params:{},d=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let T=m&&m.path||"";D_(d,!m||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let y=Al(),v;if(e){let T=typeof e=="string"?Md(e):e;Ht(p==="/"||((N=T.pathname)==null?void 0:N.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=y;let E=v.pathname||"/",A=E;if(p!=="/"){let T=p.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(T.length).join("/")}let k=y_(i,{pathname:A});ps(m||k!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),ps(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=rD(k&&k.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:Jo([p,s.encodeLocation?s.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:Jo([p,s.encodeLocation?s.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),a,t,n,r);return e&&C?$.createElement(lg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},C):C}function eD(){let i=cD(),e=UL(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",i),a=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:s},"ErrorBoundary")," or"," ",$.createElement("code",{style:s},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:r},t):null,a)}var tD=$.createElement(eD,null),L_=class extends $.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const t=YL(i.digest);t&&(i=t)}let e=i!==void 0?$.createElement(sa.Provider,{value:this.props.routeContext},$.createElement(J1.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?$.createElement(nD,{error:i},e):e}};L_.contextType=VL;var Rw=new WeakMap;function nD({children:i,error:e}){let{basename:t}=$.useContext(Vr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=KL(e.digest);if(n){let r=Rw.get(e);if(r)throw r;let s=A_(n.location,t);if(E_&&!Rw.get(e))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw Rw.set(e,a),a}return $.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return i}function iD({routeContext:i,match:e,children:t}){let n=$.useContext(Fd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(sa.Provider,{value:i},t)}function rD(i,e=[],t=null,n=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let s=i,a=t==null?void 0:t.errors;if(a!=null){let p=s.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);Ht(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,h=-1;if(t)for(let p=0;p<s.length;p++){let m=s[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:y,errors:v}=t,E=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||E){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}let d=t&&n?(p,m)=>{var y,v;n(p,{location:t.location,params:((v=(y=t.matches)==null?void 0:y[0])==null?void 0:v.params)??{},unstable_pattern:HL(t.matches),errorInfo:m})}:void 0;return s.reduceRight((p,m,y)=>{let v,E=!1,A=null,k=null;t&&(v=a&&m.route.id?a[m.route.id]:void 0,A=m.route.errorElement||tD,u&&(h<0&&y===0?(D_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,k=null):h===y&&(E=!0,k=m.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,y+1)),N=()=>{let T;return v?T=A:E?T=k:m.route.Component?T=$.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=p,$.createElement(iD,{match:m,routeContext:{outlet:p,matches:C,isDataRoute:t!=null},children:T})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?$.createElement(L_,{location:t.location,revalidation:t.revalidation,component:A,error:v,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:d}):N()},null)}function Z1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sD(i){let e=$.useContext(Fd);return Ht(e,Z1(i)),e}function oD(i){let e=$.useContext(Sv);return Ht(e,Z1(i)),e}function aD(i){let e=$.useContext(sa);return Ht(e,Z1(i)),e}function eS(i){let e=aD(i),t=e.matches[e.matches.length-1];return Ht(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function lD(){return eS("useRouteId")}function cD(){var n;let i=$.useContext(J1),e=oD("useRouteError"),t=eS("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function uD(){let{router:i}=sD("useNavigate"),e=eS("useNavigate"),t=$.useRef(!1);return P_(()=>{t.current=!0}),$.useCallback(async(r,s={})=>{ps(t.current,T_),t.current&&(typeof r=="number"?await i.navigate(r):await i.navigate(r,{fromRouteId:e,...s}))},[i,e])}var Ok={};function D_(i,e,t){!e&&!Ok[i]&&(Ok[i]=!0,ps(!1,t))}$.memo(hD);function hD({routes:i,future:e,state:t,onError:n}){return N_(i,void 0,t,n,e)}function _a(i){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dD({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:s=!1,unstable_useTransitions:a}){Ht(!cg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),h=$.useMemo(()=>({basename:u,navigator:r,static:s,unstable_useTransitions:a,future:{}}),[u,r,s,a]);typeof t=="string"&&(t=Md(t));let{pathname:d="/",search:p="",hash:m="",state:y=null,key:v="default"}=t,E=$.useMemo(()=>{let A=na(d,u);return A==null?null:{location:{pathname:A,search:p,hash:m,state:y,key:v},navigationType:n}},[u,d,p,m,y,v,n]);return ps(E!=null,`<Router basename="${u}"> is not able to match the URL "${d}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:$.createElement(Vr.Provider,{value:h},$.createElement(lg.Provider,{children:e,value:E}))}function fD({children:i,location:e}){return ZL(sb(i),e)}function sb(i,e=[]){let t=[];return $.Children.forEach(i,(n,r)=>{if(!$.isValidElement(n))return;let s=[...e,r];if(n.type===$.Fragment){t.push.apply(t,sb(n.props.children,s));return}Ht(n.type===_a,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=sb(n.props.children,s)),t.push(a)}),t}var Ky="get",Yy="application/x-www-form-urlencoded";function Ev(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function pD(i){return Ev(i)&&i.tagName.toLowerCase()==="button"}function mD(i){return Ev(i)&&i.tagName.toLowerCase()==="form"}function gD(i){return Ev(i)&&i.tagName.toLowerCase()==="input"}function yD(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function vD(i,e){return i.button===0&&(!e||e==="_self")&&!yD(i)}var Iy=null;function xD(){if(Iy===null)try{new FormData(document.createElement("form"),0),Iy=!1}catch{Iy=!0}return Iy}var wD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nw(i){return i!=null&&!wD.has(i)?(ps(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yy}"`),null):i}function bD(i,e){let t,n,r,s,a;if(mD(i)){let u=i.getAttribute("action");n=u?na(u,e):null,t=i.getAttribute("method")||Ky,r=Nw(i.getAttribute("enctype"))||Yy,s=new FormData(i)}else if(pD(i)||gD(i)&&(i.type==="submit"||i.type==="image")){let u=i.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=i.getAttribute("formaction")||u.getAttribute("action");if(n=h?na(h,e):null,t=i.getAttribute("formmethod")||u.getAttribute("method")||Ky,r=Nw(i.getAttribute("formenctype"))||Nw(u.getAttribute("enctype"))||Yy,s=new FormData(u,i),!xD()){let{name:d,type:p,value:m}=i;if(p==="image"){let y=d?`${d}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else d&&s.append(d,m)}}else{if(Ev(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ky,n=null,r=Yy,a=i}return s&&r==="text/plain"&&(a=s,s=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tS(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function SD(i,e,t,n){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${n}`:r.pathname=`${r.pathname}.${n}`:r.pathname==="/"?r.pathname=`_root.${n}`:e&&na(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function ED(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function kD(i,e,t){let n=await Promise.all(i.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await ED(s,t);return a.links?a.links():[]}return[]}));return PD(n.flat(1).filter(AD).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function jk(i,e,t,n,r,s){let a=(h,d)=>t[d]?h.route.id!==t[d].route.id:!0,u=(h,d)=>{var p;return t[d].pathname!==h.pathname||((p=t[d].route.path)==null?void 0:p.endsWith("*"))&&t[d].params["*"]!==h.params["*"]};return s==="assets"?e.filter((h,d)=>a(h,d)||u(h,d)):s==="data"?e.filter((h,d)=>{var m;let p=n.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(a(h,d)||u(h,d))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(i,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function CD(i,e,{includeHydrateFallback:t}={}){return _D(i.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function _D(i){return[...new Set(i)]}function TD(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function PD(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let s=JSON.stringify(TD(r));return t.has(s)||(t.add(s),n.push({key:s,link:r})),n},[])}function I_(){let i=$.useContext(Fd);return tS(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function RD(){let i=$.useContext(Sv);return tS(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var nS=$.createContext(void 0);nS.displayName="FrameworkContext";function M_(){let i=$.useContext(nS);return tS(i,"You must render this element inside a <HydratedRouter> element"),i}function ND(i,e){let t=$.useContext(nS),[n,r]=$.useState(!1),[s,a]=$.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:d,onMouseLeave:p,onTouchStart:m}=e,y=$.useRef(null);$.useEffect(()=>{if(i==="render"&&a(!0),i==="viewport"){let A=C=>{C.forEach(N=>{a(N.isIntersecting)})},k=new IntersectionObserver(A,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[i]),$.useEffect(()=>{if(n){let A=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(A)}}},[n]);let v=()=>{r(!0)},E=()=>{r(!1),a(!1)};return t?i!=="intent"?[s,y,{}]:[s,y,{onFocus:kf(u,v),onBlur:kf(h,E),onMouseEnter:kf(d,v),onMouseLeave:kf(p,E),onTouchStart:kf(m,v)}]:[!1,y,{}]}function kf(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function LD({page:i,...e}){let{router:t}=I_(),n=$.useMemo(()=>y_(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?$.createElement(ID,{page:i,matches:n,...e}):null}function DD(i){let{manifest:e,routeModules:t}=M_(),[n,r]=$.useState([]);return $.useEffect(()=>{let s=!1;return kD(i,e,t).then(a=>{s||r(a)}),()=>{s=!0}},[i,e,t]),n}function ID({page:i,matches:e,...t}){let n=Al(),{future:r,manifest:s,routeModules:a}=M_(),{basename:u}=I_(),{loaderData:h,matches:d}=RD(),p=$.useMemo(()=>jk(i,e,d,s,n,"data"),[i,e,d,s,n]),m=$.useMemo(()=>jk(i,e,d,s,n,"assets"),[i,e,d,s,n]),y=$.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let A=new Set,k=!1;if(e.forEach(N=>{var D;let T=s.routes[N.route.id];!T||!T.hasLoader||(!p.some(F=>F.route.id===N.route.id)&&N.route.id in h&&((D=a[N.route.id])!=null&&D.shouldRevalidate)||T.hasClientLoader?k=!0:A.add(N.route.id))}),A.size===0)return[];let C=SD(i,u,r.unstable_trailingSlashAwareDataRequests,"data");return k&&A.size>0&&C.searchParams.set("_routes",e.filter(N=>A.has(N.route.id)).map(N=>N.route.id).join(",")),[C.pathname+C.search]},[u,r.unstable_trailingSlashAwareDataRequests,h,n,s,p,e,i,a]),v=$.useMemo(()=>CD(m,s),[m,s]),E=DD(m);return $.createElement($.Fragment,null,y.map(A=>$.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),v.map(A=>$.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),E.map(({key:A,link:k})=>$.createElement("link",{key:A,nonce:t.nonce,...k})))}function MD(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var FD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FD&&(window.__reactRouterVersion="7.12.0")}catch{}function OD({basename:i,children:e,unstable_useTransitions:t,window:n}){let r=$.useRef();r.current==null&&(r.current=yL({window:n,v5Compat:!0}));let s=r.current,[a,u]=$.useState({action:s.action,location:s.location}),h=$.useCallback(d=>{t===!1?u(d):$.startTransition(()=>u(d))},[t]);return $.useLayoutEffect(()=>s.listen(h),[s,h]),$.createElement(dD,{basename:i,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:t})}var F_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iS=$.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:s,replace:a,state:u,target:h,to:d,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...v},E){let{basename:A,unstable_useTransitions:k}=$.useContext(Vr),C=typeof d=="string"&&F_.test(d),N=A_(d,A);d=N.to;let T=QL(d,{relative:r}),[D,F,L]=ND(n,v),j=UD(d,{replace:a,state:u,target:h,preventScrollReset:p,relative:r,viewTransition:m,unstable_defaultShouldRevalidate:y,unstable_useTransitions:k});function G(ee){e&&e(ee),ee.defaultPrevented||j(ee)}let K=$.createElement("a",{...v,...L,href:N.absoluteURL||T,onClick:N.isExternal||s?e:G,ref:MD(E,F),target:h,"data-discover":!C&&t==="render"?"true":void 0});return D&&!C?$.createElement($.Fragment,null,K,$.createElement(LD,{page:T})):K});iS.displayName="Link";var jD=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:s,to:a,viewTransition:u,children:h,...d},p){let m=ug(a,{relative:d.relative}),y=Al(),v=$.useContext(Sv),{navigator:E,basename:A}=$.useContext(Vr),k=v!=null&&GD(m)&&u===!0,C=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,N=y.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(N=N.toLowerCase(),T=T?T.toLowerCase():null,C=C.toLowerCase()),T&&A&&(T=na(T,A)||T);const D=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let F=N===C||!r&&N.startsWith(C)&&N.charAt(D)==="/",L=T!=null&&(T===C||!r&&T.startsWith(C)&&T.charAt(C.length)==="/"),j={isActive:F,isPending:L,isTransitioning:k},G=F?e:void 0,K;typeof n=="function"?K=n(j):K=[n,F?"active":null,L?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let ee=typeof s=="function"?s(j):s;return $.createElement(iS,{...d,"aria-current":G,className:K,ref:p,style:ee,to:a,viewTransition:u},typeof h=="function"?h(j):h)});jD.displayName="NavLink";var BD=$.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:s,method:a=Ky,action:u,onSubmit:h,relative:d,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...v},E)=>{let{unstable_useTransitions:A}=$.useContext(Vr),k=VD(),C=WD(u,{relative:d}),N=a.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&F_.test(u),D=F=>{if(h&&h(F),F.defaultPrevented)return;F.preventDefault();let L=F.nativeEvent.submitter,j=(L==null?void 0:L.getAttribute("formmethod"))||a,G=()=>k(L||F.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:r,state:s,relative:d,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y});A&&t!==!1?$.startTransition(()=>G()):G()};return $.createElement("form",{ref:E,method:N,action:C,onSubmit:n?h:D,...v,"data-discover":!T&&i==="render"?"true":void 0})});BD.displayName="Form";function zD(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O_(i){let e=$.useContext(Fd);return Ht(e,zD(i)),e}function UD(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let d=R_(),p=Al(),m=ug(i,{relative:s});return $.useCallback(y=>{if(vD(y,e)){y.preventDefault();let v=t!==void 0?t:up(p)===up(m),E=()=>d(i,{replace:v,state:n,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:u});h?$.startTransition(()=>E()):E()}},[p,d,m,t,n,e,i,r,s,a,u,h])}var HD=0,$D=()=>`__${String(++HD)}__`;function VD(){let{router:i}=O_("useSubmit"),{basename:e}=$.useContext(Vr),t=lD(),n=i.fetch,r=i.navigate;return $.useCallback(async(s,a={})=>{let{action:u,method:h,encType:d,formData:p,body:m}=bD(s,e);if(a.navigate===!1){let y=a.fetcherKey||$D();await n(y,t,a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||h,formEncType:a.encType||d,flushSync:a.flushSync})}else await r(a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||h,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,r,e,t])}function WD(i,{relative:e}={}){let{basename:t}=$.useContext(Vr),n=$.useContext(sa);Ht(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),s={...ug(i||".",{relative:e})},a=Al();if(i==null){s.search=a.search;let u=new URLSearchParams(s.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();s.search=p?`?${p}`:""}}return(!i||i===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Jo([t,s.pathname])),up(s)}function GD(i,{relative:e}={}){let t=$.useContext(C_);Ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=O_("useViewTransitionState"),r=ug(i,{relative:e});if(!t.isTransitioning)return!1;let s=na(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=na(t.nextLocation.pathname,n)||t.nextLocation.pathname;return F0(r.pathname,a)!=null||F0(r.pathname,s)!=null}const qD=()=>{const i=Al(),e=[{path:"/",label:"",icon:"",description:""},{path:"/portfolio",label:"",icon:"",description:"  "},{path:"/macro",label:"",icon:"",description:" "},{path:"/daily-study",label:"",icon:"",description:"AI   "},{path:"/learning",label:"",icon:"",description:" "},{path:"/weekly",label:"",icon:"",description:" "},{path:"/settings",label:"",icon:"",description:" "}];return x.jsx("nav",{className:"navigation",children:x.jsxs("div",{className:"nav-container",children:[x.jsxs("div",{className:"nav-brand",children:[x.jsx("span",{className:"nav-brand-icon",children:""}),x.jsx("span",{className:"nav-brand-text",children:"Stock Study"})]}),x.jsx("ul",{className:"nav-menu",children:e.map(t=>x.jsx("li",{children:x.jsxs(iS,{to:t.path,className:`nav-link ${i.pathname===t.path?"nav-link-active":""}`,title:t.description,children:[x.jsx("span",{className:"nav-link-icon",children:t.icon}),x.jsx("span",{className:"nav-link-text",children:t.label})]})},t.path))})]})})},Pa={LEVERAGE:"leverage",GROWTH:"growth",DIVIDEND:"dividend",INVERSE:"inverse",VALUE:"value",DEFENSE:"defense"},j_={[Pa.LEVERAGE]:" ",[Pa.GROWTH]:" /",[Pa.DIVIDEND]:" ",[Pa.INVERSE]:" ",[Pa.VALUE]:" /",[Pa.DEFENSE]:" "},Uu={KR:"KR",US:"US"},Ys={KRW:"KRW",USD:"USD"},XD={NEUTRAL:0},KD=[{id:"usd-krw",name:"USD/KRW ",unit:"KRW",defaultValue:1477.35},{id:"kospi",name:"KOSPI / KOSDAQ",unit:"Index",defaultValue:948.98},{id:"sp500",name:"S&P 500 ",unit:"Index",defaultValue:6977.27},{id:"vix",name:"VIX  ",unit:"Index",defaultValue:15.26},{id:"fear-greed",name:"Fear & Greed Index",unit:"Index (0-100)",defaultValue:65},{id:"us-10y-yield",name:" 10 ",unit:"%",defaultValue:4.1},{id:"unemployment",name:" ",unit:"%",defaultValue:3.7},{id:"cpi",name:"CPI ",unit:"%",defaultValue:3.1},{id:"fed-rate",name:"  ",unit:"%",defaultValue:5.5},{id:"oil-price",name:"WTI ",unit:"USD/barrel",defaultValue:72.5}],rS=1477,B_={PRIMARY:"https://api.frankfurter.app/latest?from=USD&to=KRW",FALLBACK:"https://api.exchangerate-api.com/v4/latest/USD"},Qs={PORTFOLIO:"insight-log-portfolio",JOURNALS:"insight-log-journals",STUDIES:"insight-log-studies",MACRO:"insight-log-macro",SETTINGS:"insight-log-settings"},Cf=(i,e)=>{try{const t=JSON.stringify(e);return localStorage.setItem(i,t),!0}catch(t){return console.error("Error saving to localStorage:",t),t.name==="QuotaExceededError"&&alert("  .   ."),!1}},_f=(i,e=null)=>{try{const t=localStorage.getItem(i);return t===null?e:JSON.parse(t)}catch(t){return console.error("Error loading from localStorage:",t),e}};function z_(i,e){return function(){return i.apply(e,arguments)}}const{toString:YD}=Object.prototype,{getPrototypeOf:sS}=Object,{iterator:Av,toStringTag:U_}=Symbol,kv=(i=>e=>{const t=YD.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),gs=i=>(i=i.toLowerCase(),e=>kv(e)===i),Cv=i=>e=>typeof e===i,{isArray:Od}=Array,Id=Cv("undefined");function hg(i){return i!==null&&!Id(i)&&i.constructor!==null&&!Id(i.constructor)&&Fi(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const H_=gs("ArrayBuffer");function QD(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&H_(i.buffer),e}const JD=Cv("string"),Fi=Cv("function"),$_=Cv("number"),dg=i=>i!==null&&typeof i=="object",ZD=i=>i===!0||i===!1,Qy=i=>{if(kv(i)!=="object")return!1;const e=sS(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(U_ in i)&&!(Av in i)},eI=i=>{if(!dg(i)||hg(i))return!1;try{return Object.keys(i).length===0&&Object.getPrototypeOf(i)===Object.prototype}catch{return!1}},tI=gs("Date"),nI=gs("File"),iI=gs("Blob"),rI=gs("FileList"),sI=i=>dg(i)&&Fi(i.pipe),oI=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||Fi(i.append)&&((e=kv(i))==="formdata"||e==="object"&&Fi(i.toString)&&i.toString()==="[object FormData]"))},aI=gs("URLSearchParams"),[lI,cI,uI,hI]=["ReadableStream","Request","Response","Headers"].map(gs),dI=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fg(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),Od(i))for(n=0,r=i.length;n<r;n++)e.call(null,i[n],n,i);else{if(hg(i))return;const s=t?Object.getOwnPropertyNames(i):Object.keys(i),a=s.length;let u;for(n=0;n<a;n++)u=s[n],e.call(null,i[u],u,i)}}function V_(i,e){if(hg(i))return null;e=e.toLowerCase();const t=Object.keys(i);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const ql=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,W_=i=>!Id(i)&&i!==ql;function ob(){const{caseless:i,skipUndefined:e}=W_(this)&&this||{},t={},n=(r,s)=>{const a=i&&V_(t,s)||s;Qy(t[a])&&Qy(r)?t[a]=ob(t[a],r):Qy(r)?t[a]=ob({},r):Od(r)?t[a]=r.slice():(!e||!Id(r))&&(t[a]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&fg(arguments[r],n);return t}const fI=(i,e,t,{allOwnKeys:n}={})=>(fg(e,(r,s)=>{t&&Fi(r)?i[s]=z_(r,t):i[s]=r},{allOwnKeys:n}),i),pI=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),mI=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},gI=(i,e,t,n)=>{let r,s,a;const u={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),s=r.length;s-- >0;)a=r[s],(!n||n(a,i,e))&&!u[a]&&(e[a]=i[a],u[a]=!0);i=t!==!1&&sS(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},yI=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},vI=i=>{if(!i)return null;if(Od(i))return i;let e=i.length;if(!$_(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},xI=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&sS(Uint8Array)),wI=(i,e)=>{const n=(i&&i[Av]).call(i);let r;for(;(r=n.next())&&!r.done;){const s=r.value;e.call(i,s[0],s[1])}},bI=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},SI=gs("HTMLFormElement"),EI=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),Bk=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),AI=gs("RegExp"),G_=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};fg(t,(r,s)=>{let a;(a=e(r,s,i))!==!1&&(n[s]=a||r)}),Object.defineProperties(i,n)},kI=i=>{G_(i,(e,t)=>{if(Fi(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(Fi(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},CI=(i,e)=>{const t={},n=r=>{r.forEach(s=>{t[s]=!0})};return Od(i)?n(i):n(String(i).split(e)),t},_I=()=>{},TI=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e;function PI(i){return!!(i&&Fi(i.append)&&i[U_]==="FormData"&&i[Av])}const RI=i=>{const e=new Array(10),t=(n,r)=>{if(dg(n)){if(e.indexOf(n)>=0)return;if(hg(n))return n;if(!("toJSON"in n)){e[r]=n;const s=Od(n)?[]:{};return fg(n,(a,u)=>{const h=t(a,r+1);!Id(h)&&(s[u]=h)}),e[r]=void 0,s}}return n};return t(i,0)},NI=gs("AsyncFunction"),LI=i=>i&&(dg(i)||Fi(i))&&Fi(i.then)&&Fi(i.catch),q_=((i,e)=>i?setImmediate:e?((t,n)=>(ql.addEventListener("message",({source:r,data:s})=>{r===ql&&s===t&&n.length&&n.shift()()},!1),r=>{n.push(r),ql.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Fi(ql.postMessage)),DI=typeof queueMicrotask<"u"?queueMicrotask.bind(ql):typeof process<"u"&&process.nextTick||q_,II=i=>i!=null&&Fi(i[Av]),Y={isArray:Od,isArrayBuffer:H_,isBuffer:hg,isFormData:oI,isArrayBufferView:QD,isString:JD,isNumber:$_,isBoolean:ZD,isObject:dg,isPlainObject:Qy,isEmptyObject:eI,isReadableStream:lI,isRequest:cI,isResponse:uI,isHeaders:hI,isUndefined:Id,isDate:tI,isFile:nI,isBlob:iI,isRegExp:AI,isFunction:Fi,isStream:sI,isURLSearchParams:aI,isTypedArray:xI,isFileList:rI,forEach:fg,merge:ob,extend:fI,trim:dI,stripBOM:pI,inherits:mI,toFlatObject:gI,kindOf:kv,kindOfTest:gs,endsWith:yI,toArray:vI,forEachEntry:wI,matchAll:bI,isHTMLForm:SI,hasOwnProperty:Bk,hasOwnProp:Bk,reduceDescriptors:G_,freezeMethods:kI,toObjectSet:CI,toCamelCase:EI,noop:_I,toFiniteNumber:TI,findKey:V_,global:ql,isContextDefined:W_,isSpecCompliantForm:PI,toJSONObject:RI,isAsyncFn:NI,isThenable:LI,setImmediate:q_,asap:DI,isIterable:II};function Ve(i,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}Y.inherits(Ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Y.toJSONObject(this.config),code:this.code,status:this.status}}});const X_=Ve.prototype,K_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{K_[i]={value:i}});Object.defineProperties(Ve,K_);Object.defineProperty(X_,"isAxiosError",{value:!0});Ve.from=(i,e,t,n,r,s)=>{const a=Object.create(X_);Y.toFlatObject(i,a,function(p){return p!==Error.prototype},d=>d!=="isAxiosError");const u=i&&i.message?i.message:"Error",h=e==null&&i?i.code:e;return Ve.call(a,u,h,t,n,r),i&&a.cause==null&&Object.defineProperty(a,"cause",{value:i,configurable:!0}),a.name=i&&i.name||"Error",s&&Object.assign(a,s),a};const MI=null;function ab(i){return Y.isPlainObject(i)||Y.isArray(i)}function Y_(i){return Y.endsWith(i,"[]")?i.slice(0,-2):i}function zk(i,e,t){return i?i.concat(e).map(function(r,s){return r=Y_(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function FI(i){return Y.isArray(i)&&!i.some(ab)}const OI=Y.toFlatObject(Y,{},null,function(e){return/^is[A-Z]/.test(e)});function _v(i,e,t){if(!Y.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=Y.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,k){return!Y.isUndefined(k[A])});const n=t.metaTokens,r=t.visitor||p,s=t.dots,a=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&Y.isSpecCompliantForm(e);if(!Y.isFunction(r))throw new TypeError("visitor must be a function");function d(E){if(E===null)return"";if(Y.isDate(E))return E.toISOString();if(Y.isBoolean(E))return E.toString();if(!h&&Y.isBlob(E))throw new Ve("Blob is not supported. Use a Buffer instead.");return Y.isArrayBuffer(E)||Y.isTypedArray(E)?h&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function p(E,A,k){let C=E;if(E&&!k&&typeof E=="object"){if(Y.endsWith(A,"{}"))A=n?A:A.slice(0,-2),E=JSON.stringify(E);else if(Y.isArray(E)&&FI(E)||(Y.isFileList(E)||Y.endsWith(A,"[]"))&&(C=Y.toArray(E)))return A=Y_(A),C.forEach(function(T,D){!(Y.isUndefined(T)||T===null)&&e.append(a===!0?zk([A],D,s):a===null?A:A+"[]",d(T))}),!1}return ab(E)?!0:(e.append(zk(k,A,s),d(E)),!1)}const m=[],y=Object.assign(OI,{defaultVisitor:p,convertValue:d,isVisitable:ab});function v(E,A){if(!Y.isUndefined(E)){if(m.indexOf(E)!==-1)throw Error("Circular reference detected in "+A.join("."));m.push(E),Y.forEach(E,function(C,N){(!(Y.isUndefined(C)||C===null)&&r.call(e,C,Y.isString(N)?N.trim():N,A,y))===!0&&v(C,A?A.concat(N):[N])}),m.pop()}}if(!Y.isObject(i))throw new TypeError("data must be an object");return v(i),e}function Uk(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function oS(i,e){this._pairs=[],i&&_v(i,this,e)}const Q_=oS.prototype;Q_.append=function(e,t){this._pairs.push([e,t])};Q_.toString=function(e){const t=e?function(n){return e.call(this,n,Uk)}:Uk;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function jI(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function J_(i,e,t){if(!e)return i;const n=t&&t.encode||jI;Y.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let s;if(r?s=r(e,t):s=Y.isURLSearchParams(e)?e.toString():new oS(e,t).toString(n),s){const a=i.indexOf("#");a!==-1&&(i=i.slice(0,a)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}class Hk{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Y.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Z_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},BI=typeof URLSearchParams<"u"?URLSearchParams:oS,zI=typeof FormData<"u"?FormData:null,UI=typeof Blob<"u"?Blob:null,HI={isBrowser:!0,classes:{URLSearchParams:BI,FormData:zI,Blob:UI},protocols:["http","https","file","blob","url","data"]},aS=typeof window<"u"&&typeof document<"u",lb=typeof navigator=="object"&&navigator||void 0,$I=aS&&(!lb||["ReactNative","NativeScript","NS"].indexOf(lb.product)<0),VI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",WI=aS&&window.location.href||"http://localhost",GI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:aS,hasStandardBrowserEnv:$I,hasStandardBrowserWebWorkerEnv:VI,navigator:lb,origin:WI},Symbol.toStringTag,{value:"Module"})),si={...GI,...HI};function qI(i,e){return _v(i,new si.classes.URLSearchParams,{visitor:function(t,n,r,s){return si.isNode&&Y.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function XI(i){return Y.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function KI(i){const e={},t=Object.keys(i);let n;const r=t.length;let s;for(n=0;n<r;n++)s=t[n],e[s]=i[s];return e}function eT(i){function e(t,n,r,s){let a=t[s++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),h=s>=t.length;return a=!a&&Y.isArray(r)?r.length:a,h?(Y.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!u):((!r[a]||!Y.isObject(r[a]))&&(r[a]=[]),e(t,n,r[a],s)&&Y.isArray(r[a])&&(r[a]=KI(r[a])),!u)}if(Y.isFormData(i)&&Y.isFunction(i.entries)){const t={};return Y.forEachEntry(i,(n,r)=>{e(XI(n),r,t,0)}),t}return null}function YI(i,e,t){if(Y.isString(i))try{return(e||JSON.parse)(i),Y.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const pg={transitional:Z_,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=Y.isObject(e);if(s&&Y.isHTMLForm(e)&&(e=new FormData(e)),Y.isFormData(e))return r?JSON.stringify(eT(e)):e;if(Y.isArrayBuffer(e)||Y.isBuffer(e)||Y.isStream(e)||Y.isFile(e)||Y.isBlob(e)||Y.isReadableStream(e))return e;if(Y.isArrayBufferView(e))return e.buffer;if(Y.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qI(e,this.formSerializer).toString();if((u=Y.isFileList(e))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return _v(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),YI(e)):e}],transformResponse:[function(e){const t=this.transitional||pg.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(Y.isResponse(e)||Y.isReadableStream(e))return e;if(e&&Y.isString(e)&&(n&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(u){if(a)throw u.name==="SyntaxError"?Ve.from(u,Ve.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:si.classes.FormData,Blob:si.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Y.forEach(["delete","get","head","post","put","patch"],i=>{pg.headers[i]={}});const QI=Y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JI=i=>{const e={};let t,n,r;return i&&i.split(`
`).forEach(function(a){r=a.indexOf(":"),t=a.substring(0,r).trim().toLowerCase(),n=a.substring(r+1).trim(),!(!t||e[t]&&QI[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},$k=Symbol("internals");function Tf(i){return i&&String(i).trim().toLowerCase()}function Jy(i){return i===!1||i==null?i:Y.isArray(i)?i.map(Jy):String(i)}function ZI(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const eM=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function Lw(i,e,t,n,r){if(Y.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!Y.isString(e)){if(Y.isString(n))return e.indexOf(n)!==-1;if(Y.isRegExp(n))return n.test(e)}}function tM(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function nM(i,e){const t=Y.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(r,s,a){return this[n].call(this,e,r,s,a)},configurable:!0})})}let Oi=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(u,h,d){const p=Tf(h);if(!p)throw new Error("header name must be a non-empty string");const m=Y.findKey(r,p);(!m||r[m]===void 0||d===!0||d===void 0&&r[m]!==!1)&&(r[m||h]=Jy(u))}const a=(u,h)=>Y.forEach(u,(d,p)=>s(d,p,h));if(Y.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Y.isString(e)&&(e=e.trim())&&!eM(e))a(JI(e),t);else if(Y.isObject(e)&&Y.isIterable(e)){let u={},h,d;for(const p of e){if(!Y.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[d=p[0]]=(h=u[d])?Y.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}a(u,t)}else e!=null&&s(t,e,n);return this}get(e,t){if(e=Tf(e),e){const n=Y.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return ZI(r);if(Y.isFunction(t))return t.call(this,r,n);if(Y.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Tf(e),e){const n=Y.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Lw(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function s(a){if(a=Tf(a),a){const u=Y.findKey(n,a);u&&(!t||Lw(n,n[u],u,t))&&(delete n[u],r=!0)}}return Y.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];(!e||Lw(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return Y.forEach(this,(r,s)=>{const a=Y.findKey(n,s);if(a){t[a]=Jy(r),delete t[s];return}const u=e?tM(s):String(s).trim();u!==s&&delete t[s],t[u]=Jy(r),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Y.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&Y.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[$k]=this[$k]={accessors:{}}).accessors,r=this.prototype;function s(a){const u=Tf(a);n[u]||(nM(r,a),n[u]=!0)}return Y.isArray(e)?e.forEach(s):s(e),this}};Oi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Y.reduceDescriptors(Oi.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});Y.freezeMethods(Oi);function Dw(i,e){const t=this||pg,n=e||t,r=Oi.from(n.headers);let s=n.data;return Y.forEach(i,function(u){s=u.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function tT(i){return!!(i&&i.__CANCEL__)}function jd(i,e,t){Ve.call(this,i??"canceled",Ve.ERR_CANCELED,e,t),this.name="CanceledError"}Y.inherits(jd,Ve,{__CANCEL__:!0});function nT(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new Ve("Request failed with status code "+t.status,[Ve.ERR_BAD_REQUEST,Ve.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function iM(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function rM(i,e){i=i||10;const t=new Array(i),n=new Array(i);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(h){const d=Date.now(),p=n[s];a||(a=d),t[r]=h,n[r]=d;let m=s,y=0;for(;m!==r;)y+=t[m++],m=m%i;if(r=(r+1)%i,r===s&&(s=(s+1)%i),d-a<e)return;const v=p&&d-p;return v?Math.round(y*1e3/v):void 0}}function sM(i,e){let t=0,n=1e3/e,r,s;const a=(d,p=Date.now())=>{t=p,r=null,s&&(clearTimeout(s),s=null),i(...d)};return[(...d)=>{const p=Date.now(),m=p-t;m>=n?a(d,p):(r=d,s||(s=setTimeout(()=>{s=null,a(r)},n-m)))},()=>r&&a(r)]}const O0=(i,e,t=3)=>{let n=0;const r=rM(50,250);return sM(s=>{const a=s.loaded,u=s.lengthComputable?s.total:void 0,h=a-n,d=r(h),p=a<=u;n=a;const m={loaded:a,total:u,progress:u?a/u:void 0,bytes:h,rate:d||void 0,estimated:d&&u&&p?(u-a)/d:void 0,event:s,lengthComputable:u!=null,[e?"download":"upload"]:!0};i(m)},t)},Vk=(i,e)=>{const t=i!=null;return[n=>e[0]({lengthComputable:t,total:i,loaded:n}),e[1]]},Wk=i=>(...e)=>Y.asap(()=>i(...e)),oM=si.hasStandardBrowserEnv?((i,e)=>t=>(t=new URL(t,si.origin),i.protocol===t.protocol&&i.host===t.host&&(e||i.port===t.port)))(new URL(si.origin),si.navigator&&/(msie|trident)/i.test(si.navigator.userAgent)):()=>!0,aM=si.hasStandardBrowserEnv?{write(i,e,t,n,r,s,a){if(typeof document>"u")return;const u=[`${i}=${encodeURIComponent(e)}`];Y.isNumber(t)&&u.push(`expires=${new Date(t).toUTCString()}`),Y.isString(n)&&u.push(`path=${n}`),Y.isString(r)&&u.push(`domain=${r}`),s===!0&&u.push("secure"),Y.isString(a)&&u.push(`SameSite=${a}`),document.cookie=u.join("; ")},read(i){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+i+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(i){this.write(i,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function lM(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function cM(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function iT(i,e,t){let n=!lM(e);return i&&(n||t==!1)?cM(i,e):e}const Gk=i=>i instanceof Oi?{...i}:i;function uu(i,e){e=e||{};const t={};function n(d,p,m,y){return Y.isPlainObject(d)&&Y.isPlainObject(p)?Y.merge.call({caseless:y},d,p):Y.isPlainObject(p)?Y.merge({},p):Y.isArray(p)?p.slice():p}function r(d,p,m,y){if(Y.isUndefined(p)){if(!Y.isUndefined(d))return n(void 0,d,m,y)}else return n(d,p,m,y)}function s(d,p){if(!Y.isUndefined(p))return n(void 0,p)}function a(d,p){if(Y.isUndefined(p)){if(!Y.isUndefined(d))return n(void 0,d)}else return n(void 0,p)}function u(d,p,m){if(m in e)return n(d,p);if(m in i)return n(void 0,d)}const h={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(d,p,m)=>r(Gk(d),Gk(p),m,!0)};return Y.forEach(Object.keys({...i,...e}),function(p){const m=h[p]||r,y=m(i[p],e[p],p);Y.isUndefined(y)&&m!==u||(t[p]=y)}),t}const rT=i=>{const e=uu({},i);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:s,headers:a,auth:u}=e;if(e.headers=a=Oi.from(a),e.url=J_(iT(e.baseURL,e.url,e.allowAbsoluteUrls),i.params,i.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),Y.isFormData(t)){if(si.hasStandardBrowserEnv||si.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(Y.isFunction(t.getHeaders)){const h=t.getHeaders(),d=["content-type","content-length"];Object.entries(h).forEach(([p,m])=>{d.includes(p.toLowerCase())&&a.set(p,m)})}}if(si.hasStandardBrowserEnv&&(n&&Y.isFunction(n)&&(n=n(e)),n||n!==!1&&oM(e.url))){const h=r&&s&&aM.read(s);h&&a.set(r,h)}return e},uM=typeof XMLHttpRequest<"u",hM=uM&&function(i){return new Promise(function(t,n){const r=rT(i);let s=r.data;const a=Oi.from(r.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:d}=r,p,m,y,v,E;function A(){v&&v(),E&&E(),r.cancelToken&&r.cancelToken.unsubscribe(p),r.signal&&r.signal.removeEventListener("abort",p)}let k=new XMLHttpRequest;k.open(r.method.toUpperCase(),r.url,!0),k.timeout=r.timeout;function C(){if(!k)return;const T=Oi.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),F={data:!u||u==="text"||u==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:T,config:i,request:k};nT(function(j){t(j),A()},function(j){n(j),A()},F),k=null}"onloadend"in k?k.onloadend=C:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(C)},k.onabort=function(){k&&(n(new Ve("Request aborted",Ve.ECONNABORTED,i,k)),k=null)},k.onerror=function(D){const F=D&&D.message?D.message:"Network Error",L=new Ve(F,Ve.ERR_NETWORK,i,k);L.event=D||null,n(L),k=null},k.ontimeout=function(){let D=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const F=r.transitional||Z_;r.timeoutErrorMessage&&(D=r.timeoutErrorMessage),n(new Ve(D,F.clarifyTimeoutError?Ve.ETIMEDOUT:Ve.ECONNABORTED,i,k)),k=null},s===void 0&&a.setContentType(null),"setRequestHeader"in k&&Y.forEach(a.toJSON(),function(D,F){k.setRequestHeader(F,D)}),Y.isUndefined(r.withCredentials)||(k.withCredentials=!!r.withCredentials),u&&u!=="json"&&(k.responseType=r.responseType),d&&([y,E]=O0(d,!0),k.addEventListener("progress",y)),h&&k.upload&&([m,v]=O0(h),k.upload.addEventListener("progress",m),k.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(p=T=>{k&&(n(!T||T.type?new jd(null,i,k):T),k.abort(),k=null)},r.cancelToken&&r.cancelToken.subscribe(p),r.signal&&(r.signal.aborted?p():r.signal.addEventListener("abort",p)));const N=iM(r.url);if(N&&si.protocols.indexOf(N)===-1){n(new Ve("Unsupported protocol "+N+":",Ve.ERR_BAD_REQUEST,i));return}k.send(s||null)})},dM=(i,e)=>{const{length:t}=i=i?i.filter(Boolean):[];if(e||t){let n=new AbortController,r;const s=function(d){if(!r){r=!0,u();const p=d instanceof Error?d:this.reason;n.abort(p instanceof Ve?p:new jd(p instanceof Error?p.message:p))}};let a=e&&setTimeout(()=>{a=null,s(new Ve(`timeout ${e} of ms exceeded`,Ve.ETIMEDOUT))},e);const u=()=>{i&&(a&&clearTimeout(a),a=null,i.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),i=null)};i.forEach(d=>d.addEventListener("abort",s));const{signal:h}=n;return h.unsubscribe=()=>Y.asap(u),h}},fM=function*(i,e){let t=i.byteLength;if(t<e){yield i;return}let n=0,r;for(;n<t;)r=n+e,yield i.slice(n,r),n=r},pM=async function*(i,e){for await(const t of mM(i))yield*fM(t,e)},mM=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},qk=(i,e,t,n)=>{const r=pM(i,e);let s=0,a,u=h=>{a||(a=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:d,value:p}=await r.next();if(d){u(),h.close();return}let m=p.byteLength;if(t){let y=s+=m;t(y)}h.enqueue(new Uint8Array(p))}catch(d){throw u(d),d}},cancel(h){return u(h),r.return()}},{highWaterMark:2})},Xk=64*1024,{isFunction:My}=Y,gM=(({Request:i,Response:e})=>({Request:i,Response:e}))(Y.global),{ReadableStream:Kk,TextEncoder:Yk}=Y.global,Qk=(i,...e)=>{try{return!!i(...e)}catch{return!1}},yM=i=>{i=Y.merge.call({skipUndefined:!0},gM,i);const{fetch:e,Request:t,Response:n}=i,r=e?My(e):typeof fetch=="function",s=My(t),a=My(n);if(!r)return!1;const u=r&&My(Kk),h=r&&(typeof Yk=="function"?(E=>A=>E.encode(A))(new Yk):async E=>new Uint8Array(await new t(E).arrayBuffer())),d=s&&u&&Qk(()=>{let E=!1;const A=new t(si.origin,{body:new Kk,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!A}),p=a&&u&&Qk(()=>Y.isReadableStream(new n("").body)),m={stream:p&&(E=>E.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!m[E]&&(m[E]=(A,k)=>{let C=A&&A[E];if(C)return C.call(A);throw new Ve(`Response type '${E}' is not supported`,Ve.ERR_NOT_SUPPORT,k)})});const y=async E=>{if(E==null)return 0;if(Y.isBlob(E))return E.size;if(Y.isSpecCompliantForm(E))return(await new t(si.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(Y.isArrayBufferView(E)||Y.isArrayBuffer(E))return E.byteLength;if(Y.isURLSearchParams(E)&&(E=E+""),Y.isString(E))return(await h(E)).byteLength},v=async(E,A)=>{const k=Y.toFiniteNumber(E.getContentLength());return k??y(A)};return async E=>{let{url:A,method:k,data:C,signal:N,cancelToken:T,timeout:D,onDownloadProgress:F,onUploadProgress:L,responseType:j,headers:G,withCredentials:K="same-origin",fetchOptions:ee}=rT(E),q=e||fetch;j=j?(j+"").toLowerCase():"text";let re=dM([N,T&&T.toAbortSignal()],D),ue=null;const ie=re&&re.unsubscribe&&(()=>{re.unsubscribe()});let Z;try{if(L&&d&&k!=="get"&&k!=="head"&&(Z=await v(G,C))!==0){let B=new t(A,{method:"POST",body:C,duplex:"half"}),U;if(Y.isFormData(C)&&(U=B.headers.get("content-type"))&&G.setContentType(U),B.body){const[I,pe]=Vk(Z,O0(Wk(L)));C=qk(B.body,Xk,I,pe)}}Y.isString(K)||(K=K?"include":"omit");const se=s&&"credentials"in t.prototype,J={...ee,signal:re,method:k.toUpperCase(),headers:G.normalize().toJSON(),body:C,duplex:"half",credentials:se?K:void 0};ue=s&&new t(A,J);let Q=await(s?q(ue,ee):q(A,J));const me=p&&(j==="stream"||j==="response");if(p&&(F||me&&ie)){const B={};["status","statusText","headers"].forEach(ye=>{B[ye]=Q[ye]});const U=Y.toFiniteNumber(Q.headers.get("content-length")),[I,pe]=F&&Vk(U,O0(Wk(F),!0))||[];Q=new n(qk(Q.body,Xk,I,()=>{pe&&pe(),ie&&ie()}),B)}j=j||"text";let M=await m[Y.findKey(m,j)||"text"](Q,E);return!me&&ie&&ie(),await new Promise((B,U)=>{nT(B,U,{data:M,headers:Oi.from(Q.headers),status:Q.status,statusText:Q.statusText,config:E,request:ue})})}catch(se){throw ie&&ie(),se&&se.name==="TypeError"&&/Load failed|fetch/i.test(se.message)?Object.assign(new Ve("Network Error",Ve.ERR_NETWORK,E,ue),{cause:se.cause||se}):Ve.from(se,se&&se.code,E,ue)}}},vM=new Map,sT=i=>{let e=i&&i.env||{};const{fetch:t,Request:n,Response:r}=e,s=[n,r,t];let a=s.length,u=a,h,d,p=vM;for(;u--;)h=s[u],d=p.get(h),d===void 0&&p.set(h,d=u?new Map:yM(e)),p=d;return d};sT();const lS={http:MI,xhr:hM,fetch:{get:sT}};Y.forEach(lS,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const Jk=i=>`- ${i}`,xM=i=>Y.isFunction(i)||i===null||i===!1;function wM(i,e){i=Y.isArray(i)?i:[i];const{length:t}=i;let n,r;const s={};for(let a=0;a<t;a++){n=i[a];let u;if(r=n,!xM(n)&&(r=lS[(u=String(n)).toLowerCase()],r===void 0))throw new Ve(`Unknown adapter '${u}'`);if(r&&(Y.isFunction(r)||(r=r.get(e))))break;s[u||"#"+a]=r}if(!r){const a=Object.entries(s).map(([h,d])=>`adapter ${h} `+(d===!1?"is not supported by the environment":"is not available in the build"));let u=t?a.length>1?`since :
`+a.map(Jk).join(`
`):" "+Jk(a[0]):"as no adapter specified";throw new Ve("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r}const oT={getAdapter:wM,adapters:lS};function Iw(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new jd(null,i)}function Zk(i){return Iw(i),i.headers=Oi.from(i.headers),i.data=Dw.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),oT.getAdapter(i.adapter||pg.adapter,i)(i).then(function(n){return Iw(i),n.data=Dw.call(i,i.transformResponse,n),n.headers=Oi.from(n.headers),n},function(n){return tT(n)||(Iw(i),n&&n.response&&(n.response.data=Dw.call(i,i.transformResponse,n.response),n.response.headers=Oi.from(n.response.headers))),Promise.reject(n)})}const aT="1.13.2",Tv={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{Tv[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const eC={};Tv.transitional=function(e,t,n){function r(s,a){return"[Axios v"+aT+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,u)=>{if(e===!1)throw new Ve(r(a," has been removed"+(t?" in "+t:"")),Ve.ERR_DEPRECATED);return t&&!eC[a]&&(eC[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,u):!0}};Tv.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function bM(i,e,t){if(typeof i!="object")throw new Ve("options must be an object",Ve.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const s=n[r],a=e[s];if(a){const u=i[s],h=u===void 0||a(u,s,i);if(h!==!0)throw new Ve("option "+s+" must be "+h,Ve.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ve("Unknown option "+s,Ve.ERR_BAD_OPTION)}}const Zy={assertOptions:bM,validators:Tv},Es=Zy.validators;let cu=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Hk,response:new Hk}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=uu(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;n!==void 0&&Zy.assertOptions(n,{silentJSONParsing:Es.transitional(Es.boolean),forcedJSONParsing:Es.transitional(Es.boolean),clarifyTimeoutError:Es.transitional(Es.boolean)},!1),r!=null&&(Y.isFunction(r)?t.paramsSerializer={serialize:r}:Zy.assertOptions(r,{encode:Es.function,serialize:Es.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Zy.assertOptions(t,{baseUrl:Es.spelling("baseURL"),withXsrfToken:Es.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&Y.merge(s.common,s[t.method]);s&&Y.forEach(["delete","get","head","post","put","patch","common"],E=>{delete s[E]}),t.headers=Oi.concat(a,s);const u=[];let h=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(t)===!1||(h=h&&A.synchronous,u.unshift(A.fulfilled,A.rejected))});const d=[];this.interceptors.response.forEach(function(A){d.push(A.fulfilled,A.rejected)});let p,m=0,y;if(!h){const E=[Zk.bind(this),void 0];for(E.unshift(...u),E.push(...d),y=E.length,p=Promise.resolve(t);m<y;)p=p.then(E[m++],E[m++]);return p}y=u.length;let v=t;for(;m<y;){const E=u[m++],A=u[m++];try{v=E(v)}catch(k){A.call(this,k);break}}try{p=Zk.call(this,v)}catch(E){return Promise.reject(E)}for(m=0,y=d.length;m<y;)p=p.then(d[m++],d[m++]);return p}getUri(e){e=uu(this.defaults,e);const t=iT(e.baseURL,e.url,e.allowAbsoluteUrls);return J_(t,e.params,e.paramsSerializer)}};Y.forEach(["delete","get","head","options"],function(e){cu.prototype[e]=function(t,n){return this.request(uu(n||{},{method:e,url:t,data:(n||{}).data}))}});Y.forEach(["post","put","patch"],function(e){function t(n){return function(s,a,u){return this.request(uu(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}cu.prototype[e]=t(),cu.prototype[e+"Form"]=t(!0)});let SM=class lT{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(r=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](r);n._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(u=>{n.subscribe(u),s=u}).then(r);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,u){n.reason||(n.reason=new jd(s,a,u),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new lT(function(r){e=r}),cancel:e}}};function EM(i){return function(t){return i.apply(null,t)}}function AM(i){return Y.isObject(i)&&i.isAxiosError===!0}const cb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(cb).forEach(([i,e])=>{cb[e]=i});function cT(i){const e=new cu(i),t=z_(cu.prototype.request,e);return Y.extend(t,cu.prototype,e,{allOwnKeys:!0}),Y.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return cT(uu(i,r))},t}const Zt=cT(pg);Zt.Axios=cu;Zt.CanceledError=jd;Zt.CancelToken=SM;Zt.isCancel=tT;Zt.VERSION=aT;Zt.toFormData=_v;Zt.AxiosError=Ve;Zt.Cancel=Zt.CanceledError;Zt.all=function(e){return Promise.all(e)};Zt.spread=EM;Zt.isAxiosError=AM;Zt.mergeConfig=uu;Zt.AxiosHeaders=Oi;Zt.formToJSON=i=>eT(Y.isHTMLForm(i)?new FormData(i):i);Zt.getAdapter=oT.getAdapter;Zt.HttpStatusCode=cb;Zt.default=Zt;const{Axios:oU,AxiosError:aU,CanceledError:lU,isCancel:cU,CancelToken:uU,VERSION:hU,all:dU,Cancel:fU,isAxiosError:pU,spread:mU,toFormData:gU,AxiosHeaders:yU,HttpStatusCode:vU,formToJSON:xU,getAdapter:wU,mergeConfig:bU}=Zt,kM=(i,e,t)=>{const n=(e-i)*t,r=i>0?(e-i)/i*100:0;return{profitLoss:n,profitLossRate:r,isProfit:n>0,isLoss:n<0}},uT=(i,e)=>i*e,hT=(i,e)=>{let t=0,n=0,r=0,s=0;return i.forEach(a=>{const u=uT(a.currentPrice,a.quantity);a.currency===Ys.KRW?(r+=u,t+=u):a.currency===Ys.USD&&(s+=u,n+=u,t+=u*e)}),{totalKRW:t,totalUSD:n,krStocksValue:r,usStocksValue:s,usStocksValueInKRW:s*e}},CM=async()=>{try{const i=await Zt.get(B_.PRIMARY,{timeout:5e3});return i.data&&i.data.rates&&i.data.rates.KRW?i.data.rates.KRW:null}catch(i){return console.warn("Frankfurter API failed:",i.message),null}},_M=async()=>{try{const i=await Zt.get(B_.FALLBACK,{timeout:5e3});return i.data&&i.data.rates&&i.data.rates.KRW?i.data.rates.KRW:null}catch(i){return console.warn("ExchangeRate-API failed:",i.message),null}},TM=async()=>{let i=await CM();return i!==null?{rate:Math.round(i),source:"api",error:null,timestamp:Date.now()}:(i=await _M(),i!==null?{rate:Math.round(i),source:"api",error:null,timestamp:Date.now()}:{rate:rS,source:"manual",error:"API  .  .",timestamp:Date.now()})},PM=async(i=2)=>{for(let e=0;e<=i;e++){const t=await TM();if(t.source==="api"&&!t.error)return t;e<i&&await new Promise(n=>setTimeout(n,1e3*Math.pow(2,e)))}return{rate:rS,source:"manual",error:"API  .   .",timestamp:Date.now()}},RM="https://docs.google.com/spreadsheets/d/e/2PACX-1vTE6rU_HSro410_ho2cm9qlg-zgvNQuakmK_iYzRcCpRmS4ZFCnsM_GvZ4egwhTMWjpLs5zwYJB2SSh/pub?output=csv",tC="https://docs.google.com/spreadsheets/d/e/2PACX-1vTt4eUW1ahkWVF5Z6ksdOF0O6Lr1wDagKI6BGwypatyUrnIakh_wQoc6fzN24GU0AWzgFdikZdhc2ug/pub?gid=990988367&single=true&output=csv",dT=i=>{const e=i.trim().split(`
`);if(e.length<2)throw new Error("CSV data is empty or invalid");const t=e[0].split(",").map(r=>r.trim()),n=[];for(let r=1;r<e.length;r++){const s=e[r].split(",").map(h=>h.trim());if(s.some(h=>h.includes("#N/A")||h.includes("#ERROR")||h.includes("#REF!"))){console.warn(`Skipping row ${r+1} due to error values:`,s);continue}const u={};t.forEach((h,d)=>{u[h]=s[d]}),n.push(u)}return n},ub=async()=>{try{console.log(" Fetching data from Google Sheets...");const i=await fetch(RM,{method:"GET",cache:"no-cache"});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const e=await i.text(),t=dT(e);console.log(" Parsed data:",t);const n=[];let r=1300;return t.forEach(s=>{const a=s["Ticker ()"]||s["Ticker (A)"]||s.Ticker||s.ticker||s.TICKER,u=s["Price ()"]||s["Price (B:   )"]||s.Price||s.price||s.PRICE;if(!a||!u){console.warn("Skipping row with missing ticker or price:",s);return}if(u.includes("#N/A")||u.includes("#ERROR")||u.includes("#REF!")){console.warn(`Skipping ${a} with error value: ${u}`);return}if(a.toUpperCase()==="USD"||a.toUpperCase()==="USDKRW"){const h=parseFloat(u.replace(/[^0-9.]/g,""));!isNaN(h)&&h>0&&(r=h,console.log(` Exchange rate found: ${r}`))}else{const h=parseFloat(u.replace(/[^0-9.]/g,""));!isNaN(h)&&h>0&&n.push({ticker:a.trim(),price:h})}}),console.log(` Fetched ${n.length} stock prices and exchange rate: ${r}`),{stocks:n,exchangeRate:r,lastUpdated:new Date().toISOString()}}catch(i){throw console.error(" Error fetching Google Sheet data:",i),i}},hb=(i,e)=>!i||i.length===0?i:i.map(n=>{const r=e.find(s=>s.ticker.toUpperCase()===(n.ticker||n.name).toUpperCase());return r?(console.log(` Updating ${n.name}: ${n.currentPrice}  ${r.price}`),{...n,currentPrice:r.price,lastUpdated:new Date().toISOString()}):n}),NM=async()=>{try{if(console.log(" Fetching portfolio from Google Sheets..."),tC.includes("PORTFOLIO_GID"))return console.warn(" Portfolio sheet gid not configured yet. Skipping portfolio fetch."),null;const i=await fetch(tC,{method:"GET",cache:"no-cache"});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const e=await i.text(),t=dT(e);console.log(" Raw portfolio data:",t);const n=t.map((r,s)=>{const a=r.Name||r.name||r.NAME,u=r.Ticker||r.ticker||r.TICKER,h=r.Country||r.country||r.COUNTRY,d=parseFloat(r.Quantity||r.quantity||r.QUANTITY||0),p=parseFloat(r.AvgPrice||r.avgPrice||r.AVG_PRICE||0),m=(r.Category||r.category||r.CATEGORY||"growth").toLowerCase();return!a||!u||!h?(console.warn("Skipping invalid portfolio row:",r),null):{id:`${h.toLowerCase()}-${u}-${Date.now()}-${s}`,name:a.trim(),ticker:u.trim(),country:h.toUpperCase(),category:m,quantity:d,avgPrice:p,currentPrice:p,currency:h.toUpperCase()==="US"?"USD":"KRW",createdAt:Date.now()}}).filter(r=>r!==null);return console.log(` Fetched ${n.length} stocks from Google Sheets`),n}catch(i){throw console.error(" Error fetching portfolio from Google Sheet:",i),i}},LM=()=>{const i=_f(Qs.PORTFOLIO,null),e=_f(Qs.JOURNALS,null),t=_f(Qs.STUDIES,null),n=_f(Qs.MACRO,KD.map(s=>({...s,value:s.defaultValue,judgment:XD.NEUTRAL,lastUpdated:Date.now()}))),r=_f(Qs.SETTINGS,{exchangeRate:rS,exchangeRateSource:"manual",exchangeRateLastUpdated:Date.now(),currency:"KRW"});return{portfolio:i||[],journals:e||[],studies:t||[],macroIndicators:n,settings:r}},fT=$.createContext(),DM=(i,e)=>{switch(e.type){case"ADD_STOCK":return{...i,portfolio:[...i.portfolio,e.payload]};case"UPDATE_STOCK":return{...i,portfolio:i.portfolio.map(t=>t.id===e.payload.id?e.payload:t)};case"DELETE_STOCK":return{...i,portfolio:i.portfolio.filter(t=>t.id!==e.payload)};case"ADD_JOURNAL":return{...i,journals:[e.payload,...i.journals]};case"UPDATE_JOURNAL":return{...i,journals:i.journals.map(t=>t.id===e.payload.id?e.payload:t)};case"DELETE_JOURNAL":return{...i,journals:i.journals.filter(t=>t.id!==e.payload)};case"ADD_STUDY":return{...i,studies:[e.payload,...i.studies]};case"UPDATE_STUDY":return{...i,studies:i.studies.map(t=>t.id===e.payload.id?{...t,...e.payload.updates}:t)};case"DELETE_STUDY":return{...i,studies:i.studies.filter(t=>t.id!==e.payload)};case"UPDATE_INDICATOR":return{...i,macroIndicators:i.macroIndicators.map(t=>t.id===e.payload.id?{...t,...e.payload.data,lastUpdated:Date.now()}:t)};case"UPDATE_EXCHANGE_RATE":return{...i,settings:{...i.settings,exchangeRate:e.payload.rate,exchangeRateSource:e.payload.source,exchangeRateLastUpdated:e.payload.timestamp}};case"SET_MANUAL_EXCHANGE_RATE":return{...i,settings:{...i.settings,exchangeRate:e.payload,exchangeRateSource:"manual",exchangeRateLastUpdated:Date.now()}};case"UPDATE_PORTFOLIO_PRICES":return{...i,portfolio:e.payload.portfolio,settings:{...i.settings,exchangeRate:e.payload.exchangeRate,exchangeRateSource:"google-sheets",exchangeRateLastUpdated:Date.now()}};case"RESTORE_ALL":return{...i,portfolio:e.payload.portfolio||[],journals:e.payload.journals||[],studies:e.payload.studies||[],macroIndicators:e.payload.macroIndicators||i.macroIndicators,settings:{...i.settings,...e.payload.settings}};default:return i}},IM=({children:i})=>{const[e,t]=$.useReducer(DM,null,LM);return $.useEffect(()=>{Cf(Qs.PORTFOLIO,e.portfolio)},[e.portfolio]),$.useEffect(()=>{Cf(Qs.JOURNALS,e.journals)},[e.journals]),$.useEffect(()=>{Cf(Qs.STUDIES,e.studies)},[e.studies]),$.useEffect(()=>{Cf(Qs.MACRO,e.macroIndicators)},[e.macroIndicators]),$.useEffect(()=>{Cf(Qs.SETTINGS,e.settings)},[e.settings]),$.useEffect(()=>{const n=async()=>{try{if(console.log(" Fetching latest data from Google Sheets..."),e.portfolio.length===0){console.log(" Portfolio is empty, attempting to load from Google Sheets...");try{const u=await NM();if(u&&u.length>0){console.log(` Loaded ${u.length} stocks from Google Sheets`);const h=await ub();if(h){const d=hb(u,h.stocks);t({type:"UPDATE_PORTFOLIO_PRICES",payload:{portfolio:d,exchangeRate:h.exchangeRate}})}else t({type:"UPDATE_PORTFOLIO_PRICES",payload:{portfolio:u,exchangeRate:e.settings.exchangeRate}});return}}catch(u){console.warn(" Could not fetch portfolio from Google Sheets:",u.message)}}const a=await ub();if(a){const u=hb(e.portfolio,a.stocks);t({type:"UPDATE_PORTFOLIO_PRICES",payload:{portfolio:u,exchangeRate:a.exchangeRate}});const h=new Date().toLocaleTimeString("ko-KR");console.log(` Portfolio updated at ${h}`)}}catch(a){console.error(" Failed to fetch Google Sheets data:",a);const u=await PM();u&&u.rate&&t({type:"UPDATE_EXCHANGE_RATE",payload:{rate:u.rate,source:u.source,timestamp:u.timestamp}})}};console.log(" Initializing app data..."),n();const r=300*1e3,s=setInterval(()=>{console.log(" 5 minutes passed - auto-refreshing prices..."),n()},r);return()=>{console.log(" Stopping auto-refresh"),clearInterval(s)}},[]),x.jsx(fT.Provider,{value:{state:e,dispatch:t},children:i})},mg=()=>{const i=$.useContext(fT);if(!i)throw new Error("useApp must be used within AppProvider");return i},Jt=({children:i})=>x.jsx("div",{className:"layout",children:i}),MM=({children:i})=>x.jsx("header",{className:"layout-header",children:i}),FM=({children:i,maxWidth:e="full"})=>x.jsx("main",{className:`layout-content layout-max-${e}`,children:i}),OM=({children:i,columns:e=2,gap:t="medium"})=>x.jsx("div",{className:`layout-grid layout-grid-${e} layout-gap-${t}`,children:i}),jM=({children:i,title:e,subtitle:t})=>x.jsxs("section",{className:"layout-section",children:[(e||t)&&x.jsxs("div",{className:"layout-section-header",children:[e&&x.jsx("h2",{className:"layout-section-title",children:e}),t&&x.jsx("p",{className:"layout-section-subtitle",children:t})]}),x.jsx("div",{className:"layout-section-content",children:i})]});Jt.Header=MM;Jt.Content=FM;Jt.Grid=OM;Jt.Section=jM;const vt=({children:i,title:e,subtitle:t,action:n,hover:r=!0,padding:s="medium",className:a=""})=>x.jsxs("div",{className:`card ${r?"card-hover":""} card-padding-${s} ${a}`,children:[(e||n)&&x.jsxs("div",{className:"card-header",children:[x.jsxs("div",{children:[e&&x.jsx("h3",{className:"card-title",children:e}),t&&x.jsx("p",{className:"card-subtitle",children:t})]}),n&&x.jsx("div",{className:"card-action",children:n})]}),x.jsx("div",{className:"card-body",children:i})]}),hp=({children:i,onClick:e,variant:t="primary",size:n="medium",disabled:r=!1,fullWidth:s=!1,icon:a})=>x.jsxs("button",{className:`btn btn-${t} btn-${n} ${s?"btn-full":""}`,onClick:e,disabled:r,children:[a&&x.jsx("span",{className:"btn-icon",children:a}),i]}),BM=()=>{const i=R_(),{state:e}=mg(),{portfolio:t,settings:n}=e,r=n.exchangeRate,a=hT(t,r).totalKRW,u=t.reduce((y,v)=>{const E=v.avgPrice*v.quantity;return v.currency==="USD"?y+E*r:y+E},0),h=a-u,d=u>0?h/u*100:0,p=[{icon:"",label:" ",path:"/portfolio",color:"#667eea"},{icon:"",label:" ",path:"/macro",color:"#10b981"},{icon:"",label:"",path:"/learning",color:"#f59e0b"},{icon:"",label:"",path:"/settings",color:"#6b7280"}],m=[{type:"",stock:"AAPL",date:"2026-01-10",amount:"+10"},{type:"",stock:"MSFT",date:"2026-01-09",amount:" "},{type:"",stock:"",date:"2026-01-08",amount:" "}];return x.jsx(Jt,{children:x.jsxs(Jt.Content,{maxWidth:"large",children:[x.jsxs("div",{className:"home-welcome",children:[x.jsx("h1",{className:"home-title",children:"! "}),x.jsx("p",{className:"home-subtitle",children:"     "})]}),x.jsx(Jt.Section,{title:" ",children:x.jsxs(Jt.Grid,{columns:4,gap:"medium",children:[x.jsx(vt,{hover:!1,padding:"medium",children:x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-label",children:" "}),x.jsxs("div",{className:"stat-value",children:[a.toLocaleString(),""]})]})}),x.jsx(vt,{hover:!1,padding:"medium",children:x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-label",children:" "}),x.jsxs("div",{className:"stat-value",children:[u.toLocaleString(),""]})]})}),x.jsx(vt,{hover:!1,padding:"medium",children:x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-label",children:" "}),x.jsxs("div",{className:`stat-value ${h>=0?"stat-positive":"stat-negative"}`,children:[h>=0?"+":"",h.toLocaleString(),""]})]})}),x.jsx(vt,{hover:!1,padding:"medium",children:x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-label",children:""}),x.jsxs("div",{className:`stat-value ${d>=0?"stat-positive":"stat-negative"}`,children:[d>=0?"+":"",d.toFixed(2),"%"]})]})})]})}),x.jsx(Jt.Section,{title:" ",children:x.jsx("div",{className:"quick-actions",children:p.map((y,v)=>x.jsx(vt,{hover:!0,padding:"medium",className:"quick-action-card",onClick:()=>i(y.path),children:x.jsxs("div",{className:"quick-action",style:{"--action-color":y.color},children:[x.jsx("span",{className:"quick-action-icon",children:y.icon}),x.jsx("span",{className:"quick-action-label",children:y.label})]})},v))})}),x.jsxs(Jt.Grid,{columns:2,gap:"medium",children:[x.jsx(vt,{title:" ",padding:"medium",children:x.jsx("div",{className:"activity-list",children:m.length>0?m.map((y,v)=>x.jsxs("div",{className:"activity-item",children:[x.jsx("div",{className:"activity-type",children:y.type}),x.jsxs("div",{className:"activity-details",children:[x.jsx("div",{className:"activity-stock",children:y.stock}),x.jsx("div",{className:"activity-amount",children:y.amount})]}),x.jsx("div",{className:"activity-date",children:y.date})]},v)):x.jsx("div",{className:"empty-state",children:x.jsx("p",{children:"   "})})})}),x.jsx(vt,{title:"  ",padding:"medium",children:x.jsx("div",{className:"holdings-list",children:t.length>0?t.slice(0,5).map((y,v)=>{const E=y.currentPrice*y.quantity,A=(y.currentPrice-y.avgPrice)/y.avgPrice*100;return x.jsxs("div",{className:"holding-item",children:[x.jsxs("div",{className:"holding-info",children:[x.jsx("div",{className:"holding-symbol",children:y.name}),x.jsxs("div",{className:"holding-shares",children:[y.quantity,""]})]}),x.jsxs("div",{className:"holding-stats",children:[x.jsxs("div",{className:"holding-value",children:[E.toLocaleString(),""]}),x.jsxs("div",{className:`holding-pl ${A>=0?"stat-positive":"stat-negative"}`,children:[A>=0?"+":"",A.toFixed(2),"%"]})]})]},v)}):x.jsxs("div",{className:"empty-state",children:[x.jsx("p",{children:"   "}),x.jsx(hp,{variant:"primary",size:"small",onClick:()=>i("/portfolio"),children:" "})]})})})]}),x.jsx(vt,{title:" ",subtitle:"    ",padding:"large",children:x.jsxs("div",{className:"insights",children:[x.jsxs("div",{className:"insight-item",children:[x.jsx("span",{className:"insight-icon",children:""}),x.jsxs("div",{className:"insight-content",children:[x.jsx("h4",{children:"   "}),x.jsx("p",{children:"    S&P 500   "})]})]}),x.jsxs("div",{className:"insight-item",children:[x.jsx("span",{className:"insight-icon",children:""}),x.jsxs("div",{className:"insight-content",children:[x.jsx("h4",{children:"  "}),x.jsx("p",{children:"      "})]})]}),x.jsxs("div",{className:"insight-item",children:[x.jsx("span",{className:"insight-icon",children:""}),x.jsxs("div",{className:"insight-content",children:[x.jsx("h4",{children:"AI  "}),x.jsx("p",{children:"       "})]})]})]})})]})})};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pT=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=$.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:s,iconNode:a,...u},h)=>$.createElement("svg",{ref:h,...UM,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:pT("lucide",r),...u},[...a.map(([d,p])=>$.createElement(d,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=(i,e)=>{const t=$.forwardRef(({className:n,...r},s)=>$.createElement(HM,{ref:s,iconNode:e,className:pT(`lucide-${zM(i)}`,n),...r}));return t.displayName=`${i}`,t};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=Vt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=Vt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=Vt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=Vt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=Vt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=Vt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=Vt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=Vt("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=Vt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=Vt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=Vt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Vt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=Vt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=Vt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=Vt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=Vt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=Vt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=Vt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=Vt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=Vt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=Vt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=Vt("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=Vt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iF=()=>{const{state:i}=mg(),{portfolio:e,settings:t}=i,n=t.exchangeRate,r=hT(e,n),s=p=>Math.round(p).toLocaleString("ko-KR")+"",a=p=>"$"+p.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),u=rF(e,n),h=r.totalKRW-u,d=u>0?h/u*100:0;return x.jsxs("div",{className:"asset-summary",children:[x.jsxs("div",{className:"asset-summary-header",children:[x.jsx("h2",{children:" "}),x.jsx("span",{className:"update-time",children:"22:08 "})]}),x.jsxs("div",{className:"asset-cards",children:[x.jsxs("div",{className:"asset-card",children:[x.jsx("div",{className:"asset-label",children:""}),x.jsx("div",{className:"asset-value",children:s(r.krStocksValue)})]}),x.jsxs("div",{className:"asset-card",children:[x.jsx("div",{className:"asset-label",children:""}),x.jsx("div",{className:"asset-value",children:a(r.totalUSD)})]})]}),x.jsxs("div",{className:"total-assets",children:[x.jsx("div",{className:"total-label",children:" "}),x.jsx("div",{className:"total-value",children:s(r.totalKRW)}),u>0&&x.jsxs("div",{className:`total-change ${h>=0?"positive":"negative"}`,children:[h>=0?"+":"",s(h)," (",h>=0?"+":"",d.toFixed(2),"%)"]})]})]})},rF=(i,e)=>i.reduce((t,n)=>{const r=n.avgPrice*n.quantity;return n.currency==="USD"?t+r*e:t+r},0),sF=({stock:i,exchangeRate:e,onEdit:t,onDelete:n})=>{const{name:r,ticker:s,avgPrice:a,currentPrice:u,quantity:h,currency:d,category:p}=i,m=uT(u,h),{profitLoss:y,profitLossRate:v,isProfit:E}=kM(a,u,h),A=T=>d===Ys.KRW?Math.round(T).toLocaleString("ko-KR")+"":"$"+T.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),k=()=>h<1?h.toFixed(6)+"":h.toLocaleString("ko-KR")+"",C=()=>{const T=y>0?"+":"";return d===Ys.KRW?T+Math.round(y).toLocaleString("ko-KR"):T+y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},N=()=>`${v>0?"+":""}${v.toFixed(2)}%`;return x.jsxs("div",{className:"stock-card",onClick:()=>t&&t(i),children:[x.jsxs("div",{className:"stock-card-header",children:[x.jsxs("div",{className:"stock-info",children:[x.jsx("div",{className:"stock-name",children:r}),x.jsx("div",{className:"stock-quantity",children:k()})]}),x.jsxs("div",{className:"stock-value",children:[x.jsx("div",{className:"stock-value-amount",children:A(m)}),x.jsxs("div",{className:`stock-pl ${E?"profit":"loss"}`,children:[C()," (",N(),")"]})]})]}),p&&x.jsx("div",{className:"stock-footer",children:x.jsx("span",{className:"stock-category",children:j_[p]})})]})},oF=({isOpen:i,onClose:e,editingStock:t=null})=>{const{dispatch:n}=mg(),[r,s]=$.useState({name:"",ticker:"",country:Uu.KR,currency:Ys.KRW,avgPrice:"",currentPrice:"",quantity:"",category:Pa.GROWTH});$.useEffect(()=>{t&&s({name:t.name,ticker:t.ticker||"",country:t.country,currency:t.currency,avgPrice:t.avgPrice.toString(),currentPrice:t.currentPrice.toString(),quantity:t.quantity.toString(),category:t.category})},[t]);const a=d=>{const{name:p,value:m}=d.target;s(y=>{const v={...y,[p]:m};return p==="country"&&(v.currency=m===Uu.US?Ys.USD:Ys.KRW),v})},u=d=>{d.preventDefault();const p={id:(t==null?void 0:t.id)||`stock-${Date.now()}`,name:r.name,ticker:r.ticker||r.name,country:r.country,currency:r.currency,avgPrice:parseFloat(r.avgPrice),currentPrice:parseFloat(r.currentPrice),quantity:parseFloat(r.quantity),category:r.category,createdAt:(t==null?void 0:t.createdAt)||Date.now()};n(t?{type:"UPDATE_STOCK",payload:p}:{type:"ADD_STOCK",payload:p}),h()},h=()=>{s({name:"",ticker:"",country:Uu.KR,currency:Ys.KRW,avgPrice:"",currentPrice:"",quantity:"",category:Pa.GROWTH}),e()};return i?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"modal-backdrop",onClick:h}),x.jsxs("div",{className:"add-stock-modal",children:[x.jsxs("div",{className:"modal-header",children:[x.jsx("h2",{children:t?" ":" "}),x.jsx("button",{className:"modal-close-btn",onClick:h,children:x.jsx(mT,{size:24})})]}),x.jsxs("form",{onSubmit:u,className:"modal-form",children:[x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"name",children:" *"}),x.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:a,placeholder:": , Tesla",required:!0})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"ticker",children:" ()"}),x.jsx("input",{type:"text",id:"ticker",name:"ticker",value:r.ticker,onChange:a,placeholder:": 005930, TSLA"})]}),x.jsxs("div",{className:"form-row",children:[x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"country",children:" *"}),x.jsxs("select",{id:"country",name:"country",value:r.country,onChange:a,required:!0,children:[x.jsx("option",{value:Uu.KR,children:" "}),x.jsx("option",{value:Uu.US,children:" "})]})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"currency",children:" *"}),x.jsxs("select",{id:"currency",name:"currency",value:r.currency,onChange:a,required:!0,children:[x.jsx("option",{value:Ys.KRW,children:"KRW ()"}),x.jsx("option",{value:Ys.USD,children:"USD ($)"})]})]})]}),x.jsxs("div",{className:"form-row",children:[x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"avgPrice",children:" *"}),x.jsx("input",{type:"number",id:"avgPrice",name:"avgPrice",value:r.avgPrice,onChange:a,placeholder:"0",step:"0.01",min:"0",required:!0})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"quantity",children:" *"}),x.jsx("input",{type:"number",id:"quantity",name:"quantity",value:r.quantity,onChange:a,placeholder:"0",step:r.country===Uu.US?"0.000001":"1",min:"0",required:!0})]})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"currentPrice",children:" *"}),x.jsx("input",{type:"number",id:"currentPrice",name:"currentPrice",value:r.currentPrice,onChange:a,placeholder:"0",step:"0.01",min:"0",required:!0}),x.jsx("small",{className:"form-hint",children:"   "})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{htmlFor:"category",children:" *"}),x.jsx("select",{id:"category",name:"category",value:r.category,onChange:a,required:!0,children:Object.entries(j_).map(([d,p])=>x.jsx("option",{value:d,children:p},d))})]}),x.jsxs("div",{className:"modal-actions",children:[x.jsx("button",{type:"button",className:"btn-cancel",onClick:h,children:""}),x.jsx("button",{type:"submit",className:"btn-submit",children:t?"":""})]})]})]})]}):null},aF=()=>{const{state:i,dispatch:e}=mg(),{portfolio:t,settings:n}=i,r=n.exchangeRate,[s,a]=$.useState("KR"),[u,h]=$.useState(!1),[d,p]=$.useState(null),[m,y]=$.useState(!1),E=[...t.filter(D=>D.country===s)].sort((D,F)=>F.createdAt-D.createdAt),A=()=>{p(null),h(!0)},k=D=>{p(D),h(!0)},C=D=>{window.confirm("  ?")&&e({type:"DELETE_STOCK",payload:D})},N=()=>{h(!1),p(null)},T=async()=>{y(!0);try{console.log(" Refreshing prices from Google Sheets...");const D=await ub();if(D){const F=hb(t,D.stocks);e({type:"UPDATE_PORTFOLIO_PRICES",payload:{portfolio:F,exchangeRate:D.exchangeRate}}),console.log(" Prices refreshed successfully!"),alert("  ! ")}}catch(D){console.error(" Failed to refresh prices:",D),alert("  .  .")}finally{y(!1)}};return x.jsxs("div",{className:"portfolio-page",children:[x.jsxs("div",{className:"portfolio-header",children:[x.jsx("h1",{children:""}),x.jsxs("button",{className:`refresh-btn ${m?"refreshing":""}`,onClick:T,disabled:m,title:"    ",children:[x.jsx(j0,{size:20}),m?" ...":""]})]}),x.jsx(iF,{}),x.jsxs("div",{className:"portfolio-tabs",children:[x.jsx("button",{className:`tab-btn ${s==="KR"?"active":""}`,onClick:()=>a("KR"),children:" "}),x.jsx("button",{className:`tab-btn ${s==="US"?"active":""}`,onClick:()=>a("US"),children:" "})]}),x.jsxs("div",{className:"sort-options",children:[x.jsx("button",{className:"sort-btn active",children:"   "}),x.jsxs("div",{className:"currency-toggle",children:[x.jsx("button",{className:s==="US"?"active":"",children:"$"}),x.jsx("button",{className:s==="KR"?"active":"",children:""})]})]}),x.jsxs("div",{className:"stock-list-section",children:[x.jsxs("div",{className:"section-header",children:[x.jsx("h3",{children:""}),x.jsx("button",{className:"view-all-btn",children:""})]}),x.jsx("div",{className:"stock-list",children:E.length>0?E.map(D=>x.jsx(sF,{stock:D,exchangeRate:r,onEdit:k,onDelete:C},D.id)):x.jsxs("div",{className:"empty-state",children:[x.jsx("div",{className:"empty-icon",children:""}),x.jsx("p",{children:"  "}),x.jsx("p",{className:"empty-hint",children:" +    "})]})})]}),x.jsx("button",{className:"floating-add-btn",onClick:A,children:x.jsx(QM,{size:24})}),x.jsx(oF,{isOpen:u,onClose:N,editingStock:d})]})},lF=()=>{const[i,e]=$.useState("US"),t={US:[{name:"GDP ",value:"2.8%",change:"+0.3%",trend:"up",icon:""},{name:"",value:"3.7%",change:"-0.1%",trend:"down",icon:""},{name:"",value:"3.2%",change:"+0.2%",trend:"up",icon:""},{name:"",value:"5.50%",change:"0.0%",trend:"stable",icon:""}],KR:[{name:"GDP ",value:"1.4%",change:"+0.1%",trend:"up",icon:""},{name:"",value:"2.6%",change:"0.0%",trend:"stable",icon:""},{name:"",value:"2.8%",change:"-0.3%",trend:"down",icon:""},{name:"",value:"3.50%",change:"0.0%",trend:"stable",icon:""}]},n=[{name:"S&P 500",value:"4,783.45",change:"+1.24%",trend:"up"},{name:"NASDAQ",value:"15,011.35",change:"+1.68%",trend:"up"},{name:"KOSPI",value:"2,655.27",change:"+0.83%",trend:"up"},{name:"KOSDAQ",value:"875.64",change:"+1.12%",trend:"up"}],r=[{title:" ,   ",summary:"  5.50%  .     ",date:"2026-01-10",category:""},{title:"GDP   ",summary:"4 GDP      ",date:"2026-01-09",category:""},{title:"   ",summary:"      ",date:"2026-01-08",category:""}],s=[{name:" (WTI)",value:"$72.45",change:"+2.1%",icon:""},{name:"",value:"$2,058.30",change:"+0.8%",icon:""},{name:"",value:"$23.45",change:"+1.2%",icon:""},{name:"",value:"$3.82",change:"-0.5%",icon:""}],a=h=>h==="up"?"":h==="down"?"":"",u=h=>h==="up"?"trend-up":h==="down"?"trend-down":"trend-stable";return x.jsx(Jt,{children:x.jsx(Jt.Content,{maxWidth:"large",children:x.jsxs(Jt.Section,{title:" ",subtitle:"      ",children:[x.jsxs("div",{className:"region-selector",children:[x.jsx(hp,{variant:i==="US"?"primary":"outline",onClick:()=>e("US"),children:" "}),x.jsx(hp,{variant:i==="KR"?"primary":"outline",onClick:()=>e("KR"),children:" "})]}),x.jsx(Jt.Grid,{columns:4,gap:"medium",children:t[i].map((h,d)=>x.jsx(vt,{hover:!0,padding:"medium",children:x.jsxs("div",{className:"indicator-card",children:[x.jsx("div",{className:"indicator-icon",children:h.icon}),x.jsx("div",{className:"indicator-name",children:h.name}),x.jsx("div",{className:"indicator-value",children:h.value}),x.jsxs("div",{className:`indicator-change ${u(h.trend)}`,children:[a(h.trend)," ",h.change]})]})},d))}),x.jsx(vt,{title:" ",padding:"large",children:x.jsx("div",{className:"indices-grid",children:n.map((h,d)=>x.jsxs("div",{className:"index-item",children:[x.jsx("div",{className:"index-name",children:h.name}),x.jsx("div",{className:"index-value",children:h.value}),x.jsx("div",{className:`index-change ${u(h.trend)}`,children:h.change})]},d))})}),x.jsxs(Jt.Grid,{columns:2,gap:"medium",children:[x.jsx(vt,{title:" ",padding:"large",children:x.jsx("div",{className:"news-list",children:r.map((h,d)=>x.jsxs("div",{className:"news-item",children:[x.jsxs("div",{className:"news-header",children:[x.jsx("span",{className:"news-category",children:h.category}),x.jsx("span",{className:"news-date",children:h.date})]}),x.jsx("h4",{className:"news-title",children:h.title}),x.jsx("p",{className:"news-summary",children:h.summary})]},d))})}),x.jsx(vt,{title:" ",padding:"large",children:x.jsx("div",{className:"commodities-list",children:s.map((h,d)=>x.jsxs("div",{className:"commodity-item",children:[x.jsxs("div",{className:"commodity-info",children:[x.jsx("span",{className:"commodity-icon",children:h.icon}),x.jsx("span",{className:"commodity-name",children:h.name})]}),x.jsxs("div",{className:"commodity-stats",children:[x.jsx("div",{className:"commodity-value",children:h.value}),x.jsx("div",{className:`commodity-change ${h.change.startsWith("+")?"trend-up":"trend-down"}`,children:h.change})]})]},d))})})]}),x.jsx(vt,{title:" ",subtitle:"   ",padding:"large",children:x.jsxs("div",{className:"calendar-list",children:[x.jsxs("div",{className:"calendar-item",children:[x.jsxs("div",{className:"calendar-date",children:[x.jsx("div",{className:"calendar-day",children:"15"}),x.jsx("div",{className:"calendar-month",children:"1"})]}),x.jsxs("div",{className:"calendar-content",children:[x.jsx("h4",{children:"  (CPI) "}),x.jsx("p",{children:": 3.2% | : 3.1%"})]}),x.jsx("div",{className:"calendar-importance high",children:""})]}),x.jsxs("div",{className:"calendar-item",children:[x.jsxs("div",{className:"calendar-date",children:[x.jsx("div",{className:"calendar-day",children:"17"}),x.jsx("div",{className:"calendar-month",children:"1"})]}),x.jsxs("div",{className:"calendar-content",children:[x.jsx("h4",{children:"  "}),x.jsx("p",{children:": 0.5% | : 0.3%"})]}),x.jsx("div",{className:"calendar-importance medium",children:""})]}),x.jsxs("div",{className:"calendar-item",children:[x.jsxs("div",{className:"calendar-date",children:[x.jsx("div",{className:"calendar-day",children:"18"}),x.jsx("div",{className:"calendar-month",children:"1"})]}),x.jsxs("div",{className:"calendar-content",children:[x.jsx("h4",{children:"  "}),x.jsx("p",{children:" "})]}),x.jsx("div",{className:"calendar-importance high",children:""})]})]})})]})})})},cF="https://docs.google.com/spreadsheets/d/e/2PACX-1vTE6rU_HSro410_ho2cm9qlg-zgvNQuakmK_iYzRcCpRmS4ZFCnsM_GvZ4egwhTMWjpLs5zwYJB2SSh/pub?gid=925996007&single=true&output=csv",Pf="https://script.google.com/macros/s/AKfycbyiEGCAJ1ZR7_Di0NjN2ghbVg01DZ5OKPf-IK0zRQ0C3Q2g3kCMRAqho3kBaNJRiJOz/exec",uF="AIzaSyCdh8HWsXB02ak23zg3o-x4PZKapkgijN4",hF=()=>{const[i,e]=$.useState([]),[t,n]=$.useState([]),[r,s]=$.useState([]),[a,u]=$.useState(!0),[h,d]=$.useState(!1),[p,m]=$.useState(""),[y,v]=$.useState(null),[E,A]=$.useState(!1),[k,C]=$.useState([]),[N,T]=$.useState(!1),[D,F]=$.useState(""),[L,j]=$.useState(!1),[G,K]=$.useState([]),[ee,q]=$.useState(!1),[re,ue]=$.useState(!1),[ie,Z]=$.useState(null),[se,J]=$.useState("");$.useEffect(()=>{de()},[]);const Q=te=>te&&(te.includes("m.stock.naver.com")?te.replace("m.stock.naver.com","finance.naver.com"):te),me=async()=>{if(!D.trim()){alert("  .");return}j(!0);try{const te=encodeURIComponent(D),Me=`${Pf}?action=saveNote&content=${te}`,et=await(await fetch(Me,{method:"GET",redirect:"follow"})).json();if(et.success)alert("  !"),F(""),M();else throw new Error(et.message||" ")}catch(te){console.error("Save note error:",te),alert("  .  .")}finally{j(!1)}},M=async()=>{ue(!0);try{const Me=await(await fetch(`${Pf}?action=getHistory&limit=50`,{method:"GET",redirect:"follow"})).json();Me.success?K(Me.notes||[]):console.error("Load history error:",Me.message)}catch(te){console.error("Load history error:",te)}finally{ue(!1)}},B=()=>{const te=!ee;q(te),te&&G.length===0&&M()},U=async te=>{if(window.confirm("  ?"))try{const je=await(await fetch(`${Pf}?action=deleteNote&id=${te}`,{method:"GET",redirect:"follow"})).json();if(je.success)alert("  !"),M();else throw new Error(je.message||" ")}catch(Me){console.error("Delete note error:",Me),alert("  .  .")}},I=te=>{Z(te.id),J(te.content)},pe=()=>{Z(null),J("")},ye=async te=>{if(!se.trim()){alert("  .");return}try{const Me=encodeURIComponent(se),et=await(await fetch(`${Pf}?action=updateNote&id=${te}&content=${Me}`,{method:"GET",redirect:"follow"})).json();if(et.success)alert("  !"),Z(null),J(""),M();else throw new Error(et.message||" ")}catch(Me){console.error("Update note error:",Me),alert("  .  .")}},de=async()=>{try{u(!0);const et=(await(await fetch(cF)).text()).split(`
`).slice(1).map((Dt,vi)=>{var Dn,In,xi,zi,Ui,Cl,ne;const en=Dt.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);return en.length<4?null:{id:`report-${vi}`,date:(Dn=en[0])==null?void 0:Dn.replace(/"/g,"").trim(),category:(In=en[1])==null?void 0:In.replace(/"/g,"").trim().toLowerCase(),title:(xi=en[2])==null?void 0:xi.replace(/"/g,"").trim(),link:(zi=en[3])==null?void 0:zi.replace(/"/g,"").trim(),stockName:((Ui=en[4])==null?void 0:Ui.replace(/"/g,"").trim())||"",targetPrice:((Cl=en[5])==null?void 0:Cl.replace(/"/g,"").trim())||"",opinion:((ne=en[6])==null?void 0:ne.replace(/"/g,"").trim())||""}}).filter(Dt=>Dt&&Dt.title);e(et);const dn=et.filter(Dt=>Dt.category==="market_info"),Ln=et.filter(Dt=>Dt.category==="company");n(dn),s(Ln),console.log(` Loaded ${et.length} reports (${dn.length} market_info, ${Ln.length} company)`)}catch(te){console.error("Failed to load reports:",te)}finally{u(!1)}},xe=async()=>{d(!0),m("     ...");try{if(!(await fetch(Pf,{method:"GET",redirect:"follow"})).ok)throw new Error("  ");await de(),m("  !"),setTimeout(()=>{m("")},2e3)}catch(te){console.error("Refresh failed:",te),m("  .  ."),setTimeout(()=>{m("")},3e3)}finally{d(!1)}},Ee=async te=>{var dn,Ln,Dt;const je=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${uF}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:te}]}],generationConfig:{responseMimeType:"application/json"},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_NONE"}]})})).json();if(!je.candidates||je.candidates.length===0){const vi=je.error?je.error.message:"Blocked or Empty";throw new Error(`AI  : ${vi}`)}const et=(Dt=(Ln=(dn=je.candidates[0].content)==null?void 0:dn.parts)==null?void 0:Ln[0])==null?void 0:Dt.text;return JSON.parse(et)},Re=async()=>{if(t.length!==0){A(!0);try{const Me=`
    .
     :

${t.map((et,dn)=>`${dn+1}. ${et.title}`).join(`
`)}

      :

1. **  **:      3-4 .
2. ** **:      2-3 .
3. **  **:         .

[  (JSON)]:
{
  "summary": "     (3-4)",
  "keyIndicators": ["  1", "  2", "  3"],
  "strategy": "   (2-3)"
}
`,je=await Ee(Me);v(je)}catch(te){console.error("Market analysis failed:",te),v({summary:"AI    .    .",keyIndicators:[" "],strategy:"   ."})}finally{A(!1)}}},tt=async()=>{if(r.length!==0){T(!0);try{const te=[];for(const Me of r){const je=`
    .

** :**
  [: ${Me.targetPrice||"-"}] [: ${Me.opinion||"-"}]   .
  "   "     .

** :**
   , **''     (Key Rationale)** 1~2 .
-  ?  ?  ?  ?
-      .

** :**
${Me.title}

** ( ):**
- "2   ,        "
- "       20%  "
- "     ,    "

** (  -    ):**
- " 8  ."
- "   ."

JSON  :
{
  "summary": "  1~2 (/  )"
}
`;try{const et=await Ee(je);te.push({...Me,aiSummary:et.summary||"  "})}catch(et){console.error(`Failed to analyze ${Me.title}:`,et),te.push({...Me,aiSummary:"   "})}await new Promise(et=>setTimeout(et,500))}C(te)}catch(te){console.error("Company analysis failed:",te),C([])}finally{T(!1)}}};return x.jsx(Jt,{children:x.jsx(Jt.Content,{maxWidth:"large",children:x.jsxs("div",{className:"study-page",children:[x.jsxs("div",{className:"study-header",children:[x.jsxs("div",{className:"study-title-section",children:[x.jsxs("h1",{className:"study-title",children:[x.jsx(e0,{size:32}),"  "]}),x.jsx("p",{className:"study-subtitle",children:"AI   "})]}),x.jsxs("button",{onClick:xe,disabled:h,className:"refresh-btn",style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:h?"#e0e0e0":"#4F46E5",color:"white",border:"none",borderRadius:"8px",cursor:h?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:[x.jsx(j0,{size:20,className:h?"spinning":""}),x.jsx("span",{children:h?" ...":"   "})]})]}),p&&x.jsx("div",{style:{padding:"12px 20px",marginBottom:"20px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:p.includes("")?"#D1FAE5":p.includes("")?"#FEE2E2":"#DBEAFE",color:p.includes("")?"#065F46":p.includes("")?"#991B1B":"#1E40AF",border:`1px solid ${p.includes("")?"#A7F3D0":p.includes("")?"#FECACA":"#BFDBFE"}`},children:p}),a&&x.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",gap:"16px"},children:[x.jsx(Fy,{className:"spinning",size:32,style:{color:"#4F46E5"}}),x.jsx("p",{style:{color:"#6B7280",fontSize:"14px"},children:"  ..."})]}),!a&&x.jsxs("div",{className:"study-content",children:[x.jsx(vt,{title:"   ? ( )",padding:"large",children:t.length===0?x.jsx("div",{className:"empty-state",children:"  ."}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{style:{marginBottom:"20px"},children:[x.jsxs("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:["   (",t.length,")"]}),x.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:t.map(te=>x.jsxs("li",{style:{padding:"10px 0",borderBottom:"1px solid #E5E7EB",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[x.jsx("a",{href:Q(te.link),target:"_blank",rel:"noopener noreferrer",style:{color:"#4F46E5",textDecoration:"none",fontSize:"14px",fontWeight:"500",flex:1},children:te.title}),x.jsx("span",{style:{fontSize:"12px",color:"#9CA3AF",marginLeft:"12px"},children:te.date})]},te.id))})]}),!y&&x.jsx("button",{onClick:Re,disabled:E,style:{width:"100%",padding:"14px",backgroundColor:E?"#E5E7EB":"#4F46E5",color:"white",border:"none",borderRadius:"8px",cursor:E?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:E?x.jsxs(x.Fragment,{children:[x.jsx(Fy,{size:16,className:"spinning"}),"AI  ..."]}):x.jsxs(x.Fragment,{children:[x.jsx(B0,{size:16}),"AI   "]})}),y&&x.jsxs("div",{style:{marginTop:"20px",padding:"20px",backgroundColor:"#F9FAFB",borderRadius:"12px",border:"1px solid #E5E7EB"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",color:"#4F46E5"},children:[x.jsx(B0,{size:20}),x.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:"AI  "})]}),x.jsx("p",{style:{fontSize:"14px",lineHeight:"1.7",color:"#374151",marginBottom:"16px",whiteSpace:"pre-line"},children:y.summary}),x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsx("strong",{style:{fontSize:"14px",color:"#1F2937",display:"block",marginBottom:"8px"},children:"  :"}),x.jsx("ul",{style:{paddingLeft:"20px",margin:0},children:y.keyIndicators.map((te,Me)=>x.jsx("li",{style:{fontSize:"14px",color:"#4B5563",lineHeight:"1.6"},children:te},Me))})]}),y.strategy&&x.jsxs("div",{style:{padding:"12px",backgroundColor:"#FEF3C7",borderRadius:"8px",borderLeft:"3px solid #F59E0B"},children:[x.jsx("strong",{style:{fontSize:"14px",color:"#92400E",display:"block",marginBottom:"6px"},children:"   :"}),x.jsx("p",{style:{fontSize:"14px",color:"#78350F",lineHeight:"1.6",margin:0},children:y.strategy})]}),x.jsxs("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #E5E7EB"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[x.jsx("h5",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",margin:0},children:"   "}),!isEditingMarketNote&&x.jsxs("button",{onClick:()=>setIsEditingMarketNote(!0),style:{display:"flex",alignItems:"center",gap:"4px",padding:"6px 12px",backgroundColor:"white",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px",cursor:"pointer",color:"#4B5563"},children:[x.jsx(YM,{size:12}),marketNote?"":""]})]}),isEditingMarketNote?x.jsxs("div",{children:[x.jsx("textarea",{value:marketNote,onChange:te=>setMarketNote(te.target.value),placeholder:"    ...",rows:4,style:{width:"100%",padding:"12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}}),x.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[x.jsxs("button",{onClick:saveMarketNote,style:{display:"flex",alignItems:"center",gap:"4px",padding:"8px 16px",backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:[x.jsx(iC,{size:14}),""]}),x.jsx("button",{onClick:()=>setIsEditingMarketNote(!1),style:{padding:"8px 16px",backgroundColor:"white",color:"#6B7280",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",cursor:"pointer"},children:""})]})]}):x.jsx("div",{style:{padding:"12px",backgroundColor:"white",borderRadius:"6px",fontSize:"14px",color:"#4B5563",border:"1px solid #E5E7EB",minHeight:"60px"},children:marketNote||" ."})]})]})]})}),x.jsx(vt,{title:"    ( )",padding:"large",children:r.length===0?x.jsx("div",{className:"empty-state",children:"  ."}):x.jsxs(x.Fragment,{children:[k.length===0&&x.jsx("button",{onClick:tt,disabled:N,style:{width:"100%",padding:"14px",marginBottom:"20px",backgroundColor:N?"#E5E7EB":"#4F46E5",color:"white",border:"none",borderRadius:"8px",cursor:N?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:N?x.jsxs(x.Fragment,{children:[x.jsx(Fy,{size:16,className:"spinning"}),"AI  ... (",r.length," )"]}):x.jsxs(x.Fragment,{children:[x.jsx(JM,{size:16}),"AI    (",r.length,")"]})}),k.length>0?x.jsx("div",{style:{backgroundColor:"#F9FAFB",borderRadius:"12px",border:"1px solid #E5E7EB",overflow:"hidden"},children:k.map((te,Me)=>{var je,et,dn,Ln,Dt,vi,en,Dn,In,xi,zi,Ui;return x.jsxs("div",{style:{padding:"20px",borderBottom:Me<k.length-1?"1px solid #E5E7EB":"none",backgroundColor:"white",transition:"all 0.2s"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[x.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1F2937",margin:0},children:te.stockName||" "}),x.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",backgroundColor:(je=te.opinion)!=null&&je.includes("")||(et=te.opinion)!=null&&et.toLowerCase().includes("buy")?"#DCFCE7":(dn=te.opinion)!=null&&dn.includes("")||(Ln=te.opinion)!=null&&Ln.toLowerCase().includes("sell")?"#FEE2E2":(Dt=te.opinion)!=null&&Dt.includes("")||(vi=te.opinion)!=null&&vi.toLowerCase().includes("hold")?"#FEF3C7":"#F3F4F6",color:(en=te.opinion)!=null&&en.includes("")||(Dn=te.opinion)!=null&&Dn.toLowerCase().includes("buy")?"#166534":(In=te.opinion)!=null&&In.includes("")||(xi=te.opinion)!=null&&xi.toLowerCase().includes("sell")?"#991B1B":(zi=te.opinion)!=null&&zi.includes("")||(Ui=te.opinion)!=null&&Ui.toLowerCase().includes("hold")?"#92400E":"#4B5563"},children:te.opinion||"-"}),x.jsx("span",{style:{fontSize:"16px",fontWeight:"700",color:"#DC2626",marginLeft:"auto"},children:te.targetPrice||"-"})]}),x.jsx("div",{style:{marginBottom:"12px"},children:x.jsxs("a",{href:Q(te.link),target:"_blank",rel:"noopener noreferrer",style:{fontSize:"14px",color:"#4F46E5",textDecoration:"none",lineHeight:"1.5",fontWeight:"500"},children:[" ",te.title]})}),te.aiSummary&&x.jsx("div",{style:{padding:"12px",backgroundColor:"#F9FAFB",borderLeft:"3px solid #4F46E5",borderRadius:"6px"},children:x.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.6",color:"#374151",margin:0},children:[" ",x.jsx("strong",{children:" :"})," ",te.aiSummary]})})]},Me)})}):x.jsx("div",{style:{backgroundColor:"#F9FAFB",borderRadius:"12px",border:"1px solid #E5E7EB",overflow:"hidden"},children:r.map((te,Me)=>{var je,et,dn,Ln,Dt,vi,en,Dn,In,xi,zi,Ui;return x.jsxs("div",{style:{padding:"20px",borderBottom:Me<r.length-1?"1px solid #E5E7EB":"none",backgroundColor:"white"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[x.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1F2937",margin:0},children:te.stockName||" "}),te.opinion&&x.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",backgroundColor:(je=te.opinion)!=null&&je.includes("")||(et=te.opinion)!=null&&et.toLowerCase().includes("buy")?"#DCFCE7":(dn=te.opinion)!=null&&dn.includes("")||(Ln=te.opinion)!=null&&Ln.toLowerCase().includes("sell")?"#FEE2E2":(Dt=te.opinion)!=null&&Dt.includes("")||(vi=te.opinion)!=null&&vi.toLowerCase().includes("hold")?"#FEF3C7":"#F3F4F6",color:(en=te.opinion)!=null&&en.includes("")||(Dn=te.opinion)!=null&&Dn.toLowerCase().includes("buy")?"#166534":(In=te.opinion)!=null&&In.includes("")||(xi=te.opinion)!=null&&xi.toLowerCase().includes("sell")?"#991B1B":(zi=te.opinion)!=null&&zi.includes("")||(Ui=te.opinion)!=null&&Ui.toLowerCase().includes("hold")?"#92400E":"#4B5563"},children:te.opinion}),te.targetPrice&&x.jsx("span",{style:{fontSize:"16px",fontWeight:"700",color:"#DC2626",marginLeft:"auto"},children:te.targetPrice})]}),x.jsx("div",{children:x.jsxs("a",{href:Q(te.link),target:"_blank",rel:"noopener noreferrer",style:{fontSize:"14px",color:"#4F46E5",textDecoration:"none",lineHeight:"1.5",fontWeight:"500"},children:[" ",te.title]})})]},te.id)})})]})})]}),!a&&x.jsxs(vt,{title:"   ",padding:"large",style:{marginTop:"32px"},children:[x.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"16px"},children:x.jsxs("button",{onClick:B,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:ee?"#4F46E5":"#F3F4F6",color:ee?"white":"#6B7280",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:[x.jsx(e0,{size:16}),ee?" ":"  "]})}),ee?x.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:re?x.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6B7280"},children:[x.jsx(Fy,{className:"spinning",size:32,style:{margin:"0 auto",marginBottom:"12px"}}),x.jsx("p",{style:{margin:0,fontSize:"15px"},children:"  ..."})]}):G.length===0?x.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#9CA3AF"},children:[x.jsx(e0,{size:48,style:{margin:"0 auto",marginBottom:"16px",opacity:.3}}),x.jsx("p",{style:{margin:0,fontSize:"15px",fontWeight:"600"},children:"   ."}),x.jsx("p",{style:{margin:"8px 0 0",fontSize:"14px"},children:"   !"})]}):x.jsx("div",{style:{display:"grid",gap:"16px"},children:G.map(te=>{const Me=ie===te.id;return x.jsxs("div",{style:{padding:"20px",backgroundColor:Me?"#FFF7ED":"#F9FAFB",borderRadius:"12px",border:Me?"2px solid #F59E0B":"1px solid #E5E7EB",transition:"all 0.2s"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[x.jsxs("span",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"600"},children:[" ",te.date]}),!Me&&x.jsxs("div",{style:{display:"flex",gap:"8px"},children:[x.jsx("button",{onClick:()=>I(te),style:{padding:"4px 10px",fontSize:"12px",fontWeight:"600",color:"#4F46E5",backgroundColor:"#EEF2FF",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:je=>je.currentTarget.style.backgroundColor="#E0E7FF",onMouseLeave:je=>je.currentTarget.style.backgroundColor="#EEF2FF",children:" "}),x.jsx("button",{onClick:()=>U(te.id),style:{padding:"4px 10px",fontSize:"12px",fontWeight:"600",color:"#DC2626",backgroundColor:"#FEE2E2",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:je=>je.currentTarget.style.backgroundColor="#FECACA",onMouseLeave:je=>je.currentTarget.style.backgroundColor="#FEE2E2",children:" "})]})]}),Me?x.jsxs("div",{children:[x.jsx("textarea",{value:se,onChange:je=>J(je.target.value),rows:6,style:{width:"100%",padding:"12px",border:"2px solid #F59E0B",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",resize:"vertical",lineHeight:"1.7",marginBottom:"12px",outline:"none"}}),x.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[x.jsx("button",{onClick:()=>ye(te.id),style:{padding:"8px 16px",fontSize:"14px",fontWeight:"600",color:"white",backgroundColor:"#4F46E5",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:" "}),x.jsx("button",{onClick:pe,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"600",color:"#6B7280",backgroundColor:"#F3F4F6",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:""})]})]}):x.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.7",color:"#1F2937",whiteSpace:"pre-wrap"},children:te.content})]},te.id)})})}):x.jsxs("div",{children:[x.jsx("textarea",{value:D,onChange:te=>F(te.target.value),placeholder:`      ...

:
 : AI      
 :  ,    
  :     `,rows:10,style:{width:"100%",padding:"16px",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"15px",fontFamily:"inherit",resize:"vertical",lineHeight:"1.6",marginBottom:"16px",transition:"border-color 0.2s",outline:"none"},onFocus:te=>te.target.style.borderColor="#4F46E5",onBlur:te=>te.target.style.borderColor="#E5E7EB"}),x.jsxs("button",{onClick:me,disabled:L||!D.trim(),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px",backgroundColor:L||!D.trim()?"#D1D5DB":"#4F46E5",color:"white",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:"600",cursor:L||!D.trim()?"not-allowed":"pointer",transition:"all 0.2s"},children:[x.jsx(iC,{size:18}),L?" ...":"  "]})]})]})]})})})},pi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),fb=[.001,0,0,.001,0,0],Fw=1.35,pr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ra={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dp="pdfjs_internal_editor_",He={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Je={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},dF={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pb={TRIANGLES:1,LATTICE:2},gn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ln={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Wu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Pv={ERRORS:0,WARNINGS:1,INFOS:5},fp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Rf={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},fF={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Rv=Pv.WARNINGS;function pF(i){Number.isInteger(i)&&(Rv=i)}function mF(){return Rv}function Nv(i){Rv>=Pv.INFOS&&console.info(`Info: ${i}`)}function Be(i){Rv>=Pv.WARNINGS&&console.warn(`Warning: ${i}`)}function Et(i){throw new Error(i)}function Ze(i,e){i||Et(e)}function gF(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function gT(i,e=null,t=null){if(!i)return null;if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const r=i.match(/\./g);(r==null?void 0:r.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=bF(i)}catch{}}const n=e?URL.parse(i,e):URL.parse(i);return gF(n)?n:null}function yT(i,e,t=!1){const n=URL.parse(i);return n?(n.hash=e,n.href):t&&gT(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ze(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const pu=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class rC extends pu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Ow extends pu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class mb extends pu{constructor(e){super(e,"InvalidPDFException")}}class z0 extends pu{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class yF extends pu{constructor(e){super(e,"FormatError")}}class bl extends pu{constructor(e){super(e,"AbortException")}}function vT(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Et("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),a=i.subarray(r,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function gg(i){typeof i!="string"&&Et("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function vF(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function xF(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function wF(){try{return new Function(""),!0}catch{return!1}}class bn{static get isLittleEndian(){return ze(this,"isLittleEndian",xF())}static get isEvalSupported(){return ze(this,"isEvalSupported",wF())}static get isOffscreenCanvasSupported(){return ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ze(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return ze(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return ze(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return ze(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ze(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const jw=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Zo,n0,gb;class we{static makeHexColor(e,t,n){return`#${jw[e]}${jw[t]}${jw[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],s=e[n+1];e[n]=r*t[0]+s*t[2]+t[4],e[n+1]=r*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],s=t[1],a=t[2],u=t[3],h=t[4],d=t[5];for(let p=0;p<6;p+=2){const m=e[n+p],y=e[n+p+1];e[n+p]=m*r+y*a+h,e[n+p+1]=m*s+y*u+d}}static applyInverseTransform(e,t){const n=e[0],r=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const r=t[0],s=t[1],a=t[2],u=t[3],h=t[4],d=t[5],p=e[0],m=e[1],y=e[2],v=e[3];let E=r*p+h,A=E,k=r*y+h,C=k,N=u*m+d,T=N,D=u*v+d,F=D;if(s!==0||a!==0){const L=s*p,j=s*y,G=a*m,K=a*v;E+=G,C+=G,k+=K,A+=K,N+=L,F+=L,D+=j,T+=j}n[0]=Math.min(n[0],E,k,A,C),n[1]=Math.min(n[1],N,D,T,F),n[2]=Math.max(n[2],E,k,A,C),n[3]=Math.max(n[3],N,D,T,F)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],s=e[2],a=e[3],u=n**2+r**2,h=n*s+r*a,d=s**2+a**2,p=(u+d)/2,m=Math.sqrt(p**2-(u*d-h**2));t[0]=Math.sqrt(p+m||1),t[1]=Math.sqrt(p-m||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[n,s,r,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,r),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,r)}static bezierBoundingBox(e,t,n,r,s,a,u,h,d){d[0]=Math.min(d[0],e,u),d[1]=Math.min(d[1],t,h),d[2]=Math.max(d[2],e,u),d[3]=Math.max(d[3],t,h),P(this,Zo,gb).call(this,e,n,s,u,t,r,a,h,3*(-e+3*(n-s)+u),6*(e-2*n+s),3*(n-e),d),P(this,Zo,gb).call(this,e,n,s,u,t,r,a,h,3*(-t+3*(r-a)+h),6*(t-2*r+a),3*(r-t),d)}}Zo=new WeakSet,n0=function(e,t,n,r,s,a,u,h,d,p){if(d<=0||d>=1)return;const m=1-d,y=d*d,v=y*d,E=m*(m*(m*e+3*d*t)+3*y*n)+v*r,A=m*(m*(m*s+3*d*a)+3*y*u)+v*h;p[0]=Math.min(p[0],E),p[1]=Math.min(p[1],A),p[2]=Math.max(p[2],E),p[3]=Math.max(p[3],A)},gb=function(e,t,n,r,s,a,u,h,d,p,m,y){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&P(this,Zo,n0).call(this,e,t,n,r,s,a,u,h,-m/p,y);return}const v=p**2-4*m*d;if(v<0)return;const E=Math.sqrt(v),A=2*d;P(this,Zo,n0).call(this,e,t,n,r,s,a,u,h,(-p+E)/A,y),P(this,Zo,n0).call(this,e,t,n,r,s,a,u,h,(-p-E)/A,y)},_(we,Zo);function bF(i){return decodeURIComponent(escape(i))}let Bw=null,sC=null;function SF(i){return Bw||(Bw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,sC=new Map([["","t"]])),i.replaceAll(Bw,(e,t,n)=>t?t.normalize("NFKC"):sC.get(n))}function xT(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),vT(i)}const Zu="pdfjs_internal_id_";function EF(i,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...s]=t;if(!i(n)&&!Number.isInteger(n)||!e(r))return!1;const a=s.length;let u=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;u=!1;break;default:return!1}for(const h of s)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function mi(i,e,t){return Math.min(Math.max(i,e),t)}function wT(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(vT(i))}function AF(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):gg(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,t)=>e+t,0)});class pp{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(s){var h;if(!s)return;let a=null;const u=s.name;if(u==="#text")a=s.value;else if(pp.shouldBuildText(u))(h=s==null?void 0:s.attributes)!=null&&h.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const d of s.children)r(d)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class bT{static setupStorage(e,t,n,r,s){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const u of n.children)u.attributes.value===a.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:s}){const{attributes:a}=t,u=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[h,d]of Object.entries(a))if(d!=null)switch(h){case"class":d.length&&e.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,d)}u&&s.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var m,y;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:n});const u=s!=="richText",h=e.div;if(h.append(a),e.viewport){const v=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=v}u&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const v=document.createTextNode(r.value);a.append(v),u&&pp.shouldBuildText(r.name)&&d.push(v)}return{textDivs:d}}const p=[[r,-1,a]];for(;p.length>0;){const[v,E,A]=p.at(-1);if(E+1===v.children.length){p.pop();continue}const k=v.children[++p.at(-1)[1]];if(k===null)continue;const{name:C}=k;if(C==="#text"){const T=document.createTextNode(k.value);d.push(T),A.append(T);continue}const N=(m=k==null?void 0:k.attributes)!=null&&m.xmlns?document.createElementNS(k.attributes.xmlns,C):document.createElement(C);if(A.append(N),k.attributes&&this.setAttributes({html:N,element:k,storage:t,intent:s,linkService:n}),((y=k.children)==null?void 0:y.length)>0)p.push([k,-1,N]);else if(k.value){const T=document.createTextNode(k.value);u&&pp.shouldBuildText(C)&&d.push(T),N.append(T)}}for(const v of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ho="http://www.w3.org/2000/svg",Vl=class Vl{};le(Vl,"CSS",96),le(Vl,"PDF",72),le(Vl,"PDF_TO_CSS_UNITS",Vl.CSS/Vl.PDF);let Sl=Vl;async function yg(i,e="text"){if(Bf(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class vg{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=s,this.offsetY=a,n*=t;const h=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let p,m,y,v;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,m=0,y=0,v=1;break;case 90:p=0,m=1,y=1,v=0;break;case 270:p=0,m=-1,y=-1,v=0;break;case 0:p=1,m=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,v=-v);let E,A,k,C;p===0?(E=Math.abs(d-e[1])*n+s,A=Math.abs(h-e[0])*n+a,k=(e[3]-e[1])*n,C=(e[2]-e[0])*n):(E=Math.abs(h-e[0])*n+s,A=Math.abs(d-e[1])*n+a,k=(e[2]-e[0])*n,C=(e[3]-e[1])*n),this.transform=[p*n,m*n,y*n,v*n,E-p*n*h-y*n*d,A-m*n*h-v*n*d],this.width=k,this.height=C}get rawDims(){const e=this.viewBox;return ze(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new vg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return we.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];we.applyTransform(t,this.transform);const n=[e[2],e[3]];return we.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return we.applyInverseTransform(n,this.transform),n}}class cS extends pu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Lv(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function uS(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function kF(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function CF(i,e="document.pdf"){if(typeof i!="string")return e;if(Lv(i))return Be('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return e;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},s=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(s.test(a))return r(a);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const d of u)if(s.test(d))return r(d);const h=Array.from(n.searchParams.keys()).reverse();for(const d of h)if(s.test(d))return r(d)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return r(h[0])}return e}class oC{constructor(){le(this,"started",Object.create(null));le(this,"times",[])}time(e){e in this.started&&Be(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Be(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-r}ms
`);return e.join("")}}function Bf(i,e){const t=e?URL.parse(i,e):URL.parse(i);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function $r(i){i.preventDefault()}function Qt(i){i.preventDefault(),i.stopPropagation()}function _F(i){console.log("Deprecated API usage: "+i)}var vp;class U0{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;c(this,vp)||b(this,vp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,vp).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const d=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,d==="-"?(a+=p,u+=m):d==="+"&&(a-=p,u-=m),new Date(Date.UTC(n,r,s,a,u,h))}}vp=new WeakMap,_(U0,vp);function TF(i,{scale:e=1,rotation:t=0}){const{width:n,height:r}=i.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new vg({viewBox:s,userUnit:1,scale:e,rotation:t})}function xg(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Be(`Not a valid color format: "${i}"`),[0,0,0])}function PF(i){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,xg(n))}e.remove()}function Ut(i){const{a:e,b:t,c:n,d:r,e:s,f:a}=i.getTransform();return[e,t,n,r,s,a]}function As(i){const{a:e,b:t,c:n,d:r,e:s,f:a}=i.getTransform().invertSelf();return[e,t,n,r,s,a]}function hu(i,e,t=!1,n=!0){if(e instanceof vg){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=i,u=bn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${s}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=u?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=p,a.height=m):(a.width=m,a.height=p)}n&&i.setAttribute("data-main-rotation",e.rotation)}class Zs{constructor(){const{pixelRatio:e}=Zs;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,s=-1){let a=1/0,u=1/0,h=1/0;n=Zs.capPixels(n,s),n>0&&(a=Math.sqrt(n/(e*t))),r!==-1&&(u=r/e,h=r/t);const d=Math.min(a,u,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const yb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class RF{static get isDarkMode(){var e;return ze(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class NF{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),ze(this,"commentForegroundColor",xg(n))}}function LF(i,e,t,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return i=Math.round(i*n+r),e=Math.round(e*n+r),t=Math.round(t*n+r),[i,e,t]}function aC(i,e){const t=i[0]/255,n=i[1]/255,r=i[2]/255,s=Math.max(t,n,r),a=Math.min(t,n,r),u=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const h=s-a;switch(e[1]=u<.5?h/(s+a):h/(2-s-a),s){case t:e[0]=((n-r)/h+(n<r?6:0))*60;break;case n:e[0]=((r-t)/h+2)*60;break;case r:e[0]=((t-n)/h+4)*60;break}}e[2]=u}function vb(i,e){const t=i[0],n=i[1],r=i[2],s=(1-Math.abs(2*r-1))*n,a=s*(1-Math.abs(t/60%2-1)),u=r-s/2;switch(Math.floor(t/60)){case 0:e[0]=s+u,e[1]=a+u,e[2]=u;break;case 1:e[0]=a+u,e[1]=s+u,e[2]=u;break;case 2:e[0]=u,e[1]=s+u,e[2]=a+u;break;case 3:e[0]=u,e[1]=a+u,e[2]=s+u;break;case 4:e[0]=a+u,e[1]=u,e[2]=s+u;break;case 5:case 6:e[0]=s+u,e[1]=u,e[2]=a+u;break}}function lC(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function cC(i,e,t){vb(i,t),t.map(lC);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];vb(e,t),t.map(lC);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const uC=new Map;function DF(i,e){const t=i[0]+i[1]*256+i[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=uC.get(t);if(n)return n;const r=new Float32Array(9),s=r.subarray(0,3),a=r.subarray(3,6);aC(i,a);const u=r.subarray(6,9);aC(e,u);const h=u[2]<.5,d=h?12:4.5;if(a[2]=h?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),cC(a,u,s)<d){let p,m;h?(p=a[2],m=1):(p=0,m=a[2]);const y=.005;for(;m-p>y;){const v=a[2]=(p+m)/2;h===cC(a,u,s)<d?p=v:m=v}a[2]=h?m:p}return vb(a,s),n=we.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),uC.set(t,n),n}function ST({html:i,dir:e,className:t},n){const r=document.createDocumentFragment();if(typeof i=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=i.split(/(?:\r\n?|\n)/);for(let u=0,h=a.length;u<h;++u){const d=a[u];s.append(document.createTextNode(d)),u<h-1&&s.append(document.createElement("br"))}r.append(s)}else bT.render({xfaHtml:i,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",t),n.append(r)}function ET(i){const e=new Path2D;if(!i)return e;for(let t=0,n=i.length;t<n;)switch(i[t++]){case Rf.moveTo:e.moveTo(i[t++],i[t++]);break;case Rf.lineTo:e.lineTo(i[t++],i[t++]);break;case Rf.curveTo:e.bezierCurveTo(i[t++],i[t++],i[t++],i[t++],i[t++],i[t++]);break;case Rf.quadraticCurveTo:e.quadraticCurveTo(i[t++],i[t++],i[t++],i[t++]);break;case Rf.closePath:e.closePath();break;default:Be(`Unrecognized drawing path operator: ${i[t-1]}`);break}return e}var Na,La,Tr,Pr,xp,Da,lh,ch,wp,nv,AT,qn,kT,CT,Gu,zf;const mo=class mo{constructor(e){_(this,qn);_(this,Na,null);_(this,La,null);_(this,Tr);_(this,Pr,null);_(this,xp,null);_(this,Da,null);_(this,lh,null);_(this,ch,null);b(this,Tr,e),c(mo,wp)||b(mo,wp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=b(this,Na,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,Tr)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",$r,{signal:t}),e.addEventListener("pointerdown",P(mo,nv,AT),{signal:t}));const n=b(this,Pr,document.createElement("div"));n.className="buttons",e.append(n);const r=c(this,Tr).toolbarPosition;if(r){const{style:s}=e,a=c(this,Tr)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,Na)}hide(){var e;c(this,Na).classList.add("hidden"),(e=c(this,La))==null||e.hideDropdown()}show(){var e,t;c(this,Na).classList.remove("hidden"),(e=c(this,xp))==null||e.shown(),(t=c(this,Da))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,Tr),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",c(mo,wp)[e]),P(this,qn,Gu).call(this,n)&&n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,Pr).append(n)}async addAltText(e){const t=await e.render();P(this,qn,Gu).call(this,t),c(this,Pr).append(t,c(this,qn,zf)),b(this,xp,e)}addComment(e,t=null){if(c(this,Da))return;const n=e.renderForToolbar();if(!n)return;P(this,qn,Gu).call(this,n);const r=b(this,lh,c(this,qn,zf));t?(c(this,Pr).insertBefore(n,t),c(this,Pr).insertBefore(r,t)):c(this,Pr).append(n,r),b(this,Da,e),e.toolbar=this}addColorPicker(e){if(c(this,La))return;b(this,La,e);const t=e.renderButton();P(this,qn,Gu).call(this,t),c(this,Pr).append(t,c(this,qn,zf))}async addEditSignatureButton(e){const t=b(this,ch,await e.renderEditButton(c(this,Tr)));P(this,qn,Gu).call(this,t),c(this,Pr).append(t,c(this,qn,zf))}removeButton(e){var t,n;switch(e){case"comment":(t=c(this,Da))==null||t.removeToolbarCommentButton(),b(this,Da,null),(n=c(this,lh))==null||n.remove(),b(this,lh,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const r=c(this,Pr).querySelector(n);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){c(this,ch)&&(c(this,ch).title=e)}remove(){var e;c(this,Na).remove(),(e=c(this,La))==null||e.destroy(),b(this,La,null)}};Na=new WeakMap,La=new WeakMap,Tr=new WeakMap,Pr=new WeakMap,xp=new WeakMap,Da=new WeakMap,lh=new WeakMap,ch=new WeakMap,wp=new WeakMap,nv=new WeakSet,AT=function(e){e.stopPropagation()},qn=new WeakSet,kT=function(e){c(this,Tr)._focusEventsAllowed=!1,Qt(e)},CT=function(e){c(this,Tr)._focusEventsAllowed=!0,Qt(e)},Gu=function(e){const t=c(this,Tr)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",P(this,qn,kT).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",P(this,qn,CT).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",$r,{signal:t}),!0)},zf=function(){const e=document.createElement("div");return e.className="divider",e},_(mo,nv),_(mo,wp,null);let xb=mo;var bp,Xl,yo,ia,_T,TT,wb;class IF{constructor(e){_(this,ia);_(this,bp,null);_(this,Xl,null);_(this,yo);b(this,yo,e)}show(e,t,n){const[r,s]=P(this,ia,TT).call(this,t,n),{style:a}=c(this,Xl)||b(this,Xl,P(this,ia,_T).call(this));e.append(c(this,Xl)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Xl).remove()}}bp=new WeakMap,Xl=new WeakMap,yo=new WeakMap,ia=new WeakSet,_T=function(){const e=b(this,Xl,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=c(this,yo)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",$r,{signal:t});const n=b(this,bp,document.createElement("div"));return n.className="buttons",e.append(n),c(this,yo).hasCommentManager()&&P(this,ia,wb).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,yo).commentSelection("floating_button")}),P(this,ia,wb).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,yo).highlightSelection("floating_button")}),e},TT=function(e,t){let n=0,r=0;for(const s of e){const a=s.y+s.height;if(a<n)continue;const u=s.x+(t?s.width:0);if(a>n){r=u,n=a;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,n]},wb=function(e,t,n,r){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const u=c(this,yo)._signal;u instanceof AbortSignal&&!u.aborted&&(s.addEventListener("contextmenu",$r,{signal:u}),s.addEventListener("click",r,{signal:u})),c(this,bp).append(s)};function PT(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}var Kl,Yl,uh,Ql;const ft=class ft{static initializeAndAddPointerId(e){(c(ft,Yl)||b(ft,Yl,new Set)).add(e)}static setPointer(e,t){c(ft,Kl)||b(ft,Kl,t),c(ft,Ql)??b(ft,Ql,e)}static setTimeStamp(e){b(ft,uh,e)}static isSamePointerId(e){return c(ft,Kl)===e}static isSamePointerIdOrRemove(e){var t;return c(ft,Kl)===e?!0:((t=c(ft,Yl))==null||t.delete(e),!1)}static isSamePointerType(e){return c(ft,Ql)===e}static isInitializedAndDifferentPointerType(e){return c(ft,Ql)!==null&&!ft.isSamePointerType(e)}static isSameTimeStamp(e){return c(ft,uh)===e}static isUsingMultiplePointers(){var e;return((e=c(ft,Yl))==null?void 0:e.size)>=1}static clearPointerType(){b(ft,Ql,null)}static clearPointerIds(){b(ft,Kl,NaN),b(ft,Yl,null)}static clearTimeStamp(){b(ft,uh,NaN)}};Kl=new WeakMap,Yl=new WeakMap,uh=new WeakMap,Ql=new WeakMap,_(ft,Kl,NaN),_(ft,Yl,null),_(ft,uh,NaN),_(ft,Ql,null);let Zn=ft;var iv;class MF{constructor(){_(this,iv,0)}get id(){return`${dp}${mn(this,iv)._++}`}}iv=new WeakMap;var hh,Sp,ei,dh,i0;const IS=class IS{constructor(){_(this,dh);_(this,hh,xT());_(this,Sp,0);_(this,ei,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ze(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:s}=e;return P(this,dh,i0).call(this,`${t}_${n}_${r}_${s}`,e)}async getFromUrl(e){return P(this,dh,i0).call(this,e,e)}async getFromBlob(e,t){const n=await t;return P(this,dh,i0).call(this,e,n)}async getFromId(e){c(this,ei)||b(this,ei,new Map);const t=c(this,ei).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,ei)||b(this,ei,new Map);let n=c(this,ei).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${c(this,hh)}_${mn(this,Sp)._++}`,refCounter:1,isSvg:!1},c(this,ei).set(e,n),c(this,ei).set(n.id,n),n}getSvgUrl(e){const t=c(this,ei).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,ei)||b(this,ei,new Map);const t=c(this,ei).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,hh)}_`)}};hh=new WeakMap,Sp=new WeakMap,ei=new WeakMap,dh=new WeakSet,i0=async function(e,t){c(this,ei)||b(this,ei,new Map);let n=c(this,ei).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,hh)}_${mn(this,Sp)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await yg(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const s=IS._isSVGFittingCanvas,a=new FileReader,u=new Image,h=new Promise((d,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,d()},a.onload=async()=>{const m=n.svgUrl=a.result;u.src=await s?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=a.onerror=p});a.readAsDataURL(r),await h}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Be(r),n=null}return c(this,ei).set(e,n),n&&c(this,ei).set(n.id,n),n};let bb=IS;var rn,Ia,Ep,zt;class FF{constructor(e=128){_(this,rn,[]);_(this,Ia,!1);_(this,Ep);_(this,zt,-1);b(this,Ep,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:u=!1}){if(r&&e(),c(this,Ia))return;const h={cmd:e,undo:t,post:n,type:s};if(c(this,zt)===-1){c(this,rn).length>0&&(c(this,rn).length=0),b(this,zt,0),c(this,rn).push(h);return}if(a&&c(this,rn)[c(this,zt)].type===s){u&&(h.undo=c(this,rn)[c(this,zt)].undo),c(this,rn)[c(this,zt)]=h;return}const d=c(this,zt)+1;d===c(this,Ep)?c(this,rn).splice(0,1):(b(this,zt,d),d<c(this,rn).length&&c(this,rn).splice(d)),c(this,rn).push(h)}undo(){if(c(this,zt)===-1)return;b(this,Ia,!0);const{undo:e,post:t}=c(this,rn)[c(this,zt)];e(),t==null||t(),b(this,Ia,!1),b(this,zt,c(this,zt)-1)}redo(){if(c(this,zt)<c(this,rn).length-1){b(this,zt,c(this,zt)+1),b(this,Ia,!0);const{cmd:e,post:t}=c(this,rn)[c(this,zt)];e(),t==null||t(),b(this,Ia,!1)}}hasSomethingToUndo(){return c(this,zt)!==-1}hasSomethingToRedo(){return c(this,zt)<c(this,rn).length-1}cleanType(e){if(c(this,zt)!==-1){for(let t=c(this,zt);t>=0;t--)if(c(this,rn)[t].type!==e){c(this,rn).splice(t+1,c(this,zt)-t),b(this,zt,t);return}c(this,rn).length=0,b(this,zt,-1)}}destroy(){b(this,rn,null)}}rn=new WeakMap,Ia=new WeakMap,Ep=new WeakMap,zt=new WeakMap;var rv,RT;class wg{constructor(e){_(this,rv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=bn.platform;for(const[n,r,s={}]of e)for(const a of n){const u=a.startsWith("mac+");t&&u?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!u&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(P(this,rv,RT).call(this,t));if(!n)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:u=null}}=n;u&&!u(e,t)||(r.bind(e,...a,t)(),s||Qt(t))}}rv=new WeakSet,RT=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const sv=class sv{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return PF(e),ze(this,"_colors",e)}convert(e){const t=xg(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((s,a)=>s===t[a]))return sv._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?we.makeHexColor(...t):e}};le(sv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Sb=sv;var fh,Ki,ph,Gt,vn,mh,Rr,gh,Nr,ti,Ma,Fa,yh,Oa,Ts,Lr,Jl,Ap,kp,vh,Cp,Ps,ja,xh,Ba,Rs,ov,za,wh,_p,Ua,Zl,bh,Ha,Tp,cn,ht,vo,$a,Va,Pp,Sh,Rp,Wa,Ns,xo,Np,Lp,Dr,ve,r0,Eb,NT,LT,Uf,DT,IT,MT,Ab,FT,OT,jT,BT,ci,fo,zT,UT,kb,HT,Hf,Cb;const th=class th{constructor(e,t,n,r,s,a,u,h,d,p,m,y,v,E,A,k){_(this,ve);_(this,fh,new AbortController);_(this,Ki,null);_(this,ph,null);_(this,Gt,new Map);_(this,vn,new Map);_(this,mh,null);_(this,Rr,null);_(this,gh,null);_(this,Nr,new FF);_(this,ti,null);_(this,Ma,null);_(this,Fa,null);_(this,yh,0);_(this,Oa,new Set);_(this,Ts,null);_(this,Lr,null);_(this,Jl,new Set);le(this,"_editorUndoBar",null);_(this,Ap,!1);_(this,kp,!1);_(this,vh,!1);_(this,Cp,null);_(this,Ps,null);_(this,ja,null);_(this,xh,null);_(this,Ba,!1);_(this,Rs,null);_(this,ov,new MF);_(this,za,!1);_(this,wh,!1);_(this,_p,!1);_(this,Ua,null);_(this,Zl,null);_(this,bh,null);_(this,Ha,null);_(this,Tp,null);_(this,cn,He.NONE);_(this,ht,new Set);_(this,vo,null);_(this,$a,null);_(this,Va,null);_(this,Pp,null);_(this,Sh,null);_(this,Rp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,Wa,[0,0]);_(this,Ns,null);_(this,xo,null);_(this,Np,null);_(this,Lp,null);_(this,Dr,null);const C=this._signal=c(this,fh).signal;b(this,xo,e),b(this,Np,t),b(this,Lp,n),b(this,mh,r),b(this,ti,s),b(this,$a,a),b(this,Sh,h),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:C}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),u._on("setpreference",this.onSetPreference.bind(this),{signal:C}),u._on("switchannotationeditorparams",N=>this.updateParams(N.type,N.value),{signal:C}),window.addEventListener("pointerdown",()=>{b(this,wh,!0)},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{b(this,wh,!1)},{capture:!0,signal:C}),P(this,ve,DT).call(this),P(this,ve,BT).call(this),P(this,ve,Ab).call(this),b(this,Rr,h.annotationStorage),b(this,Cp,h.filterFactory),b(this,Va,d),b(this,xh,p||null),b(this,Ap,m),b(this,kp,y),b(this,vh,v),b(this,Tp,E||null),this.viewParameters={realScale:Sl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=k!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=th.prototype,t=a=>c(a,xo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ze(this,"_keyboardManager",new wg([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&c(a,xo).contains(u)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&c(a,xo).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,n,r,s,a,u,h,d;(e=c(this,Dr))==null||e.resolve(),b(this,Dr,null),(t=c(this,fh))==null||t.abort(),b(this,fh,null),this._signal=null;for(const p of c(this,vn).values())p.destroy();c(this,vn).clear(),c(this,Gt).clear(),c(this,Jl).clear(),(n=c(this,Ha))==null||n.clear(),b(this,Ki,null),c(this,ht).clear(),c(this,Nr).destroy(),(r=c(this,mh))==null||r.destroy(),(s=c(this,ti))==null||s.destroy(),(a=c(this,$a))==null||a.destroy(),(u=c(this,Rs))==null||u.hide(),b(this,Rs,null),(h=c(this,bh))==null||h.destroy(),b(this,bh,null),b(this,ph,null),c(this,Ps)&&(clearTimeout(c(this,Ps)),b(this,Ps,null)),c(this,Ns)&&(clearTimeout(c(this,Ns)),b(this,Ns,null)),(d=this._editorUndoBar)==null||d.destroy(),b(this,Sh,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,Tp)}get useNewAltTextFlow(){return c(this,kp)}get useNewAltTextWhenAddingImage(){return c(this,vh)}get hcmFilter(){return ze(this,"hcmFilter",c(this,Va)?c(this,Cp).addHCMFilter(c(this,Va).foreground,c(this,Va).background):"none")}get direction(){return ze(this,"direction",getComputedStyle(c(this,xo)).direction)}get _highlightColors(){return ze(this,"_highlightColors",c(this,xh)?new Map(c(this,xh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ze(this,"highlightColors",null);const t=new Map,n=!!c(this,Va);for(const[r,s]of e){const a=r.endsWith("_HCM");if(n&&a){t.set(r.replace("_HCM",""),s);continue}!n&&!a&&t.set(r,s)}return ze(this,"highlightColors",t)}get highlightColorNames(){return ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,Fa,e)}setMainHighlightColorPicker(e){b(this,bh,e)}editAltText(e,t=!1){var n;(n=c(this,mh))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!c(this,ti)}editComment(e,t,n,r){var s;(s=c(this,ti))==null||s.showDialog(this,e,t,n,r)}selectComment(e,t){const n=c(this,vn).get(e),r=n==null?void 0:n.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=c(this,ti))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=c(this,ti))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=c(this,ti))==null||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var r;(r=c(this,ti))==null||r.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=c(this,ti))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=c(this,ti))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(c(this,vn).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){var t;(t=c(this,$a))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,$a)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,vh,t);break}}onPageChanging({pageNumber:e}){b(this,yh,e-1)}focusMainContainer(){c(this,xo).focus()}findParent(e,t){for(const n of c(this,vn).values()){const{x:r,y:s,width:a,height:u}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=s&&t<=s+u)return n}return null}disableUserSelect(e=!1){c(this,Np).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Jl).add(e)}removeShouldRescale(e){c(this,Jl).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Sl.PDF_TO_CSS_UNITS;for(const n of c(this,Jl))n.onScaleChanging();(t=c(this,Fa))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:u}=n,h=n.toString(),p=P(this,ve,r0).call(this,n).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;n.empty();const y=P(this,ve,Eb).call(this,p),v=c(this,cn)===He.NONE,E=()=>{const A=y==null?void 0:y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:u,text:h});v&&this.showAllEditors("highlight",!0,!0),t&&(A==null||A.editComment())};if(v){this.switchToMode(He.HIGHLIGHT,E);return}E()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!c(this,Rr))return null;const t=`${dp}${e}`,n=c(this,Rr).getRawValue(t);return n&&c(this,Rr).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&c(this,Rr)&&!c(this,Rr).has(e.id)&&c(this,Rr).setValue(e.id,e)}a11yAlert(e,t=null){const n=c(this,Lp);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,Ba)&&(b(this,Ba,!1),P(this,ve,Uf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,ht))if(t.div.contains(e)){b(this,Zl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Zl))return;const[e,t]=c(this,Zl);b(this,Zl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){P(this,ve,Ab).call(this),this.setEditingState(!0)}removeEditListeners(){P(this,ve,FT).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of c(this,Lr))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of c(this,Lr))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=c(this,Ki))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,ht)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of c(this,Lr))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){Be(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const h of n){const d=await r.deserialize(h);if(!d)return;s.push(d)}const a=()=>{for(const h of s)P(this,ve,kb).call(this,h);P(this,ve,Cb).call(this,s)},u=()=>{for(const h of s)h.remove()};this.addCommands({cmd:a,undo:u,mustExec:!0})}catch(s){Be(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,cn)!==He.NONE&&!this.isEditorHandlingKeyboard&&th._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Ba)&&(b(this,Ba,!1),P(this,ve,Uf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(P(this,ve,IT).call(this),P(this,ve,OT).call(this),P(this,ve,ci).call(this,{isEditing:c(this,cn)!==He.NONE,isEmpty:P(this,ve,Hf).call(this),hasSomethingToUndo:c(this,Nr).hasSomethingToUndo(),hasSomethingToRedo:c(this,Nr).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,ve,MT).call(this),P(this,ve,jT).call(this),P(this,ve,ci).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,Lr)){b(this,Lr,e);for(const t of c(this,Lr))P(this,ve,fo).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,ov).id}get currentLayer(){return c(this,vn).get(c(this,yh))}getLayer(e){return c(this,vn).get(e)}get currentPageIndex(){return c(this,yh)}addLayer(e){c(this,vn).set(e.pageIndex,e),c(this,za)?e.enable():e.disable()}removeLayer(e){c(this,vn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,s=!1,a=!1){var u,h,d,p,m,y;if(c(this,cn)!==e&&!(c(this,Dr)&&(await c(this,Dr).promise,!c(this,Dr)))){if(b(this,Dr,Promise.withResolvers()),(u=c(this,Fa))==null||u.commitOrRemove(),c(this,cn)===He.POPUP&&((h=c(this,ti))==null||h.hideSidebar()),(d=c(this,ti))==null||d.destroyPopup(),b(this,cn,e),e===He.NONE){this.setEditingState(!1),P(this,ve,UT).call(this);for(const v of c(this,Gt).values())v.hideStandaloneCommentButton();(p=this._editorUndoBar)==null||p.hide(),this.toggleComment(null),c(this,Dr).resolve();return}for(const v of c(this,Gt).values())v.addStandaloneCommentButton();e===He.SIGNATURE&&await((m=c(this,$a))==null?void 0:m.loadSignatures()),n&&Zn.clearPointerType(),this.setEditingState(!0),await P(this,ve,zT).call(this),this.unselectAll();for(const v of c(this,vn).values())v.updateMode(e);if(e===He.POPUP){c(this,ph)||b(this,ph,await c(this,Sh).getAnnotationsByType(new Set(c(this,Lr).map(A=>A._editorType))));const v=new Set,E=[];for(const A of c(this,Gt).values()){const{annotationElementId:k,hasComment:C,deleted:N}=A;k&&v.add(k),C&&!N&&E.push(A.getData())}for(const A of c(this,ph)){const{id:k,popupRef:C,contentsObj:N}=A;C&&(N!=null&&N.str)&&!v.has(k)&&!c(this,Oa).has(k)&&E.push(A)}(y=c(this,ti))==null||y.showSidebar(E)}if(!t){r&&this.addNewEditorFromKeyboard(),c(this,Dr).resolve();return}for(const v of c(this,Gt).values())v.uid===t?(this.setSelected(v),a?v.editComment():s?v.enterInEditMode():v.focus()):v.unselect();c(this,Dr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,cn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(c(this,Lr)){switch(e){case Je.CREATE:this.currentLayer.addNewEditor(t);return;case Je.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Pp)||b(this,Pp,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of c(this,ht))n.updateParams(e,t);else for(const n of c(this,Lr))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const a of c(this,Gt).values())a.editorType===e&&a.show(t);(((s=c(this,Pp))==null?void 0:s.get(Je.HIGHLIGHT_SHOW_ALL))??!0)!==t&&P(this,ve,fo).call(this,[[Je.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,_p)!==e){b(this,_p,e);for(const t of c(this,vn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of c(this,Gt).values())t.pageIndex===e&&(yield t)}getEditor(e){return c(this,Gt).get(e)}addEditor(e){c(this,Gt).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(c(this,Ps)&&clearTimeout(c(this,Ps)),b(this,Ps,setTimeout(()=>{this.focusMainContainer(),b(this,Ps,null)},0))),c(this,Gt).delete(e.id),e.annotationElementId&&((t=c(this,Ha))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,Oa).has(e.annotationElementId))&&((n=c(this,Rr))==null||n.remove(e.id))}addDeletedAnnotationElement(e){c(this,Oa).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Oa).has(e)}removeDeletedAnnotationElement(e){c(this,Oa).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Ki)!==e&&(b(this,Ki,e),e&&P(this,ve,fo).call(this,e.propertiesToUpdate))}updateUI(e){c(this,ve,HT)===e&&P(this,ve,fo).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){P(this,ve,fo).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,ht).has(e)){c(this,ht).delete(e),e.unselect(),P(this,ve,ci).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,ht).add(e),e.select(),P(this,ve,fo).call(this,e.propertiesToUpdate),P(this,ve,ci).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=c(this,Fa))==null||t.commitOrRemove();for(const n of c(this,ht))n!==e&&n.unselect();c(this,ht).clear(),c(this,ht).add(e),e.select(),P(this,ve,fo).call(this,e.propertiesToUpdate),P(this,ve,ci).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,ht).has(e)}get firstSelectedEditor(){return c(this,ht).values().next().value}unselect(e){e.unselect(),c(this,ht).delete(e),P(this,ve,ci).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,ht).size!==0}get isEnterHandled(){return c(this,ht).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,Nr).undo(),P(this,ve,ci).call(this,{hasSomethingToUndo:c(this,Nr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,ve,Hf).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,Nr).redo(),P(this,ve,ci).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Nr).hasSomethingToRedo(),isEmpty:P(this,ve,Hf).call(this)})}addCommands(e){c(this,Nr).add(e),P(this,ve,ci).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,ve,Hf).call(this)})}cleanUndoStack(e){c(this,Nr).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,ht)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const u of t)u.remove()},r=()=>{for(const a of t)P(this,ve,kb).call(this,a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Ki))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Ki)||this.hasSelection}selectAll(){for(const e of c(this,ht))e.commit();P(this,ve,Cb).call(this,c(this,Gt).values())}unselectAll(){var e;if(!(c(this,Ki)&&(c(this,Ki).commitOrRemove(),c(this,cn)!==He.NONE))&&!((e=c(this,Fa))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,ht))t.unselect();c(this,ht).clear(),P(this,ve,ci).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,Wa)[0]+=e,c(this,Wa)[1]+=t;const[r,s]=c(this,Wa),a=[...c(this,ht)],u=1e3;c(this,Ns)&&clearTimeout(c(this,Ns)),b(this,Ns,setTimeout(()=>{b(this,Ns,null),c(this,Wa)[0]=c(this,Wa)[1]=0,this.addCommands({cmd:()=>{for(const h of a)c(this,Gt).has(h.id)&&(h.translateInPage(r,s),h.translationDone())},undo:()=>{for(const h of a)c(this,Gt).has(h.id)&&(h.translateInPage(-r,-s),h.translationDone())},mustExec:!1})},u));for(const h of a)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Ts,new Map);for(const e of c(this,ht))c(this,Ts).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Ts))return!1;this.disableUserSelect(!1);const e=c(this,Ts);b(this,Ts,null);let t=!1;for(const[{x:r,y:s,pageIndex:a},u]of e)u.newX=r,u.newY=s,u.newPageIndex=a,t||(t=r!==u.savedX||s!==u.savedY||a!==u.savedPageIndex);if(!t)return!1;const n=(r,s,a,u)=>{if(c(this,Gt).has(r.id)){const h=c(this,vn).get(u);h?r._setParentAndPosition(h,s,a):(r.pageIndex=u,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:u}]of e)n(r,s,a,u)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:u}]of e)n(r,s,a,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,Ts))for(const n of c(this,Ts).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,ht).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Ki)===e}getActive(){return c(this,Ki)}getMode(){return c(this,cn)}isEditingMode(){return c(this,cn)!==He.NONE}get imageManager(){return ze(this,"imageManager",new bb)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,p=t.rangeCount;d<p;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:r,width:s,height:a}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(d,p,m,y)=>({x:(p-r)/a,y:1-(d+m-n)/s,width:y/a,height:m/s});break;case"180":u=(d,p,m,y)=>({x:1-(d+m-n)/s,y:1-(p+y-r)/a,width:m/s,height:y/a});break;case"270":u=(d,p,m,y)=>({x:1-(p+y-r)/a,y:(d-n)/s,width:y/a,height:m/s});break;default:u=(d,p,m,y)=>({x:(d-n)/s,y:(p-r)/a,width:m/s,height:y/a});break}const h=[];for(let d=0,p=t.rangeCount;d<p;d++){const m=t.getRangeAt(d);if(!m.collapsed)for(const{x:y,y:v,width:E,height:A}of m.getClientRects())E===0||A===0||h.push(u(y,v,E,A))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,gh)||b(this,gh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,gh))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,gh))==null?void 0:r.get(e.data.id);if(!t)return;const n=c(this,Rr).getRawValue(t);n&&(c(this,cn)===He.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var s;const r=(s=c(this,Ha))==null?void 0:s.get(e);r&&(r.setCanvas(t,n),c(this,Ha).delete(e))}addMissingCanvas(e,t){(c(this,Ha)||b(this,Ha,new Map)).set(e,t)}};fh=new WeakMap,Ki=new WeakMap,ph=new WeakMap,Gt=new WeakMap,vn=new WeakMap,mh=new WeakMap,Rr=new WeakMap,gh=new WeakMap,Nr=new WeakMap,ti=new WeakMap,Ma=new WeakMap,Fa=new WeakMap,yh=new WeakMap,Oa=new WeakMap,Ts=new WeakMap,Lr=new WeakMap,Jl=new WeakMap,Ap=new WeakMap,kp=new WeakMap,vh=new WeakMap,Cp=new WeakMap,Ps=new WeakMap,ja=new WeakMap,xh=new WeakMap,Ba=new WeakMap,Rs=new WeakMap,ov=new WeakMap,za=new WeakMap,wh=new WeakMap,_p=new WeakMap,Ua=new WeakMap,Zl=new WeakMap,bh=new WeakMap,Ha=new WeakMap,Tp=new WeakMap,cn=new WeakMap,ht=new WeakMap,vo=new WeakMap,$a=new WeakMap,Va=new WeakMap,Pp=new WeakMap,Sh=new WeakMap,Rp=new WeakMap,Wa=new WeakMap,Ns=new WeakMap,xo=new WeakMap,Np=new WeakMap,Lp=new WeakMap,Dr=new WeakMap,ve=new WeakSet,r0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Eb=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of c(this,vn).values())if(n.hasTextLayer(e))return n;return null},NT=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=P(this,ve,r0).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(c(this,Rs)||b(this,Rs,new IF(this)),c(this,Rs).show(n,r,this.direction==="ltr"))},LT=function(){var s,a,u;const e=document.getSelection();if(!e||e.isCollapsed){c(this,vo)&&((s=c(this,Rs))==null||s.hide(),b(this,vo,null),P(this,ve,ci).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,vo))return;const r=P(this,ve,r0).call(this,e).closest(".textLayer");if(!r){c(this,vo)&&((a=c(this,Rs))==null||a.hide(),b(this,vo,null),P(this,ve,ci).call(this,{hasSelectedText:!1}));return}if((u=c(this,Rs))==null||u.hide(),b(this,vo,t),P(this,ve,ci).call(this,{hasSelectedText:!0}),!(c(this,cn)!==He.HIGHLIGHT&&c(this,cn)!==He.NONE)&&(c(this,cn)===He.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,Ba,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=c(this,cn)===He.HIGHLIGHT?P(this,ve,Eb).call(this,r):null;if(h==null||h.toggleDrawing(),c(this,wh)){const d=new AbortController,p=this.combinedSignal(d),m=y=>{y.type==="pointerup"&&y.button!==0||(d.abort(),h==null||h.toggleDrawing(!0),y.type==="pointerup"&&P(this,ve,Uf).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("blur",m,{signal:p})}else h==null||h.toggleDrawing(!0),P(this,ve,Uf).call(this,"main_toolbar")}},Uf=function(e=""){c(this,cn)===He.HIGHLIGHT?this.highlightSelection(e):c(this,Ap)&&P(this,ve,NT).call(this)},DT=function(){document.addEventListener("selectionchange",P(this,ve,LT).bind(this),{signal:this._signal})},IT=function(){if(c(this,ja))return;b(this,ja,new AbortController);const e=this.combinedSignal(c(this,ja));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},MT=function(){var e;(e=c(this,ja))==null||e.abort(),b(this,ja,null)},Ab=function(){if(c(this,Ua))return;b(this,Ua,new AbortController);const e=this.combinedSignal(c(this,Ua));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},FT=function(){var e;(e=c(this,Ua))==null||e.abort(),b(this,Ua,null)},OT=function(){if(c(this,Ma))return;b(this,Ma,new AbortController);const e=this.combinedSignal(c(this,Ma));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},jT=function(){var e;(e=c(this,Ma))==null||e.abort(),b(this,Ma,null)},BT=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ci=function(e){Object.entries(e).some(([n,r])=>c(this,Rp)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Rp),e)}),c(this,cn)===He.HIGHLIGHT&&e.hasSelectedEditor===!1&&P(this,ve,fo).call(this,[[Je.HIGHLIGHT_FREE,!0]]))},fo=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},zT=async function(){if(!c(this,za)){b(this,za,!0);const e=[];for(const t of c(this,vn).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,Gt).values())t.enable()}},UT=function(){if(this.unselectAll(),c(this,za)){b(this,za,!1);for(const e of c(this,vn).values())e.disable();for(const e of c(this,Gt).values())e.disable()}},kb=function(e){const t=c(this,vn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},HT=function(){let e=null;for(e of c(this,ht));return e},Hf=function(){if(c(this,Gt).size===0)return!0;if(c(this,Gt).size===1)for(const e of c(this,Gt).values())return e.isEmpty();return!1},Cb=function(e){for(const t of c(this,ht))t.unselect();c(this,ht).clear();for(const t of e)t.isEmpty()||(c(this,ht).add(t),t.select());P(this,ve,ci).call(this,{hasSelectedEditor:this.hasSelection})},le(th,"TRANSLATE_SMALL",1),le(th,"TRANSLATE_BIG",10);let du=th;var kn,Ls,es,Eh,Ds,Yi,Ah,Is,Pi,wo,ec,Ms,Ga,fs,$f,s0;const ui=class ui{constructor(e){_(this,fs);_(this,kn,null);_(this,Ls,!1);_(this,es,null);_(this,Eh,null);_(this,Ds,null);_(this,Yi,null);_(this,Ah,!1);_(this,Is,null);_(this,Pi,null);_(this,wo,null);_(this,ec,null);_(this,Ms,!1);b(this,Pi,e),b(this,Ms,e._uiManager.useNewAltTextFlow),c(ui,Ga)||b(ui,Ga,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ui._l10n??(ui._l10n=e)}async render(){const e=b(this,es,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,Eh,document.createElement("span"));e.append(t),c(this,Ms)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(ui,Ga).missing),t.setAttribute("data-l10n-id",c(ui,Ga)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Pi)._uiManager._signal;e.addEventListener("contextmenu",$r,{signal:n}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const r=s=>{s.preventDefault(),c(this,Pi)._uiManager.editAltText(c(this,Pi)),c(this,Ms)&&c(this,Pi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,fs,$f)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(b(this,Ah,!0),r(s))},{signal:n}),await P(this,fs,s0).call(this),e}finish(){c(this,es)&&(c(this,es).focus({focusVisible:c(this,Ah)}),b(this,Ah,!1))}isEmpty(){return c(this,Ms)?c(this,kn)===null:!c(this,kn)&&!c(this,Ls)}hasData(){return c(this,Ms)?c(this,kn)!==null||!!c(this,wo):this.isEmpty()}get guessedText(){return c(this,wo)}async setGuessedText(e){c(this,kn)===null&&(b(this,wo,e),b(this,ec,await ui._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),P(this,fs,s0).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,Ms)||c(this,kn)){(t=c(this,Is))==null||t.remove(),b(this,Is,null);return}if(!c(this,Is)){const n=b(this,Is,document.createElement("div"));n.className="noAltTextBadge",c(this,Pi).div.append(n)}c(this,Is).classList.toggle("hidden",!e)}serialize(e){let t=c(this,kn);return!e&&c(this,wo)===t&&(t=c(this,ec)),{altText:t,decorative:c(this,Ls),guessedText:c(this,wo),textWithDisclaimer:c(this,ec)}}get data(){return{altText:c(this,kn),decorative:c(this,Ls)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:s=!1}){n&&(b(this,wo,n),b(this,ec,r)),!(c(this,kn)===e&&c(this,Ls)===t)&&(s||(b(this,kn,e),b(this,Ls,t)),P(this,fs,s0).call(this))}toggle(e=!1){c(this,es)&&(!e&&c(this,Yi)&&(clearTimeout(c(this,Yi)),b(this,Yi,null)),c(this,es).disabled=!e)}shown(){c(this,Pi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,fs,$f)}})}destroy(){var e,t;(e=c(this,es))==null||e.remove(),b(this,es,null),b(this,Eh,null),b(this,Ds,null),(t=c(this,Is))==null||t.remove(),b(this,Is,null)}};kn=new WeakMap,Ls=new WeakMap,es=new WeakMap,Eh=new WeakMap,Ds=new WeakMap,Yi=new WeakMap,Ah=new WeakMap,Is=new WeakMap,Pi=new WeakMap,wo=new WeakMap,ec=new WeakMap,Ms=new WeakMap,Ga=new WeakMap,fs=new WeakSet,$f=function(){return c(this,kn)&&"added"||c(this,kn)===null&&this.guessedText&&"review"||"missing"},s0=async function(){var r,s,a;const e=c(this,es);if(!e)return;if(c(this,Ms)){if(e.classList.toggle("done",!!c(this,kn)),e.setAttribute("data-l10n-id",c(ui,Ga)[c(this,fs,$f)]),(r=c(this,Eh))==null||r.setAttribute("data-l10n-id",c(ui,Ga)[`${c(this,fs,$f)}-label`]),!c(this,kn)){(s=c(this,Ds))==null||s.remove();return}}else{if(!c(this,kn)&&!c(this,Ls)){e.classList.remove("done"),(a=c(this,Ds))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,Ds);if(!t){b(this,Ds,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,Pi).id}`;const u=100,h=c(this,Pi)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(c(this,Yi)),b(this,Yi,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,Yi,setTimeout(()=>{b(this,Yi,null),c(this,Ds).classList.add("show"),c(this,Pi)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:h}),e.addEventListener("mouseleave",()=>{var d;c(this,Yi)&&(clearTimeout(c(this,Yi)),b(this,Yi,null)),(d=c(this,Ds))==null||d.classList.remove("show")},{signal:h})}c(this,Ls)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,kn)),t.parentNode||e.append(t);const n=c(this,Pi).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},_(ui,Ga,null),le(ui,"_l10n",null);let H0=ui;var zn,Ir,tc,Ct,Dp,nc,ts,ic,rc,sc,Ip,_b;class Oy{constructor(e){_(this,Ip);_(this,zn,null);_(this,Ir,null);_(this,tc,!1);_(this,Ct,null);_(this,Dp,null);_(this,nc,null);_(this,ts,null);_(this,ic,null);_(this,rc,!1);_(this,sc,null);b(this,Ct,e)}renderForToolbar(){const e=b(this,Ir,document.createElement("button"));return e.className="comment",P(this,Ip,_b).call(this,e,!1)}renderForStandalone(){const e=b(this,zn,document.createElement("button"));e.className="annotationCommentButton";const t=c(this,Ct).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(c(this,Ct)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=c(this,Ct).commentButtonColor;r&&(n.backgroundColor=r)}return P(this,Ip,_b).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=c(this,zn)??c(this,Ir))==null||e.focus()},0)}onUpdatedColor(){if(!c(this,zn))return;const e=c(this,Ct).commentButtonColor;e&&(c(this,zn).style.backgroundColor=e),c(this,Ct)._uiManager.updatePopupColor(c(this,Ct))}get commentButtonWidth(){var e;return(((e=c(this,zn))==null?void 0:e.getBoundingClientRect().width)??0)/c(this,Ct).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,sc))return c(this,sc);if(!c(this,zn))return null;const{x:e,y:t,height:n}=c(this,zn).getBoundingClientRect(),{x:r,y:s,width:a,height:u}=c(this,Ct).parent.boundingClientRect;return[(e-r)/a,(t+n-s)/u]}set commentPopupPositionInLayer(e){b(this,sc,e)}hasDefaultPopupPosition(){return c(this,sc)===null}removeStandaloneCommentButton(){var e;(e=c(this,zn))==null||e.remove(),b(this,zn,null)}removeToolbarCommentButton(){var e;(e=c(this,Ir))==null||e.remove(),b(this,Ir,null)}setCommentButtonStates({selected:e,hasPopup:t}){c(this,zn)&&(c(this,zn).classList.toggle("selected",e),c(this,zn).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=c(this,Ct).commentButtonPosition;const{width:p,height:m,x:y,y:v}=c(this,Ct);n=y+n*p,r=v+r*m}const s=c(this,Ct).parent.boundingClientRect,{x:a,y:u,width:h,height:d}=s;c(this,Ct)._uiManager.editComment(c(this,Ct),a+n*h,u+r*d,{...e,parentDimensions:s})}finish(){c(this,Ir)&&(c(this,Ir).focus({focusVisible:c(this,tc)}),b(this,tc,!1))}isDeleted(){return c(this,rc)||c(this,ts)===""}isEmpty(){return c(this,ts)===null}hasBeenEdited(){return this.isDeleted()||c(this,ts)!==c(this,Dp)}serialize(){return this.data}get data(){return{text:c(this,ts),richText:c(this,nc),date:c(this,ic),deleted:this.isDeleted()}}set data(e){if(e!==c(this,ts)&&b(this,nc,null),e===null){b(this,ts,""),b(this,rc,!0);return}b(this,ts,e),b(this,ic,new Date),b(this,rc,!1)}setInitialText(e,t=null){b(this,Dp,e),this.data=e,b(this,ic,null),b(this,nc,t)}shown(){}destroy(){var e,t;(e=c(this,Ir))==null||e.remove(),b(this,Ir,null),(t=c(this,zn))==null||t.remove(),b(this,zn,null),b(this,ts,""),b(this,nc,null),b(this,ic,null),b(this,Ct,null),b(this,tc,!1),b(this,rc,!1)}}zn=new WeakMap,Ir=new WeakMap,tc=new WeakMap,Ct=new WeakMap,Dp=new WeakMap,nc=new WeakMap,ts=new WeakMap,ic=new WeakMap,rc=new WeakMap,sc=new WeakMap,Ip=new WeakSet,_b=function(e,t){if(!c(this,Ct)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[c(this,Ct)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=c(this,Ct)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",$r,{signal:n}),t&&(e.addEventListener("focusin",s=>{c(this,Ct)._focusEventsAllowed=!1,Qt(s)},{capture:!0,signal:n}),e.addEventListener("focusout",s=>{c(this,Ct)._focusEventsAllowed=!0,Qt(s)},{capture:!0,signal:n})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const r=s=>{s.preventDefault(),e===c(this,Ir)?this.edit():c(this,Ct).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(b(this,tc,!0),r(s))},{signal:n}),e.addEventListener("pointerenter",()=>{c(this,Ct).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{c(this,Ct).toggleComment(!1,!1)},{signal:n}),e};var kh,oc,Mp,Fp,Op,jp,Bp,bo,ac,So,lc,Eo,El,$T,VT,WT;const MS=class MS{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:u}){_(this,El);_(this,kh);_(this,oc,!1);_(this,Mp,null);_(this,Fp);_(this,Op);_(this,jp);_(this,Bp);_(this,bo,null);_(this,ac);_(this,So,null);_(this,lc);_(this,Eo,null);b(this,kh,e),b(this,Mp,n),b(this,Fp,t),b(this,Op,r),b(this,jp,s),b(this,Bp,a),b(this,lc,new AbortController),b(this,ac,AbortSignal.any([u,c(this,lc).signal])),e.addEventListener("touchstart",P(this,El,$T).bind(this),{passive:!1,signal:c(this,ac)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Zs.pixelRatio}destroy(){var e,t;(e=c(this,lc))==null||e.abort(),b(this,lc,null),(t=c(this,bo))==null||t.abort(),b(this,bo,null)}};kh=new WeakMap,oc=new WeakMap,Mp=new WeakMap,Fp=new WeakMap,Op=new WeakMap,jp=new WeakMap,Bp=new WeakMap,bo=new WeakMap,ac=new WeakMap,So=new WeakMap,lc=new WeakMap,Eo=new WeakMap,El=new WeakSet,$T=function(e){var r,s,a;if((r=c(this,Fp))!=null&&r.call(this))return;if(e.touches.length===1){if(c(this,bo))return;const u=b(this,bo,new AbortController),h=AbortSignal.any([c(this,ac),u.signal]),d=c(this,kh),p={capture:!0,signal:h,passive:!1},m=y=>{var v;y.pointerType==="touch"&&((v=c(this,bo))==null||v.abort(),b(this,bo,null))};d.addEventListener("pointerdown",y=>{y.pointerType==="touch"&&(Qt(y),m(y))},p),d.addEventListener("pointerup",m,p),d.addEventListener("pointercancel",m,p);return}if(!c(this,Eo)){b(this,Eo,new AbortController);const u=AbortSignal.any([c(this,ac),c(this,Eo).signal]),h=c(this,kh),d={signal:u,capture:!1,passive:!1};h.addEventListener("touchmove",P(this,El,VT).bind(this),d);const p=P(this,El,WT).bind(this);h.addEventListener("touchend",p,d),h.addEventListener("touchcancel",p,d),d.capture=!0,h.addEventListener("pointerdown",Qt,d),h.addEventListener("pointermove",Qt,d),h.addEventListener("pointercancel",Qt,d),h.addEventListener("pointerup",Qt,d),(s=c(this,Op))==null||s.call(this)}if(Qt(e),e.touches.length!==2||(a=c(this,Mp))!=null&&a.call(this)){b(this,So,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),b(this,So,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},VT=function(e){var D;if(!c(this,So)||e.touches.length!==2)return;Qt(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:s}=t,{screenX:a,screenY:u}=n,h=c(this,So),{touch0X:d,touch0Y:p,touch1X:m,touch1Y:y}=h,v=m-d,E=y-p,A=a-r,k=u-s,C=Math.hypot(A,k)||1,N=Math.hypot(v,E)||1;if(!c(this,oc)&&Math.abs(N-C)<=MS.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=s,h.touch1X=a,h.touch1Y=u,!c(this,oc)){b(this,oc,!0);return}const T=[(r+a)/2,(s+u)/2];(D=c(this,jp))==null||D.call(this,T,N,C)},WT=function(e){var t;e.touches.length>=2||(c(this,Eo)&&(c(this,Eo).abort(),b(this,Eo,null),(t=c(this,Bp))==null||t.call(this)),c(this,So)&&(Qt(e),b(this,So,null),b(this,oc,!1)))};let $0=MS;var cc,ns,Ft,wt,Ao,Ch,qa,zp,Un,uc,ko,Mr,Xa,Up,hc,Qi,Hp,dc,Co,Fs,_h,Th,Fr,fc,$p,av,De,Tb,Vp,Pb,o0,GT,qT,Rb,a0,Nb,XT,KT,YT,Lb,QT,Db,JT,ZT,eP,Ib,Vf;const Ue=class Ue{constructor(e){_(this,De);_(this,cc,null);_(this,ns,null);_(this,Ft,null);_(this,wt,null);_(this,Ao,null);_(this,Ch,!1);_(this,qa,null);_(this,zp,"");_(this,Un,null);_(this,uc,null);_(this,ko,null);_(this,Mr,null);_(this,Xa,null);_(this,Up,"");_(this,hc,!1);_(this,Qi,null);_(this,Hp,!1);_(this,dc,!1);_(this,Co,!1);_(this,Fs,null);_(this,_h,0);_(this,Th,0);_(this,Fr,null);_(this,fc,null);le(this,"isSelected",!1);le(this,"_isCopy",!1);le(this,"_editToolbar",null);le(this,"_initialOptions",Object.create(null));le(this,"_initialData",null);le(this,"_isVisible",!0);le(this,"_uiManager",null);le(this,"_focusEventsAllowed",!0);_(this,$p,!1);_(this,av,Ue._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[s,a];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ue.prototype._resizeWithKeyboard,t=du.TRANSLATE_SMALL,n=du.TRANSLATE_BIG;return ze(this,"_resizerKeyboardManager",new wg([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Ue.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new OF({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ue._l10n??(Ue._l10n=e),Ue._l10nResizer||(Ue._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ue._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ue._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Et("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,$p)}set _isDraggable(e){var t;b(this,$p,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,av)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(P(this,De,Vf).call(this),(t=c(this,Mr))==null||t.remove(),b(this,Mr,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,hc)?b(this,hc,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[s,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/s,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){P(this,De,Tb).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,Qi)||b(this,Qi,[this.x,this.y,this.width,this.height]),P(this,De,Tb).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,Qi)||b(this,Qi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:u}=this;const[h,d]=this.getBaseTranslation();a+=h,u+=d;const{style:p}=n;p.left=`${(100*a).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(a,u),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,Qi)&&(c(this,Qi)[0]!==this.x||c(this,Qi)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Qi)&&(c(this,Qi)[2]!==this.width||c(this,Qi)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Ue,r=n/e,s=n/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:s,y:a,width:u,height:h}=this;if(u*=n,h*=r,s*=n,a*=r,this._mustFixPosition)switch(e){case 0:s=mi(s,0,n-u),a=mi(a,0,r-h);break;case 90:s=mi(s,0,n-h),a=mi(a,u,r);break;case 180:s=mi(s,u,n),a=mi(a,h,r);break;case 270:s=mi(s,h,n),a=mi(a,0,r-u);break}this.x=s/=n,this.y=a/=r;const[d,p]=this.getBaseTranslation();s+=d,a+=p,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return P(n=Ue,Vp,Pb).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return P(n=Ue,Vp,Pb).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,Ft))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,dc))return this._editToolbar;this._editToolbar=new xb(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=c(this,Ft))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Ft)||(H0.initialize(Ue._l10n),b(this,Ft,new H0(this)),c(this,cc)&&(c(this,Ft).data=c(this,cc),b(this,cc,null))),c(this,Ft)}get altTextData(){var e;return(e=c(this,Ft))==null?void 0:e.data}set altTextData(e){c(this,Ft)&&(c(this,Ft).data=e)}get guessedAltText(){var e;return(e=c(this,Ft))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Ft))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Ft))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Ft)&&!c(this,Ft).isEmpty()}hasAltTextData(){var e;return((e=c(this,Ft))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=c(this,wt))==null||e.focusButton()}addCommentButton(){return this.canAddComment?c(this,wt)||b(this,wt,new Oy(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(c(this,Ao)){this._uiManager.isEditingMode()&&c(this,Ao).classList.remove("hidden");return}this.hasComment&&(b(this,Ao,c(this,wt).renderForStandalone()),this.div.append(c(this,Ao)))}}removeStandaloneCommentButton(){c(this,wt).removeStandaloneCommentButton(),b(this,Ao,null)}hideStandaloneCommentButton(){var e;(e=c(this,Ao))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:r}}=c(this,wt);return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){c(this,wt)||b(this,wt,new Oy(this)),c(this,wt).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(c(this,wt)||b(this,wt,new Oy(this)),c(this,wt).setInitialText(e,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=c(this,wt))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=c(this,wt))==null?void 0:e.isDeleted()}get hasComment(){return!!c(this,wt)&&!c(this,wt).isEmpty()&&!c(this,wt).isDeleted()}async editComment(e){c(this,wt)||b(this,wt,new Oy(this)),c(this,wt).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){c(this,wt).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,u=a+s+1,h=r-100,d=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,d,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){c(this,wt).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,Ch)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),P(this,De,Db).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),PT(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,fc)||b(this,fc,new $0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:P(this,De,XT).bind(this),onPinching:P(this,De,KT).bind(this),onPinchEnd:P(this,De,YT).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=bn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,hc,!0),this._isDraggable){P(this,De,QT).call(this,e);return}P(this,De,Lb).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Fs)&&clearTimeout(c(this,Fs)),b(this,Fs,setTimeout(()=>{var e;b(this,Fs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[u,h]=this.pageTranslation,d=e/r,p=t/r,m=this.x*s,y=this.y*a,v=this.width*s,E=this.height*a;switch(n){case 0:return[m+d+u,a-y-p-E+h,m+d+v+u,a-y-p+h];case 90:return[m+p+u,a-y+d+h,m+p+E+u,a-y+d+v+h];case 180:return[m-d-v+u,a-y+p+h,m-d+u,a-y+p+E+h];case 270:return[m-p-E+u,a-y-d-v+h,m-p+u,a-y-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,s,a]=e,u=s-n,h=a-r;switch(this.rotation){case 0:return[n,t-a,u,h];case 90:return[n,t-r,h,u];case 180:return[s,t-r,u,h];case 270:return[s,t-a,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ue._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=c(this,wt))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:s,richText:a},uid:u,pageIndex:h,creationDate:d,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:d,modificationDate:n||p,popupRef:!s,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),b(this,dc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),b(this,dc,!1),!0):!1}isInEditMode(){return c(this,dc)}shouldGetKeyboardEvents(){return c(this,Co)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&r>0&&e<s&&n>0}rebuild(){P(this,De,Db).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,b(r,cc,e.accessibilityData),r._isCopy=e.isCopy||!1;const[s,a]=r.pageDimensions,[u,h,d,p]=r.getRectInCurrentCoords(e.rect,a);return r.x=u/s,r.y=h/a,r.width=d/s,r.height=p/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,n;if((e=c(this,Xa))==null||e.abort(),b(this,Xa,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),c(this,Fs)&&(clearTimeout(c(this,Fs)),b(this,Fs,null)),P(this,De,Vf).call(this),this.removeEditToolbar(),c(this,Fr)){for(const r of c(this,Fr).values())clearTimeout(r);b(this,Fr,null)}this.parent=null,(t=c(this,fc))==null||t.destroy(),b(this,fc,null),(n=c(this,Mr))==null||n.remove(),b(this,Mr,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,De,GT).call(this),c(this,Un).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,r,s,a]=this.getPDFRect();return[Ue._round(n+(s-n)*e),Ue._round(r+(a-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,wt).commentPopupPositionInLayer}set commentPopupPosition(e){c(this,wt).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return c(this,wt).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,wt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=c(this,wt))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Un).children;if(!c(this,ns)){b(this,ns,Array.from(t));const a=P(this,De,JT).bind(this),u=P(this,De,ZT).bind(this),h=this._uiManager._signal;for(const d of c(this,ns)){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:h}),d.addEventListener("blur",u,{signal:h}),d.addEventListener("focus",P(this,De,eP).bind(this,p),{signal:h}),d.setAttribute("data-l10n-id",Ue._l10nResizer[p])}}const n=c(this,ns)[0];let r=0;for(const a of t){if(a===n)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(c(this,ns).length/4);if(s!==r){if(s<r)for(let u=0;u<r-s;u++)c(this,Un).append(c(this,Un).firstElementChild);else if(s>r)for(let u=0;u<s-r;u++)c(this,Un).firstElementChild.before(c(this,Un).lastElementChild);let a=0;for(const u of t){const d=c(this,ns)[a++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Ue._l10nResizer[d])}}P(this,De,Ib).call(this,0),b(this,Co,!0),c(this,Un).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Co)&&P(this,De,Nb).call(this,c(this,Up),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){P(this,De,Vf).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(n=c(this,Ft))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,r,s;this.isSelected&&(this.isSelected=!1,(e=c(this,Un))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=c(this,Ft))==null||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Hp)}set isEditing(e){b(this,Hp,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,Fr)||b(this,Fr,new Map);const{action:n}=e;let r=c(this,Fr).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,Fr).delete(n),c(this,Fr).size===0&&b(this,Fr,null)},Ue._telemetryTimeout),c(this,Fr).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,Ch,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Ch,!0)}updateFakeAnnotationElement(e){if(!c(this,Mr)&&!this.deleted){b(this,Mr,e.addFakeAnnotation(this));return}if(this.deleted){c(this,Mr).remove(),b(this,Mr,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,Mr).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};cc=new WeakMap,ns=new WeakMap,Ft=new WeakMap,wt=new WeakMap,Ao=new WeakMap,Ch=new WeakMap,qa=new WeakMap,zp=new WeakMap,Un=new WeakMap,uc=new WeakMap,ko=new WeakMap,Mr=new WeakMap,Xa=new WeakMap,Up=new WeakMap,hc=new WeakMap,Qi=new WeakMap,Hp=new WeakMap,dc=new WeakMap,Co=new WeakMap,Fs=new WeakMap,_h=new WeakMap,Th=new WeakMap,Fr=new WeakMap,fc=new WeakMap,$p=new WeakMap,av=new WeakMap,De=new WeakSet,Tb=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Vp=new WeakSet,Pb=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},o0=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},GT=function(){if(c(this,Un))return;b(this,Un,document.createElement("div")),c(this,Un).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");c(this,Un).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",P(this,De,qT).bind(this,n),{signal:t}),r.addEventListener("contextmenu",$r,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,Un))},qT=function(e,t){var p;t.preventDefault();const{isMac:n}=bn.platform;if(t.button!==0||t.ctrlKey&&n)return;(p=c(this,Ft))==null||p.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,b(this,uc,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",P(this,De,Nb).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Qt,{passive:!1,signal:a}),window.addEventListener("contextmenu",$r,{signal:a}),b(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var m;s.abort(),this.parent.togglePointerEvents(!0),(m=c(this,Ft))==null||m.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,P(this,De,a0).call(this)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},Rb=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},a0=function(){if(!c(this,ko))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=c(this,ko);b(this,ko,null);const s=this.x,a=this.y,u=this.width,h=this.height;s===e&&a===t&&u===n&&h===r||this.addCommands({cmd:P(this,De,Rb).bind(this,s,a,u,h),undo:P(this,De,Rb).bind(this,e,t,n,r),mustExec:!0})},Nb=function(e,t){const[n,r]=this.parentDimensions,s=this.x,a=this.y,u=this.width,h=this.height,d=Ue.MIN_SIZE/n,p=Ue.MIN_SIZE/r,m=P(this,De,o0).call(this,this.rotation),y=(se,J)=>[m[0]*se+m[2]*J,m[1]*se+m[3]*J],v=P(this,De,o0).call(this,360-this.rotation),E=(se,J)=>[v[0]*se+v[2]*J,v[1]*se+v[3]*J];let A,k,C=!1,N=!1;switch(e){case"topLeft":C=!0,A=(se,J)=>[0,0],k=(se,J)=>[se,J];break;case"topMiddle":A=(se,J)=>[se/2,0],k=(se,J)=>[se/2,J];break;case"topRight":C=!0,A=(se,J)=>[se,0],k=(se,J)=>[0,J];break;case"middleRight":N=!0,A=(se,J)=>[se,J/2],k=(se,J)=>[0,J/2];break;case"bottomRight":C=!0,A=(se,J)=>[se,J],k=(se,J)=>[0,0];break;case"bottomMiddle":A=(se,J)=>[se/2,J],k=(se,J)=>[se/2,0];break;case"bottomLeft":C=!0,A=(se,J)=>[0,J],k=(se,J)=>[se,0];break;case"middleLeft":N=!0,A=(se,J)=>[0,J/2],k=(se,J)=>[se,J/2];break}const T=A(u,h),D=k(u,h);let F=y(...D);const L=Ue._round(s+F[0]),j=Ue._round(a+F[1]);let G=1,K=1,ee,q;if(t.fromKeyboard)({deltaX:ee,deltaY:q}=t);else{const{screenX:se,screenY:J}=t,[Q,me]=c(this,uc);[ee,q]=this.screenToPageTranslation(se-Q,J-me),c(this,uc)[0]=se,c(this,uc)[1]=J}if([ee,q]=E(ee/n,q/r),C){const se=Math.hypot(u,h);G=K=Math.max(Math.min(Math.hypot(D[0]-T[0]-ee,D[1]-T[1]-q)/se,1/u,1/h),d/u,p/h)}else N?G=mi(Math.abs(D[0]-T[0]-ee),d,1)/u:K=mi(Math.abs(D[1]-T[1]-q),p,1)/h;const re=Ue._round(u*G),ue=Ue._round(h*K);F=y(...k(re,ue));const ie=L-F[0],Z=j-F[1];c(this,Qi)||b(this,Qi,[this.x,this.y,this.width,this.height]),this.width=re,this.height=ue,this.x=ie,this.y=Z,this.setDims(),this.fixAndSetPosition(),this._onResizing()},XT=function(){var e;b(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,Ft))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},KT=function(e,t,n){let s=.7*(n/t)+1-.7;if(s===1)return;const a=P(this,De,o0).call(this,this.rotation),u=(L,j)=>[a[0]*L+a[2]*j,a[1]*L+a[3]*j],[h,d]=this.parentDimensions,p=this.x,m=this.y,y=this.width,v=this.height,E=Ue.MIN_SIZE/h,A=Ue.MIN_SIZE/d;s=Math.max(Math.min(s,1/y,1/v),E/y,A/v);const k=Ue._round(y*s),C=Ue._round(v*s);if(k===y&&C===v)return;c(this,Qi)||b(this,Qi,[p,m,y,v]);const N=u(y/2,v/2),T=Ue._round(p+N[0]),D=Ue._round(m+N[1]),F=u(k/2,C/2);this.x=T-F[0],this.y=D-F[1],this.width=k,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()},YT=function(){var e;(e=c(this,Ft))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),P(this,De,a0).call(this)},Lb=function(e){const{isMac:t}=bn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},QT=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},u=d=>{r.abort(),b(this,qa,null),b(this,hc,!1),this._uiManager.endDragSession()||P(this,De,Lb).call(this,d),n&&this._onStopDragging()};t&&(b(this,_h,e.clientX),b(this,Th,e.clientY),b(this,qa,e.pointerId),b(this,zp,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:y}=d;if(y!==c(this,qa)){Qt(d);return}const[v,E]=this.screenToPageTranslation(p-c(this,_h),m-c(this,Th));b(this,_h,p),b(this,Th,m),this._uiManager.dragSelectedEditors(v,E)},a),window.addEventListener("touchmove",Qt,a),window.addEventListener("pointerdown",d=>{d.pointerType===c(this,zp)&&(c(this,fc)||d.isPrimary)&&u(d),Qt(d)},a));const h=d=>{if(!c(this,qa)||c(this,qa)===d.pointerId){u(d);return}Qt(d)};window.addEventListener("pointerup",h,{signal:s}),window.addEventListener("blur",h,{signal:s})},Db=function(){if(c(this,Xa)||!this.div)return;b(this,Xa,new AbortController);const e=this._uiManager.combinedSignal(c(this,Xa));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},JT=function(e){Ue._resizerKeyboardManager.exec(this,e)},ZT=function(e){var t;c(this,Co)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Un)&&P(this,De,Vf).call(this)},eP=function(e){b(this,Up,c(this,Co)?e:"")},Ib=function(e){if(c(this,ns))for(const t of c(this,ns))t.tabIndex=e},Vf=function(){b(this,Co,!1),P(this,De,Ib).call(this,-1),P(this,De,a0).call(this)},_(Ue,Vp),le(Ue,"_l10n",null),le(Ue,"_l10nResizer",null),le(Ue,"_borderLineWidth",-1),le(Ue,"_colorManager",new Sb),le(Ue,"_zIndex",1),le(Ue,"_telemetryTimeout",1e3);let Tt=Ue;class OF extends Tt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const hC=3285377520,Cr=4294901760,ks=65535;class tP{constructor(e){this.h1=e?e&4294967295:hC,this.h2=e?e&4294967295:hC}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let A=0,k=e.length;A<k;A++){const C=e.charCodeAt(A);C<=255?t[n++]=C:(t[n++]=C>>>8,t[n++]=C&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,s=n-r*4,a=new Uint32Array(t.buffer,0,r);let u=0,h=0,d=this.h1,p=this.h2;const m=3432918353,y=461845907,v=m&ks,E=y&ks;for(let A=0;A<r;A++)A&1?(u=a[A],u=u*m&Cr|u*v&ks,u=u<<15|u>>>17,u=u*y&Cr|u*E&ks,d^=u,d=d<<13|d>>>19,d=d*5+3864292196):(h=a[A],h=h*m&Cr|h*v&ks,h=h<<15|h>>>17,h=h*y&Cr|h*E&ks,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,s){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*m&Cr|u*v&ks,u=u<<15|u>>>17,u=u*y&Cr|u*E&ks,r&1?d^=u:p^=u}this.h1=d,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Cr|e*36045&ks,t=t*4283543511&Cr|((t<<16|e>>>16)*2950163797&Cr)>>>16,e^=t>>>1,e=e*444984403&Cr|e*60499&ks,t=t*3301882366&Cr|((t<<16|e>>>16)*3120437893&Cr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Mb=Object.freeze({map:null,hash:"",transfer:void 0});var pc,mc,_o,Hn,lv,nP;class hS{constructor(){_(this,lv);_(this,pc,!1);_(this,mc,null);_(this,_o,null);_(this,Hn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=c(this,Hn).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return c(this,Hn).get(e)}remove(e){const t=c(this,Hn).get(e);if(t!==void 0&&(t instanceof Tt&&c(this,_o).delete(t.annotationElementId),c(this,Hn).delete(e),c(this,Hn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of c(this,Hn).values())if(n instanceof Tt)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=c(this,Hn).get(e);let r=!1;if(n!==void 0)for(const[s,a]of Object.entries(t))n[s]!==a&&(r=!0,n[s]=a);else r=!0,c(this,Hn).set(e,t);r&&P(this,lv,nP).call(this),t instanceof Tt&&((c(this,_o)||b(this,_o,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return c(this,Hn).has(e)}get size(){return c(this,Hn).size}resetModified(){c(this,pc)&&(b(this,pc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iP(this)}get serializable(){if(c(this,Hn).size===0)return Mb;const e=new Map,t=new tP,n=[],r=Object.create(null);let s=!1;for(const[a,u]of c(this,Hn)){const h=u instanceof Tt?u.serialize(!1,r):u;h&&(e.set(a,h),t.update(`${a}:${JSON.stringify(h)}`),s||(s=!!h.bitmap))}if(s)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Mb}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const s of c(this,Hn).values()){if(!(s instanceof Tt)){s.popup&&(s.popup.deleted?r+=1:n+=1);continue}s.isCommentDeleted?r+=1:s.hasEditedComment&&(n+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:u}=a;t.has(u)||t.set(u,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const h=e[u]||(e[u]=new Map);for(const[d,p]of Object.entries(a)){if(d==="type")continue;let m=h.get(d);m||(m=new Map,h.set(d,m));const y=m.get(p)??0;m.set(p,y+1)}}if((r>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:n}),!e)return null;for(const[s,a]of t)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){b(this,mc,null)}updateEditor(e,t){var r;const n=(r=c(this,_o))==null?void 0:r.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=c(this,_o))==null?void 0:t.get(e))||null}get modifiedIds(){if(c(this,mc))return c(this,mc);const e=[];if(c(this,_o))for(const t of c(this,_o).values())t.serialize()&&e.push(t.annotationElementId);return b(this,mc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,Hn).entries()}}pc=new WeakMap,mc=new WeakMap,_o=new WeakMap,Hn=new WeakMap,lv=new WeakSet,nP=function(){c(this,pc)||(b(this,pc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Wp;class iP extends hS{constructor(t){super();_(this,Wp);const{map:n,hash:r,transfer:s}=t.serializable,a=structuredClone(n,s?{transfer:s}:null);b(this,Wp,{map:a,hash:r,transfer:s})}get print(){Et("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Wp)}get modifiedIds(){return ze(this,"modifiedIds",{ids:new Set,hash:""})}}Wp=new WeakMap;var Ph;class jF{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){_(this,Ph,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Ph).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||c(this,Ph).has(e.loadedName))){if(Ze(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:a}=e,u=new FontFace(r,s,a);this.addNativeFontFace(u);try{await u.load(),c(this,Ph).add(r),n==null||n(e)}catch{Be(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Et("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Be(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ze(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ze(this,"isSyncFontLoadingSupported",pi||bn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ze(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ze(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(D,F){return D.charCodeAt(F)<<24|D.charCodeAt(F+1)<<16|D.charCodeAt(F+2)<<8|D.charCodeAt(F+3)&255}function r(D,F,L,j){const G=D.substring(0,F),K=D.substring(F+L);return G+j+K}let s,a;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let d=0;function p(D,F){if(++d>30){Be("Load test font never loaded."),F();return}if(h.font="30px "+D,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(p.bind(null,D,F))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,m.length,m);const E=16,A=1482184792;let k=n(y,E);for(s=0,a=m.length-3;s<a;s+=4)k=k-A+n(m,s)|0;s<m.length&&(k=k-A+n(m+"XXX",s)|0),y=r(y,E,4,vF(k));const C=`url(data:font/opentype;base64,${btoa(y)});`,N=`@font-face {font-family:"${m}";src:${C}}`;this.insertRule(N);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const D of[e.loadedName,m]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=D,T.append(F)}this._document.body.append(T),p(m,()=>{T.remove(),t.complete()})}}Ph=new WeakMap;var pt;class BF{constructor(e,t=null,n,r){_(this,pt);this.compiledGlyphs=Object.create(null),b(this,pt,e),this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${wT(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(a){Be(`getPathGenerator - ignoring character: "${a}".`)}const s=ET(r==null?void 0:r.path);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}get black(){return c(this,pt).black}get bold(){return c(this,pt).bold}get disableFontFace(){return c(this,pt).disableFontFace??!1}set disableFontFace(e){ze(this,"disableFontFace",!!e)}get fontExtraProperties(){return c(this,pt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,pt).isInvalidPDFjsFont}get isType3Font(){return c(this,pt).isType3Font}get italic(){return c(this,pt).italic}get missingFile(){return c(this,pt).missingFile}get remeasure(){return c(this,pt).remeasure}get vertical(){return c(this,pt).vertical}get ascent(){return c(this,pt).ascent}get defaultWidth(){return c(this,pt).defaultWidth}get descent(){return c(this,pt).descent}get bbox(){return c(this,pt).bbox}set bbox(e){ze(this,"bbox",e)}get fontMatrix(){return c(this,pt).fontMatrix}get fallbackName(){return c(this,pt).fallbackName}get loadedName(){return c(this,pt).loadedName}get mimetype(){return c(this,pt).mimetype}get name(){return c(this,pt).name}get data(){return c(this,pt).data}clearData(){c(this,pt).clearData()}get cssFontInfo(){return c(this,pt).cssFontInfo}get systemFontInfo(){return c(this,pt).systemFontInfo}get defaultVMetrics(){return c(this,pt).defaultVMetrics}}pt=new WeakMap;var Rh,Nh,Gp,Lh,l0;const nh=class nh{constructor(e){_(this,Lh);_(this,Rh);_(this,Nh);_(this,Gp);b(this,Rh,e),b(this,Nh,new DataView(c(this,Rh))),b(this,Gp,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const d of nh.strings){const p=t.encode(e[d]);n[d]=p,r+=4+p.length}const s=new ArrayBuffer(r),a=new Uint8Array(s),u=new DataView(s);let h=0;for(const d of nh.strings){const p=n[d],m=p.length;u.setUint32(h,m),a.set(p,h+4),h+=4+m}return Ze(h===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return P(this,Lh,l0).call(this,0)}get fontWeight(){return P(this,Lh,l0).call(this,1)}get italicAngle(){return P(this,Lh,l0).call(this,2)}};Rh=new WeakMap,Nh=new WeakMap,Gp=new WeakMap,Lh=new WeakSet,l0=function(e){Ze(e<nh.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=c(this,Nh).getUint32(t)+4;const n=c(this,Nh).getUint32(t);return c(this,Gp).decode(new Uint8Array(c(this,Rh),t+4,n))},le(nh,"strings",["fontFamily","fontWeight","italicAngle"]);let V0=nh;var Ka,Os,gc,yc,Wf;const ih=class ih{constructor(e){_(this,yc);_(this,Ka);_(this,Os);_(this,gc);b(this,Ka,e),b(this,Os,new DataView(c(this,Ka))),b(this,gc,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const y of ih.strings){const v=t.encode(e[y]);n[y]=v,r+=4+v.length}r+=4;let s,a,u=1+r;e.style&&(s=t.encode(e.style.style),a=t.encode(e.style.weight),u+=4+s.length+4+a.length);const h=new ArrayBuffer(u),d=new Uint8Array(h),p=new DataView(h);let m=0;p.setUint8(m++,e.guessFallback?1:0),p.setUint32(m,0),m+=4,r=0;for(const y of ih.strings){const v=n[y],E=v.length;r+=4+E,p.setUint32(m,E),d.set(v,m+4),m+=4+E}return p.setUint32(m-r-4,r),e.style&&(p.setUint32(m,s.length),d.set(s,m+4),m+=4+s.length,p.setUint32(m,a.length),d.set(a,m+4),m+=4+a.length),Ze(m<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(m)}get guessFallback(){return c(this,Os).getUint8(0)!==0}get css(){return P(this,yc,Wf).call(this,0)}get loadedName(){return P(this,yc,Wf).call(this,1)}get baseFontName(){return P(this,yc,Wf).call(this,2)}get src(){return P(this,yc,Wf).call(this,3)}get style(){let e=1;e+=4+c(this,Os).getUint32(e);const t=c(this,Os).getUint32(e),n=c(this,gc).decode(new Uint8Array(c(this,Ka),e+4,t));e+=4+t;const r=c(this,Os).getUint32(e),s=c(this,gc).decode(new Uint8Array(c(this,Ka),e+4,r));return{style:n,weight:s}}};Ka=new WeakMap,Os=new WeakMap,gc=new WeakMap,yc=new WeakSet,Wf=function(e){Ze(e<ih.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=c(this,Os).getUint32(t)+4;const n=c(this,Os).getUint32(t);return c(this,gc).decode(new Uint8Array(c(this,Ka),t+4,n))},le(ih,"strings",["css","loadedName","baseFontName","src"]);let W0=ih;var Dh,Ih,Mh,Fh,Ji,js,qp,mt,Yt,Jr,c0,Gf;const $e=class $e{constructor({data:e,extra:t}){_(this,Yt);_(this,js);_(this,qp);_(this,mt);b(this,js,e),b(this,qp,new TextDecoder),b(this,mt,new DataView(c(this,js))),t&&Object.assign(this,t)}get black(){return P(this,Yt,Jr).call(this,0)}get bold(){return P(this,Yt,Jr).call(this,1)}get disableFontFace(){return P(this,Yt,Jr).call(this,2)}get fontExtraProperties(){return P(this,Yt,Jr).call(this,3)}get isInvalidPDFjsFont(){return P(this,Yt,Jr).call(this,4)}get isType3Font(){return P(this,Yt,Jr).call(this,5)}get italic(){return P(this,Yt,Jr).call(this,6)}get missingFile(){return P(this,Yt,Jr).call(this,7)}get remeasure(){return P(this,Yt,Jr).call(this,8)}get vertical(){return P(this,Yt,Jr).call(this,9)}get ascent(){return P(this,Yt,c0).call(this,0)}get defaultWidth(){return P(this,Yt,c0).call(this,1)}get descent(){return P(this,Yt,c0).call(this,2)}get bbox(){let e=c($e,Ih);if(c(this,mt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<4;r++)n.push(c(this,mt).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=c($e,Mh);if(c(this,mt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<6;r++)n.push(c(this,mt).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=c($e,Fh);if(c(this,mt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<3;r++)n.push(c(this,mt).getInt16(e,!0)),e+=2;return n}get fallbackName(){return P(this,Yt,Gf).call(this,0)}get loadedName(){return P(this,Yt,Gf).call(this,1)}get mimetype(){return P(this,Yt,Gf).call(this,2)}get name(){return P(this,Yt,Gf).call(this,3)}get data(){let e=c($e,Ji);const t=c(this,mt).getUint32(e);e+=4+t;const n=c(this,mt).getUint32(e);e+=4+n;const r=c(this,mt).getUint32(e);e+=4+r;const s=c(this,mt).getUint32(e);if(s!==0)return new Uint8Array(c(this,js),e+4,s)}clearData(){let e=c($e,Ji);const t=c(this,mt).getUint32(e);e+=4+t;const n=c(this,mt).getUint32(e);e+=4+n;const r=c(this,mt).getUint32(e);e+=4+r;const s=c(this,mt).getUint32(e);new Uint8Array(c(this,js),e+4,s).fill(0),c(this,mt).setUint32(e,0)}get cssFontInfo(){let e=c($e,Ji);const t=c(this,mt).getUint32(e);e+=4+t;const n=c(this,mt).getUint32(e);e+=4+n;const r=c(this,mt).getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(c(this,js),e+4,r)),new V0(s.buffer)}get systemFontInfo(){let e=c($e,Ji);const t=c(this,mt).getUint32(e);e+=4+t;const n=c(this,mt).getUint32(e);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(c(this,js),e+4,n)),new W0(r.buffer)}static write(e){const t=e.systemFontInfo?W0.write(e.systemFontInfo):null,n=e.cssFontInfo?V0.write(e.cssFontInfo):null,r=new TextEncoder,s={};let a=0;for(const A of $e.strings)s[A]=r.encode(e[A]),a+=4+s[A].length;const u=c($e,Ji)+4+a+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(u),d=new Uint8Array(h),p=new DataView(h);let m=0;const y=$e.bools.length;let v=0,E=0;for(let A=0;A<y;A++){const k=e[$e.bools[A]];v|=(k===void 0?0:k?2:1)<<E,E+=2,(E===8||A===y-1)&&(p.setUint8(m++,v),v=0,E=0)}Ze(m===c($e,Dh),"FontInfo.write: Boolean properties offset mismatch");for(const A of $e.numbers)p.setFloat64(m,e[A]),m+=8;if(Ze(m===c($e,Ih),"FontInfo.write: Number properties offset mismatch"),e.bbox){p.setUint8(m++,4);for(const A of e.bbox)p.setInt16(m,A,!0),m+=2}else p.setUint8(m++,0),m+=8;if(Ze(m===c($e,Mh),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){p.setUint8(m++,6);for(const A of e.fontMatrix)p.setFloat64(m,A,!0),m+=8}else p.setUint8(m++,0),m+=48;if(Ze(m===c($e,Fh),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){p.setUint8(m++,1);for(const A of e.defaultVMetrics)p.setInt16(m,A,!0),m+=2}else p.setUint8(m++,0),m+=6;Ze(m===c($e,Ji),"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(c($e,Ji),0),m+=4;for(const A of $e.strings){const k=s[A],C=k.length;p.setUint32(m,C),d.set(k,m+4),m+=4+C}if(p.setUint32(c($e,Ji),m-c($e,Ji)-4),!t)p.setUint32(m,0),m+=4;else{const A=t.byteLength;p.setUint32(m,A),Ze(m+4+A<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(t),m+4),m+=4+A}if(!n)p.setUint32(m,0),m+=4;else{const A=n.byteLength;p.setUint32(m,A),Ze(m+4+A<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(n),m+4),m+=4+A}return e.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,e.data.length),d.set(e.data,m+4),m+=4+e.data.length),Ze(m<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(m)}};Dh=new WeakMap,Ih=new WeakMap,Mh=new WeakMap,Fh=new WeakMap,Ji=new WeakMap,js=new WeakMap,qp=new WeakMap,mt=new WeakMap,Yt=new WeakSet,Jr=function(e){Ze(e<$e.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,r=c(this,mt).getUint8(t)>>n&3;return r===0?void 0:r===2},c0=function(e){return Ze(e<$e.numbers.length,"Invalid number index"),c(this,mt).getFloat64(c($e,Dh)+e*8)},Gf=function(e){Ze(e<$e.strings.length,"Invalid string index");let t=c($e,Ji)+4;for(let s=0;s<e;s++)t+=c(this,mt).getUint32(t)+4;const n=c(this,mt).getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(c(this,js),t+4,n)),c(this,qp).decode(r)},le($e,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),le($e,"numbers",["ascent","defaultWidth","descent"]),le($e,"strings",["fallbackName","loadedName","mimetype","name"]),_($e,Dh,Math.ceil($e.bools.length*2/8)),_($e,Ih,c($e,Dh)+$e.numbers.length*8),_($e,Mh,c($e,Ih)+1+8),_($e,Fh,c($e,Mh)+1+48),_($e,Ji,c($e,Fh)+1+6);let Fb=$e;var Xp,Kp,Yp,Qp,Jp,Zp,em,tm;const kt=class kt{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,r=[],s=[],a=[],u=[],h=null,d=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],a=e[3],t===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,h=e[1],r=e[2],s=e[3],u=e[4]||[],n=e[6],d=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const p=Math.floor(r.length/2),m=Math.floor(s.length/3),y=a.length,v=u.length;let E=0;for(const F of u)E+=1,E=Math.ceil(E/4)*4,E+=4+F.coords.length*4,E+=4+F.colors.length*4,F.verticesPerRow!==void 0&&(E+=4);const A=20+p*8+m*3+y*8+(n?16:0)+(d?3:0)+E,k=new ArrayBuffer(A),C=new DataView(k),N=new Uint8Array(k);C.setUint8(c(kt,Xp),t),C.setUint8(c(kt,Kp),n?1:0),C.setUint8(c(kt,Yp),d?1:0),C.setUint8(c(kt,Qp),h),C.setUint32(c(kt,Jp),p,!0),C.setUint32(c(kt,Zp),m,!0),C.setUint32(c(kt,em),y,!0),C.setUint32(c(kt,tm),v,!0);let T=20;new Float32Array(k,T,p*2).set(r),T+=p*8,N.set(s,T),T+=m*3;for(const[F,L]of a)C.setFloat32(T,F,!0),T+=4,C.setUint32(T,parseInt(L.slice(1),16),!0),T+=4;if(n)for(const F of n)C.setFloat32(T,F,!0),T+=4;d&&(N.set(d,T),T+=3);for(let F=0;F<u.length;F++){const L=u[F];C.setUint8(T,L.type),T+=1,T=Math.ceil(T/4)*4,C.setUint32(T,L.coords.length,!0),T+=4,new Int32Array(k,T,L.coords.length).set(L.coords),T+=L.coords.length*4,C.setUint32(T,L.colors.length,!0),T+=4,new Int32Array(k,T,L.colors.length).set(L.colors),T+=L.colors.length*4,L.verticesPerRow!==void 0&&(C.setUint32(T,L.verticesPerRow,!0),T+=4)}return k}getIR(){const e=this.view,t=this.data[c(kt,Xp)],n=!!this.data[c(kt,Kp)],r=!!this.data[c(kt,Yp)],s=e.getUint32(c(kt,Jp),!0),a=e.getUint32(c(kt,Zp),!0),u=e.getUint32(c(kt,em),!0),h=e.getUint32(c(kt,tm),!0);let d=20;const p=new Float32Array(this.buffer,d,s*2);d+=s*8;const m=new Uint8Array(this.buffer,d,a*3);d+=a*3;const y=[];for(let k=0;k<u;++k){const C=e.getFloat32(d,!0);d+=4;const N=e.getUint32(d,!0);d+=4,y.push([C,`#${N.toString(16).padStart(6,"0")}`])}let v=null;if(n){v=[];for(let k=0;k<4;++k)v.push(e.getFloat32(d,!0)),d+=4}let E=null;r&&(E=new Uint8Array(this.buffer,d,3),d+=3);const A=[];for(let k=0;k<h;++k){const C=e.getUint8(d);d+=1,d=Math.ceil(d/4)*4;const N=e.getUint32(d,!0);d+=4;const T=new Int32Array(this.buffer,d,N);d+=N*4;const D=e.getUint32(d,!0);d+=4;const F=new Int32Array(this.buffer,d,D);d+=D*4;const L={type:C,coords:T,colors:F};C===pb.LATTICE&&(L.verticesPerRow=e.getUint32(d,!0),d+=4),A.push(L)}if(t===1)return["RadialAxial","axial",v,y,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",v,y,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(t===3){const k=this.data[c(kt,Qp)];let C=null;if(p.length>0){let N=p[0],T=p[0],D=p[1],F=p[1];for(let L=0;L<p.length;L+=2){const j=p[L],G=p[L+1];N=N>j?j:N,D=D>G?G:D,T=T<j?j:T,F=F<G?G:F}C=[N,D,T,F]}return["Mesh",k,p,m,A,C,v,E]}throw new Error(`Unsupported pattern kind: ${t}`)}};Xp=new WeakMap,Kp=new WeakMap,Yp=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,em=new WeakMap,tm=new WeakMap,_(kt,Xp,0),_(kt,Kp,1),_(kt,Yp,2),_(kt,Qp,3),_(kt,Jp,4),_(kt,Zp,8),_(kt,em,12),_(kt,tm,16);let Ob=kt;var Oh;class zF{constructor(e){_(this,Oh);b(this,Oh,e)}static write(e){let t,n;return bn.isFloat16ArraySupported?(n=new ArrayBuffer(e.length*2),t=new Float16Array(n)):(n=new ArrayBuffer(e.length*4),t=new Float32Array(n)),t.set(e),n}get path(){return bn.isFloat16ArraySupported?new Float16Array(c(this,Oh)):new Float32Array(c(this,Oh))}}Oh=new WeakMap;function UF(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(pi)return i;const e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function HF(i){if(pi&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return gg(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function jy(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const jb=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,$F=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",VF=EF.bind(null,jb,$F);var To,cv;class WF{constructor(){_(this,To,new Map);_(this,cv,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};c(this,cv).then(()=>{for(const[r]of c(this,To))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){Be("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}c(this,To).set(t,r)}removeEventListener(e,t){const n=c(this,To).get(t);n==null||n(),c(this,To).delete(t)}terminate(){for(const[,e]of c(this,To))e==null||e();c(this,To).clear()}}To=new WeakMap,cv=new WeakMap;const By={DATA:1,ERROR:2},an={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function dC(){}function _i(i){if(i instanceof bl||i instanceof mb||i instanceof rC||i instanceof z0||i instanceof Ow)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Et('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new bl(i.message);case"InvalidPDFException":return new mb(i.message);case"PasswordException":return new rC(i.message,i.code);case"ResponseException":return new z0(i.message,i.status,i.missing);case"UnknownErrorException":return new Ow(i.message,i.details)}return new Ow(i.message,i.toString())}var jh,Hr,rP,sP,oP,u0;class qf{constructor(e,t,n){_(this,Hr);_(this,jh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",P(this,Hr,rP).bind(this),{signal:c(this,jh).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,r){const s=this.streamId++,a=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[s]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:a,targetName:u,action:e,streamId:s,data:t,desiredSize:d.desiredSize},r),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[s].pullCall=p,h.postMessage({sourceName:a,targetName:u,stream:an.PULL,streamId:s,desiredSize:d.desiredSize}),p.promise},cancel:d=>{Ze(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[s].cancelCall=p,this.streamControllers[s].isClosed=!0,h.postMessage({sourceName:a,targetName:u,stream:an.CANCEL,streamId:s,reason:_i(d)}),p.promise}},n)}destroy(){var e;(e=c(this,jh))==null||e.abort(),b(this,jh,null)}}jh=new WeakMap,Hr=new WeakSet,rP=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){P(this,Hr,oP).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===By.DATA)r.resolve(e.data);else if(e.callback===By.ERROR)r.reject(_i(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:n,targetName:r,callback:By.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:n,targetName:r,callback:By.ERROR,callbackId:e.callbackId,reason:_i(a)})});return}if(e.streamId){P(this,Hr,sP).call(this,e);return}t(e.data)},sP=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this,u=this.actionHandler[e.action],h={enqueue(d,p=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:an.ENQUEUE,streamId:t,chunk:d},m)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:an.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){Ze(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:an.ERROR,streamId:t,reason:_i(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(u,e.data,h).then(function(){s.postMessage({sourceName:n,targetName:r,stream:an.START_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:n,targetName:r,stream:an.START_COMPLETE,streamId:t,reason:_i(d)})})},oP=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case an.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(_i(e.reason));break;case an.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(_i(e.reason));break;case an.PULL:if(!u){s.postMessage({sourceName:n,targetName:r,stream:an.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||dC).then(function(){s.postMessage({sourceName:n,targetName:r,stream:an.PULL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:n,targetName:r,stream:an.PULL_COMPLETE,streamId:t,reason:_i(d)})});break;case an.ENQUEUE:if(Ze(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case an.CLOSE:if(Ze(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),P(this,Hr,u0).call(this,a,t);break;case an.ERROR:Ze(a,"error should have stream controller"),a.controller.error(_i(e.reason)),P(this,Hr,u0).call(this,a,t);break;case an.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(_i(e.reason)),P(this,Hr,u0).call(this,a,t);break;case an.CANCEL:if(!u)break;const h=_i(e.reason);Promise.try(u.onCancel||dC,h).then(function(){s.postMessage({sourceName:n,targetName:r,stream:an.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:n,targetName:r,stream:an.CANCEL_COMPLETE,streamId:t,reason:_i(d)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},u0=async function(e,t){var n,r,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var nm;class aP{constructor({enableHWA:e=!1}){_(this,nm,!1);b(this,nm,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,nm)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Et("Abstract method `_createCanvas` called.")}}nm=new WeakMap;class GF extends aP{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class lP{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Et("Abstract method `_fetch` called.")}}class fC extends lP{async _fetch(e){const t=await yg(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):gg(t)}}class cP{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,s){return"none"}destroy(e=!1){}}var vc,Bh,Po,Ro,ni,xc,wc,Se,Jn,Xf,qu,h0,Xu,uP,Bb,Ku,Kf,Yf,zb,Qf;class qF extends cP{constructor({docId:t,ownerDocument:n=globalThis.document}){super();_(this,Se);_(this,vc);_(this,Bh);_(this,Po);_(this,Ro);_(this,ni);_(this,xc);_(this,wc,0);b(this,Ro,t),b(this,ni,n)}addFilter(t){if(!t)return"none";let n=c(this,Se,Jn).get(t);if(n)return n;const[r,s,a]=P(this,Se,h0).call(this,t),u=t.length===1?r:`${r}${s}${a}`;if(n=c(this,Se,Jn).get(u),n)return c(this,Se,Jn).set(t,n),n;const h=`g_${c(this,Ro)}_transfer_map_${mn(this,wc)._++}`,d=P(this,Se,Xu).call(this,h);c(this,Se,Jn).set(t,d),c(this,Se,Jn).set(u,d);const p=P(this,Se,Ku).call(this,h);return P(this,Se,Yf).call(this,r,s,a,p),d}addHCMFilter(t,n){var E;const r=`${t}-${n}`,s="base";let a=c(this,Se,Xf).get(s);if((a==null?void 0:a.key)===r||(a?((E=a.filter)==null||E.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},c(this,Se,Xf).set(s,a)),!t||!n))return a.url;const u=P(this,Se,Qf).call(this,t);t=we.makeHexColor(...u);const h=P(this,Se,Qf).call(this,n);if(n=we.makeHexColor(...h),c(this,Se,qu).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const d=new Array(256);for(let A=0;A<=255;A++){const k=A/255;d[A]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const p=d.join(","),m=`g_${c(this,Ro)}_hcm_filter`,y=a.filter=P(this,Se,Ku).call(this,m);P(this,Se,Yf).call(this,p,p,p,y),P(this,Se,Bb).call(this,y);const v=(A,k)=>{const C=u[A]/255,N=h[A]/255,T=new Array(k+1);for(let D=0;D<=k;D++)T[D]=C+D/k*(N-C);return T.join(",")};return P(this,Se,Yf).call(this,v(0,5),v(1,5),v(2,5),y),a.url=P(this,Se,Xu).call(this,m),a.url}addAlphaFilter(t){let n=c(this,Se,Jn).get(t);if(n)return n;const[r]=P(this,Se,h0).call(this,[t]),s=`alpha_${r}`;if(n=c(this,Se,Jn).get(s),n)return c(this,Se,Jn).set(t,n),n;const a=`g_${c(this,Ro)}_alpha_map_${mn(this,wc)._++}`,u=P(this,Se,Xu).call(this,a);c(this,Se,Jn).set(t,u),c(this,Se,Jn).set(s,u);const h=P(this,Se,Ku).call(this,a);return P(this,Se,zb).call(this,r,h),u}addLuminosityFilter(t){let n=c(this,Se,Jn).get(t||"luminosity");if(n)return n;let r,s;if(t?([r]=P(this,Se,h0).call(this,[t]),s=`luminosity_${r}`):s="luminosity",n=c(this,Se,Jn).get(s),n)return c(this,Se,Jn).set(t,n),n;const a=`g_${c(this,Ro)}_luminosity_map_${mn(this,wc)._++}`,u=P(this,Se,Xu).call(this,a);c(this,Se,Jn).set(t,u),c(this,Se,Jn).set(s,u);const h=P(this,Se,Ku).call(this,a);return P(this,Se,uP).call(this,h),t&&P(this,Se,zb).call(this,r,h),u}addHighlightHCMFilter(t,n,r,s,a){var N;const u=`${n}-${r}-${s}-${a}`;let h=c(this,Se,Xf).get(t);if((h==null?void 0:h.key)===u||(h?((N=h.filter)==null||N.remove(),h.key=u,h.url="none",h.filter=null):(h={key:u,url:"none",filter:null},c(this,Se,Xf).set(t,h)),!n||!r))return h.url;const[d,p]=[n,r].map(P(this,Se,Qf).bind(this));let m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[v,E]=[s,a].map(P(this,Se,Qf).bind(this));y<m&&([m,y,v,E]=[y,m,E,v]),c(this,Se,qu).style.color="";const A=(T,D,F)=>{const L=new Array(256),j=(y-m)/F,G=T/255,K=(D-T)/(255*F);let ee=0;for(let q=0;q<=F;q++){const re=Math.round(m+q*j),ue=G+q*K;for(let ie=ee;ie<=re;ie++)L[ie]=ue;ee=re+1}for(let q=ee;q<256;q++)L[q]=L[ee-1];return L.join(",")},k=`g_${c(this,Ro)}_hcm_${t}_filter`,C=h.filter=P(this,Se,Ku).call(this,k);return P(this,Se,Bb).call(this,C),P(this,Se,Yf).call(this,A(v[0],E[0],5),A(v[1],E[1],5),A(v[2],E[2],5),C),h.url=P(this,Se,Xu).call(this,k),h.url}destroy(t=!1){var n,r,s,a;t&&((n=c(this,xc))!=null&&n.size)||((r=c(this,Po))==null||r.parentNode.parentNode.remove(),b(this,Po,null),(s=c(this,Bh))==null||s.clear(),b(this,Bh,null),(a=c(this,xc))==null||a.clear(),b(this,xc,null),b(this,wc,0))}}vc=new WeakMap,Bh=new WeakMap,Po=new WeakMap,Ro=new WeakMap,ni=new WeakMap,xc=new WeakMap,wc=new WeakMap,Se=new WeakSet,Jn=function(){return c(this,Bh)||b(this,Bh,new Map)},Xf=function(){return c(this,xc)||b(this,xc,new Map)},qu=function(){if(!c(this,Po)){const t=c(this,ni).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=c(this,ni).createElementNS(ho,"svg");r.setAttribute("width",0),r.setAttribute("height",0),b(this,Po,c(this,ni).createElementNS(ho,"defs")),t.append(r),r.append(c(this,Po)),c(this,ni).body.append(t)}return c(this,Po)},h0=function(t){if(t.length===1){const d=t[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=d[y]/255;const m=p.join(",");return[m,m,m]}const[n,r,s]=t,a=new Array(256),u=new Array(256),h=new Array(256);for(let d=0;d<256;d++)a[d]=n[d]/255,u[d]=r[d]/255,h[d]=s[d]/255;return[a.join(","),u.join(","),h.join(",")]},Xu=function(t){if(c(this,vc)===void 0){b(this,vc,"");const n=c(this,ni).URL;n!==c(this,ni).baseURI&&(Lv(n)?Be('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,vc,yT(n,"")))}return`url(${c(this,vc)}#${t})`},uP=function(t){const n=c(this,ni).createElementNS(ho,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Bb=function(t){const n=c(this,ni).createElementNS(ho,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Ku=function(t){const n=c(this,ni).createElementNS(ho,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),c(this,Se,qu).append(n),n},Kf=function(t,n,r){const s=c(this,ni).createElementNS(ho,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},Yf=function(t,n,r,s){const a=c(this,ni).createElementNS(ho,"feComponentTransfer");s.append(a),P(this,Se,Kf).call(this,a,"feFuncR",t),P(this,Se,Kf).call(this,a,"feFuncG",n),P(this,Se,Kf).call(this,a,"feFuncB",r)},zb=function(t,n){const r=c(this,ni).createElementNS(ho,"feComponentTransfer");n.append(r),P(this,Se,Kf).call(this,r,"feFuncA",t)},Qf=function(t){return c(this,Se,qu).style.color=t,xg(getComputedStyle(c(this,Se,qu)).getPropertyValue("color"))};class hP{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Et("Abstract method `_fetch` called.")}}class pC extends hP{async _fetch(e){const t=await yg(e,"arraybuffer");return new Uint8Array(t)}}class dP{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Et("Abstract method `_fetch` called.")}}class mC extends dP{async _fetch(e){const t=await yg(e,"arraybuffer");return new Uint8Array(t)}}pi&&Be("Please use the `legacy` build in Node.js environments.");async function dS(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class XF extends cP{}class KF extends aP{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class YF extends lP{async _fetch(e){return dS(e)}}class QF extends hP{async _fetch(e){return dS(e)}}class JF extends dP{async _fetch(e){return dS(e)}}const Hu="__forcedDependency",{floor:gC,ceil:yC}=Math;function zy(i,e,t,n,r,s){i[e*4+0]=Math.min(i[e*4+0],t),i[e*4+1]=Math.min(i[e*4+1],n),i[e*4+2]=Math.max(i[e*4+2],r),i[e*4+3]=Math.max(i[e*4+3],s)}const Ub=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var zh,Ya;class ZF{constructor(e,t){_(this,zh);_(this,Ya);b(this,zh,e),b(this,Ya,t)}get length(){return c(this,zh).length}isEmpty(e){return c(this,zh)[e]===Ub}minX(e){return c(this,Ya)[e*4+0]/256}minY(e){return c(this,Ya)[e*4+1]/256}maxX(e){return(c(this,Ya)[e*4+2]+1)/256}maxY(e){return(c(this,Ya)[e*4+3]+1)/256}}zh=new WeakMap,Ya=new WeakMap;const Uy=(i,e)=>{if(!i)return;let t=i.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},i.set(e,t)),t};var Ri,Ni,bc,is,Sc,No,dt,gt,Lo,Li,im,Uh,Ec,Ac,Do,ii,Bs,rm,Hb;class eO{constructor(e,t,n=!1){_(this,rm);_(this,Ri,{__proto__:null});_(this,Ni,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Hu]:[]});_(this,bc,new Map);_(this,is,[]);_(this,Sc,[]);_(this,No,[[1,0,0,1,0,0]]);_(this,dt,[-1/0,-1/0,1/0,1/0]);_(this,gt,new Float64Array([1/0,1/0,-1/0,-1/0]));_(this,Lo,-1);_(this,Li,new Set);_(this,im,new Map);_(this,Uh,new Map);_(this,Ec);_(this,Ac);_(this,Do);_(this,ii);_(this,Bs);b(this,Ec,e.width),b(this,Ac,e.height),P(this,rm,Hb).call(this,t),n&&b(this,Bs,new Map)}growOperationsCount(e){e>=c(this,ii).length&&P(this,rm,Hb).call(this,e,c(this,ii))}save(e){return b(this,Ri,{__proto__:c(this,Ri)}),b(this,Ni,{__proto__:c(this,Ni),transform:{__proto__:c(this,Ni).transform},moveText:{__proto__:c(this,Ni).moveText},sameLineText:{__proto__:c(this,Ni).sameLineText},[Hu]:{__proto__:c(this,Ni)[Hu]}}),b(this,dt,{__proto__:c(this,dt)}),c(this,is).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(c(this,Ri));if(t===null)return this;b(this,Ri,t),b(this,Ni,Object.getPrototypeOf(c(this,Ni))),b(this,dt,Object.getPrototypeOf(c(this,dt)));const n=c(this,is).pop();return n!==void 0&&((r=Uy(c(this,Bs),e))==null||r.dependencies.add(n),c(this,ii)[e]=c(this,ii)[n]),this}recordOpenMarker(e){return c(this,is).push(e),this}getOpenMarker(){return c(this,is).length===0?null:c(this,is).at(-1)}recordCloseMarker(e){var n;const t=c(this,is).pop();return t!==void 0&&((n=Uy(c(this,Bs),e))==null||n.dependencies.add(t),c(this,ii)[e]=c(this,ii)[t]),this}beginMarkedContent(e){return c(this,Sc).push(e),this}endMarkedContent(e){var n;const t=c(this,Sc).pop();return t!==void 0&&((n=Uy(c(this,Bs),e))==null||n.dependencies.add(t),c(this,ii)[e]=c(this,ii)[t]),this}pushBaseTransform(e){return c(this,No).push(we.multiplyByDOMMatrix(c(this,No).at(-1),e.getTransform())),this}popBaseTransform(){return c(this,No).length>1&&c(this,No).pop(),this}recordSimpleData(e,t){return c(this,Ri)[e]=t,this}recordIncrementalData(e,t){return c(this,Ni)[e].push(t),this}resetIncrementalData(e,t){return c(this,Ni)[e].length=0,this}recordNamedData(e,t){return c(this,bc).set(e,t),this}recordSimpleDataFromNamed(e,t,n){c(this,Ri)[e]=c(this,bc).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Hu,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in c(this,Ri)&&this.recordFutureForcedDependency(t,c(this,Ri)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of c(this,Li))this.recordFutureForcedDependency(Hu,e);return this}resetBBox(e){return c(this,Lo)!==e&&(b(this,Lo,e),c(this,gt)[0]=1/0,c(this,gt)[1]=1/0,c(this,gt)[2]=-1/0,c(this,gt)[3]=-1/0),this}recordClipBox(e,t,n,r,s,a){const u=we.multiplyByDOMMatrix(c(this,No).at(-1),t.getTransform()),h=[1/0,1/0,-1/0,-1/0];we.axialAlignedBoundingBox([n,s,r,a],u,h);const d=we.intersect(c(this,dt),h);return d?(c(this,dt)[0]=d[0],c(this,dt)[1]=d[1],c(this,dt)[2]=d[2],c(this,dt)[3]=d[3]):(c(this,dt)[0]=c(this,dt)[1]=1/0,c(this,dt)[2]=c(this,dt)[3]=-1/0),this}recordBBox(e,t,n,r,s,a){const u=c(this,dt);if(u[0]===1/0)return this;const h=we.multiplyByDOMMatrix(c(this,No).at(-1),t.getTransform());if(u[0]===-1/0)return we.axialAlignedBoundingBox([n,s,r,a],h,c(this,gt)),this;const d=[1/0,1/0,-1/0,-1/0];return we.axialAlignedBoundingBox([n,s,r,a],h,d),c(this,gt)[0]=Math.min(c(this,gt)[0],Math.max(d[0],u[0])),c(this,gt)[1]=Math.min(c(this,gt)[1],Math.max(d[1],u[1])),c(this,gt)[2]=Math.max(c(this,gt)[2],Math.min(d[2],u[2])),c(this,gt)[3]=Math.max(c(this,gt)[3],Math.min(d[3],u[3])),this}recordCharacterBBox(e,t,n,r=1,s=0,a=0,u){const h=n.bbox;let d,p;if(h&&(d=h[2]!==h[0]&&h[3]!==h[1]&&c(this,Uh).get(n),d!==!1&&(p=[0,0,0,0],we.axialAlignedBoundingBox(h,n.fontMatrix,p),(r!==1||s!==0||a!==0)&&we.scaleMinMax([r,0,0,-r,s,a],p),d)))return this.recordBBox(e,t,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(e);const m=u();return h&&p&&d===void 0&&(d=p[0]<=s-m.actualBoundingBoxLeft&&p[2]>=s+m.actualBoundingBoxRight&&p[1]<=a-m.actualBoundingBoxAscent&&p[3]>=a+m.actualBoundingBoxDescent,c(this,Uh).set(n,d),d)?this.recordBBox(e,t,p[0],p[2],p[1],p[3]):this.recordBBox(e,t,s-m.actualBoundingBoxLeft,s+m.actualBoundingBoxRight,a-m.actualBoundingBoxAscent,a+m.actualBoundingBoxDescent)}recordFullPageBBox(e){return c(this,gt)[0]=Math.max(0,c(this,dt)[0]),c(this,gt)[1]=Math.max(0,c(this,dt)[1]),c(this,gt)[2]=Math.min(c(this,Ec),c(this,dt)[2]),c(this,gt)[3]=Math.min(c(this,Ac),c(this,dt)[3]),this}getSimpleIndex(e){return c(this,Ri)[e]}recordDependencies(e,t){const n=c(this,Li),r=c(this,Ri),s=c(this,Ni);for(const a of t)a in c(this,Ri)?n.add(r[a]):a in s&&s[a].forEach(n.add,n);return this}recordNamedDependency(e,t){return c(this,bc).has(t)&&c(this,Li).add(c(this,bc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Hu]),c(this,Bs)){const n=Uy(c(this,Bs),e),{dependencies:r}=n;c(this,Li).forEach(r.add,r),c(this,is).forEach(r.add,r),c(this,Sc).forEach(r.add,r),r.delete(e),n.isRenderingOperation=!0}if(c(this,Lo)===e){const n=gC(c(this,gt)[0]*256/c(this,Ec)),r=gC(c(this,gt)[1]*256/c(this,Ac)),s=yC(c(this,gt)[2]*256/c(this,Ec)),a=yC(c(this,gt)[3]*256/c(this,Ac));zy(c(this,Do),e,n,r,s,a);for(const u of c(this,Li))u!==e&&zy(c(this,Do),u,n,r,s,a);for(const u of c(this,is))u!==e&&zy(c(this,Do),u,n,r,s,a);for(const u of c(this,Sc))u!==e&&zy(c(this,Do),u,n,r,s,a);t||(c(this,Li).clear(),b(this,Lo,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(c(this,Li));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return c(this,Lo)===e&&(b(this,Lo,-1),c(this,dt)[0]=Math.max(c(this,dt)[0],c(this,gt)[0]),c(this,dt)[1]=Math.max(c(this,dt)[1],c(this,gt)[1]),c(this,dt)[2]=Math.min(c(this,dt)[2],c(this,gt)[2]),c(this,dt)[3]=Math.min(c(this,dt)[3],c(this,gt)[3]),t||c(this,Li).clear()),this}_takePendingDependencies(){const e=c(this,Li);return b(this,Li,new Set),e}_extractOperation(e){const t=c(this,im).get(e);return c(this,im).delete(e),t}_pushPendingDependencies(e){for(const t of e)c(this,Li).add(t)}take(){return c(this,Uh).clear(),new ZF(c(this,ii),c(this,Do))}takeDebugMetadata(){return c(this,Bs)}}Ri=new WeakMap,Ni=new WeakMap,bc=new WeakMap,is=new WeakMap,Sc=new WeakMap,No=new WeakMap,dt=new WeakMap,gt=new WeakMap,Lo=new WeakMap,Li=new WeakMap,im=new WeakMap,Uh=new WeakMap,Ec=new WeakMap,Ac=new WeakMap,Do=new WeakMap,ii=new WeakMap,Bs=new WeakMap,rm=new WeakSet,Hb=function(e,t){const n=new ArrayBuffer(e*4);b(this,Do,new Uint8ClampedArray(n)),b(this,ii,new Uint32Array(n)),t&&t.length>0?(c(this,ii).set(t),c(this,ii).fill(Ub,t.length)):c(this,ii).fill(Ub)};var bt,qt,rs,Hh,$h;const FS=class FS{constructor(e,t,n){_(this,bt);_(this,qt);_(this,rs);_(this,Hh,0);_(this,$h,0);if(e instanceof FS&&c(e,rs)===!!n)return e;b(this,bt,e),b(this,qt,t),b(this,rs,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return mn(this,$h)._++,c(this,bt).save(c(this,qt)),this}restore(e){return c(this,$h)>0&&(c(this,bt).restore(c(this,qt)),mn(this,$h)._--),this}recordOpenMarker(e){return mn(this,Hh)._++,this}getOpenMarker(){return c(this,Hh)>0?c(this,qt):c(this,bt).getOpenMarker()}recordCloseMarker(e){return mn(this,Hh)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return c(this,bt).pushBaseTransform(e),this}popBaseTransform(){return c(this,bt).popBaseTransform(),this}recordSimpleData(e,t){return c(this,bt).recordSimpleData(e,c(this,qt)),this}recordIncrementalData(e,t){return c(this,bt).recordIncrementalData(e,c(this,qt)),this}resetIncrementalData(e,t){return c(this,bt).resetIncrementalData(e,c(this,qt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return c(this,bt).recordSimpleDataFromNamed(e,t,c(this,qt)),this}recordFutureForcedDependency(e,t){return c(this,bt).recordFutureForcedDependency(e,c(this,qt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return c(this,bt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,bt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return c(this,rs)||c(this,bt).resetBBox(c(this,qt)),this}recordClipBox(e,t,n,r,s,a){return c(this,rs)||c(this,bt).recordClipBox(c(this,qt),t,n,r,s,a),this}recordBBox(e,t,n,r,s,a){return c(this,rs)||c(this,bt).recordBBox(c(this,qt),t,n,r,s,a),this}recordCharacterBBox(e,t,n,r,s,a,u){return c(this,rs)||c(this,bt).recordCharacterBBox(c(this,qt),t,n,r,s,a,u),this}recordFullPageBBox(e){return c(this,rs)||c(this,bt).recordFullPageBBox(c(this,qt)),this}getSimpleIndex(e){return c(this,bt).getSimpleIndex(e)}recordDependencies(e,t){return c(this,bt).recordDependencies(c(this,qt),t),this}recordNamedDependency(e,t){return c(this,bt).recordNamedDependency(c(this,qt),t),this}recordOperation(e){return c(this,bt).recordOperation(c(this,qt),!0),this}recordShowTextOperation(e){return c(this,bt).recordShowTextOperation(c(this,qt),!0),this}bboxToClipBoxDropOperation(e){return c(this,rs)||c(this,bt).bboxToClipBoxDropOperation(c(this,qt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};bt=new WeakMap,qt=new WeakMap,rs=new WeakMap,Hh=new WeakMap,$h=new WeakMap;let G0=FS;const _r={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Wn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function $b(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}class fS{isModifyingCurrentTransform(){return!1}getPattern(){Et("Abstract method `getPattern` called.")}}class tO extends fS{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let n,r=this._p0,s=this._p1;if(t&&(r=r.slice(),s=s.slice(),we.applyTransform(r,t),we.applyTransform(s,t)),this._type==="axial")n=e.createLinearGradient(r[0],r[1],s[0],s[1]);else if(this._type==="radial"){let a=this._r0,u=this._r1;if(t){const h=new Float32Array(2);we.singularValueDecompose2dScale(t,h),a*=h[0],u*=h[0]}n=e.createRadialGradient(r[0],r[1],a,s[0],s[1],u)}for(const a of this._colorStops)n.addColorStop(a[0],a[1]);return n}getPattern(e,t,n,r){let s;if(r===Wn.STROKE||r===Wn.FILL){if(this.isOriginBased()){let y=we.transform(n,t.baseTransform);this.matrix&&(y=we.transform(y,this.matrix));const v=.001,E=Math.hypot(y[0],y[1]),A=Math.hypot(y[2],y[3]),k=(y[0]*y[2]+y[1]*y[3])/(E*A);if(Math.abs(k)<v)if(this.isRadial()){if(Math.abs(E-A)<v)return this._createGradient(e,y)}else return this._createGradient(e,y)}const a=t.current.getClippedPathBoundingBox(r,Ut(e))||[0,0,0,0],u=Math.ceil(a[2]-a[0])||1,h=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",u,h),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-a[0],-a[1]),n=we.transform(n,[1,0,0,1,a[0],a[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),$b(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),s=e.createPattern(d.canvas,"no-repeat");const m=new DOMMatrix(n);s.setTransform(m)}else $b(e,this._bbox),s=this._createGradient(e);return s}}function zw(i,e,t,n,r,s,a,u){const h=e.coords,d=e.colors,p=i.data,m=i.width*4;let y;h[t+1]>h[n+1]&&(y=t,t=n,n=y,y=s,s=a,a=y),h[n+1]>h[r+1]&&(y=n,n=r,r=y,y=a,a=u,u=y),h[t+1]>h[n+1]&&(y=t,t=n,n=y,y=s,s=a,a=y);const v=(h[t]+e.offsetX)*e.scaleX,E=(h[t+1]+e.offsetY)*e.scaleY,A=(h[n]+e.offsetX)*e.scaleX,k=(h[n+1]+e.offsetY)*e.scaleY,C=(h[r]+e.offsetX)*e.scaleX,N=(h[r+1]+e.offsetY)*e.scaleY;if(E>=N)return;const T=d[s],D=d[s+1],F=d[s+2],L=d[a],j=d[a+1],G=d[a+2],K=d[u],ee=d[u+1],q=d[u+2],re=Math.round(E),ue=Math.round(N);let ie,Z,se,J,Q,me,M,B;for(let U=re;U<=ue;U++){if(U<k){const xe=U<E?0:(E-U)/(E-k);ie=v-(v-A)*xe,Z=T-(T-L)*xe,se=D-(D-j)*xe,J=F-(F-G)*xe}else{let xe;U>N?xe=1:k===N?xe=0:xe=(k-U)/(k-N),ie=A-(A-C)*xe,Z=L-(L-K)*xe,se=j-(j-ee)*xe,J=G-(G-q)*xe}let I;U<E?I=0:U>N?I=1:I=(E-U)/(E-N),Q=v-(v-C)*I,me=T-(T-K)*I,M=D-(D-ee)*I,B=F-(F-q)*I;const pe=Math.round(Math.min(ie,Q)),ye=Math.round(Math.max(ie,Q));let de=m*U+pe*4;for(let xe=pe;xe<=ye;xe++)I=(ie-xe)/(ie-Q),I<0?I=0:I>1&&(I=1),p[de++]=Z-(Z-me)*I|0,p[de++]=se-(se-M)*I|0,p[de++]=J-(J-B)*I|0,p[de++]=255}}function nO(i,e,t){const n=e.coords,r=e.colors;let s,a;switch(e.type){case pb.LATTICE:const u=e.verticesPerRow,h=Math.floor(n.length/u)-1,d=u-1;for(s=0;s<h;s++){let p=s*u;for(let m=0;m<d;m++,p++)zw(i,t,n[p],n[p+1],n[p+u],r[p],r[p+1],r[p+u]),zw(i,t,n[p+u+1],n[p+1],n[p+u],r[p+u+1],r[p+1],r[p+u])}break;case pb.TRIANGLES:for(s=0,a=n.length;s<a;s+=3)zw(i,t,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class iO extends fS{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),v=d/m,E=p/y,A={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/v,scaleY:1/E},k=m+4,C=y+4,N=n.getCanvas("mesh",k,C),T=N.context,D=T.createImageData(m,y);if(t){const L=D.data;for(let j=0,G=L.length;j<G;j+=4)L[j]=t[0],L[j+1]=t[1],L[j+2]=t[2],L[j+3]=255}for(const L of this._figures)nO(D,L,A);return T.putImageData(D,2,2),{canvas:N.canvas,offsetX:u-2*v,offsetY:h-2*E,scaleX:v,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){$b(e,this._bbox);const s=new Float32Array(2);if(r===Wn.SHADING)we.singularValueDecompose2dScale(Ut(e),s);else if(this.matrix){we.singularValueDecompose2dScale(this.matrix,s);const[u,h]=s;we.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=u,s[1]*=h}else we.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,r===Wn.SHADING?null:this._background,t.cachedCanvases);return r!==Wn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class rO extends fS{getPattern(){return"hotpink"}}function sO(i){switch(i[0]){case"RadialAxial":return new tO(i);case"Mesh":return new iO(i);case"Dummy":return new rO}throw new Error(`Unknown IR type: ${i[0]}`)}const vC={COLORED:1,UNCOLORED:2},uv=class uv{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){var me,M;const{bbox:n,operatorList:r,paintType:s,tilingType:a,color:u,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),Nv("TilingType: "+a);const m=n[0],y=n[1],v=n[2],E=n[3],A=v-m,k=E-y,C=new Float32Array(2);we.singularValueDecompose2dScale(this.matrix,C);const[N,T]=C;we.singularValueDecompose2dScale(this.baseTransform,C);const D=N*C[0],F=T*C[1];let L=A,j=k,G=!1,K=!1;const ee=Math.ceil(d*D),q=Math.ceil(p*F),re=Math.ceil(A*D),ue=Math.ceil(k*F);ee>=re?L=d:G=!0,q>=ue?j=p:K=!0;const ie=this.getSizeAndScale(L,this.ctx.canvas.width,D),Z=this.getSizeAndScale(j,this.ctx.canvas.height,F),se=e.cachedCanvases.getCanvas("pattern",ie.size,Z.size),J=se.context,Q=h.createCanvasGraphics(J,t);if(Q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Q,s,u),J.translate(-ie.scale*m,-Z.scale*y),Q.transform(0,ie.scale,0,0,Z.scale,0,0),J.save(),(me=Q.dependencyTracker)==null||me.save(),this.clipBbox(Q,m,y,v,E),Q.baseTransform=Ut(Q.ctx),Q.executeOperatorList(r),Q.endDrawing(),(M=Q.dependencyTracker)==null||M.restore(),J.restore(),G||K){const B=se.canvas;G&&(L=d),K&&(j=p);const U=this.getSizeAndScale(L,this.ctx.canvas.width,D),I=this.getSizeAndScale(j,this.ctx.canvas.height,F),pe=U.size,ye=I.size,de=e.cachedCanvases.getCanvas("pattern-workaround",pe,ye),xe=de.context,Ee=G?Math.floor(A/d):0,Re=K?Math.floor(k/p):0;for(let tt=0;tt<=Ee;tt++)for(let te=0;te<=Re;te++)xe.drawImage(B,pe*tt,ye*te,pe,ye,0,0,pe,ye);return{canvas:de.canvas,scaleX:U.scale,scaleY:I.scale,offsetX:m,offsetY:y}}return{canvas:se.canvas,scaleX:ie.scale,scaleY:Z.scale,offsetX:m,offsetY:y}}getSizeAndScale(e,t,n){const r=Math.max(uv.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=r?s=r:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,r,s){const a=r-t,u=s-n;e.ctx.rect(t,n,a,u),we.axialAlignedBoundingBox([t,n,r,s],Ut(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,s=e.current;switch(t){case vC.COLORED:const{fillStyle:a,strokeStyle:u}=this.ctx;r.fillStyle=s.fillColor=a,r.strokeStyle=s.strokeColor=u;break;case vC.UNCOLORED:r.fillStyle=r.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new yF(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,s){let a=n;r!==Wn.SHADING&&(a=we.transform(a,t.baseTransform),this.matrix&&(a=we.transform(a,this.matrix)));const u=this.createPatternCanvas(t,s);let h=new DOMMatrix(a);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const d=e.createPattern(u.canvas,"repeat");return d.setTransform(h),d}};le(uv,"MAX_PATTERN_SIZE",3e3);let Vb=uv;function oO({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const u=bn.isLittleEndian?4278190080:255,[h,d]=a?[s,u]:[u,s],p=n>>3,m=n&7,y=i.length;t=new Uint32Array(t.buffer);let v=0;for(let E=0;E<r;E++){for(const k=e+p;e<k;e++){const C=e<y?i[e]:255;t[v++]=C&128?d:h,t[v++]=C&64?d:h,t[v++]=C&32?d:h,t[v++]=C&16?d:h,t[v++]=C&8?d:h,t[v++]=C&4?d:h,t[v++]=C&2?d:h,t[v++]=C&1?d:h}if(m===0)continue;const A=e<y?i[e++]:255;for(let k=0;k<m;k++)t[v++]=A&1<<7-k?d:h}return{srcPos:e,destPos:v}}const xC=16,wC=100,aO=15,bC=10,Mi=16,Uw=new DOMMatrix,mr=new Float32Array(2),eh=new Float32Array([1/0,1/0,-1/0,-1/0]);function lO(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},i.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},i.transform=function(t,n,r,s,a,u){e.transform(t,n,r,s,a,u),this.__originalTransform(t,n,r,s,a,u)},i.setTransform=function(t,n,r,s,a,u){e.setTransform(t,n,r,s,a,u),this.__originalSetTransform(t,n,r,s,a,u)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,s,a,u){e.bezierCurveTo(t,n,r,s,a,u),this.__originalBezierCurveTo(t,n,r,s,a,u)},i.rect=function(t,n,r,s){e.rect(t,n,r,s),this.__originalRect(t,n,r,s)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class cO{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Hy(i,e,t,n,r,s,a,u,h,d){const[p,m,y,v,E,A]=Ut(i);if(m===0&&y===0){const N=a*p+E,T=Math.round(N),D=u*v+A,F=Math.round(D),L=(a+h)*p+E,j=Math.abs(Math.round(L)-T)||1,G=(u+d)*v+A,K=Math.abs(Math.round(G)-F)||1;return i.setTransform(Math.sign(p),0,0,Math.sign(v),T,F),i.drawImage(e,t,n,r,s,0,0,j,K),i.setTransform(p,m,y,v,E,A),[j,K]}if(p===0&&v===0){const N=u*y+E,T=Math.round(N),D=a*m+A,F=Math.round(D),L=(u+d)*y+E,j=Math.abs(Math.round(L)-T)||1,G=(a+h)*m+A,K=Math.abs(Math.round(G)-F)||1;return i.setTransform(0,Math.sign(m),Math.sign(y),0,T,F),i.drawImage(e,t,n,r,s,0,0,K,j),i.setTransform(p,m,y,v,E,A),[K,j]}i.drawImage(e,t,n,r,s,a,u,h,d);const k=Math.hypot(p,m),C=Math.hypot(y,v);return[k*h,C*d]}class SC{constructor(e,t,n){le(this,"alphaIsShape",!1);le(this,"fontSize",0);le(this,"fontSizeScale",1);le(this,"textMatrix",null);le(this,"textMatrixScale",1);le(this,"fontMatrix",fb);le(this,"leading",0);le(this,"x",0);le(this,"y",0);le(this,"lineX",0);le(this,"lineY",0);le(this,"charSpacing",0);le(this,"wordSpacing",0);le(this,"textHScale",1);le(this,"textRenderingMode",gn.FILL);le(this,"textRise",0);le(this,"fillColor","#000000");le(this,"strokeColor","#000000");le(this,"patternFill",!1);le(this,"patternStroke",!1);le(this,"fillAlpha",1);le(this,"strokeAlpha",1);le(this,"lineWidth",1);le(this,"activeSMask",null);le(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=eh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Wn.FILL,t=null){const n=this.minMax.slice();if(e===Wn.STROKE){t||Et("Stroke bounding box must include transform."),we.singularValueDecompose2dScale(t,mr);const r=mr[0]*this.lineWidth/2,s=mr[1]*this.lineWidth/2;n[0]-=r,n[1]-=s,n[2]+=r,n[3]+=s}return n}updateClipFromPath(){const e=we.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(eh,0)}getClippedPathBoundingBox(e=Wn.FILL,t=null){return we.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function EC(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%Mi,s=(t-r)/Mi,a=r===0?s:s+1,u=i.createImageData(n,Mi);let h=0,d;const p=e.data,m=u.data;let y,v,E,A;if(e.kind===t0.GRAYSCALE_1BPP){const k=p.byteLength,C=new Uint32Array(m.buffer,0,m.byteLength>>2),N=C.length,T=n+7>>3,D=4294967295,F=bn.isLittleEndian?4278190080:255;for(y=0;y<a;y++){for(E=y<s?Mi:r,d=0,v=0;v<E;v++){const L=k-h;let j=0;const G=L>T?n:L*8-7,K=G&-8;let ee=0,q=0;for(;j<K;j+=8)q=p[h++],C[d++]=q&128?D:F,C[d++]=q&64?D:F,C[d++]=q&32?D:F,C[d++]=q&16?D:F,C[d++]=q&8?D:F,C[d++]=q&4?D:F,C[d++]=q&2?D:F,C[d++]=q&1?D:F;for(;j<G;j++)ee===0&&(q=p[h++],ee=128),C[d++]=q&ee?D:F,ee>>=1}for(;d<N;)C[d++]=0;i.putImageData(u,0,y*Mi)}}else if(e.kind===t0.RGBA_32BPP){for(v=0,A=n*Mi*4,y=0;y<s;y++)m.set(p.subarray(h,h+A)),h+=A,i.putImageData(u,0,v),v+=Mi;y<a&&(A=n*r*4,m.set(p.subarray(h,h+A)),i.putImageData(u,0,v))}else if(e.kind===t0.RGB_24BPP)for(E=Mi,A=n*E,y=0;y<a;y++){for(y>=s&&(E=r,A=n*E),d=0,v=A;v--;)m[d++]=p[h++],m[d++]=p[h++],m[d++]=p[h++],m[d++]=255;i.putImageData(u,0,y*Mi)}else throw new Error(`bad image kind: ${e.kind}`)}function AC(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%Mi,s=(t-r)/Mi,a=r===0?s:s+1,u=i.createImageData(n,Mi);let h=0;const d=e.data,p=u.data;for(let m=0;m<a;m++){const y=m<s?Mi:r;({srcPos:h}=oO({src:d,srcPos:h,dest:p,width:n,height:y,nonBlackColor:0})),i.putImageData(u,0,m*Mi)}}function Nf(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function $y(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function kC(i,e){if(e)return!0;we.singularValueDecompose2dScale(i,mr);const t=Math.fround(Zs.pixelRatio*Sl.PDF_TO_CSS_UNITS);return mr[0]<=t&&mr[1]<=t}const uO=["butt","round","square"],hO=["miter","round","bevel"],dO={},CC={};var ms,Wb,Gb,qb;const OS=class OS{constructor(e,t,n,r,s,{optionalContentConfig:a,markedContentStack:u=null},h,d,p){_(this,ms);this.ctx=e,this.current=new SC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=a,this.cachedCanvases=new cO(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(e,t,n=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Ut(this.compositeCtx))}this.ctx.save(),$y(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ut(this.ctx)}executeOperatorList(e,t,n,r,s){var C;const a=e.argsArray,u=e.fnArray;let h=t||0;const d=a.length;if(d===h)return h;const p=d-h>bC&&typeof n=="function",m=p?Date.now()+aO:0;let y=0;const v=this.commonObjs,E=this.objs;let A,k;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,n),h;if(!s||s(h))if(A=u[h],k=a[h]??null,A!==fp.dependency)k===null?this[A](h):this[A](h,...k);else for(const N of k){(C=this.dependencyTracker)==null||C.recordNamedData(N,h);const T=N.startsWith("g_")?v:E;if(!T.has(N))return T.get(N,n),h}if(h++,h===d)return h;if(p&&++y>bC){if(Date.now()>m)return n(),h;y=0}}}endDrawing(){P(this,ms,Wb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),P(this,ms,Gb).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),u=n,h=r,d="prescale1",p,m;for(;s>2&&u>1||a>2&&h>1;){let y=u,v=h;s>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),s/=u/y),a>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,a/=h/v),p=this.cachedCanvases.getCanvas(d,y,v),m=p.context,m.clearRect(0,0,y,v),m.drawImage(e,0,0,u,h,0,0,y,v),e=p.canvas,u=y,h=v,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,t){var ee,q;const n=this.ctx,{width:r,height:s}=t,a=this.current.fillColor,u=this.current.patternFill,h=Ut(n);let d,p,m,y;if((t.bitmap||t.data)&&t.count>1){const re=t.bitmap||t.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),a]),d=this._cachedBitmapsMap.get(re),d||(d=new Map,this._cachedBitmapsMap.set(re,d));const ue=d.get(p);if(ue&&!u){const ie=Math.round(Math.min(h[0],h[2])+h[4]),Z=Math.round(Math.min(h[1],h[3])+h[5]);return(ee=this.dependencyTracker)==null||ee.recordDependencies(e,_r.transformAndFill),{canvas:ue,offsetX:ie,offsetY:Z}}m=ue}m||(y=this.cachedCanvases.getCanvas("maskCanvas",r,s),AC(y.context,t));let v=we.transform(h,[1/r,0,0,-1/s,0,0]);v=we.transform(v,[1,0,0,1,0,-s]);const E=eh.slice();we.axialAlignedBoundingBox([0,0,r,s],v,E);const[A,k,C,N]=E,T=Math.round(C-A)||1,D=Math.round(N-k)||1,F=this.cachedCanvases.getCanvas("fillCanvas",T,D),L=F.context,j=A,G=k;L.translate(-j,-G),L.transform(...v),m||(m=this._scaleImage(y.canvas,As(L)),m=m.img,d&&u&&d.set(p,m)),L.imageSmoothingEnabled=kC(Ut(L),t.interpolate),Hy(L,m,0,0,m.width,m.height,0,0,r,s),L.globalCompositeOperation="source-in";const K=we.transform(As(L),[1,0,0,1,-j,-G]);return L.fillStyle=u?a.getPattern(n,this,K,Wn.FILL,e):a,L.fillRect(0,0,r,s),d&&!u&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,F.canvas)),(q=this.dependencyTracker)==null||q.recordDependencies(e,_r.transformAndFill),{canvas:F.canvas,offsetX:Math.round(j),offsetY:Math.round(G)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=uO[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=hO[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,r,s,a,u;for(const[h,d]of t)switch(h){case"LW":this.setLineWidth(e,d);break;case"LC":this.setLineCap(e,d);break;case"LJ":this.setLineJoin(e,d);break;case"ML":this.setMiterLimit(e,d);break;case"D":this.setDash(e,d[0],d[1]);break;case"RI":this.setRenderingIntent(e,d);break;case"FL":this.setFlatness(e,d);break;case"Font":this.setFont(e,d[0],d[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=d;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=d;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=d;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),Nf(this.suspendedCtx,a),lO(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const s=r[0],a=r[1],u=r[2]-s,h=r[3]-a;u===0||h===0||(this.genericComposeSMask(t.context,n,u,h,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,s,a,u,h,d,p,m){let y=e.canvas,v=h-p,E=d-m;if(a)if(v<0||E<0||v+n>y.width||E+r>y.height){const k=this.cachedCanvases.getCanvas("maskExtension",n,r),C=k.context;C.drawImage(y,-v,-E),C.globalCompositeOperation="destination-atop",C.fillStyle=a,C.fillRect(0,0,n,r),C.globalCompositeOperation="source-over",y=k.canvas,v=E=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(v,E,n,r),e.clip(k),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(v,E,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const A=new Path2D;A.rect(h,d,n,r),t.clip(A),t.globalCompositeOperation="destination-in",t.drawImage(y,v,E,n,r,h,d,n,r),t.restore()}save(e){var n;this.inSMaskMode&&Nf(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Nf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,s,a,u){var h;(h=this.dependencyTracker)==null||h.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,s,a,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[s]=n;if(!r){s||(s=n[0]=new Path2D),this[t](e,s);return}if(this.dependencyTracker!==null){const a=t===fp.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=n[0]=ET(s)),we.axialAlignedBoundingBox(r,Ut(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var a;const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const u=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,As(r),Wn.STROKE,e),u){const h=new Path2D;h.addPath(t,r.getTransform().invertSelf().multiplySelf(u)),t=h}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,_r.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Wn.STROKE,Ut(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var d,p,m;const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let u=!1;if(a){const y=s.isModifyingCurrentTransform()?r.getTransform():null;if((d=this.dependencyTracker)==null||d.save(e),r.save(),r.fillStyle=s.getPattern(r,this,As(r),Wn.FILL,e),y){const v=new Path2D;v.addPath(t,r.getTransform().invertSelf().multiplySelf(y)),t=v}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(p=this.dependencyTracker)==null||p.recordDependencies(e,_r.fill),u&&(r.restore(),(m=this.dependencyTracker)==null||m.restore(e)),n&&this.consumePath(e,t,h)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,_r.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=dO}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=CC}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,s=n.getTransform().invertSelf();for(const{transform:a,x:u,y:h,fontSize:d,path:p}of t)p&&r.addPath(p,new DOMMatrix(a).preMultiplySelf(s).translate(u,h).scale(d,-d));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var m,y;(m=this.dependencyTracker)==null||m.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),s=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=r.fontMatrix||fb,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Be("Invalid font matrix for font "+t),n<0?(n=-n,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const a=r.loadedName||"sans-serif",u=((y=r.systemFontInfo)==null?void 0:y.css)||`"${a}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const d=r.italic?"italic":"normal";let p=n;n<xC?p=xC:n>wC&&(p=wC),this.current.fontSizeScale=n/p,this.ctx.font=`${d} ${h} ${p}px ${u}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,r,s,a){var C,N,T,D;const u=this.ctx,h=this.current,d=h.font,p=h.textRenderingMode,m=h.fontSize/h.fontSizeScale,y=p&gn.FILL_STROKE_MASK,v=!!(p&gn.ADD_TO_PATH_FLAG),E=h.patternFill&&!d.missingFile,A=h.patternStroke&&!d.missingFile;let k;if((d.disableFontFace||v||E||A)&&!d.missingFile&&(k=d.getPathGenerator(this.commonObjs,t)),k&&(d.disableFontFace||E||A)){u.save(),u.translate(n,r),u.scale(m,-m),(C=this.dependencyTracker)==null||C.recordCharacterBBox(e,u,d);let F;if(y===gn.FILL||y===gn.FILL_STROKE)if(s){F=u.getTransform(),u.setTransform(...s);const L=P(this,ms,qb).call(this,k,F,s);u.fill(L)}else u.fill(k);if(y===gn.STROKE||y===gn.FILL_STROKE)if(a){F||(F=u.getTransform()),u.setTransform(...a);const{a:L,b:j,c:G,d:K}=F,ee=we.inverseTransform(a),q=we.transform([L,j,G,K,0,0],ee);we.singularValueDecompose2dScale(q,mr),u.lineWidth*=Math.max(mr[0],mr[1])/m,u.stroke(P(this,ms,qb).call(this,k,F,a))}else u.lineWidth/=m,u.stroke(k);u.restore()}else(y===gn.FILL||y===gn.FILL_STROKE)&&(u.fillText(t,n,r),(N=this.dependencyTracker)==null||N.recordCharacterBBox(e,u,d,m,n,r,()=>u.measureText(t))),(y===gn.STROKE||y===gn.FILL_STROKE)&&(this.dependencyTracker&&((T=this.dependencyTracker)==null||T.recordCharacterBBox(e,u,d,m,n,r,()=>u.measureText(t)).recordDependencies(e,_r.stroke)),u.strokeText(t,n,r));v&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ut(u),x:n,y:r,fontSize:m,path:k}),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,u,d,m,n,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return ze(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var q,re,ue,ie;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,_r.showText).resetBBox(e),this.current.textRenderingMode&gn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),(q=this.dependencyTracker)==null||q.recordShowTextOperation(e);return}const s=n.fontSize;if(s===0){(re=this.dependencyTracker)==null||re.recordOperation(e);return}const a=this.ctx,u=n.fontSizeScale,h=n.charSpacing,d=n.wordSpacing,p=n.fontDirection,m=n.textHScale*p,y=t.length,v=r.vertical,E=v?1:-1,A=r.defaultVMetrics,k=s*n.fontMatrix[0],C=n.textRenderingMode===gn.FILL&&!r.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),p>0?a.scale(m,-1):a.scale(m,1);let N,T;const D=n.textRenderingMode&gn.FILL_STROKE_MASK,F=D===gn.FILL||D===gn.FILL_STROKE,L=D===gn.STROKE||D===gn.FILL_STROKE;if(F&&n.patternFill){a.save();const Z=n.fillColor.getPattern(a,this,As(a),Wn.FILL,e);N=Ut(a),a.restore(),a.fillStyle=Z}if(L&&n.patternStroke){a.save();const Z=n.strokeColor.getPattern(a,this,As(a),Wn.STROKE,e);T=Ut(a),a.restore(),a.strokeStyle=Z}let j=n.lineWidth;const G=n.textMatrixScale;if(G===0||j===0?L&&(j=this.getSinglePixelWidth()):j/=G,u!==1&&(a.scale(u,u),j/=u),a.lineWidth=j,r.isInvalidPDFjsFont){const Z=[];let se=0;for(const Q of t)Z.push(Q.unicode),se+=Q.width;const J=Z.join("");if(a.fillText(J,0,0),this.dependencyTracker!==null){const Q=a.measureText(J);this.dependencyTracker.recordBBox(e,this.ctx,-Q.actualBoundingBoxLeft,Q.actualBoundingBoxRight,-Q.actualBoundingBoxAscent,Q.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=se*k*m,a.restore(),this.compose();return}let K=0,ee;for(ee=0;ee<y;++ee){const Z=t[ee];if(typeof Z=="number"){K+=E*Z*s/1e3;continue}let se=!1;const J=(Z.isSpace?d:0)+h,Q=Z.fontChar,me=Z.accent;let M,B,U=Z.width;if(v){const ye=Z.vmetric||A,de=-(Z.vmetric?ye[1]:U*.5)*k,xe=ye[2]*k;U=ye?-ye[0]:U,M=de/u,B=(K+xe)/u}else M=K/u,B=0;let I;if(r.remeasure&&U>0){I=a.measureText(Q);const ye=I.width*1e3/s*u;if(U<ye&&this.isFontSubpixelAAEnabled){const de=U/ye;se=!0,a.save(),a.scale(de,1),M/=de}else U!==ye&&(M+=(U-ye)/2e3*s/u)}if(this.contentVisible&&(Z.isInFont||r.missingFile)){if(C&&!me)a.fillText(Q,M,B),(ue=this.dependencyTracker)==null||ue.recordCharacterBBox(e,a,I?{bbox:null}:r,s/u,M,B,()=>I??a.measureText(Q));else if(this.paintChar(e,Q,M,B,N,T),me){const ye=M+s*me.offset.x/u,de=B-s*me.offset.y/u;this.paintChar(e,me.fontChar,ye,de,N,T)}}const pe=v?U*k-J*p:U*k+J*p;K+=pe,se&&a.restore()}v?n.y-=K:n.x+=K*m,a.restore(),this.compose(),(ie=this.dependencyTracker)==null||ie.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,s=r.font,a=r.fontSize,u=r.fontDirection,h=s.vertical?1:-1,d=r.charSpacing,p=r.wordSpacing,m=r.textHScale*u,y=r.fontMatrix||fb,v=t.length,E=r.textRenderingMode===gn.INVISIBLE;let A,k,C,N;if(E||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(m,u);const T=this.dependencyTracker;for(this.dependencyTracker=T?new G0(T,e):null,A=0;A<v;++A){if(k=t[A],typeof k=="number"){N=h*k*a/1e3,this.ctx.translate(N,0),r.x+=N*m;continue}const D=(k.isSpace?p:0)+d,F=s.charProcOperatorList[k.operatorListId];F?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...y),this.executeOperatorList(F),this.restore()):Be(`Type3 character "${k.operatorListId}" is not available.`);const L=[k.width,0];we.applyTransform(L,y),C=L[0]*a+D,n.translate(C,0),r.x+=C*m}n.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,s,a,u){var d;const h=new Path2D;h.rect(r,s,a-r,u-s),this.ctx.clip(h),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,r,a,s,u).recordClipBox(e,this.ctx,r,a,s,u),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const r=this.baseTransform||Ut(this.ctx),s={createCanvasGraphics:(a,u)=>new OS(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new G0(this.dependencyTracker,u,!0):null)};n=new Vb(t,this.ctx,s,r)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=sO(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){var a;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const r=this._getPattern(e,t);n.fillStyle=r.getPattern(n,this,As(n),Wn.SHADING,e);const s=As(n);if(s){const{width:u,height:h}=n.canvas,d=eh.slice();we.axialAlignedBoundingBox([0,0,u,h],s,d);const[p,m,y,v]=d;this.ctx.fillRect(p,m,y-p,v-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,_r.transform).recordDependencies(e,_r.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Et("Should not call beginInlineImage")}beginImageData(){Et("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Ut(this.ctx),n)){we.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,a,u,h]=n,d=new Path2D;d.rect(s,a,u-s,h-a),this.ctx.clip(d),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,s,u,a,h),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var T;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||Nv("TODO: Support non-isolated groups."),t.knockout&&Be("Knockout groups not supported.");const r=Ut(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=eh.slice();we.axialAlignedBoundingBox(t.bbox,Ut(n),s);const a=[0,0,n.canvas.width,n.canvas.height];s=we.intersect(s,a)||[0,0,0,0];const u=Math.floor(s[0]),h=Math.floor(s[1]),d=Math.max(Math.ceil(s[2])-u,1),p=Math.max(Math.ceil(s[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,d,p),v=y.context;v.translate(-u,-h),v.transform(...r);let E=new Path2D;const[A,k,C,N]=t.bbox;if(E.rect(A,k,C-A,N-k),t.matrix){const D=new Path2D;D.addPath(E,new DOMMatrix(t.matrix)),E=D}v.clip(E),t.smask&&this.smaskStack.push({canvas:y.canvas,context:v,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),Nf(n,v),this.ctx=v,(T=this.dependencyTracker)==null||T.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var s;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Ut(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const u=eh.slice();we.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(e,t,n,r,s,a){if(P(this,ms,Wb).call(this),$y(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=h,we.singularValueDecompose2dScale(Ut(this.ctx),mr);const{viewportScale:d}=this,p=Math.ceil(u*this.outputScaleX*d),m=Math.ceil(h*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:y,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(mr[0],0,0,-mr[1],0,h*mr[1]),$y(this.ctx)}else{$y(this.ctx),this.endPath(e);const d=new Path2D;d.rect(n[0],n[1],u,h),this.ctx.clip(d)}}this.current=new SC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),P(this,ms,Gb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var u;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const r=this.ctx,s=this._createMaskCanvas(e,t),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,s=0,a,u){var m,y,v;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const h=this.ctx;h.save();const d=Ut(h);h.transform(n,r,s,a,0,0);const p=this._createMaskCanvas(e,t);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]),(m=this.dependencyTracker)==null||m.resetBBox(e);for(let E=0,A=u.length;E<A;E+=2){const k=we.transform(d,[n,r,s,a,u[E],u[E+1]]);h.drawImage(p.canvas,k[4],k[5]),(y=this.dependencyTracker)==null||y.recordBBox(e,this.ctx,k[4],k[4]+p.canvas.width,k[5],k[5]+p.canvas.height)}h.restore(),this.compose(),(v=this.dependencyTracker)==null||v.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,u,h;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,s=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,_r.transformAndFill);for(const d of t){const{data:p,width:m,height:y,transform:v}=d,E=this.cachedCanvases.getCanvas("maskCanvas",m,y),A=E.context;A.save();const k=this.getObject(e,p,d);AC(A,k),A.globalCompositeOperation="source-in",A.fillStyle=s?r.getPattern(A,this,As(n),Wn.FILL,e):r,A.fillRect(0,0,m,y),A.restore(),n.save(),n.transform(...v),n.scale(1,-1),Hy(n,E.canvas,0,0,m,y,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,n,0,m,0,y),n.restore()}this.compose(),(h=this.dependencyTracker)==null||h.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Be("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,s){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){Be("Dependent image isn't ready yet");return}const u=a.width,h=a.height,d=[];for(let p=0,m=s.length;p<m;p+=2)d.push({transform:[n,0,0,r,s[p],s[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(e,a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,t){var d;if(!this.contentVisible)return;const n=t.width,r=t.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/n,-1/r);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const m=this.cachedCanvases.getCanvas("inlineImage",n,r).context;EC(m,t),u=this.applyTransferMapsToCanvas(m)}const h=this._scaleImage(u,As(s));s.imageSmoothingEnabled=kC(Ut(s),t.interpolate),(d=this.dependencyTracker)==null||d.resetBBox(e).recordBBox(e,s,0,n,-r,0).recordDependencies(e,_r.imageXObject).recordOperation(e),Hy(s,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var a,u,h;if(!this.contentVisible)return;const r=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const d=t.width,p=t.height,y=this.cachedCanvases.getCanvas("inlineImage",d,p).context;EC(y,t),s=this.applyTransferMapsToCanvas(y)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const d of n)r.save(),r.transform(...d.transform),r.scale(1,-1),Hy(r,s,d.x,d.y,d.w,d.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,r,0,1,-1,0),r.restore();(h=this.dependencyTracker)==null||h.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,_r.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var a,u;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip?(r||(this.pendingClip===CC?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(u=this.dependencyTracker)==null||u.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ut(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:s}=this.ctx.getTransform();let a,u;if(n===0&&r===0){const h=Math.abs(t),d=Math.abs(s);if(h===d)if(e===0)a=u=1/h;else{const p=h*e;a=u=p<1?1/p:1}else if(e===0)a=1/h,u=1/d;else{const p=h*e,m=d*e;a=p<1?1/p:1,u=m<1?1/m:1}}else{const h=Math.abs(t*s-n*r),d=Math.hypot(t,n),p=Math.hypot(r,s);if(e===0)a=p/h,u=d/h;else{const m=e*h;a=p>m?p/m:1,u=d>m?d/m:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[s,a]=this.getScaleForStroking();if(s===a){n.lineWidth=(r||1)*s,n.stroke(e);return}const u=n.getLineDash();t&&n.save(),n.scale(s,a),Uw.a=1/s,Uw.d=1/a;const h=new Path2D;if(h.addPath(e,Uw),u.length>0){const d=Math.max(s,a);n.setLineDash(u.map(p=>p/d)),n.lineDashOffset/=d}n.lineWidth=r||1,n.stroke(h),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ms=new WeakSet,Wb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Gb=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},qb=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let sh=OS;for(const i in fp)sh.prototype[i]!==void 0&&(sh.prototype[fp[i]]=sh.prototype[i]);var sm,om;class ds{static get workerPort(){return c(this,sm)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,sm,e)}static get workerSrc(){return c(this,om)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,om,e)}}sm=new WeakMap,om=new WeakMap,_(ds,sm,null),_(ds,om,"");var Vh,am;class fO{constructor({parsedData:e,rawData:t}){_(this,Vh);_(this,am);b(this,Vh,e),b(this,am,t)}getRaw(){return c(this,am)}get(e){return c(this,Vh).get(e)??null}[Symbol.iterator](){return c(this,Vh).entries()}}Vh=new WeakMap,am=new WeakMap;const Yu=Symbol("INTERNAL");var lm,cm,um,Wh;class pO{constructor(e,{name:t,intent:n,usage:r,rbGroups:s}){_(this,lm,!1);_(this,cm,!1);_(this,um,!1);_(this,Wh,!0);b(this,lm,!!(e&pr.DISPLAY)),b(this,cm,!!(e&pr.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=s}get visible(){if(c(this,um))return c(this,Wh);if(!c(this,Wh))return!1;const{print:e,view:t}=this.usage;return c(this,lm)?(t==null?void 0:t.viewState)!=="OFF":c(this,cm)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Yu&&Et("Internal method `_setVisible` called."),b(this,um,n),b(this,Wh,t)}}lm=new WeakMap,cm=new WeakMap,um=new WeakMap,Wh=new WeakMap;var Qa,yt,Gh,qh,hm,Xb;class mO{constructor(e,t=pr.DISPLAY){_(this,hm);_(this,Qa,null);_(this,yt,new Map);_(this,Gh,null);_(this,qh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,qh,e.order);for(const n of e.groups)c(this,yt).set(n.id,new pO(t,n));if(e.baseState==="OFF")for(const n of c(this,yt).values())n._setVisible(Yu,!1);for(const n of e.on)c(this,yt).get(n)._setVisible(Yu,!0);for(const n of e.off)c(this,yt).get(n)._setVisible(Yu,!1);b(this,Gh,this.getHash())}}isVisible(e){if(c(this,yt).size===0)return!0;if(!e)return Nv("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,yt).has(e.id)?c(this,yt).get(e.id).visible:(Be(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return P(this,hm,Xb).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,yt).has(t))return Be(`Optional content group not found: ${t}`),!0;if(c(this,yt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,yt).has(t))return Be(`Optional content group not found: ${t}`),!0;if(!c(this,yt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,yt).has(t))return Be(`Optional content group not found: ${t}`),!0;if(!c(this,yt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,yt).has(t))return Be(`Optional content group not found: ${t}`),!0;if(c(this,yt).get(t).visible)return!1}return!0}return Be(`Unknown optional content policy ${e.policy}.`),!0}return Be(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var s;const r=c(this,yt).get(e);if(!r){Be(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const u of a)u!==e&&((s=c(this,yt).get(u))==null||s._setVisible(Yu,!1,!0));r._setVisible(Yu,!!t,!0),b(this,Qa,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const s=c(this,yt).get(r);if(s)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}b(this,Qa,null)}get hasInitialVisibility(){return c(this,Gh)===null||this.getHash()===c(this,Gh)}getOrder(){return c(this,yt).size?c(this,qh)?c(this,qh).slice():[...c(this,yt).keys()]:null}getGroup(e){return c(this,yt).get(e)||null}getHash(){if(c(this,Qa)!==null)return c(this,Qa);const e=new tP;for(const[t,n]of c(this,yt))e.update(`${t}:${n.visible}`);return b(this,Qa,e.hexdigest())}[Symbol.iterator](){return c(this,yt).entries()}}Qa=new WeakMap,yt=new WeakMap,Gh=new WeakMap,qh=new WeakMap,hm=new WeakSet,Xb=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const s=e[r];let a;if(Array.isArray(s))a=P(this,hm,Xb).call(this,s);else if(c(this,yt).has(s))a=c(this,yt).get(s).visible;else return Be(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class gO{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ze(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=u,(s==null?void 0:s.length)>0){const h=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),e.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Ze(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,s;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ze(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new yO(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new vO(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class yO{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=uS(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class vO{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function xO(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let p=u(t);return p=unescape(p),p=h(p),p=d(p),s(p)}if(t=a(i),t){const p=d(t);return s(p)}if(t=n("filename","i").exec(i),t){t=t[1];let p=u(t);return p=d(p),s(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(p,{fatal:!0}),v=gg(m);m=y.decode(v),e=!1}catch{}}return m}function s(p){return e&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),e&&(p=r("iso-8859-1",p))),p}function a(p){const m=[];let y;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=v.exec(p))!==null;){let[,A,k,C]=y;if(A=parseInt(A,10),A in m){if(A===0)break;continue}m[A]=[k,C]}const E=[];for(let A=0;A<m.length&&A in m;++A){let[k,C]=m[A];C=u(C),k&&(C=unescape(C),A===0&&(C=h(C))),E.push(C)}return E.join("")}function u(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let y=0;y<m.length;++y){const v=m[y].indexOf('"');v!==-1&&(m[y]=m[y].slice(0,v),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function h(p){const m=p.indexOf("'");if(m===-1)return p;const y=p.slice(0,m),E=p.slice(m+1).replace(/^[^']*'/,"");return r(y,E)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,v,E){if(v==="q"||v==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,k){return String.fromCharCode(parseInt(k,16))}),r(y,E);try{E=atob(E)}catch{}return r(y,E)})}return""}function fP(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function Dv(i){var e;return((e=URL.parse(i))==null?void 0:e.origin)??null}function pP({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(i.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function mP(i){const e=i.get("Content-Disposition");if(e){let t=xO(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(uS(t))return t}return null}function bg(i,e){return new z0(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function gP(i){return i===200||i===206}function yP(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function vP(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Be(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class wO{constructor(e){le(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=fP(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ze(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new bO(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new SO(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class bO{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,yP(n,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=Dv(s.url),!gP(s.status))throw bg(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:u,suggestedLength:h}=pP({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=mP(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new bl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vP(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class SO{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);const a=r.url;fetch(a,yP(s,this._withCredentials,this._abortController)).then(u=>{const h=Dv(u.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!gP(u.status))throw bg(u.status,a);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:vP(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Hw=200,$w=206;function EO(i){const e=i.response;return typeof e!="string"?e:gg(e).buffer}class AO{constructor({url:e,httpHeaders:t,withCredentials:n}){le(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=fP(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=$w):r.expectedStatus=Hw,t.responseType="arraybuffer",Ze(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const s=r.status||Hw;if(!(s===Hw&&n.expectedStatus===$w)&&s!==n.expectedStatus){n.onError(r.status);return}const u=EO(r);if(s===$w){const h=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?n.onDone({begin:parseInt(d[1],10),chunk:u}):(Be('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class kO{constructor(e){this._source=e,this._manager=new AO(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ze(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new CO(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new _O(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class CO{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Dv(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...d]=u.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=pP({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=mP(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=bg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _O{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Dv((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=bg(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const TO=/^[a-z][a-z0-9\-+.]+:/i;function PO(i){if(TO.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class RO{constructor(e){this.source=e,this.url=PO(e.url),Ze(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ze(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new NO(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new LO(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class NO{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=bg(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new bl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class LO{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Lf=Symbol("INITIAL_DATA");var Zi,dm,Kb;class xP{constructor(){_(this,dm);_(this,Zi,Object.create(null))}get(e,t=null){if(t){const r=P(this,dm,Kb).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=c(this,Zi)[e];if(!n||n.data===Lf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=c(this,Zi)[e];return!!t&&t.data!==Lf}delete(e){const t=c(this,Zi)[e];return!t||t.data===Lf?!1:(delete c(this,Zi)[e],!0)}resolve(e,t=null){const n=P(this,dm,Kb).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in c(this,Zi)){const{data:n}=c(this,Zi)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}b(this,Zi,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Zi)){const{data:t}=c(this,Zi)[e];t!==Lf&&(yield[e,t])}}}Zi=new WeakMap,dm=new WeakSet,Kb=function(e){var t;return(t=c(this,Zi))[e]||(t[e]={...Promise.withResolvers(),data:Lf})};const DO=1e5,_C=30;var g_,Ja,er,fm,pm,kc,Io,mm,gm,Cc,ym,Xh,Za,Kh,vm,Yh,_c,xm,wm,Qh,Tc,bm,Jh,Zh,ra,wP,bP,Yb,vr,d0,Qb,SP,EP;const Bn=class Bn{constructor({textContentSource:e,container:t,viewport:n}){_(this,ra);_(this,Ja,Promise.withResolvers());_(this,er,null);_(this,fm,!1);_(this,pm,!!((g_=globalThis.FontInspector)!=null&&g_.enabled));_(this,kc,null);_(this,Io,null);_(this,mm,0);_(this,gm,0);_(this,Cc,null);_(this,ym,null);_(this,Xh,0);_(this,Za,0);_(this,Kh,Object.create(null));_(this,vm,[]);_(this,Yh,null);_(this,_c,[]);_(this,xm,new WeakMap);_(this,wm,null);var h;if(e instanceof ReadableStream)b(this,Yh,e);else if(typeof e=="object")b(this,Yh,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,er,b(this,ym,t)),b(this,Za,n.scale*Zs.pixelRatio),b(this,Xh,n.rotation),b(this,Io,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:a,pageY:u}=n.rawDims;b(this,wm,[1,0,0,-1,-a,u+s]),b(this,gm,r),b(this,mm,s),P(h=Bn,vr,SP).call(h),t.style.setProperty("--min-font-size",c(Bn,Jh)),hu(t,n),c(this,Ja).promise.finally(()=>{c(Bn,Zh).delete(this),b(this,Io,null),b(this,Kh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=bn.platform;return ze(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Cc).read().then(({value:t,done:n})=>{if(n){c(this,Ja).resolve();return}c(this,kc)??b(this,kc,t.lang),Object.assign(c(this,Kh),t.styles),P(this,ra,wP).call(this,t.items),e()},c(this,Ja).reject)};return b(this,Cc,c(this,Yh).getReader()),c(Bn,Zh).add(this),e(),c(this,Ja).promise}update({viewport:e,onBefore:t=null}){var s;const n=e.scale*Zs.pixelRatio,r=e.rotation;if(r!==c(this,Xh)&&(t==null||t(),b(this,Xh,r),hu(c(this,ym),{rotation:r})),n!==c(this,Za)){t==null||t(),b(this,Za,n);const a={div:null,properties:null,ctx:P(s=Bn,vr,d0).call(s,c(this,kc))};for(const u of c(this,_c))a.properties=c(this,xm).get(u),a.div=u,P(this,ra,Yb).call(this,a)}}cancel(){var t;const e=new bl("TextLayer task cancelled.");(t=c(this,Cc))==null||t.cancel(e).catch(()=>{}),b(this,Cc,null),c(this,Ja).reject(e)}get textDivs(){return c(this,_c)}get textContentItemsStr(){return c(this,vm)}static cleanup(){if(!(c(this,Zh).size>0)){c(this,Qh).clear();for(const{canvas:e}of c(this,Tc).values())e.remove();c(this,Tc).clear()}}};Ja=new WeakMap,er=new WeakMap,fm=new WeakMap,pm=new WeakMap,kc=new WeakMap,Io=new WeakMap,mm=new WeakMap,gm=new WeakMap,Cc=new WeakMap,ym=new WeakMap,Xh=new WeakMap,Za=new WeakMap,Kh=new WeakMap,vm=new WeakMap,Yh=new WeakMap,_c=new WeakMap,xm=new WeakMap,wm=new WeakMap,Qh=new WeakMap,Tc=new WeakMap,bm=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,ra=new WeakSet,wP=function(e){var r,s;if(c(this,fm))return;(s=c(this,Io)).ctx??(s.ctx=P(r=Bn,vr,d0).call(r,c(this,kc)));const t=c(this,_c),n=c(this,vm);for(const a of e){if(t.length>DO){Be("Ignoring additional textDivs for performance reasons."),b(this,fm,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const u=c(this,er);b(this,er,document.createElement("span")),c(this,er).classList.add("markedContent"),a.id&&c(this,er).setAttribute("id",`${a.id}`),u.append(c(this,er))}else a.type==="endMarkedContent"&&b(this,er,c(this,er).parentNode);continue}n.push(a.str),P(this,ra,bP).call(this,a)}},bP=function(e){var E;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,_c).push(t);const r=we.transform(c(this,wm),e.transform);let s=Math.atan2(r[1],r[0]);const a=c(this,Kh)[e.fontName];a.vertical&&(s+=Math.PI/2);let u=c(this,pm)&&a.fontSubstitution||a.fontFamily;u=Bn.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),d=h*P(E=Bn,vr,EP).call(E,u,a,c(this,kc));let p,m;s===0?(p=r[4],m=r[5]-d):(p=r[4]+d*Math.sin(s),m=r[5]-d*Math.cos(s));const y=t.style;y.left=`${(100*p/c(this,gm)).toFixed(2)}%`,y.top=`${(100*m/c(this,mm)).toFixed(2)}%`,y.setProperty("--font-height",`${h.toFixed(2)}px`),y.fontFamily=u,n.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,pm)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);A!==k&&Math.max(A,k)/Math.min(A,k)>1.5&&(v=!0)}if(v&&(n.canvasWidth=a.vertical?e.height:e.width),c(this,xm).set(t,n),c(this,Io).div=t,c(this,Io).properties=n,P(this,ra,Yb).call(this,c(this,Io)),n.hasText&&c(this,er).append(t),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),c(this,er).append(A)}},Yb=function(e){var a;const{div:t,properties:n,ctx:r}=e,{style:s}=t;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=s,{canvasWidth:h,fontSize:d}=n;P(a=Bn,vr,Qb).call(a,r,d*c(this,Za),u);const{width:p}=r.measureText(t.textContent);p>0&&s.setProperty("--scale-x",h*c(this,Za)/p)}n.angle!==0&&s.setProperty("--rotate",`${n.angle}deg`)},vr=new WeakSet,d0=function(e=null){let t=c(this,Tc).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Tc).set(e,t),c(this,bm).set(t,{size:0,family:""})}return t},Qb=function(e,t,n){const r=c(this,bm).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},SP=function(){if(c(this,Jh)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,Jh,e.getBoundingClientRect().height),e.remove()},EP=function(e,t,n){const r=c(this,Qh).get(e);if(r)return r;const s=P(this,vr,d0).call(this,n);s.canvas.width=s.canvas.height=_C,P(this,vr,Qb).call(this,s,_C,e);const a=s.measureText(""),u=a.fontBoundingBoxAscent,h=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let d=.8;return u?d=u/(u+h):(bn.platform.isFirefox&&Be("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),c(this,Qh).set(e,d),d},_(Bn,vr),_(Bn,Qh,new Map),_(Bn,Tc,new Map),_(Bn,bm,new WeakMap),_(Bn,Jh,null),_(Bn,Zh,new Set);let mp=Bn;const IO=100;function pS(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new Jb,{docId:t}=e,n=i.url?UF(i.url):null,r=i.data?HF(i.data):null,s=i.httpHeaders||null,a=i.withCredentials===!0,u=i.password??null,h=i.range instanceof AP?i.range:null,d=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let p=i.worker instanceof gp?i.worker:null;const m=i.verbosity,y=typeof i.docBaseUrl=="string"&&!Lv(i.docBaseUrl)?i.docBaseUrl:null,v=jy(i.cMapUrl),E=i.cMapPacked!==!1,A=i.CMapReaderFactory||(pi?YF:fC),k=jy(i.iccUrl),C=jy(i.standardFontDataUrl),N=i.StandardFontDataFactory||(pi?QF:pC),T=jy(i.wasmUrl),D=i.WasmFactory||(pi?JF:mC),F=i.stopAtErrors!==!0,L=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,j=i.isEvalSupported!==!1,G=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!pi,K=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!pi&&(bn.platform.isFirefox||!globalThis.chrome),ee=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,q=typeof i.disableFontFace=="boolean"?i.disableFontFace:pi,re=i.fontExtraProperties===!0,ue=i.enableXfa===!0,ie=i.ownerDocument||globalThis.document,Z=i.disableRange===!0,se=i.disableStream===!0,J=i.disableAutoFetch===!0,Q=i.pdfBug===!0,me=i.CanvasFactory||(pi?KF:GF),M=i.FilterFactory||(pi?XF:qF),B=i.enableHWA===!0,U=i.useWasm!==!1,I=h?h.length:i.length??NaN,pe=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!pi&&!q,ye=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(A===fC&&N===pC&&D===mC&&v&&C&&T&&Bf(v,document.baseURI)&&Bf(C,document.baseURI)&&Bf(T,document.baseURI)),de=null;pF(m);const xe={canvasFactory:new me({ownerDocument:ie,enableHWA:B}),filterFactory:new M({docId:t,ownerDocument:ie}),cMapReaderFactory:ye?null:new A({baseUrl:v,isCompressed:E}),standardFontDataFactory:ye?null:new N({baseUrl:C}),wasmFactory:ye?null:new D({baseUrl:T})};p||(p=gp.create({verbosity:m,port:ds.workerPort}),e._worker=p);const Ee={docId:t,apiVersion:"5.4.530",data:r,password:u,disableAutoFetch:J,rangeChunkSize:d,length:I,docBaseUrl:y,enableXfa:ue,evaluatorOptions:{maxImageSize:L,disableFontFace:q,ignoreErrors:F,isEvalSupported:j,isOffscreenCanvasSupported:G,isImageDecoderSupported:K,canvasMaxAreaInBytes:ee,fontExtraProperties:re,useSystemFonts:pe,useWasm:U,useWorkerFetch:ye,cMapUrl:v,iccUrl:k,standardFontDataUrl:C,wasmUrl:T}},Re={ownerDocument:ie,pdfBug:Q,styleElement:de,loadingParams:{disableAutoFetch:J,enableXfa:ue}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const tt=p.messageHandler.sendWithPromise("GetDocRequest",Ee,r?[r.buffer]:null);let te;if(h)te=new gO(h,{disableRange:Z,disableStream:se});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Me=Bf(n)?wO:pi?RO:kO;te=new Me({url:n,length:I,httpHeaders:s,withCredentials:a,rangeChunkSize:d,disableRange:Z,disableStream:se})}return tt.then(Me=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const je=new qf(t,Me,p.port),et=new OO(je,e,te,Re,xe,B);e._transport=et,je.send("Ready",null)})}).catch(e._capability.reject),e}var hv;const dv=class dv{constructor(){le(this,"_capability",Promise.withResolvers());le(this,"_transport",null);le(this,"_worker",null);le(this,"docId",`d${mn(dv,hv)._++}`);le(this,"destroyed",!1);le(this,"onPassword",null);le(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};hv=new WeakMap,_(dv,hv,0);let Jb=dv;var Pc,Sm,Em,Am,km;class AP{constructor(e,t,n=!1,r=null){_(this,Pc,Promise.withResolvers());_(this,Sm,[]);_(this,Em,[]);_(this,Am,[]);_(this,km,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){c(this,km).push(e)}addProgressListener(e){c(this,Am).push(e)}addProgressiveReadListener(e){c(this,Em).push(e)}addProgressiveDoneListener(e){c(this,Sm).push(e)}onDataRange(e,t){for(const n of c(this,km))n(e,t)}onDataProgress(e,t){c(this,Pc).promise.then(()=>{for(const n of c(this,Am))n(e,t)})}onDataProgressiveRead(e){c(this,Pc).promise.then(()=>{for(const t of c(this,Em))t(e)})}onDataProgressiveDone(){c(this,Pc).promise.then(()=>{for(const e of c(this,Sm))e()})}transportReady(){c(this,Pc).resolve()}requestDataRange(e,t){Et("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Pc=new WeakMap,Sm=new WeakMap,Em=new WeakMap,Am=new WeakMap,km=new WeakMap;class MO{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Mo,Rc,Jf;class FO{constructor(e,t,n,r=!1){_(this,Rc);_(this,Mo,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new oC:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new xP,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}={}){return new vg({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:s=Ra.ENABLE,transform:a=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:y=!1,recordOperations:v=!1,operationsFilter:E=null}){var K,ee,q;(K=this._stats)==null||K.time("Overall");const A=this._transport.getRenderingIntent(r,s,m,y),{renderingIntent:k,cacheKey:C}=A;b(this,Mo,!1),h||(h=this._transport.getOptionalContentConfig(k));let N=this._intentStates.get(C);N||(N=Object.create(null),this._intentStates.set(C,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);const T=!!(k&pr.PRINT);N.displayReadyCapability||(N.displayReadyCapability=Promise.withResolvers(),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ee=this._stats)==null||ee.time("Page Request"),this._pumpOperatorList(A));const D=!!(this._pdfBug&&((q=globalThis.StepperManager)!=null&&q.enabled)),F=!this.recordedBBoxes&&(v||D),L=re=>{var ue,ie;if(N.renderTasks.delete(j),F){const Z=(ue=j.gfx)==null?void 0:ue.dependencyTracker.take();Z&&(j.stepper&&j.stepper.setOperatorBBoxes(Z,j.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=Z))}T&&b(this,Mo,!0),P(this,Rc,Jf).call(this),re?(j.capability.reject(re),this._abortOperatorList({intentState:N,reason:re instanceof Error?re:new Error(re)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(ie=globalThis.Stats)!=null&&ie.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new Zb({callback:L,params:{canvas:t,canvasContext:e,dependencyTracker:F?new eO(t,N.operatorList.length,D):null,viewport:n,transform:a,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:E});(N.renderTasks||(N.renderTasks=new Set)).add(j);const G=j.task;return Promise.all([N.displayReadyCapability.promise,h]).then(([re,ue])=>{var ie;if(this.destroyed){L();return}if((ie=this._stats)==null||ie.time("Rendering"),!(ue.renderingIntent&k))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:re,optionalContentConfig:ue}),j.operatorListChanged()}).catch(L),G}getOperatorList({intent:e="display",annotationMode:t=Ra.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var d;function s(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const a=this._transport.getRenderingIntent(e,t,n,r,!0);let u=this._intentStates.get(a.cacheKey);u||(u=Object.create(null),this._intentStates.set(a.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=s,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(a)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>pp.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function s(){a.read().then(function({value:h,done:d}){if(d){n(u);return}u.lang??(u.lang=h.lang),Object.assign(u.styles,h.styles),u.items.push(...h.items),s()},r)}const a=t.getReader(),u={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),b(this,Mo,!1),Promise.all(e)}cleanup(e=!1){b(this,Mo,!0);const t=P(this,Rc,Jf).call(this);return e&&t&&this._stats&&(this._stats=new oC),t}_startRenderPage(e,t){var r,s;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&P(this,Rc,Jf).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:s,transfer:a}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},a).getReader(),d=this._intentStates.get(t);d.streamReader=h;const p=()=>{h.read().then(({value:m,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),p())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();P(this,Rc,Jf).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof cS){let r=IO;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new bl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Mo=new WeakMap,Rc=new WeakSet,Jf=function(){if(!c(this,Mo)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,Mo,!1),!0};var el,ss,Fo,Nc,fv,Lc,Dc,gi,f0,kP,CP,Zf,ed,p0;const Mt=class Mt{constructor({name:e=null,port:t=null,verbosity:n=mF()}={}){_(this,gi);_(this,el,Promise.withResolvers());_(this,ss,null);_(this,Fo,null);_(this,Nc,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(c(Mt,Dc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(Mt,Dc).set(t,this),P(this,gi,kP).call(this,t)}else P(this,gi,CP).call(this)}get promise(){return c(this,el).promise}get port(){return c(this,Fo)}get messageHandler(){return c(this,ss)}destroy(){var e,t;this.destroyed=!0,(e=c(this,Nc))==null||e.terminate(),b(this,Nc,null),c(Mt,Dc).delete(c(this,Fo)),b(this,Fo,null),(t=c(this,ss))==null||t.destroy(),b(this,ss,null)}static create(e){const t=c(this,Dc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Mt(e)}static get workerSrc(){if(ds.workerSrc)return ds.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ze(this,"_setupFakeWorkerGlobal",(async()=>c(this,ed,p0)?c(this,ed,p0):(await import(this.workerSrc)).WorkerMessageHandler)())}};el=new WeakMap,ss=new WeakMap,Fo=new WeakMap,Nc=new WeakMap,fv=new WeakMap,Lc=new WeakMap,Dc=new WeakMap,gi=new WeakSet,f0=function(){c(this,el).resolve(),c(this,ss).send("configure",{verbosity:this.verbosity})},kP=function(e){b(this,Fo,e),b(this,ss,new qf("main","worker",e)),c(this,ss).on("ready",()=>{}),P(this,gi,f0).call(this)},CP=function(){if(c(Mt,Lc)||c(Mt,ed,p0)){P(this,gi,Zf).call(this);return}let{workerSrc:e}=Mt;try{Mt._isSameOrigin(window.location,e)||(e=Mt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new qf("main","worker",t),r=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?c(this,el).reject(new Error("Worker was destroyed")):P(this,gi,Zf).call(this)},s=new AbortController;t.addEventListener("error",()=>{c(this,Nc)||r()},{signal:s.signal}),n.on("test",u=>{if(s.abort(),this.destroyed||!u){r();return}b(this,ss,n),b(this,Fo,t),b(this,Nc,t),P(this,gi,f0).call(this)}),n.on("ready",u=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{P(this,gi,Zf).call(this)}});const a=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};a();return}catch{Nv("The worker has been disabled.")}P(this,gi,Zf).call(this)},Zf=function(){c(Mt,Lc)||(Be("Setting up fake worker."),b(Mt,Lc,!0)),Mt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,el).reject(new Error("Worker was destroyed"));return}const t=new WF;b(this,Fo,t);const n=`fake${mn(Mt,fv)._++}`,r=new qf(n+"_worker",n,t);e.setup(r,t),b(this,ss,new qf(n,n+"_worker",t)),P(this,gi,f0).call(this)}).catch(e=>{c(this,el).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},ed=new WeakSet,p0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},_(Mt,ed),_(Mt,fv,0),_(Mt,Lc,!1),_(Mt,Dc,new WeakMap),pi&&(b(Mt,Lc,!0),ds.workerSrc||(ds.workerSrc="./pdf.worker.mjs")),Mt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},Mt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Mt.fromPort=e=>{if(_F("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Mt.create(e)};let gp=Mt;var Oo,zs,td,nd,jo,Ic,ep;class OO{constructor(e,t,n,r,s,a){_(this,Ic);_(this,Oo,new Map);_(this,zs,new Map);_(this,td,new Map);_(this,nd,new Map);_(this,jo,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new xP,this.fontLoader=new jF({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return ze(this,"annotationStorage",new hS)}getRenderingIntent(e,t=Ra.ENABLE,n=null,r=!1,s=!1){let a=pr.DISPLAY,u=Mb;switch(e){case"any":a=pr.ANY;break;case"display":break;case"print":a=pr.PRINT;break;default:Be(`getRenderingIntent - invalid intent: ${e}`)}const h=a&pr.PRINT&&n instanceof iP?n:this.annotationStorage;switch(t){case Ra.DISABLE:a+=pr.ANNOTATIONS_DISABLE;break;case Ra.ENABLE:break;case Ra.ENABLE_FORMS:a+=pr.ANNOTATIONS_FORMS;break;case Ra.ENABLE_STORAGE:a+=pr.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Be(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=pr.IS_EDITING),s&&(a+=pr.OPLIST);const{ids:d,hash:p}=h.modifiedIds,m=[a,u.hash,p];return{renderingIntent:a,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,jo))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,zs).values())e.push(r._destroy());c(this,zs).clear(),c(this,td).clear(),c(this,nd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,s;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Oo).clear(),this.filterFactory.destroy(),mp.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new bl("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Ze(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}Ze(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((u=t.onProgress)==null||u.call(t,this._lastProgress)),this._fullReader.onProgress=h=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(n,r)=>{Ze(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:u}){if(u){r.close();return}Ze(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new MO(n,this))}),e.on("DocException",n=>{t._capability.reject(_i(n))}),e.on("PasswordRequest",n=>{b(this,jo,Promise.withResolvers());try{if(!t.onPassword)throw _i(n);const r=s=>{s instanceof Error?c(this,jo).reject(s):c(this,jo).resolve({password:s})};t.onPassword(r,n.code)}catch(r){c(this,jo).reject(r)}return c(this,jo).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,zs).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,s])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in s){const y=s.error;Be(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const u=new Fb(s),h=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(y,v)=>globalThis.FontInspector.fontAdded(y,v):null,d=new BF(u,h,s.extra,s.charProcOperatorList);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:p}=s;Ze(p,"The imageRef must be defined.");for(const y of c(this,zs).values())for(const[,v]of y.objs)if((v==null?void 0:v.ref)===p)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new zF(s));break;case"Image":this.commonObjs.resolve(n,s);break;case"Pattern":const m=new Ob(s);this.commonObjs.resolve(n,m.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,s,a])=>{var h;if(this.destroyed)return;const u=c(this,zs).get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){(h=a==null?void 0:a.bitmap)==null||h.close();return}switch(s){case"Image":case"Pattern":u.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Be("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=c(this,td).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&c(this,nd).set(s.refStr,e);const a=new FO(t,s,this,this._params.pdfBug);return c(this,zs).set(t,a),a});return c(this,td).set(t,r),r}getPageIndex(e){return jb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return P(this,Ic,ep).call(this,"GetFieldObjects")}hasJSActions(){return P(this,Ic,ep).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return P(this,Ic,ep).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return P(this,Ic,ep).call(this,"GetOptionalContentConfig").then(t=>new mO(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Oo).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,a;return{info:r[0],metadata:r[1]?new fO(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:r[2]}});return c(this,Oo).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,zs).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Oo).clear(),this.filterFactory.destroy(!0),mp.cleanup()}}cachedPageNumber(e){if(!jb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,nd).get(t)??null}}Oo=new WeakMap,zs=new WeakMap,td=new WeakMap,nd=new WeakMap,jo=new WeakMap,Ic=new WeakSet,ep=function(e,t=null){const n=c(this,Oo).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return c(this,Oo).set(e,r),r};var tl;class jO{constructor(e){_(this,tl,null);le(this,"onContinue",null);le(this,"onError",null);b(this,tl,e)}get promise(){return c(this,tl).capability.promise}cancel(e=0){c(this,tl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,tl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,tl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}tl=new WeakMap;var nl,Mc;const Wl=class Wl{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:u,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:y=null,enableHWA:v=!1,operationsFilter:E=null}){_(this,nl,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new jO(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=v,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,d;if(this.cancelled)return;if(this._canvas){if(c(Wl,Mc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Wl,Mc).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:s,dependencyTracker:a}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new sh(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n,r,s;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,nl)&&(window.cancelAnimationFrame(c(this,nl)),b(this,nl,null)),c(Wl,Mc).delete(this._canvas),e||(e=new cS(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(r=this.task).onError)==null||s.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,nl,window.requestAnimationFrame(()=>{b(this,nl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Wl,Mc).delete(this._canvas),this.callback())))}};nl=new WeakMap,Mc=new WeakMap,_(Wl,Mc,new WeakSet);let Zb=Wl;const BO="5.4.530",zO="50cc4adac";var tr,Fc,id,xn,Cm,rd,Bo,_m,il,os,Tm,xt,e1,t1,n1,Ul,_P,Ta;const Ti=class Ti{constructor({editor:e=null,uiManager:t=null}){_(this,xt);_(this,tr,null);_(this,Fc,null);_(this,id);_(this,xn,null);_(this,Cm,!1);_(this,rd,!1);_(this,Bo,null);_(this,_m);_(this,il,null);_(this,os,null);var n,r;e?(b(this,rd,!1),b(this,Bo,e)):b(this,rd,!0),b(this,os,(e==null?void 0:e._uiManager)||t),b(this,_m,c(this,os)._eventBus),b(this,id,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((r=c(this,os))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(Ti,Tm)||b(Ti,Tm,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ze(this,"_keyboardManager",new wg([[["Escape","mac+Escape"],Ti.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ti.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ti.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ti.prototype._moveToPrevious],[["Home","mac+Home"],Ti.prototype._moveToBeginning],[["End","mac+End"],Ti.prototype._moveToEnd]]))}renderButton(){const e=b(this,tr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,Bo)&&(e.ariaControls=`${c(this,Bo).id}_colorpicker_dropdown`);const t=c(this,os)._signal;e.addEventListener("click",P(this,xt,Ul).bind(this),{signal:t}),e.addEventListener("keydown",P(this,xt,n1).bind(this),{signal:t});const n=b(this,Fc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=c(this,id),e.append(n),e}renderMainDropdown(){const e=b(this,xn,P(this,xt,e1).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,tr)){P(this,xt,Ul).call(this,e);return}const t=e.target.getAttribute("data-color");t&&P(this,xt,t1).call(this,t,e)}_moveToNext(e){var t,n;if(!c(this,xt,Ta)){P(this,xt,Ul).call(this,e);return}if(e.target===c(this,tr)){(t=c(this,xn).firstElementChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=c(this,xn))==null?void 0:t.firstElementChild)||e.target===c(this,tr)){c(this,xt,Ta)&&this._hideDropdownFromKeyboard();return}c(this,xt,Ta)||P(this,xt,Ul).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!c(this,xt,Ta)){P(this,xt,Ul).call(this,e);return}(t=c(this,xn).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,xt,Ta)){P(this,xt,Ul).call(this,e);return}(t=c(this,xn).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,xn))==null||e.classList.add("hidden"),c(this,tr).ariaExpanded="false",(t=c(this,il))==null||t.abort(),b(this,il,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,rd)){if(!c(this,xt,Ta)){(e=c(this,Bo))==null||e.unselect();return}this.hideDropdown(),c(this,tr).focus({preventScroll:!0,focusVisible:c(this,Cm)})}}updateColor(e){if(c(this,Fc)&&(c(this,Fc).style.backgroundColor=e),!c(this,xn))return;const t=c(this,os).highlightColors.values();for(const n of c(this,xn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,tr))==null||e.remove(),b(this,tr,null),b(this,Fc,null),(t=c(this,xn))==null||t.remove(),b(this,xn,null)}};tr=new WeakMap,Fc=new WeakMap,id=new WeakMap,xn=new WeakMap,Cm=new WeakMap,rd=new WeakMap,Bo=new WeakMap,_m=new WeakMap,il=new WeakMap,os=new WeakMap,Tm=new WeakMap,xt=new WeakSet,e1=function(){const e=document.createElement("div"),t=c(this,os)._signal;e.addEventListener("contextmenu",$r,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,Bo)&&(e.id=`${c(this,Bo).id}_colorpicker_dropdown`);for(const[n,r]of c(this,os).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=n,s.setAttribute("data-l10n-id",c(Ti,Tm)[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.ariaSelected=r===c(this,id),s.addEventListener("click",P(this,xt,t1).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",P(this,xt,n1).bind(this),{signal:t}),e},t1=function(e,t){t.stopPropagation(),c(this,_m).dispatch("switchannotationeditorparams",{source:this,type:Je.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},n1=function(e){Ti._keyboardManager.exec(this,e)},Ul=function(e){if(c(this,xt,Ta)){this.hideDropdown();return}if(b(this,Cm,e.detail===0),c(this,il)||(b(this,il,new AbortController),window.addEventListener("pointerdown",P(this,xt,_P).bind(this),{signal:c(this,os).combinedSignal(c(this,il))})),c(this,tr).ariaExpanded="true",c(this,xn)){c(this,xn).classList.remove("hidden");return}const t=b(this,xn,P(this,xt,e1).call(this));c(this,tr).append(t)},_P=function(e){var t;(t=c(this,xn))!=null&&t.contains(e.target)||this.hideDropdown()},Ta=function(){return c(this,xn)&&!c(this,xn).classList.contains("hidden")},_(Ti,Tm,null);let q0=Ti;var Us,Pm,sd,Rm;const Gl=class Gl{constructor(e){_(this,Us,null);_(this,Pm,null);_(this,sd,null);b(this,Pm,e),b(this,sd,e._uiManager),c(Gl,Rm)||b(Gl,Rm,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,Us))return c(this,Us);const{editorType:e,colorType:t,color:n}=c(this,Pm),r=b(this,Us,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(Gl,Rm)[e]),r.addEventListener("input",()=>{c(this,sd).updateParams(t,r.value)},{signal:c(this,sd)._signal}),r}update(e){c(this,Us)&&(c(this,Us).value=e)}destroy(){var e;(e=c(this,Us))==null||e.remove(),b(this,Us,null)}hideDropdown(){}};Us=new WeakMap,Pm=new WeakMap,sd=new WeakMap,Rm=new WeakMap,_(Gl,Rm,null);let X0=Gl;function TC(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Df(i){return Math.max(0,Math.min(255,255*i))}class PC{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Df(e),[e,e,e]}static G_HTML([e]){const t=TC(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Df)}static RGB_HTML(e){return`#${e.map(TC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Df(1-Math.min(1,e+r)),Df(1-Math.min(1,n+r)),Df(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,s=1-t,a=1-n,u=Math.min(r,s,a);return["CMYK",r,s,a,u]}}class UO{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Et("Abstract method `_createSVG` called.")}}class K0 extends UO{_createSVG(e){return document.createElementNS(ho,e)}}const HO=9,fu=new WeakSet,$O=new Date().getTimezoneOffset()*60*1e3;class Vw{static create(e){switch(e.data.annotationType){case ln.LINK:return new mS(e);case ln.TEXT:return new WO(e);case ln.WIDGET:switch(e.data.fieldType){case"Tx":return new GO(e);case"Btn":return e.data.radioButton?new RP(e):e.data.checkBox?new XO(e):new KO(e);case"Ch":return new YO(e);case"Sig":return new qO(e)}return new mu(e);case ln.POPUP:return new r1(e);case ln.FREETEXT:return new MP(e);case ln.LINE:return new JO(e);case ln.SQUARE:return new ZO(e);case ln.CIRCLE:return new ej(e);case ln.POLYLINE:return new FP(e);case ln.CARET:return new nj(e);case ln.INK:return new gS(e);case ln.POLYGON:return new tj(e);case ln.HIGHLIGHT:return new OP(e);case ln.UNDERLINE:return new ij(e);case ln.SQUIGGLY:return new rj(e);case ln.STRIKEOUT:return new sj(e);case ln.STAMP:return new jP(e);case ln.FILEATTACHMENT:return new oj(e);default:return new $t(e)}}}var Oc,od,Or,Nm,i1;const jS=class jS{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){_(this,Nm);_(this,Oc,null);_(this,od,!1);_(this,Or,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return jS._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const e=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:r}=this.data;let s=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let h=0;h<t.length;h+=8)t[h+1]>a?(a=t[h+1],s=t[h+2]):t[h+1]===a&&(s=Math.max(s,t[h+2]));return[s,a]}if((n==null?void 0:n.length)>=1){for(const h of n)for(let d=0,p=h.length;d<p;d+=2)h[d+1]>a?(a=h[d+1],s=h[d]):h[d+1]===a&&(s=Math.max(s,h[d]));if(s!==1/0)return[s,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/n,e[1]=100*(e[1]-a)/r,e}get commentText(){var t,n,r;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${dp}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${dp}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=c(this,Or))==null?void 0:e.popup)||this.popup)==null||t.remove(),b(this,Or,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(c(this,Oc)||b(this,Oc,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&P(this,Nm,i1).call(this,t);let r=((s=c(this,Or))==null?void 0:s.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=c(this,Or).popup),r&&(r.updateEdited(e),n!=null&&n.deleted&&(r.remove(),b(this,Or,null),this.popup=null))}resetEdited(){var e;c(this,Oc)&&(P(this,Nm,i1).call(this,c(this,Oc).rect),(e=c(this,Or))==null||e.popup.resetEdited(),b(this,Oc,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof mu)&&!(this instanceof mS)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof r1){const{rotation:A}=t;return!t.hasOwnCanvas&&A!==0&&this.setRotation(A,s),s}const{width:u,height:h}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const A=t.borderStyle.horizontalCornerRadius,k=t.borderStyle.verticalCornerRadius;if(A>0||k>0){const N=`calc(${A}px * var(--total-scale-factor)) / calc(${k}px * var(--total-scale-factor))`;a.borderRadius=N}else if(this instanceof RP){const N=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;a.borderRadius=N}switch(t.borderStyle.style){case Wu.SOLID:a.borderStyle="solid";break;case Wu.DASHED:a.borderStyle="dashed";break;case Wu.BEVELED:Be("Unimplemented border style: beveled");break;case Wu.INSET:Be("Unimplemented border style: inset");break;case Wu.UNDERLINE:a.borderBottomStyle="solid";break}const C=t.borderColor||null;C?(b(this,od,!0),a.borderColor=we.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):a.borderWidth=0}const d=we.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:y,pageY:v}=r.rawDims;a.left=`${100*(d[0]-y)/p}%`,a.top=`${100*(d[1]-v)/m}%`;const{rotation:E}=t;return t.hasOwnCanvas||E===0?(a.width=`${100*u/p}%`,a.height=`${100*h/m}%`):this.setRotation(E,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),t.style.width=`${100*s/n}%`,t.style.height=`${100*a/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const s=r.detail[t],a=s[0],u=s.slice(1);r.target.style[n]=PC[`${a}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:PC[`${a}_rgb`](u)})};return ze(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||n[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,s]of Object.entries(t)){const a=n[r];if(a){const u={detail:{[r]:s},target:e};a(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,s]=this.data.rect.map(A=>Math.fround(A));if(e.length===8){const[A,k,C,N]=e.subarray(2,6);if(r===A&&s===k&&t===C&&n===N)return}const{style:a}=this.container;let u;if(c(this,od)){const{borderColor:A,borderWidth:k}=a;a.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const h=r-t,d=s-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=p.createElement("defs");m.append(y);const v=p.createElement("clipPath"),E=`clippath_${this.data.id}`;v.setAttribute("id",E),v.setAttribute("clipPathUnits","objectBoundingBox"),y.append(v);for(let A=2,k=e.length;A<k;A+=8){const C=e[A],N=e[A+1],T=e[A+2],D=e[A+3],F=p.createElement("rect"),L=(T-t)/h,j=(s-N)/d,G=(C-T)/h,K=(N-D)/d;F.setAttribute("x",L),F.setAttribute("y",j),F.setAttribute("width",G),F.setAttribute("height",K),v.append(F),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${j}" width="${G}" height="${K}"/>`)}c(this,od)&&(u.push("</g></svg>')"),a.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${E})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate),b(this,Or,new r1({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(c(this,Or)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,Or)}render(){Et("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:u}of r){if(s===-1||a===t)continue;const h=typeof u=="string"?u:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!fu.has(d)){Be(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:h,domElement:d})}return n}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==t&&fu.has(r)&&n.push({id:a,exportValue:s,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Oc=new WeakMap,od=new WeakMap,Or=new WeakMap,Nm=new WeakSet,i1=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:u,pageY:h}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-u)/s}%`,t.top=`${100*(a-e[3]+h)/a}%`,r===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)};let $t=jS;class VO extends $t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var gr,Hl,TP,PP;class mS extends $t{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});_(this,gr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),s=!0):t.attachment?(P(this,gr,TP).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(P(this,gr,PP).call(this,r,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(t,n,r=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&P(this,gr,Hl).call(this),r&&(t.title=r)}_bindNamedAction(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(t.title=r),P(this,gr,Hl).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const a=r.get(s);a&&(t[a]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),P(this,gr,Hl).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),P(this,gr,Hl).call(this),!this._fieldObjects){Be('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var m;r==null||r();const{fields:s,refs:a,include:u}=n,h=[];if(s.length!==0||a.length!==0){const y=new Set(a);for(const v of s){const E=this._fieldObjects[v]||[];for(const{id:A}of E)y.add(A)}for(const v of Object.values(this._fieldObjects))for(const E of v)y.has(E.id)===u&&h.push(E)}else for(const y of Object.values(this._fieldObjects))h.push(...y);const d=this.annotationStorage,p=[];for(const y of h){const{id:v}=y;switch(p.push(v),y.type){case"text":{const A=y.defaultValue||"";d.setValue(v,{value:A});break}case"checkbox":case"radiobutton":{const A=y.defaultValue===y.exportValues;d.setValue(v,{value:A});break}case"combobox":case"listbox":{const A=y.defaultValue||"";d.setValue(v,{value:A});break}default:continue}const E=document.querySelector(`[data-element-id="${v}"]`);if(E){if(!fu.has(E)){Be(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;E.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}gr=new WeakSet,Hl=function(){this.container.setAttribute("data-internal-link","")},TP=function(t,n,r="",s=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:r&&(t.title=r),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,s),!1},P(this,gr,Hl).call(this)},PP=function(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(t.title=r),P(this,gr,Hl).call(this)};class WO extends $t{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class mu extends $t{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return bn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,s){n.includes("mouse")?e.addEventListener(n,a=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var u;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}}))})}_setEventListeners(e,t,n,r){var s,a,u;for(const[h,d]of n)(d==="Action"||(s=this.data.actions)!=null&&s[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,h,d,r),d==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":we.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||HO,s=e.style;let a;const u=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(d/(Fw*r))||1,m=d/p;a=Math.min(r,h(m/Fw))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u);a=Math.min(r,h(d/Fw))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=we.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class GO extends mu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),s.setValue(a.id,{[r]:n})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let u=a.value||"";const h=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;h&&u.length>h&&(u=u.slice(0,h));let d=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const p={userValue:u,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),fu.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:m,datetimeType:y,timeStep:v}=this.data,E=!!y&&this.enableScripting;m&&(n.title=m),this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",k=>{e.setValue(t,{value:k.target.value}),this.setPropertyOnSiblings(n,"value",k.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",k=>{const C=this.data.defaultFieldValue??"";n.value=p.userValue=C,p.formattedValue=null});let A=k=>{const{formattedValue:C}=p;C!=null&&(k.target.value=C),k.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",C=>{var T;if(p.focused)return;const{target:N}=C;if(E&&(N.type=y,v&&(N.step=v)),p.userValue){const D=p.userValue;if(E)if(y==="time"){const F=new Date(D),L=[F.getHours(),F.getMinutes(),F.getSeconds()];N.value=L.map(j=>j.toString().padStart(2,"0")).join(":")}else N.value=new Date(D-$O).toISOString().split(y==="date"?"T":".",1)[0];else N.value=D}p.lastCommittedValue=N.value,p.commitKey=1,(T=this.data.actions)!=null&&T.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",C=>{this.showElementAndHideCanvas(C.target);const N={value(T){p.userValue=T.detail.value??"",E||e.setValue(t,{value:p.userValue.toString()}),T.target.value=p.userValue},formattedValue(T){const{formattedValue:D}=T.detail;p.formattedValue=D,D!=null&&T.target!==document.activeElement&&(T.target.value=D);const F={formattedValue:D};E&&(F.value=D),e.setValue(t,F)},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{var j;const{charLimit:D}=T.detail,{target:F}=T;if(D===0){F.removeAttribute("maxLength");return}F.setAttribute("maxLength",D);let L=p.userValue;!L||L.length<=D||(L=L.slice(0,D),F.value=p.userValue=L,e.setValue(t,{value:L}),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:F.selectionStart,selEnd:F.selectionEnd}}))}};this._dispatchEventFromSandbox(N,C)}),n.addEventListener("keydown",C=>{var D;p.commitKey=1;let N=-1;if(C.key==="Escape"?N=0:C.key==="Enter"&&!this.data.multiLine?N=2:C.key==="Tab"&&(p.commitKey=3),N===-1)return;const{value:T}=C.target;p.lastCommittedValue!==T&&(p.lastCommittedValue=T,p.userValue=T,(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:N,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}}))});const k=A;A=null,n.addEventListener("blur",C=>{var D,F;if(!p.focused||!C.relatedTarget)return;(D=this.data.actions)!=null&&D.Blur||(p.focused=!1);const{target:N}=C;let{value:T}=N;if(E){if(T&&y==="time"){const L=T.split(":").map(j=>parseInt(j,10));T=new Date(2e3,0,1,L[0],L[1],L[2]||0).valueOf(),N.step=""}else T.includes("T")||(T=`${T}T00:00`),T=new Date(T).valueOf();N.type="text"}p.userValue=T,p.lastCommittedValue!==T&&((F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:p.commitKey,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}})),k(C)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",C=>{var K;p.lastCommittedValue=null;const{data:N,target:T}=C,{value:D,selectionStart:F,selectionEnd:L}=T;let j=F,G=L;switch(C.inputType){case"deleteWordBackward":{const ee=D.substring(0,F).match(/\w*[^\w]*$/);ee&&(j-=ee[0].length);break}case"deleteWordForward":{const ee=D.substring(F).match(/^[^\w]*\w*/);ee&&(G+=ee[0].length);break}case"deleteContentBackward":F===L&&(j-=1);break;case"deleteContentForward":F===L&&(G+=1);break}C.preventDefault(),(K=this.linkService.eventBus)==null||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:D,change:N||"",willCommit:!1,selStart:j,selEnd:G}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],C=>C.target.value)}if(A&&n.addEventListener("blur",A),this.data.comb){const C=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${C}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class qO extends mu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class XO extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return fu.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:u,checked:h}=a.target;for(const d of this._getElementsByName(u,n)){const p=h&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=p),e.setValue(d.id,{value:p})}e.setValue(n,{value:h})}),s.addEventListener("resetform",a=>{const u=t.defaultFieldValue||"Off";a.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class RP extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(fu.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:u,checked:h}=a.target;for(const d of this._getElementsByName(u,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:h})}),s.addEventListener("resetform",a=>{const u=t.defaultFieldValue;a.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",u=>{const h={value:d=>{const p=a===d.detail.value;for(const m of this._getElementsByName(d.target.name)){const y=p&&m.id===n;m.domElement&&(m.domElement.checked=y),e.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class KO extends mS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class YO extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");fu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),s=!1),r.append(m)}let a=null;if(s){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),a=()=>{p.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const u=p=>{const m=p?"value":"textContent",{options:y,multiple:v}=r;return v?Array.prototype.filter.call(y,E=>E.selected).map(E=>E[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let h=u(!1);const d=p=>{const m=p.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const m={value(y){a==null||a();const v=y.detail.value,E=new Set(Array.isArray(v)?v:[v]);for(const A of r.options)A.selected=E.has(A.value);e.setValue(t,{value:u(!0)}),h=u(!1)},multipleSelection(y){r.multiple=!0},remove(y){const v=r.options,E=y.detail.remove;v[E].selected=!1,r.remove(E),v.length>0&&Array.prototype.findIndex.call(v,k=>k.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:u(!0),items:d(y)}),h=u(!1)},clear(y){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),h=u(!1)},insert(y){const{index:v,displayValue:E,exportValue:A}=y.detail.insert,k=r.children[v],C=document.createElement("option");C.textContent=E,C.value=A,k?k.before(C):r.append(C),e.setValue(t,{value:u(!0),items:d(y)}),h=u(!1)},items(y){const{items:v}=y.detail;for(;r.length!==0;)r.remove(0);for(const E of v){const{displayValue:A,exportValue:k}=E,C=document.createElement("option");C.textContent=A,C.value=k,r.append(C)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:d(y)}),h=u(!1)},indices(y){const v=new Set(y.detail.indices);for(const E of y.target.options)E.selected=v.has(E.index);e.setValue(t,{value:u(!0)}),h=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,p)}),r.addEventListener("input",p=>{var v;const m=u(!0),y=u(!1);e.setValue(t,{value:m}),p.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Lm,s1;class r1 extends $t{constructor(t){const{data:n,elements:r,parent:s}=t,a=!!s._commentManager;super(t,{isRenderable:!a&&$t._hasPopupData(n)});_(this,Lm);if(this.elements=r,a&&$t._hasPopupData(n)){const u=this.popup=P(this,Lm,s1).call(this);for(const h of r)h.popup=u}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=P(this,Lm,s1).call(this),r=[];for(const s of this.elements)s.popup=n,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${Zu}${s}`).join(",")),this.container}}Lm=new WeakSet,s1=function(){return new QO({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var nr,rl,pv,mv,ad,ld,Xt,Hs,sl,jc,cd,ud,$s,ir,zo,Uo,Kt,Ho,ol,Dm,$o,hd,Bc,al,Cn,ll,qe,m0,o1,a1,l1,g0,c1,NP,LP,DP,IP,y0,v0,u1;class QO{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:s,contentsObj:a,richText:u,parent:h,rect:d,parentRect:p,open:m,commentManager:y=null}){_(this,qe);_(this,nr,null);_(this,rl,P(this,qe,DP).bind(this));_(this,pv,P(this,qe,u1).bind(this));_(this,mv,P(this,qe,v0).bind(this));_(this,ad,P(this,qe,y0).bind(this));_(this,ld,null);_(this,Xt,null);_(this,Hs,null);_(this,sl,null);_(this,jc,null);_(this,cd,null);_(this,ud,null);_(this,$s,!1);_(this,ir,null);_(this,zo,null);_(this,Uo,null);_(this,Kt,null);_(this,Ho,null);_(this,ol,null);_(this,Dm,null);_(this,$o,null);_(this,hd,null);_(this,Bc,null);_(this,al,!1);_(this,Cn,null);_(this,ll,null);b(this,Xt,e),b(this,hd,r),b(this,Hs,a),b(this,$o,u),b(this,cd,h),b(this,ld,t),b(this,Dm,d),b(this,ud,p),b(this,jc,n),b(this,nr,y),b(this,Cn,n[0]),b(this,sl,U0.toDateObject(s)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup()),y||(P(this,qe,m0).call(this),c(this,Xt).hidden=!0,m&&P(this,qe,y0).call(this))}renderCommentButton(){if(c(this,Kt)){c(this,Kt).parentNode||c(this,Cn).container.after(c(this,Kt));return}if(c(this,Ho)||P(this,qe,o1).call(this),!c(this,Ho))return;const{signal:e}=b(this,zo,new AbortController),t=c(this,Cn).hasOwnCommentButton,n=()=>{c(this,nr).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{c(this,nr).toggleCommentPopup(this,!1,!0,!t)},s=()=>{c(this,nr).toggleCommentPopup(this,!1,!1)};if(t){b(this,Kt,c(this,Cn).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",c(this,rl),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=b(this,Kt,document.createElement("button"));a.className="annotationCommentButton";const u=c(this,Cn).container;a.style.zIndex=u.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),P(this,qe,l1).call(this),P(this,qe,a1).call(this),a.addEventListener("keydown",c(this,rl),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),u.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=c(this,Cn).commentData;return e?c(this,cd)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=c(this,Kt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:s}=c(this,Cn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:s}}get elementBeforePopup(){return c(this,Kt)}get comment(){return c(this,ll)||b(this,ll,c(this,Cn).commentText),c(this,ll)}set comment(e){e!==this.comment&&(c(this,Cn).commentText=b(this,ll,e))}focus(){var e;(e=c(this,Cn).container)==null||e.focus()}get parentBoundingClientRect(){return c(this,Cn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){c(this,Kt)&&(c(this,Kt).classList.toggle("selected",e),c(this,Kt).ariaExpanded=t)}setSelectedCommentButton(e){c(this,Kt).classList.toggle("selected",e)}get commentPopupPosition(){if(c(this,ol))return c(this,ol);const{x:e,y:t,height:n}=c(this,Kt).getBoundingClientRect(),{x:r,y:s,width:a,height:u}=c(this,Cn).layer.getBoundingClientRect();return[(e-r)/a,(t+n-s)/u]}set commentPopupPosition(e){b(this,ol,e)}hasDefaultPopupPosition(){return c(this,ol)===null}get commentButtonPosition(){return c(this,Ho)}get commentButtonWidth(){return c(this,Kt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=c(this,ol)||this.commentButtonPosition.map(d=>d/100),r=this.parentBoundingClientRect,{x:s,y:a,width:u,height:h}=r;c(this,nr).showDialog(null,this,s+t*u,a+n*h,{...e,parentDimensions:r})}render(){var n,r;if(c(this,ir))return;const e=b(this,ir,document.createElement("div"));if(e.className="popup",c(this,ld)){const s=e.style.outlineColor=we.makeHexColor(...c(this,ld));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=c(this,hd))!=null&&n.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=c(this,hd)}if(e.append(t),c(this,sl)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,sl).valueOf()})),s.dateTime=c(this,sl).toISOString(),t.append(s)}ST({html:c(this,qe,g0)||c(this,Hs).str,dir:(r=c(this,Hs))==null?void 0:r.dir,className:"popupContent"},e),c(this,Xt).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var r;if(c(this,nr)){n?(this.remove(),b(this,ll,null)):t&&(t.deleted?this.remove():(P(this,qe,l1).call(this),b(this,ll,t.text))),e&&(b(this,Ho,null),P(this,qe,o1).call(this),P(this,qe,a1).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}P(this,qe,m0).call(this),c(this,Bc)||b(this,Bc,{contentsObj:c(this,Hs),richText:c(this,$o)}),e&&b(this,Uo,null),t&&t.text&&(b(this,$o,P(this,qe,LP).call(this,t.text)),b(this,sl,U0.toDateObject(t.date)),b(this,Hs,null)),(r=c(this,ir))==null||r.remove(),b(this,ir,null)}resetEdited(){var e;c(this,Bc)&&({contentsObj:mn(this,Hs)._,richText:mn(this,$o)._}=c(this,Bc),b(this,Bc,null),(e=c(this,ir))==null||e.remove(),b(this,ir,null),b(this,Uo,null))}remove(){var e,t,n;if((e=c(this,zo))==null||e.abort(),b(this,zo,null),(t=c(this,ir))==null||t.remove(),b(this,ir,null),b(this,al,!1),b(this,$s,!1),(n=c(this,Kt))==null||n.remove(),b(this,Kt,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){b(this,al,this.isVisible),c(this,al)&&(c(this,Xt).hidden=!0)}maybeShow(){c(this,nr)||(P(this,qe,m0).call(this),c(this,al)&&(c(this,ir)||P(this,qe,v0).call(this),b(this,al,!1),c(this,Xt).hidden=!1))}get isVisible(){return c(this,nr)?!1:c(this,Xt).hidden===!1}}nr=new WeakMap,rl=new WeakMap,pv=new WeakMap,mv=new WeakMap,ad=new WeakMap,ld=new WeakMap,Xt=new WeakMap,Hs=new WeakMap,sl=new WeakMap,jc=new WeakMap,cd=new WeakMap,ud=new WeakMap,$s=new WeakMap,ir=new WeakMap,zo=new WeakMap,Uo=new WeakMap,Kt=new WeakMap,Ho=new WeakMap,ol=new WeakMap,Dm=new WeakMap,$o=new WeakMap,hd=new WeakMap,Bc=new WeakMap,al=new WeakMap,Cn=new WeakMap,ll=new WeakMap,qe=new WeakSet,m0=function(){var t;if(c(this,zo))return;b(this,zo,new AbortController);const{signal:e}=c(this,zo);for(const n of this.trigger)n.addEventListener("click",c(this,ad),{signal:e}),n.addEventListener("pointerenter",c(this,mv),{signal:e}),n.addEventListener("pointerleave",c(this,pv),{signal:e}),n.classList.add("popupTriggerArea");for(const n of c(this,jc))(t=n.container)==null||t.addEventListener("keydown",c(this,rl),{signal:e})},o1=function(){const e=c(this,jc).find(t=>t.hasCommentButton);e&&b(this,Ho,e._normalizePoint(e.commentButtonPosition))},a1=function(){if(c(this,Cn).extraPopupElement&&!c(this,Cn).editor)return;c(this,Kt)||this.renderCommentButton();const[e,t]=c(this,Ho),{style:n}=c(this,Kt);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},l1=function(){c(this,Cn).extraPopupElement||(c(this,Kt)||this.renderCommentButton(),c(this,Kt).style.backgroundColor=this.commentButtonColor||"")},g0=function(){const e=c(this,$o),t=c(this,Hs);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,$o).html||null},c1=function(){var e,t,n;return((n=(t=(e=c(this,qe,g0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},NP=function(){var e,t,n;return((n=(t=(e=c(this,qe,g0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},LP=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,qe,NP),fontSize:c(this,qe,c1)?`calc(${c(this,qe,c1)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return n},DP=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,$s))&&P(this,qe,y0).call(this)},IP=function(){if(c(this,Uo)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:s}}}=c(this,cd);let a=!!c(this,ud),u=a?c(this,ud):c(this,Dm);for(const E of c(this,jc))if(!u||we.intersect(E.data.rect,u)!==null){u=E.data.rect,a=!0;break}const h=we.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),p=a?u[2]-u[0]+5:0,m=h[0]+p,y=h[1];b(this,Uo,[100*(m-r)/t,100*(y-s)/n]);const{style:v}=c(this,Xt);v.left=`${c(this,Uo)[0]}%`,v.top=`${c(this,Uo)[1]}%`},y0=function(){if(c(this,nr)){c(this,nr).toggleCommentPopup(this,!1);return}b(this,$s,!c(this,$s)),c(this,$s)?(P(this,qe,v0).call(this),c(this,Xt).addEventListener("click",c(this,ad)),c(this,Xt).addEventListener("keydown",c(this,rl))):(P(this,qe,u1).call(this),c(this,Xt).removeEventListener("click",c(this,ad)),c(this,Xt).removeEventListener("keydown",c(this,rl)))},v0=function(){c(this,ir)||this.render(),this.isVisible?c(this,$s)&&c(this,Xt).classList.add("focused"):(P(this,qe,IP).call(this),c(this,Xt).hidden=!1,c(this,Xt).style.zIndex=parseInt(c(this,Xt).style.zIndex)+1e3)},u1=function(){c(this,Xt).classList.remove("focused"),!(c(this,$s)||!this.isVisible)&&(c(this,Xt).hidden=!0,c(this,Xt).style.zIndex=parseInt(c(this,Xt).style.zIndex)-1e3)};class MP extends $t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=He.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Im;class JO extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Im,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=b(this,Im,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Im)}addHighlightArea(){this.container.classList.add("highlightArea")}}Im=new WeakMap;var Mm;class ZO extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Mm,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,u=b(this,Mm,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",a/2),u.setAttribute("y",a/2),u.setAttribute("width",n-a),u.setAttribute("height",r-a),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),s.append(u),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Mm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mm=new WeakMap;var Fm;class ej extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Fm,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,u=b(this,Fm,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",r/2),u.setAttribute("rx",n/2-a/2),u.setAttribute("ry",r/2-a/2),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),s.append(u),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Fm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fm=new WeakMap;var Om;class FP extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Om,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:s},width:a,height:u}=this;if(!n)return this.container;const h=this.svgFactory.create(a,u,!0);let d=[];for(let m=0,y=n.length;m<y;m+=2){const v=n[m]-t[0],E=t[3]-n[m+1];d.push(`${v},${E}`)}d=d.join(" ");const p=b(this,Om,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",d),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Om)}addHighlightArea(){this.container.classList.add("highlightArea")}}Om=new WeakMap;class tj extends FP{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nj extends $t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var jm,zc,Bm,h1;class gS extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Bm);_(this,jm,null);_(this,zc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?He.HIGHLIGHT:He.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:s,popupRef:a}}=this,{transform:u,width:h,height:d}=P(this,Bm,h1).call(this,n,t),p=this.svgFactory.create(h,d,!0),m=b(this,jm,this.svgFactory.createElement("svg:g"));p.append(m),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",u);for(let y=0,v=r.length;y<v;y++){const E=this.svgFactory.createElement(this.svgElementName);c(this,zc).push(E),E.setAttribute("points",r[y].join(",")),m.append(E)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:s}=t,a=c(this,jm);if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let u=0,h=c(this,zc).length;u<h;u++)c(this,zc)[u].setAttribute("points",r[u].join(","));if(s){const{transform:u,width:h,height:d}=P(this,Bm,h1).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),a.setAttribute("transform",u)}}getElementsToTriggerPopup(){return c(this,zc)}addHighlightArea(){this.container.classList.add("highlightArea")}}jm=new WeakMap,zc=new WeakMap,Bm=new WeakSet,h1=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class OP extends $t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=He.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class ij extends $t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class rj extends $t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class sj extends $t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class jP extends $t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=He.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var zm,Um,d1;class oj extends $t{constructor(t){var r;super(t,{isRenderable:!0});_(this,Um);_(this,zm,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",P(this,Um,d1).bind(this)),b(this,zm,r);const{isMac:s}=bn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&P(this,Um,d1).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,zm)}addHighlightArea(){this.container.classList.add("highlightArea")}}zm=new WeakMap,Um=new WeakSet,d1=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Uc,Hc,dd,cl,Hm,$c,rr,$m,ea,x0,p1;const BS=class BS{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:u,commentManager:h,linkService:d,annotationStorage:p}){_(this,ea);_(this,Uc,null);_(this,Hc,null);_(this,dd,null);_(this,cl,new Map);_(this,Hm,null);_(this,$c,null);_(this,rr,[]);_(this,$m,!1);this.div=e,b(this,Uc,t),b(this,Hc,n),b(this,Hm,u||null),b(this,$c,d||null),b(this,dd,p||new hS),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return c(this,cl).size>0}async render(e){var u;const{annotations:t}=e,n=this.div;hu(n,this.viewport);const r=new Map,s=[],a={data:null,layer:n,linkService:c(this,$c),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new K0,annotationStorage:c(this,dd),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const h of t){if(h.noHTML)continue;const d=h.annotationType===ln.POPUP;if(d){const y=r.get(h.id);if(!y)continue;if(!this._commentManager){s.push(h);continue}a.elements=y}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;a.data=h;const p=Vw.create(a);if(!p.isRenderable)continue;if(!d&&(c(this,rr).push(p),h.popupRef)){const y=r.get(h.popupRef);y?y.push(p):r.set(h.popupRef,[p])}const m=p.render();h.hidden&&(m.style.visibility="hidden"),p._isEditable&&(c(this,cl).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}await P(this,ea,x0).call(this);for(const h of s){const d=a.elements=r.get(h.id);a.data=h;const p=Vw.create(a);if(!p.isRenderable)continue;const m=p.render();p.contentElement.id=`${Zu}${h.id}`,h.hidden&&(m.style.visibility="hidden"),d.at(-1).container.after(m)}P(this,ea,p1).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:c(this,$c),svgFactory:new K0,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=BS._defaultBorderStyle),t.data=n;const r=Vw.create(t);r.isRenderable&&(r.render(),r.contentElement.id=`${Zu}${n.id}`,c(this,rr).push(r))}await P(this,ea,x0).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,hu(t,{rotation:e.rotation}),P(this,ea,p1).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,cl).values())}getEditableAnnotation(e){return c(this,cl).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:r}=e,s=new VO({data:{id:n,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:c(this,$c),annotationStorage:c(this,dd)});return s.render(),s.contentElement.id=`${Zu}${n}`,s.createOrUpdatePopup(),c(this,rr).push(s),s}removeAnnotation(e){var r;const t=c(this,rr).findIndex(s=>s.data.id===e);if(t<0)return;const[n]=c(this,rr).splice(t,1);(r=c(this,Uc))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);P(this,ea,x0).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return ze(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Wu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Uc=new WeakMap,Hc=new WeakMap,dd=new WeakMap,cl=new WeakMap,Hm=new WeakMap,$c=new WeakMap,rr=new WeakMap,$m=new WeakMap,ea=new WeakSet,x0=async function(){var n,r,s;if(c(this,rr).length===0)return;this.div.replaceChildren();const e=[];if(!c(this,$m)){b(this,$m,!0);for(const{contentElement:a,data:{id:u}}of c(this,rr)){const h=a.id=`${Zu}${u}`;e.push((n=c(this,Hm))==null?void 0:n.getAriaAttributes(h).then(d=>{if(d)for(const[p,m]of d)a.setAttribute(p,m)}))}}c(this,rr).sort(({data:{rect:[a,u,h,d]}},{data:{rect:[p,m,y,v]}})=>{if(a===h&&u===d)return 1;if(p===y&&m===v)return-1;const E=d,A=u,k=(u+d)/2,C=v,N=m,T=(m+v)/2;if(k>=C&&T<=A)return-1;if(T>=E&&k<=N)return 1;const D=(a+h)/2,F=(p+y)/2;return D-F});const t=document.createDocumentFragment();for(const a of c(this,rr))t.append(a.container),this._commentManager?(s=((r=a.extraPopupElement)==null?void 0:r.popup)||a.popup)==null||s.renderCommentButton():a.extraPopupElement&&t.append(a.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),c(this,Uc))for(const a of c(this,rr))c(this,Uc).addPointerInTextLayer(a.contentElement,!1)},p1=function(){var t;if(!c(this,Hc))return;const e=this.div;for(const[n,r]of c(this,Hc)){const s=e.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):s.append(r);const u=c(this,cl).get(n);u&&(u._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,s.id,r),u._hasNoCanvas=!1):u.canvas=r)}c(this,Hc).clear()};let f1=BS;const Vy=/\r\n?|\n/g;var sr,Vm,Vc,or,hn,BP,zP,UP,w0,ta,b0,S0,HP,g1,$P;const Lt=class Lt extends Tt{constructor(t){super({...t,name:"freeTextEditor"});_(this,hn);_(this,sr,"");_(this,Vm,`${this.id}-editor`);_(this,Vc,null);_(this,or);le(this,"_colorPicker",null);this.color=t.color||Lt._defaultColor||Tt._defaultLineColor,b(this,or,t.fontSize||Lt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=Lt.prototype,n=a=>a.isEmpty(),r=du.TRANSLATE_SMALL,s=du.TRANSLATE_BIG;return ze(this,"_keyboardManager",new wg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,n){Tt.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Je.FREETEXT_SIZE:Lt._defaultFontSize=n;break;case Je.FREETEXT_COLOR:Lt._defaultColor=n;break}}updateParams(t,n){switch(t){case Je.FREETEXT_SIZE:P(this,hn,BP).call(this,n);break;case Je.FREETEXT_COLOR:P(this,hn,zP).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Je.FREETEXT_SIZE,Lt._defaultFontSize],[Je.FREETEXT_COLOR,Lt._defaultColor||Tt._defaultLineColor]]}get propertiesToUpdate(){return[[Je.FREETEXT_SIZE,c(this,or)],[Je.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new X0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Je.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Lt._internalPadding*t,-(Lt._internalPadding+c(this,or))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,Vc,new AbortController);const t=this._uiManager.combinedSignal(c(this,Vc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Vm)),this._isDraggable=!0,(t=c(this,Vc))==null||t.abort(),b(this,Vc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,sr),n=b(this,sr,P(this,hn,UP).call(this).trimEnd());if(t===n)return;const r=s=>{if(b(this,sr,s),!s){this.remove();return}P(this,hn,S0).call(this),this._uiManager.rebuild(this),P(this,hn,w0).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),P(this,hn,w0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Lt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Vm)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,or)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[p,m]=this.pageDimensions,[y,v]=this.pageTranslation;let E,A;switch(this.rotation){case 0:E=t+(u[0]-y)/p,A=n+this.height-(u[1]-v)/m;break;case 90:E=t+(u[0]-y)/p,A=n-(u[1]-v)/m,[h,d]=[d,-h];break;case 180:E=t-this.width+(u[0]-y)/p,A=n-(u[1]-v)/m,[h,d]=[-h,-d];break;case 270:E=t+(u[0]-y-this.height*m)/p,A=n+(u[1]-v-this.width*p)/m,[h,d]=[-d,h];break}this.setAt(E*s,A*a,h,d)}else this._moveAfterPaste(t,n);P(this,hn,S0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var E,A,k;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=P(E=Lt,ta,g1).call(E,n.getData("text")||"").replaceAll(Vy,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const u=a.getRangeAt(0);if(!s.includes(`
`)){u.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:h,startOffset:d}=u,p=[],m=[];if(h.nodeType===Node.TEXT_NODE){const C=h.parentElement;if(m.push(h.nodeValue.slice(d).replaceAll(Vy,"")),C!==this.editorDiv){let N=p;for(const T of this.editorDiv.childNodes){if(T===C){N=m;continue}N.push(P(A=Lt,ta,b0).call(A,T))}}p.push(h.nodeValue.slice(0,d).replaceAll(Vy,""))}else if(h===this.editorDiv){let C=p,N=0;for(const T of this.editorDiv.childNodes)N++===d&&(C=m),C.push(P(k=Lt,ta,b0).call(k,T))}b(this,sr,`${p.join(`
`)}${s}${m.join(`
`)}`),P(this,hn,S0).call(this);const y=new Range;let v=Math.sumPrecise(p.map(C=>C.length));for(const{firstChild:C}of this.editorDiv.childNodes)if(C.nodeType===Node.TEXT_NODE){const N=C.nodeValue.length;if(v<=N){y.setStart(C,v),y.setEnd(C,v);break}v-=N}a.removeAllRanges(),a.addRange(y)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Lt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,r){var u;let s=null;if(t instanceof MP){const{data:{defaultAppearanceData:{fontSize:h,fontColor:d},rect:p,rotation:m,id:y,popupRef:v,richText:E,contentsObj:A,creationDate:k,modificationDate:C},textContent:N,textPosition:T,parent:{page:{pageNumber:D}}}=t;if(!N||N.length===0)return null;s=t={annotationType:He.FREETEXT,color:Array.from(d),fontSize:h,value:N.join(`
`),position:T,pageIndex:D-1,rect:p.slice(0),rotation:m,annotationElementId:y,id:y,deleted:!1,popupRef:v,comment:(A==null?void 0:A.str)||null,richText:E,creationDate:k,modificationDate:C}}const a=await super.deserialize(t,n,r);return b(a,or,t.fontSize),a.color=we.makeHexColor(...t.color),b(a,sr,P(u=Lt,ta,g1).call(u,t.value)),a._initialData=s,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Tt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:n,fontSize:c(this,or),value:P(this,hn,HP).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!P(this,hn,$P).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${c(this,or)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const s of c(this,sr).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),n.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,sr)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};sr=new WeakMap,Vm=new WeakMap,Vc=new WeakMap,or=new WeakMap,hn=new WeakSet,BP=function(t){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-c(this,or))*this.parentScale),b(this,or,s),P(this,hn,w0).call(this)},r=c(this,or);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Je.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zP=function(t){const n=s=>{this.color=s,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Je.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},UP=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(P(r=Lt,ta,b0).call(r,s)),n=s);return t.join(`
`)},w0=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,u=a.style.display,h=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=u,a.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},ta=new WeakSet,b0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Vy,"")},S0=function(){if(this.editorDiv.replaceChildren(),!!c(this,sr))for(const t of c(this,sr).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},HP=function(){return c(this,sr).replaceAll(""," ")},g1=function(t){return t.replaceAll(" ","")},$P=function(t){const{value:n,fontSize:r,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((u,h)=>u!==s[h])||t.pageIndex!==a},_(Lt,ta),le(Lt,"_freeTextDefaultContent",""),le(Lt,"_internalPadding",0),le(Lt,"_defaultColor",null),le(Lt,"_defaultFontSize",10),le(Lt,"_type","freetext"),le(Lt,"_editorType",He.FREETEXT);let m1=Lt;class Ae{toSVGPath(){Et("Abstract method `toSVGPath` must be implemented.")}get box(){Et("Abstract getter `box` must be implemented.")}serialize(e,t){Et("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,s,a){a||(a=new Float32Array(e.length));for(let u=0,h=e.length;u<h;u+=2)a[u]=t+e[u]*r,a[u+1]=n+e[u+1]*s;return a}static _rescaleAndSwap(e,t,n,r,s,a){a||(a=new Float32Array(e.length));for(let u=0,h=e.length;u<h;u+=2)a[u]=t+e[u+1]*r,a[u+1]=n+e[u]*s;return a}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)r[s]=t+e[s],r[s+1]=n+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,s){switch(s){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,s,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+s)/6,(5*r+a)/6,(n+s)/2,(r+a)/2]}}le(Ae,"PRECISION",1e-4);var ar,as,fd,pd,Vs,Ye,Wc,Gc,Wm,Gm,md,gd,ul,qm,gv,yv,wn,tp,VP,WP,GP,qP,XP,KP;const go=class go{constructor({x:e,y:t},n,r,s,a,u=0){_(this,wn);_(this,ar);_(this,as,[]);_(this,fd);_(this,pd);_(this,Vs,[]);_(this,Ye,new Float32Array(18));_(this,Wc);_(this,Gc);_(this,Wm);_(this,Gm);_(this,md);_(this,gd);_(this,ul,[]);b(this,ar,n),b(this,gd,s*r),b(this,pd,a),c(this,Ye).set([NaN,NaN,NaN,NaN,e,t],6),b(this,fd,u),b(this,Gm,c(go,qm)*r),b(this,Wm,c(go,yv)*r),b(this,md,r),c(this,ul).push(e,t)}isEmpty(){return isNaN(c(this,Ye)[8])}add({x:e,y:t}){var K;b(this,Wc,e),b(this,Gc,t);const[n,r,s,a]=c(this,ar);let[u,h,d,p]=c(this,Ye).subarray(8,12);const m=e-d,y=t-p,v=Math.hypot(m,y);if(v<c(this,Wm))return!1;const E=v-c(this,Gm),A=E/v,k=A*m,C=A*y;let N=u,T=h;u=d,h=p,d+=k,p+=C,(K=c(this,ul))==null||K.push(e,t);const D=-C/E,F=k/E,L=D*c(this,gd),j=F*c(this,gd);return c(this,Ye).set(c(this,Ye).subarray(2,8),0),c(this,Ye).set([d+L,p+j],4),c(this,Ye).set(c(this,Ye).subarray(14,18),12),c(this,Ye).set([d-L,p-j],16),isNaN(c(this,Ye)[6])?(c(this,Vs).length===0&&(c(this,Ye).set([u+L,h+j],2),c(this,Vs).push(NaN,NaN,NaN,NaN,(u+L-n)/s,(h+j-r)/a),c(this,Ye).set([u-L,h-j],14),c(this,as).push(NaN,NaN,NaN,NaN,(u-L-n)/s,(h-j-r)/a)),c(this,Ye).set([N,T,u,h,d,p],6),!this.isEmpty()):(c(this,Ye).set([N,T,u,h,d,p],6),Math.abs(Math.atan2(T-h,N-u)-Math.atan2(C,k))<Math.PI/2?([u,h,d,p]=c(this,Ye).subarray(2,6),c(this,Vs).push(NaN,NaN,NaN,NaN,((u+d)/2-n)/s,((h+p)/2-r)/a),[u,h,N,T]=c(this,Ye).subarray(14,18),c(this,as).push(NaN,NaN,NaN,NaN,((N+u)/2-n)/s,((T+h)/2-r)/a),!0):([N,T,u,h,d,p]=c(this,Ye).subarray(0,6),c(this,Vs).push(((N+5*u)/6-n)/s,((T+5*h)/6-r)/a,((5*u+d)/6-n)/s,((5*h+p)/6-r)/a,((u+d)/2-n)/s,((h+p)/2-r)/a),[d,p,u,h,N,T]=c(this,Ye).subarray(12,18),c(this,as).push(((N+5*u)/6-n)/s,((T+5*h)/6-r)/a,((5*u+d)/6-n)/s,((5*h+p)/6-r)/a,((u+d)/2-n)/s,((h+p)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Vs),t=c(this,as);if(isNaN(c(this,Ye)[6])&&!this.isEmpty())return P(this,wn,VP).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);P(this,wn,GP).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return P(this,wn,WP).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,s,a){return new YP(e,t,n,r,s,a)}getOutlines(){var m;const e=c(this,Vs),t=c(this,as),n=c(this,Ye),[r,s,a,u]=c(this,ar),h=new Float32Array((((m=c(this,ul))==null?void 0:m.length)??0)+2);for(let y=0,v=h.length-2;y<v;y+=2)h[y]=(c(this,ul)[y]-r)/a,h[y+1]=(c(this,ul)[y+1]-s)/u;if(h[h.length-2]=(c(this,Wc)-r)/a,h[h.length-1]=(c(this,Gc)-s)/u,isNaN(n[6])&&!this.isEmpty())return P(this,wn,qP).call(this,h);const d=new Float32Array(c(this,Vs).length+24+c(this,as).length);let p=e.length;for(let y=0;y<p;y+=2){if(isNaN(e[y])){d[y]=d[y+1]=NaN;continue}d[y]=e[y],d[y+1]=e[y+1]}p=P(this,wn,KP).call(this,d,p);for(let y=t.length-6;y>=6;y-=6)for(let v=0;v<6;v+=2){if(isNaN(t[y+v])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=t[y+v],d[p+1]=t[y+v+1],p+=2}return P(this,wn,XP).call(this,d,p),this.newFreeDrawOutline(d,h,c(this,ar),c(this,md),c(this,fd),c(this,pd))}};ar=new WeakMap,as=new WeakMap,fd=new WeakMap,pd=new WeakMap,Vs=new WeakMap,Ye=new WeakMap,Wc=new WeakMap,Gc=new WeakMap,Wm=new WeakMap,Gm=new WeakMap,md=new WeakMap,gd=new WeakMap,ul=new WeakMap,qm=new WeakMap,gv=new WeakMap,yv=new WeakMap,wn=new WeakSet,tp=function(){const e=c(this,Ye).subarray(4,6),t=c(this,Ye).subarray(16,18),[n,r,s,a]=c(this,ar);return[(c(this,Wc)+(e[0]-t[0])/2-n)/s,(c(this,Gc)+(e[1]-t[1])/2-r)/a,(c(this,Wc)+(t[0]-e[0])/2-n)/s,(c(this,Gc)+(t[1]-e[1])/2-r)/a]},VP=function(){const[e,t,n,r]=c(this,ar),[s,a,u,h]=P(this,wn,tp).call(this);return`M${(c(this,Ye)[2]-e)/n} ${(c(this,Ye)[3]-t)/r} L${(c(this,Ye)[4]-e)/n} ${(c(this,Ye)[5]-t)/r} L${s} ${a} L${u} ${h} L${(c(this,Ye)[16]-e)/n} ${(c(this,Ye)[17]-t)/r} L${(c(this,Ye)[14]-e)/n} ${(c(this,Ye)[15]-t)/r} Z`},WP=function(e){const t=c(this,as);e.push(`L${t[4]} ${t[5]} Z`)},GP=function(e){const[t,n,r,s]=c(this,ar),a=c(this,Ye).subarray(4,6),u=c(this,Ye).subarray(16,18),[h,d,p,m]=P(this,wn,tp).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-n)/s} L${h} ${d} L${p} ${m} L${(u[0]-t)/r} ${(u[1]-n)/s}`)},qP=function(e){const t=c(this,Ye),[n,r,s,a]=c(this,ar),[u,h,d,p]=P(this,wn,tp).call(this),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-r)/a,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-r)/a],0),this.newFreeDrawOutline(m,e,c(this,ar),c(this,md),c(this,fd),c(this,pd))},XP=function(e,t){const n=c(this,as);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},KP=function(e,t){const n=c(this,Ye).subarray(4,6),r=c(this,Ye).subarray(16,18),[s,a,u,h]=c(this,ar),[d,p,m,y]=P(this,wn,tp).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/u,(n[1]-a)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(r[0]-s)/u,(r[1]-a)/h],t),t+=24},_(go,qm,8),_(go,gv,2),_(go,yv,c(go,qm)+c(go,gv));let Y0=go;var yd,qc,Vo,Xm,lr,Km,sn,vv,QP;class YP extends Ae{constructor(t,n,r,s,a,u){super();_(this,vv);_(this,yd);_(this,qc,new Float32Array(4));_(this,Vo);_(this,Xm);_(this,lr);_(this,Km);_(this,sn);b(this,sn,t),b(this,lr,n),b(this,yd,r),b(this,Km,s),b(this,Vo,a),b(this,Xm,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],P(this,vv,QP).call(this,u);const[h,d,p,m]=c(this,qc);for(let y=0,v=t.length;y<v;y+=2)t[y]=(t[y]-h)/p,t[y+1]=(t[y+1]-d)/m;for(let y=0,v=n.length;y<v;y+=2)n[y]=(n[y]-h)/p,n[y+1]=(n[y+1]-d)/m}toSVGPath(){const t=[`M${c(this,sn)[4]} ${c(this,sn)[5]}`];for(let n=6,r=c(this,sn).length;n<r;n+=6){if(isNaN(c(this,sn)[n])){t.push(`L${c(this,sn)[n+4]} ${c(this,sn)[n+5]}`);continue}t.push(`C${c(this,sn)[n]} ${c(this,sn)[n+1]} ${c(this,sn)[n+2]} ${c(this,sn)[n+3]} ${c(this,sn)[n+4]} ${c(this,sn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,s],a){const u=r-t,h=s-n;let d,p;switch(a){case 0:d=Ae._rescale(c(this,sn),t,s,u,-h),p=Ae._rescale(c(this,lr),t,s,u,-h);break;case 90:d=Ae._rescaleAndSwap(c(this,sn),t,n,u,h),p=Ae._rescaleAndSwap(c(this,lr),t,n,u,h);break;case 180:d=Ae._rescale(c(this,sn),r,n,-u,h),p=Ae._rescale(c(this,lr),r,n,-u,h);break;case 270:d=Ae._rescaleAndSwap(c(this,sn),r,s,-u,-h),p=Ae._rescaleAndSwap(c(this,lr),r,s,-u,-h);break}return{outline:Array.from(d),points:[Array.from(p)]}}get box(){return c(this,qc)}newOutliner(t,n,r,s,a,u=0){return new Y0(t,n,r,s,a,u)}getNewOutline(t,n){const[r,s,a,u]=c(this,qc),[h,d,p,m]=c(this,yd),y=a*p,v=u*m,E=r*p+h,A=s*m+d,k=this.newOutliner({x:c(this,lr)[0]*y+E,y:c(this,lr)[1]*v+A},c(this,yd),c(this,Km),t,c(this,Xm),n??c(this,Vo));for(let C=2;C<c(this,lr).length;C+=2)k.add({x:c(this,lr)[C]*y+E,y:c(this,lr)[C+1]*v+A});return k.getOutlines()}}yd=new WeakMap,qc=new WeakMap,Vo=new WeakMap,Xm=new WeakMap,lr=new WeakMap,Km=new WeakMap,sn=new WeakMap,vv=new WeakSet,QP=function(t){const n=c(this,sn);let r=n[4],s=n[5];const a=[r,s,r,s];let u=r,h=s,d=r,p=s;const m=t?Math.max:Math.min,y=new Float32Array(4);for(let E=6,A=n.length;E<A;E+=6){const k=n[E+4],C=n[E+5];isNaN(n[E])?(we.pointBoundingBox(k,C,a),h>C?(u=k,h=C):h===C&&(u=m(u,k)),p<C?(d=k,p=C):p===C&&(d=m(d,k))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,we.bezierBoundingBox(r,s,...n.slice(E,E+6),y),we.rectBoundingBox(y[0],y[1],y[2],y[3],a),h>y[1]?(u=y[0],h=y[1]):h===y[1]&&(u=m(u,y[0])),p<y[3]?(d=y[2],p=y[3]):p===y[3]&&(d=m(d,y[2]))),r=k,s=C}const v=c(this,qc);v[0]=a[0]-c(this,Vo),v[1]=a[1]-c(this,Vo),v[2]=a[2]-a[0]+2*c(this,Vo),v[3]=a[3]-a[1]+2*c(this,Vo),this.firstPoint=[u,h],this.lastPoint=[d,p]};var Ym,Qm,Jm,hl,ls,yi,JP,E0,ZP,eR,v1;class y1{constructor(e,t=0,n=0,r=!0){_(this,yi);_(this,Ym);_(this,Qm);_(this,Jm);_(this,hl,[]);_(this,ls,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:A,y:k,width:C,height:N}of e){const T=Math.floor((A-t)/a)*a,D=Math.ceil((A+C+t)/a)*a,F=Math.floor((k-t)/a)*a,L=Math.ceil((k+N+t)/a)*a,j=[T,F,L,!0],G=[D,F,L,!1];c(this,hl).push(j,G),we.rectBoundingBox(T,F,D,L,s)}const u=s[2]-s[0]+2*n,h=s[3]-s[1]+2*n,d=s[0]-n,p=s[1]-n;let m=r?-1/0:1/0,y=1/0;const v=c(this,hl).at(r?-1:-2),E=[v[0],v[2]];for(const A of c(this,hl)){const[k,C,N,T]=A;!T&&r?C<y?(y=C,m=k):C===y&&(m=Math.max(m,k)):T&&!r&&(C<y?(y=C,m=k):C===y&&(m=Math.min(m,k))),A[0]=(k-d)/u,A[1]=(C-p)/h,A[2]=(N-p)/h}b(this,Ym,new Float32Array([d,p,u,h])),b(this,Qm,[m,y]),b(this,Jm,E)}getOutlines(){c(this,hl).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of c(this,hl))t[3]?(e.push(...P(this,yi,v1).call(this,t)),P(this,yi,ZP).call(this,t)):(P(this,yi,eR).call(this,t),e.push(...P(this,yi,v1).call(this,t)));return P(this,yi,JP).call(this,e)}}Ym=new WeakMap,Qm=new WeakMap,Jm=new WeakMap,hl=new WeakMap,ls=new WeakMap,yi=new WeakSet,JP=function(e){const t=[],n=new Set;for(const a of e){const[u,h,d]=a;t.push([u,h,a],[u,d,a])}t.sort((a,u)=>a[1]-u[1]||a[0]-u[0]);for(let a=0,u=t.length;a<u;a+=2){const h=t[a][2],d=t[a+1][2];h.push(d),d.push(h),n.add(h),n.add(d)}const r=[];let s;for(;n.size>0;){const a=n.values().next().value;let[u,h,d,p,m]=a;n.delete(a);let y=u,v=h;for(s=[u,d],r.push(s);;){let E;if(n.has(p))E=p;else if(n.has(m))E=m;else break;n.delete(E),[u,h,d,p,m]=E,y!==u&&(s.push(y,v,u,v===h?h:d),y=u),v=v===h?d:h}s.push(y,v)}return new aj(r,c(this,Ym),c(this,Qm),c(this,Jm))},E0=function(e){const t=c(this,ls);let n=0,r=t.length-1;for(;n<=r;){const s=n+r>>1,a=t[s][0];if(a===e)return s;a<e?n=s+1:r=s-1}return r+1},ZP=function([,e,t]){const n=P(this,yi,E0).call(this,e);c(this,ls).splice(n,0,[e,t])},eR=function([,e,t]){const n=P(this,yi,E0).call(this,e);for(let r=n;r<c(this,ls).length;r++){const[s,a]=c(this,ls)[r];if(s!==e)break;if(s===e&&a===t){c(this,ls).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[s,a]=c(this,ls)[r];if(s!==e)break;if(s===e&&a===t){c(this,ls).splice(r,1);return}}},v1=function(e){const[t,n,r]=e,s=[[t,n,r]],a=P(this,yi,E0).call(this,r);for(let u=0;u<a;u++){const[h,d]=c(this,ls)[u];for(let p=0,m=s.length;p<m;p++){const[,y,v]=s[p];if(!(d<=y||v<=h)){if(y>=h){if(v>d)s[p][1]=d;else{if(m===1)return[];s.splice(p,1),p--,m--}continue}s[p][2]=h,v>d&&s.push([t,d,v])}}}return s};var Zm,vd;class aj extends Ae{constructor(t,n,r,s){super();_(this,Zm);_(this,vd);b(this,vd,t),b(this,Zm,n),this.firstPoint=r,this.lastPoint=s}toSVGPath(){const t=[];for(const n of c(this,vd)){let[r,s]=n;t.push(`M${r} ${s}`);for(let a=2;a<n.length;a+=2){const u=n[a],h=n[a+1];u===r?(t.push(`V${h}`),s=h):h===s&&(t.push(`H${u}`),r=u)}t.push("Z")}return t.join(" ")}serialize([t,n,r,s],a){const u=[],h=r-t,d=s-n;for(const p of c(this,vd)){const m=new Array(p.length);for(let y=0;y<p.length;y+=2)m[y]=t+p[y]*h,m[y+1]=s-p[y+1]*d;u.push(m)}return u}get box(){return c(this,Zm)}get classNamesForOutlining(){return["highlightOutline"]}}Zm=new WeakMap,vd=new WeakMap;class x1 extends Y0{newFreeDrawOutline(e,t,n,r,s,a){return new lj(e,t,n,r,s,a)}}class lj extends YP{newOutliner(e,t,n,r,s,a=0){return new x1(e,t,n,r,s,a)}}var xd,eg,Wo,Xc,tg,Di,ng,ig,Kc,cr,ur,$n,wd,bd,ri,Sd,jr,rg,Ge,w1,A0,tR,nR,iR,b1,$l,Ur,Qu,rR,k0,C0,sR,oR,aR,lR,cR;const at=class at extends Tt{constructor(t){super({...t,name:"highlightEditor"});_(this,Ge);_(this,xd,null);_(this,eg,0);_(this,Wo);_(this,Xc,null);_(this,tg,null);_(this,Di,null);_(this,ng,null);_(this,ig,0);_(this,Kc,null);_(this,cr,null);_(this,ur,null);_(this,$n,!1);_(this,wd,null);_(this,bd,null);_(this,ri,null);_(this,Sd,"");_(this,jr);_(this,rg,"");this.color=t.color||at._defaultColor,b(this,jr,t.thickness||at._defaultThickness),this.opacity=t.opacity||at._defaultOpacity,b(this,Wo,t.boxes||null),b(this,rg,t.methodOfCreation||""),b(this,Sd,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(b(this,$n,!0),P(this,Ge,A0).call(this,t),P(this,Ge,$l).call(this)):c(this,Wo)&&(b(this,xd,t.anchorNode),b(this,eg,t.anchorOffset),b(this,ng,t.focusNode),b(this,ig,t.focusOffset),P(this,Ge,w1).call(this),P(this,Ge,$l).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=at.prototype;return ze(this,"_keyboardManager",new wg([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,$n)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,jr),methodOfCreation:c(this,rg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;Tt.initialize(t,n),at._defaultColor||(at._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Je.HIGHLIGHT_COLOR:at._defaultColor=n;break;case Je.HIGHLIGHT_THICKNESS:at._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return c(this,bd)}get commentButtonPosition(){return c(this,wd)}updateParams(t,n){switch(t){case Je.HIGHLIGHT_COLOR:P(this,Ge,tR).call(this,n);break;case Je.HIGHLIGHT_THICKNESS:P(this,Ge,nR).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Je.HIGHLIGHT_COLOR,at._defaultColor],[Je.HIGHLIGHT_THICKNESS,at._defaultThickness]]}get propertiesToUpdate(){return[[Je.HIGHLIGHT_COLOR,this.color||at._defaultColor],[Je.HIGHLIGHT_THICKNESS,c(this,jr)||at._defaultThickness],[Je.HIGHLIGHT_FREE,c(this,$n)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(c(this,ur),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=c(this,tg))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",b(this,tg,new q0({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,Ge,C0).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,P(this,Ge,C0).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){P(this,Ge,b1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,Ge,$l).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?P(this,Ge,b1).call(this):t&&(P(this,Ge,$l).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var s,a,u;const{drawLayer:n}=this.parent;let r;c(this,$n)?(t=(t-this.rotation+360)%360,r=P(s=at,Ur,Qu).call(s,c(this,cr).box,t)):r=P(a=at,Ur,Qu).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(c(this,ur),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(c(this,ri),{bbox:P(u=at,Ur,Qu).call(u,c(this,Di).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,Sd)&&(t.setAttribute("aria-label",c(this,Sd)),t.setAttribute("role","mark")),c(this,$n)?t.classList.add("free"):this.div.addEventListener("keydown",P(this,Ge,rR).bind(this),{signal:this._uiManager._signal});const n=b(this,Kc,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,Xc),this.setDims(),PT(this,c(this,Kc),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,ri),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,ri),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:P(this,Ge,k0).call(this,!0);break;case 1:case 3:P(this,Ge,k0).call(this,!1);break}}select(){var t;super.select(),c(this,ri)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,ri),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,ri)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,ri),{rootClass:{selected:!1}}),c(this,$n)||P(this,Ge,k0).call(this,!1))}get _mustFixPosition(){return!c(this,$n)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,ur),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,ri),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:s,y:a}){const{x:u,y:h,width:d,height:p}=r.getBoundingClientRect(),m=new AbortController,y=t.combinedSignal(m),v=E=>{m.abort(),P(this,Ur,lR).call(this,t,E)};window.addEventListener("blur",v,{signal:y}),window.addEventListener("pointerup",v,{signal:y}),window.addEventListener("pointerdown",Qt,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",$r,{signal:y}),r.addEventListener("pointermove",P(this,Ur,aR).bind(this,t),{signal:y}),this._freeHighlight=new x1({x:s,y:a},[u,h,d,p],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var A,k,C,N;let s=null;if(t instanceof OP){const{data:{quadPoints:T,rect:D,rotation:F,id:L,color:j,opacity:G,popupRef:K,richText:ee,contentsObj:q,creationDate:re,modificationDate:ue},parent:{page:{pageNumber:ie}}}=t;s=t={annotationType:He.HIGHLIGHT,color:Array.from(j),opacity:G,quadPoints:T,boxes:null,pageIndex:ie-1,rect:D.slice(0),rotation:F,annotationElementId:L,id:L,deleted:!1,popupRef:K,richText:ee,comment:(q==null?void 0:q.str)||null,creationDate:re,modificationDate:ue}}else if(t instanceof gS){const{data:{inkLists:T,rect:D,rotation:F,id:L,color:j,borderStyle:{rawWidth:G},popupRef:K,richText:ee,contentsObj:q,creationDate:re,modificationDate:ue},parent:{page:{pageNumber:ie}}}=t;s=t={annotationType:He.HIGHLIGHT,color:Array.from(j),thickness:G,inkLists:T,boxes:null,pageIndex:ie-1,rect:D.slice(0),rotation:F,annotationElementId:L,id:L,deleted:!1,popupRef:K,richText:ee,comment:(q==null?void 0:q.str)||null,creationDate:re,modificationDate:ue}}const{color:a,quadPoints:u,inkLists:h,opacity:d}=t,p=await super.deserialize(t,n,r);p.color=we.makeHexColor(...a),p.opacity=d||1,h&&b(p,jr,t.thickness),p._initialData=s,t.comment&&p.setCommentData(t);const[m,y]=p.pageDimensions,[v,E]=p.pageTranslation;if(u){const T=b(p,Wo,[]);for(let D=0;D<u.length;D+=8)T.push({x:(u[D]-v)/m,y:1-(u[D+1]-E)/y,width:(u[D+2]-u[D])/m,height:(u[D+1]-u[D+5])/y});P(A=p,Ge,w1).call(A),P(k=p,Ge,$l).call(k),p.rotate(p.rotation)}else if(h){b(p,$n,!0);const T=h[0],D={x:T[0]-v,y:y-(T[1]-E)},F=new x1(D,[0,0,m,y],1,c(p,jr)/2,!0,.001);for(let G=0,K=T.length;G<K;G+=2)D.x=T[G]-v,D.y=y-(T[G+1]-E),F.add(D);const{id:L,clipPathId:j}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:F.toSVGPath()}},!0,!0);P(C=p,Ge,A0).call(C,{highlightOutlines:F.getOutlines(),highlightId:L,clipPathId:j}),P(N=p,Ge,$l).call(N),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=Tt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:n,opacity:this.opacity,thickness:c(this,jr),quadPoints:P(this,Ge,sR).call(this),outlines:P(this,Ge,oR).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!P(this,Ge,cR).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};xd=new WeakMap,eg=new WeakMap,Wo=new WeakMap,Xc=new WeakMap,tg=new WeakMap,Di=new WeakMap,ng=new WeakMap,ig=new WeakMap,Kc=new WeakMap,cr=new WeakMap,ur=new WeakMap,$n=new WeakMap,wd=new WeakMap,bd=new WeakMap,ri=new WeakMap,Sd=new WeakMap,jr=new WeakMap,rg=new WeakMap,Ge=new WeakSet,w1=function(){const t=new y1(c(this,Wo),.001);b(this,cr,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,cr).box;const n=new y1(c(this,Wo),.0025,.001,this._uiManager.direction==="ltr");b(this,Di,n.getOutlines());const{firstPoint:r}=c(this,cr);b(this,wd,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:s}=c(this,Di);b(this,bd,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},A0=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var y,v;if(b(this,cr,t),b(this,Di,t.getNewOutline(c(this,jr)/2+1.5,.0025)),n>=0)b(this,ur,n),b(this,Xc,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),b(this,ri,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Di).box,path:{d:c(this,Di).toSVGPath()}},!0));else if(this.parent){const E=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,ur),{bbox:P(y=at,Ur,Qu).call(y,c(this,cr).box,(E-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,ri),{bbox:P(v=at,Ur,Qu).call(v,c(this,Di).box,E),path:{d:c(this,Di).toSVGPath()}})}const[a,u,h,d]=t.box;switch(this.rotation){case 0:this.x=a,this.y=u,this.width=h,this.height=d;break;case 90:{const[E,A]=this.parentDimensions;this.x=u,this.y=1-a,this.width=h*A/E,this.height=d*E/A;break}case 180:this.x=1-a,this.y=1-u,this.width=h,this.height=d;break;case 270:{const[E,A]=this.parentDimensions;this.x=1-u,this.y=a,this.width=h*A/E,this.height=d*E/A;break}}const{firstPoint:p}=t;b(this,wd,[(p[0]-a)/h,(p[1]-u)/d]);const{lastPoint:m}=c(this,Di);b(this,bd,[(m[0]-a)/h,(m[1]-u)/d])},tR=function(t){const n=(a,u)=>{this.color=a,this.opacity=u,this.onUpdatedColor()},r=this.color,s=this.opacity;this.addCommands({cmd:n.bind(this,t,at._defaultOpacity),undo:n.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Je.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},nR=function(t){const n=c(this,jr),r=s=>{b(this,jr,s),P(this,Ge,iR).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Je.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},iR=function(t){c(this,$n)&&(P(this,Ge,A0).call(this,{highlightOutlines:c(this,cr).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},b1=function(){c(this,ur)===null||!this.parent||(this.parent.drawLayer.remove(c(this,ur)),b(this,ur,null),this.parent.drawLayer.remove(c(this,ri)),b(this,ri,null))},$l=function(t=this.parent){c(this,ur)===null&&({id:mn(this,ur)._,clipPathId:mn(this,Xc)._}=t.drawLayer.draw({bbox:c(this,cr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,$n)},path:{d:c(this,cr).toSVGPath()}},!1,!0),b(this,ri,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,$n)},bbox:c(this,Di).box,path:{d:c(this,Di).toSVGPath()}},c(this,$n))),c(this,Kc)&&(c(this,Kc).style.clipPath=c(this,Xc)))},Ur=new WeakSet,Qu=function([t,n,r,s],a){switch(a){case 90:return[1-n-s,t,s,r];case 180:return[1-t-r,1-n-s,r,s];case 270:return[n,1-t-r,s,r]}return[t,n,r,s]},rR=function(t){at._keyboardManager.exec(this,t)},k0=function(t){if(!c(this,xd))return;const n=window.getSelection();t?n.setPosition(c(this,xd),c(this,eg)):n.setPosition(c(this,ng),c(this,ig))},C0=function(){return c(this,$n)?this.rotation:0},sR=function(){if(c(this,$n))return null;const[t,n]=this.pageDimensions,[r,s]=this.pageTranslation,a=c(this,Wo),u=new Float32Array(a.length*8);let h=0;for(const{x:d,y:p,width:m,height:y}of a){const v=d*t+r,E=(1-p)*n+s;u[h]=u[h+4]=v,u[h+1]=u[h+3]=E,u[h+2]=u[h+6]=v+m*t,u[h+5]=u[h+7]=E-y*n,h+=8}return u},oR=function(t){return c(this,cr).serialize(t,P(this,Ge,C0).call(this))},aR=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},lR=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},cR=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((r,s)=>r!==n[s])},_(at,Ur),le(at,"_defaultColor",null),le(at,"_defaultOpacity",1),le(at,"_defaultThickness",12),le(at,"_type","highlight"),le(at,"_editorType",He.HIGHLIGHT),le(at,"_freeHighlightId",-1),le(at,"_freeHighlight",null),le(at,"_freeHighlightClipId","");let Q0=at;var Yc;class uR{constructor(){_(this,Yc,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){c(this,Yc)[e]=t}toSVGProperties(){const e=c(this,Yc);return b(this,Yc,Object.create(null)),{root:e}}reset(){b(this,Yc,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Et("Not implemented")}}Yc=new WeakMap;var hr,Ed,_n,Qc,Jc,rt,S1,E1,A1,np,hR,_0,ip,Ju;const Qe=class Qe extends Tt{constructor(t){super(t);_(this,rt);_(this,hr,null);_(this,Ed);le(this,"_colorPicker",null);le(this,"_drawId",null);b(this,Ed,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(P(this,rt,S1).call(this,t),P(this,rt,np).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[s,a]of Object.entries(n))r.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Et("Not implemented")}static get typesMap(){Et("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(c(Qe,_n).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)t.push([r,n[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,s]of this.constructor.typesMap)t.push([r,n[s]]);return t}_updateProperty(t,n,r){const s=this._drawingOptions,a=s[n],u=h=>{var p;s.updateProperty(n,h);const d=c(this,hr).updateProperty(n,h);d&&P(this,rt,ip).call(this,d),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,r),undo:u.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Qe._mergeSVGProperties(c(this,hr).getPathResizingSVGProperties(P(this,rt,_0).call(this)),{bbox:P(this,rt,Ju).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Qe._mergeSVGProperties(c(this,hr).getPathResizedSVGProperties(P(this,rt,_0).call(this)),{bbox:P(this,rt,Ju).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:P(this,rt,Ju).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Qe._mergeSVGProperties(c(this,hr).getPathTranslatedSVGProperties(P(this,rt,_0).call(this),this.parentDimensions),{bbox:P(this,rt,Ju).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Ed)&&(b(this,Ed,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){P(this,rt,A1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,rt,np).call(this),P(this,rt,ip).call(this,c(this,hr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),P(this,rt,A1).call(this)):t&&(this._uiManager.addShouldRescale(this),P(this,rt,np).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Qe._mergeSVGProperties({bbox:P(this,rt,Ju).call(this)},c(this,hr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&P(this,rt,ip).call(this,c(this,hr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const s=document.createElement("div");return r.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,s,a){Et("Not implemented")}static startDrawing(t,n,r,s){var k;const{target:a,offsetX:u,offsetY:h,pointerId:d,pointerType:p}=s;if(Zn.isInitializedAndDifferentPointerType(p))return;const{viewport:{rotation:m}}=t,{width:y,height:v}=a.getBoundingClientRect(),E=b(Qe,Qc,new AbortController),A=t.combinedSignal(E);if(Zn.setPointer(p,d),window.addEventListener("pointerup",C=>{Zn.isSamePointerIdOrRemove(C.pointerId)&&this._endDraw(C)},{signal:A}),window.addEventListener("pointercancel",C=>{Zn.isSamePointerIdOrRemove(C.pointerId)&&this._currentParent.endDrawingSession()},{signal:A}),window.addEventListener("pointerdown",C=>{Zn.isSamePointerType(C.pointerType)&&(Zn.initializeAndAddPointerId(C.pointerId),c(Qe,_n).isCancellable()&&(c(Qe,_n).removeLastElement(),c(Qe,_n).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",$r,{signal:A}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),a.addEventListener("touchmove",C=>{Zn.isSameTimeStamp(C.timeStamp)&&Qt(C)},{signal:A}),t.toggleDrawing(),(k=n._editorUndoBar)==null||k.hide(),c(Qe,_n)){t.drawLayer.updateProperties(this._currentDrawId,c(Qe,_n).startNew(u,h,y,v,m));return}n.updateUIForDefaultProperties(this),b(Qe,_n,this.createDrawerInstance(u,h,y,v,m)),b(Qe,Jc,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(Qe,Jc).toSVGProperties(),c(Qe,_n).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Zn.isSameTimeStamp(t.timeStamp),!c(Qe,_n))return;const{offsetX:n,offsetY:r,pointerId:s}=t;if(Zn.isSamePointerId(s)){if(Zn.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(Qe,_n).add(n,r)),Zn.setTimeStamp(t.timeStamp),Qt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,b(Qe,_n,null),b(Qe,Jc,null),Zn.clearTimeStamp()),c(Qe,Qc)&&(c(Qe,Qc).abort(),b(Qe,Qc,null),Zn.clearPointerIds())}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,c(Qe,_n).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=c(Qe,_n),s=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:Je.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Je.DRAW_STEP),!c(Qe,_n).isEmpty()){const{pageDimensions:[r,s],scale:a}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(Qe,_n).getOutlines(r*a,s*a,a,this._INNER_MARGIN),drawingOptions:c(Qe,Jc),mustBeCommitted:!t});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,s,a,u){Et("Not implemented")}static async deserialize(t,n,r){var m,y;const{rawDims:{pageWidth:s,pageHeight:a,pageX:u,pageY:h}}=n.viewport,d=this.deserializeDraw(u,h,s,a,this._INNER_MARGIN,t),p=await super.deserialize(t,n,r);return p.createDrawingOptions(t),P(m=p,rt,S1).call(m,{drawOutlines:d}),P(y=p,rt,np).call(y),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[n,r]=this.pageTranslation,[s,a]=this.pageDimensions;return c(this,hr).serialize([n,r,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};hr=new WeakMap,Ed=new WeakMap,_n=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,rt=new WeakSet,S1=function({drawOutlines:t,drawId:n,drawingOptions:r}){b(this,hr,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=P(this,rt,E1).call(this,t,this.parent),P(this,rt,ip).call(this,t.box)},E1=function(t,n){const{id:r}=n.drawLayer.draw(Qe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},A1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},np=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=P(this,rt,E1).call(this,c(this,hr),t)}},hR=function([t,n,r,s]){const{parentDimensions:[a,u],rotation:h}=this;switch(h){case 90:return[n,1-t,r*(u/a),s*(a/u)];case 180:return[1-t,1-n,r,s];case 270:return[1-n,t,r*(u/a),s*(a/u)];default:return[t,n,r,s]}},_0=function(){const{x:t,y:n,width:r,height:s,parentDimensions:[a,u],rotation:h}=this;switch(h){case 90:return[1-n,t,r*(a/u),s*(u/a)];case 180:return[1-t,1-n,r,s];case 270:return[n,1-t,r*(a/u),s*(u/a)];default:return[t,n,r,s]}},ip=function(t){[this.x,this.y,this.width,this.height]=P(this,rt,hR).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Ju=function(){const{x:t,y:n,width:r,height:s,rotation:a,parentRotation:u,parentDimensions:[h,d]}=this;switch((a*4+u)/90){case 1:return[1-n-s,t,s,r];case 2:return[1-t-r,1-n-s,r,s];case 3:return[n,1-t-r,s,r];case 4:return[t,n-r*(h/d),s*(d/h),r*(h/d)];case 5:return[1-n,t,r*(h/d),s*(d/h)];case 6:return[1-t-s*(d/h),1-n,s*(d/h),r*(h/d)];case 7:return[n-r*(h/d),1-t-s*(d/h),r*(h/d),s*(d/h)];case 8:return[t-r,n-s,r,s];case 9:return[1-n,t-r,s,r];case 10:return[1-t,1-n,r,s];case 11:return[n-s,1-t,s,r];case 12:return[t-s*(d/h),n,s*(d/h),r*(h/d)];case 13:return[1-n-r*(h/d),t-s*(d/h),r*(h/d),s*(d/h)];case 14:return[1-t,1-n-r*(h/d),s*(d/h),r*(h/d)];case 15:return[n,1-t,r*(h/d),s*(d/h)];default:return[t,n,r,s]}},le(Qe,"_currentDrawId",-1),le(Qe,"_currentParent",null),_(Qe,_n,null),_(Qe,Qc,null),_(Qe,Jc,null),le(Qe,"_INNER_MARGIN",3);let J0=Qe;var Ws,Tn,Pn,Zc,Ad,hi,Vn,Br,eu,tu,nu,kd,T0;class cj{constructor(e,t,n,r,s,a){_(this,kd);_(this,Ws,new Float64Array(6));_(this,Tn);_(this,Pn);_(this,Zc);_(this,Ad);_(this,hi);_(this,Vn,"");_(this,Br,0);_(this,eu,new Sg);_(this,tu);_(this,nu);b(this,tu,n),b(this,nu,r),b(this,Zc,s),b(this,Ad,a),[e,t]=P(this,kd,T0).call(this,e,t);const u=b(this,Tn,[NaN,NaN,NaN,NaN,e,t]);b(this,hi,[e,t]),b(this,Pn,[{line:u,points:c(this,hi)}]),c(this,Ws).set(u,0)}updateProperty(e,t){e==="stroke-width"&&b(this,Ad,t)}isEmpty(){return!c(this,Pn)||c(this,Pn).length===0}isCancellable(){return c(this,hi).length<=10}add(e,t){[e,t]=P(this,kd,T0).call(this,e,t);const[n,r,s,a]=c(this,Ws).subarray(2,6),u=e-s,h=t-a;return Math.hypot(c(this,tu)*u,c(this,nu)*h)<=2?null:(c(this,hi).push(e,t),isNaN(n)?(c(this,Ws).set([s,a,e,t],2),c(this,Tn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Ws)[0])&&c(this,Tn).splice(6,6),c(this,Ws).set([n,r,s,a,e,t],0),c(this,Tn).push(...Ae.createBezierPoints(n,r,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(c(this,hi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,s){b(this,tu,n),b(this,nu,r),b(this,Zc,s),[e,t]=P(this,kd,T0).call(this,e,t);const a=b(this,Tn,[NaN,NaN,NaN,NaN,e,t]);b(this,hi,[e,t]);const u=c(this,Pn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),c(this,Pn).push({line:a,points:c(this,hi)}),c(this,Ws).set(a,0),b(this,Br,0),this.toSVGPath(),null}getLastElement(){return c(this,Pn).at(-1)}setLastElement(e){return c(this,Pn)?(c(this,Pn).push(e),b(this,Tn,e.line),b(this,hi,e.points),b(this,Br,0),{path:{d:this.toSVGPath()}}):c(this,eu).setLastElement(e)}removeLastElement(){if(!c(this,Pn))return c(this,eu).removeLastElement();c(this,Pn).pop(),b(this,Vn,"");for(let e=0,t=c(this,Pn).length;e<t;e++){const{line:n,points:r}=c(this,Pn)[e];b(this,Tn,n),b(this,hi,r),b(this,Br,0),this.toSVGPath()}return{path:{d:c(this,Vn)}}}toSVGPath(){const e=Ae.svgRound(c(this,Tn)[4]),t=Ae.svgRound(c(this,Tn)[5]);if(c(this,hi).length===2)return b(this,Vn,`${c(this,Vn)} M ${e} ${t} Z`),c(this,Vn);if(c(this,hi).length<=6){const r=c(this,Vn).lastIndexOf("M");b(this,Vn,`${c(this,Vn).slice(0,r)} M ${e} ${t}`),b(this,Br,6)}if(c(this,hi).length===4){const r=Ae.svgRound(c(this,Tn)[10]),s=Ae.svgRound(c(this,Tn)[11]);return b(this,Vn,`${c(this,Vn)} L ${r} ${s}`),b(this,Br,12),c(this,Vn)}const n=[];c(this,Br)===0&&(n.push(`M ${e} ${t}`),b(this,Br,6));for(let r=c(this,Br),s=c(this,Tn).length;r<s;r+=6){const[a,u,h,d,p,m]=c(this,Tn).slice(r,r+6).map(Ae.svgRound);n.push(`C${a} ${u} ${h} ${d} ${p} ${m}`)}return b(this,Vn,c(this,Vn)+n.join(" ")),b(this,Br,c(this,Tn).length),c(this,Vn)}getOutlines(e,t,n,r){const s=c(this,Pn).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),c(this,eu).build(c(this,Pn),e,t,n,c(this,Zc),c(this,Ad),r),b(this,Ws,null),b(this,Tn,null),b(this,Pn,null),b(this,Vn,null),c(this,eu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ws=new WeakMap,Tn=new WeakMap,Pn=new WeakMap,Zc=new WeakMap,Ad=new WeakMap,hi=new WeakMap,Vn=new WeakMap,Br=new WeakMap,eu=new WeakMap,tu=new WeakMap,nu=new WeakMap,kd=new WeakSet,T0=function(e,t){return Ae._normalizePoint(e,t,c(this,tu),c(this,nu),c(this,Zc))};var di,sg,og,dr,Gs,qs,Cd,_d,iu,Gn,po,dR,fR,pR;class Sg extends Ae{constructor(){super(...arguments);_(this,Gn);_(this,di);_(this,sg,0);_(this,og);_(this,dr);_(this,Gs);_(this,qs);_(this,Cd);_(this,_d);_(this,iu)}build(t,n,r,s,a,u,h){b(this,Gs,n),b(this,qs,r),b(this,Cd,s),b(this,_d,a),b(this,iu,u),b(this,og,h??0),b(this,dr,t),P(this,Gn,fR).call(this)}get thickness(){return c(this,iu)}setLastElement(t){return c(this,dr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,dr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of c(this,dr)){if(t.push(`M${Ae.svgRound(n[4])} ${Ae.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Ae.svgRound(n[10])} ${Ae.svgRound(n[11])}`);continue}for(let r=6,s=n.length;r<s;r+=6){const[a,u,h,d,p,m]=n.subarray(r,r+6).map(Ae.svgRound);t.push(`C${a} ${u} ${h} ${d} ${p} ${m}`)}}return t.join("")}serialize([t,n,r,s],a){const u=[],h=[],[d,p,m,y]=P(this,Gn,dR).call(this);let v,E,A,k,C,N,T,D,F;switch(c(this,_d)){case 0:F=Ae._rescale,v=t,E=n+s,A=r,k=-s,C=t+d*r,N=n+(1-p-y)*s,T=t+(d+m)*r,D=n+(1-p)*s;break;case 90:F=Ae._rescaleAndSwap,v=t,E=n,A=r,k=s,C=t+p*r,N=n+d*s,T=t+(p+y)*r,D=n+(d+m)*s;break;case 180:F=Ae._rescale,v=t+r,E=n,A=-r,k=s,C=t+(1-d-m)*r,N=n+p*s,T=t+(1-d)*r,D=n+(p+y)*s;break;case 270:F=Ae._rescaleAndSwap,v=t+r,E=n+s,A=-r,k=-s,C=t+(1-p-y)*r,N=n+(1-d-m)*s,T=t+(1-p)*r,D=n+(1-d)*s;break}for(const{line:L,points:j}of c(this,dr))u.push(F(L,v,E,A,k,a?new Array(L.length):null)),h.push(F(j,v,E,A,k,a?new Array(j.length):null));return{lines:u,points:h,rect:[C,N,T,D]}}static deserialize(t,n,r,s,a,{paths:{lines:u,points:h},rotation:d,thickness:p}){const m=[];let y,v,E,A,k;switch(d){case 0:k=Ae._rescale,y=-t/r,v=n/s+1,E=1/r,A=-1/s;break;case 90:k=Ae._rescaleAndSwap,y=-n/s,v=-t/r,E=1/s,A=1/r;break;case 180:k=Ae._rescale,y=t/r+1,v=-n/s,E=-1/r,A=1/s;break;case 270:k=Ae._rescaleAndSwap,y=n/s+1,v=t/r+1,E=-1/s,A=-1/r;break}if(!u){u=[];for(const N of h){const T=N.length;if(T===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1]]));continue}if(T===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1],NaN,NaN,NaN,NaN,N[2],N[3]]));continue}const D=new Float32Array(3*(T-2));u.push(D);let[F,L,j,G]=N.subarray(0,4);D.set([NaN,NaN,NaN,NaN,F,L],0);for(let K=4;K<T;K+=2){const ee=N[K],q=N[K+1];D.set(Ae.createBezierPoints(F,L,j,G,ee,q),(K-2)*3),[F,L,j,G]=[j,G,ee,q]}}}for(let N=0,T=u.length;N<T;N++)m.push({line:k(u[N].map(D=>D??NaN),y,v,E,A),points:k(h[N].map(D=>D??NaN),y,v,E,A)});const C=new this.prototype.constructor;return C.build(m,r,s,1,d,p,a),C}get box(){return c(this,di)}updateProperty(t,n){return t==="stroke-width"?P(this,Gn,pR).call(this,n):null}updateParentDimensions([t,n],r){const[s,a]=P(this,Gn,po).call(this);b(this,Gs,t),b(this,qs,n),b(this,Cd,r);const[u,h]=P(this,Gn,po).call(this),d=u-s,p=h-a,m=c(this,di);return m[0]-=d,m[1]-=p,m[2]+=2*d,m[3]+=2*p,m}updateRotation(t){return b(this,sg,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,di).map(Ae.svgRound).join(" ")}get defaultProperties(){const[t,n]=c(this,di);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=c(this,di);let r=0,s=0,a=0,u=0,h=0,d=0;switch(c(this,sg)){case 90:s=n/t,a=-t/n,h=t;break;case 180:r=-1,u=-1,h=t,d=n;break;case 270:s=-n/t,a=t/n,d=n;break;default:return""}return`matrix(${r} ${s} ${a} ${u} ${Ae.svgRound(h)} ${Ae.svgRound(d)})`}getPathResizingSVGProperties([t,n,r,s]){const[a,u]=P(this,Gn,po).call(this),[h,d,p,m]=c(this,di);if(Math.abs(p-a)<=Ae.PRECISION||Math.abs(m-u)<=Ae.PRECISION){const k=t+r/2-(h+p/2),C=n+s/2-(d+m/2);return{path:{"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(n)}`,transform:`${this.rotationTransform} translate(${k} ${C})`}}}const y=(r-2*a)/(p-2*a),v=(s-2*u)/(m-2*u),E=p/r,A=m/s;return{path:{"transform-origin":`${Ae.svgRound(h)} ${Ae.svgRound(d)}`,transform:`${this.rotationTransform} scale(${E} ${A}) translate(${Ae.svgRound(a)} ${Ae.svgRound(u)}) scale(${y} ${v}) translate(${Ae.svgRound(-a)} ${Ae.svgRound(-u)})`}}}getPathResizedSVGProperties([t,n,r,s]){const[a,u]=P(this,Gn,po).call(this),h=c(this,di),[d,p,m,y]=h;if(h[0]=t,h[1]=n,h[2]=r,h[3]=s,Math.abs(m-a)<=Ae.PRECISION||Math.abs(y-u)<=Ae.PRECISION){const C=t+r/2-(d+m/2),N=n+s/2-(p+y/2);for(const{line:T,points:D}of c(this,dr))Ae._translate(T,C,N,T),Ae._translate(D,C,N,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(r-2*a)/(m-2*a),E=(s-2*u)/(y-2*u),A=-v*(d+a)+t+a,k=-E*(p+u)+n+u;if(v!==1||E!==1||A!==0||k!==0)for(const{line:C,points:N}of c(this,dr))Ae._rescale(C,A,k,v,E,C),Ae._rescale(N,A,k,v,E,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[s,a]=r,u=c(this,di),h=t-u[0],d=n-u[1];if(c(this,Gs)===s&&c(this,qs)===a)for(const{line:p,points:m}of c(this,dr))Ae._translate(p,h,d,p),Ae._translate(m,h,d,m);else{const p=c(this,Gs)/s,m=c(this,qs)/a;b(this,Gs,s),b(this,qs,a);for(const{line:y,points:v}of c(this,dr))Ae._rescale(y,h,d,p,m,y),Ae._rescale(v,h,d,p,m,v);u[2]*=p,u[3]*=m}return u[0]=t,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(n)}`}}}get defaultSVGProperties(){const t=c(this,di);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ae.svgRound(t[0])} ${Ae.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}di=new WeakMap,sg=new WeakMap,og=new WeakMap,dr=new WeakMap,Gs=new WeakMap,qs=new WeakMap,Cd=new WeakMap,_d=new WeakMap,iu=new WeakMap,Gn=new WeakSet,po=function(t=c(this,iu)){const n=c(this,og)+t/2*c(this,Cd);return c(this,_d)%180===0?[n/c(this,Gs),n/c(this,qs)]:[n/c(this,qs),n/c(this,Gs)]},dR=function(){const[t,n,r,s]=c(this,di),[a,u]=P(this,Gn,po).call(this,0);return[t+a,n+u,r-2*a,s-2*u]},fR=function(){const t=b(this,di,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of c(this,dr)){if(s.length<=12){for(let h=4,d=s.length;h<d;h+=6)we.pointBoundingBox(s[h],s[h+1],t);continue}let a=s[4],u=s[5];for(let h=6,d=s.length;h<d;h+=6){const[p,m,y,v,E,A]=s.subarray(h,h+6);we.bezierBoundingBox(a,u,p,m,y,v,E,A,t),a=E,u=A}}const[n,r]=P(this,Gn,po).call(this);t[0]=mi(t[0]-n,0,1),t[1]=mi(t[1]-r,0,1),t[2]=mi(t[2]+n,0,1),t[3]=mi(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},pR=function(t){const[n,r]=P(this,Gn,po).call(this);b(this,iu,t);const[s,a]=P(this,Gn,po).call(this),[u,h]=[s-n,a-r],d=c(this,di);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d};class Iv extends uR{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Tt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Iv(this._viewParameters);return e.updateAll(this),e}}var xv,mR;const rh=class rh extends J0{constructor(t){super({...t,name:"inkEditor"});_(this,xv);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){Tt.initialize(t,n),this._defaultDrawingOptions=new Iv(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return ze(this,"typesMap",new Map([[Je.INK_THICKNESS,"stroke-width"],[Je.INK_COLOR,"stroke"],[Je.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,s,a){return new cj(t,n,r,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,s,a,u){return Sg.deserialize(t,n,r,s,a,u)}static async deserialize(t,n,r){let s=null;if(t instanceof gS){const{data:{inkLists:u,rect:h,rotation:d,id:p,color:m,opacity:y,borderStyle:{rawWidth:v},popupRef:E,richText:A,contentsObj:k,creationDate:C,modificationDate:N},parent:{page:{pageNumber:T}}}=t;s=t={annotationType:He.INK,color:Array.from(m),thickness:v,opacity:y,paths:{points:u},boxes:null,pageIndex:T-1,rect:h.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:E,richText:A,comment:(k==null?void 0:k.str)||null,creationDate:C,modificationDate:N}}const a=await super.deserialize(t,n,r);return a._initialData=s,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new X0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Je.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=rh.getDefaultDrawingOptions({stroke:we.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":u}}=this,h=Object.assign(super.serialize(t),{color:Tt._colorManager.convert(s),opacity:a,thickness:u,paths:{lines:n,points:r}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!P(this,xv,mR).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};xv=new WeakSet,mR=function(t){const{color:n,thickness:r,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((u,h)=>u!==n[h])||t.thickness!==r||t.opacity!==s||t.pageIndex!==a},le(rh,"_type","ink"),le(rh,"_editorType",He.INK),le(rh,"_defaultDrawingOptions",null);let k1=rh;class C1 extends Sg{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Wy=8,If=3;var ru,ct,_1,cs,gR,yR,T1,P0,vR,xR,wR,P1,R1,bR;class Qo{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},s,a,u,h){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const m=200,y=p.font=`${n} ${r} ${m}px ${t}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:E,actualBoundingBoxAscent:A,actualBoundingBoxDescent:k,fontBoundingBoxAscent:C,fontBoundingBoxDescent:N,width:T}=p.measureText(e),D=1.5,F=Math.ceil(Math.max(Math.abs(v)+Math.abs(E)||0,T)*D),L=Math.ceil(Math.max(Math.abs(A)+Math.abs(k)||m,Math.abs(C)+Math.abs(N)||m)*D);d=new OffscreenCanvas(F,L),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,F,L),p.fillStyle="black",p.fillText(e,F*(D-1)/2,L*(3-D)/2);const j=P(this,ct,P1).call(this,p.getImageData(0,0,F,L).data),G=P(this,ct,wR).call(this,j),K=P(this,ct,R1).call(this,G),ee=P(this,ct,T1).call(this,j,F,L,K);return this.processDrawnLines({lines:{curves:ee,width:F,height:L},pageWidth:s,pageHeight:a,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,s){const[a,u,h]=P(this,ct,bR).call(this,e),[d,p]=P(this,ct,xR).call(this,a,u,h,Math.hypot(u,h)*c(this,ru).sigmaSFactor,c(this,ru).sigmaR,c(this,ru).kernelSize),m=P(this,ct,R1).call(this,p),y=P(this,ct,T1).call(this,d,u,h,m);return this.processDrawnLines({lines:{curves:y,width:u,height:h},pageWidth:t,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:a,areContours:u}){r%180!==0&&([t,n]=[n,t]);const{curves:h,width:d,height:p}=e,m=e.thickness??0,y=[],v=Math.min(t/d,n/p),E=v/t,A=v/n,k=[];for(const{points:N}of h){const T=a?P(this,ct,vR).call(this,N):N;if(!T)continue;k.push(T);const D=T.length,F=new Float32Array(D),L=new Float32Array(3*(D===2?2:D-2));if(y.push({line:L,points:F}),D===2){F[0]=T[0]*E,F[1]=T[1]*A,L.set([NaN,NaN,NaN,NaN,F[0],F[1]],0);continue}let[j,G,K,ee]=T;j*=E,G*=A,K*=E,ee*=A,F.set([j,G,K,ee],0),L.set([NaN,NaN,NaN,NaN,j,G],0);for(let q=4;q<D;q+=2){const re=F[q]=T[q]*E,ue=F[q+1]=T[q+1]*A;L.set(Ae.createBezierPoints(j,G,K,ee,re,ue),(q-2)*3),[j,G,K,ee]=[K,ee,re,ue]}}if(y.length===0)return null;const C=u?new C1:new Sg;return C.build(y,t,n,1,r,u?0:m,s),{outline:C,newCurves:k,areContours:u,thickness:m,width:d,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:s}){let a=1/0,u=-1/0,h=0;for(const T of e){h+=T.length;for(let D=2,F=T.length;D<F;D++){const L=T[D]-T[D-2];a=Math.min(a,L),u=Math.max(u,L)}}let d;a>=-128&&u<=127?d=Int8Array:a>=-32768&&u<=32767?d=Int16Array:d=Int32Array;const p=e.length,m=Wy+If*p,y=new Uint32Array(m);let v=0;y[v++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*d.BYTES_PER_ELEMENT,y[v++]=0,y[v++]=r,y[v++]=s,y[v++]=t?0:1,y[v++]=Math.max(0,Math.floor(n??0)),y[v++]=p,y[v++]=d.BYTES_PER_ELEMENT;for(const T of e)y[v++]=T.length-2,y[v++]=T[0],y[v++]=T[1];const E=new CompressionStream("deflate-raw"),A=E.writable.getWriter();await A.ready,A.write(y);const k=d.prototype.constructor;for(const T of e){const D=new k(T.length-2);for(let F=2,L=T.length;F<L;F++)D[F-2]=T[F]-T[F-2];A.write(D)}A.close();const C=await new Response(E.readable).arrayBuffer(),N=new Uint8Array(C);return wT(N)}static async decompressSignature(e){try{const t=AF(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),s=r.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,u=0;for await(const T of n)a||(a=new Uint8Array(new Uint32Array(T.buffer,0,4)[0])),a.set(T,u),u+=T.length;const h=new Uint32Array(a.buffer,0,a.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=h[2],m=h[3],y=h[4]===0,v=h[5],E=h[6],A=h[7],k=[],C=(Wy+If*E)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(A){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(a.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(a.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(a.buffer,C);break}u=0;for(let T=0;T<E;T++){const D=h[If*T+Wy],F=new Float32Array(D+2);k.push(F);for(let L=0;L<If-1;L++)F[L]=h[If*T+Wy+L+1];for(let L=0;L<D;L++)F[L+2]=F[L]+N[u++]}return{areContours:y,thickness:v,outlines:k,width:p,height:m}}catch(t){return Be(`decompressSignature: ${t}`),null}}}ru=new WeakMap,ct=new WeakSet,_1=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},cs=new WeakMap,gR=function(e,t,n,r,s,a,u){const h=P(this,ct,_1).call(this,n,r,s,a);for(let d=0;d<8;d++){const p=(-d+h-u+16)%8,m=c(this,cs)[2*p],y=c(this,cs)[2*p+1];if(e[(n+m)*t+(r+y)]!==0)return p}return-1},yR=function(e,t,n,r,s,a,u){const h=P(this,ct,_1).call(this,n,r,s,a);for(let d=0;d<8;d++){const p=(d+h+u+16)%8,m=c(this,cs)[2*p],y=c(this,cs)[2*p+1];if(e[(n+m)*t+(r+y)]!==0)return p}return-1},T1=function(e,t,n,r){const s=e.length,a=new Int32Array(s);for(let p=0;p<s;p++)a[p]=e[p]<=r?1:0;for(let p=1;p<n-1;p++)a[p*t]=a[p*t+t-1]=0;for(let p=0;p<t;p++)a[p]=a[t*n-1-p]=0;let u=1,h;const d=[];for(let p=1;p<n-1;p++){h=1;for(let m=1;m<t-1;m++){const y=p*t+m,v=a[y];if(v===0)continue;let E=p,A=m;if(v===1&&a[y-1]===0)u+=1,A-=1;else if(v>=1&&a[y+1]===0)u+=1,A+=1,v>1&&(h=v);else{v!==1&&(h=Math.abs(v));continue}const k=[m,p],C=A===m+1,N={isHole:C,points:k,id:u,parent:0};d.push(N);let T;for(const q of d)if(q.id===h){T=q;break}T?T.isHole?N.parent=C?T.parent:h:N.parent=C?h:T.parent:N.parent=C?h:0;const D=P(this,ct,gR).call(this,a,t,p,m,E,A,0);if(D===-1){a[y]=-u,a[y]!==1&&(h=Math.abs(a[y]));continue}let F=c(this,cs)[2*D],L=c(this,cs)[2*D+1];const j=p+F,G=m+L;E=j,A=G;let K=p,ee=m;for(;;){const q=P(this,ct,yR).call(this,a,t,K,ee,E,A,1);F=c(this,cs)[2*q],L=c(this,cs)[2*q+1];const re=K+F,ue=ee+L;k.push(ue,re);const ie=K*t+ee;if(a[ie+1]===0?a[ie]=-u:a[ie]===1&&(a[ie]=u),re===p&&ue===m&&K===j&&ee===G){a[y]!==1&&(h=Math.abs(a[y]));break}else E=K,A=ee,K=re,ee=ue}}}return d},P0=function(e,t,n,r){if(n-t<=4){for(let j=t;j<n-2;j+=2)r.push(e[j],e[j+1]);return}const s=e[t],a=e[t+1],u=e[n-4]-s,h=e[n-3]-a,d=Math.hypot(u,h),p=u/d,m=h/d,y=p*a-m*s,v=h/u,E=1/d,A=Math.atan(v),k=Math.cos(A),C=Math.sin(A),N=E*(Math.abs(k)+Math.abs(C)),T=E*(1-N+N**2),D=Math.max(Math.atan(Math.abs(C+k)*T),Math.atan(Math.abs(C-k)*T));let F=0,L=t;for(let j=t+2;j<n-2;j+=2){const G=Math.abs(y-p*e[j+1]+m*e[j]);G>F&&(L=j,F=G)}F>(d*D)**2?(P(this,ct,P0).call(this,e,t,L+2,r),P(this,ct,P0).call(this,e,L,n,r)):r.push(s,a)},vR=function(e){const t=[],n=e.length;return P(this,ct,P0).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},xR=function(e,t,n,r,s,a){const u=new Float32Array(a**2),h=-2*r**2,d=a>>1;for(let A=0;A<a;A++){const k=(A-d)**2;for(let C=0;C<a;C++)u[A*a+C]=Math.exp((k+(C-d)**2)/h)}const p=new Float32Array(256),m=-2*s**2;for(let A=0;A<256;A++)p[A]=Math.exp(A**2/m);const y=e.length,v=new Uint8Array(y),E=new Uint32Array(256);for(let A=0;A<n;A++)for(let k=0;k<t;k++){const C=A*t+k,N=e[C];let T=0,D=0;for(let L=0;L<a;L++){const j=A+L-d;if(!(j<0||j>=n))for(let G=0;G<a;G++){const K=k+G-d;if(K<0||K>=t)continue;const ee=e[j*t+K],q=u[L*a+G]*p[Math.abs(ee-N)];T+=ee*q,D+=q}}const F=v[C]=Math.round(T/D);E[F]++}return[v,E]},wR=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},P1=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,s=1/0;for(let u=0,h=n.length;u<h;u++){const d=n[u]=e[u<<2];r=Math.max(r,d),s=Math.min(s,d)}const a=255/(r-s);for(let u=0,h=n.length;u<h;u++)n[u]=(n[u]-s)*a;return n},R1=function(e){let t,n=-1/0,r=-1/0;const s=e.findIndex(h=>h!==0);let a=s,u=s;for(t=s;t<256;t++){const h=e[t];h>n&&(t-a>r&&(r=t-a,u=t-1),n=h,a=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t},bR=function(e){const t=e,{width:n,height:r}=e,{maxDim:s}=c(this,ru);let a=n,u=r;if(n>s||r>s){let y=n,v=r,E=Math.log2(Math.max(n,r)/s);const A=Math.floor(E);E=E===A?A-1:A;for(let C=0;C<E;C++){a=Math.ceil(y/2),u=Math.ceil(v/2);const N=new OffscreenCanvas(a,u);N.getContext("2d").drawImage(e,0,0,y,v,0,0,a,u),y=a,v=u,e!==t&&e.close(),e=N.transferToImageBitmap()}const k=Math.min(s/a,s/u);a=Math.round(a*k),u=Math.round(u*k)}const d=new OffscreenCanvas(a,u).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,a,u),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,a,u);const p=d.getImageData(0,0,a,u).data;return[P(this,ct,P1).call(this,p),a,u]},_(Qo,ct),_(Qo,ru,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),_(Qo,cs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class yS extends uR{constructor(){super(),super.updateProperties({fill:Tt._defaultLineColor,"stroke-width":0})}clone(){const e=new yS;return e.updateAll(this),e}}class vS extends Iv{constructor(e){super(e),super.updateProperties({stroke:Tt._defaultLineColor,"stroke-width":1})}clone(){const e=new vS(this._viewParameters);return e.updateAll(this),e}}var dl,Xs,fl,su;const Xi=class Xi extends J0{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});_(this,dl,!1);_(this,Xs,null);_(this,fl,null);_(this,su,null);this._willKeepAspectRatio=!0,b(this,fl,t.signatureData||null),b(this,Xs,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){Tt.initialize(t,n),this._defaultDrawingOptions=new yS,this._defaultDrawnSignatureOptions=new vS(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return ze(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,Xs)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(c(this,fl)){const{lines:s,mustSmooth:a,areContours:u,description:h,uuid:d,heightInPage:p}=c(this,fl),{rawDims:{pageWidth:m,pageHeight:y},rotation:v}=this.parent.viewport,E=Qo.processDrawnLines({lines:s,pageWidth:m,pageHeight:y,rotation:v,innerMargin:Xi._INNER_MARGIN,mustSmooth:a,areContours:u});this.addSignature(E,p,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,Xs)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){b(this,su,t),this.addEditToolbar()}getUuid(){return c(this,su)}get description(){return c(this,Xs)}set description(t){b(this,Xs,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:s,height:a}=c(this,fl),u=Math.max(s,a),h=Qo.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:r,width:s,height:a},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,s){const{x:a,y:u}=this,{outline:h}=b(this,fl,t);b(this,dl,h instanceof C1),this.description=r;let d;c(this,dl)?d=Xi.getDefaultDrawingOptions():(d=Xi._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[,p]=this.pageDimensions;let m=n/p;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=a,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Qo.process(t,n,r,s,Xi._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:s},rotation:a}=this.parent.viewport;return Qo.extractContoursFromText(t,n,r,s,a,Xi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Qo.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:s,innerMargin:Xi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Xi.getDefaultDrawingOptions():(this._drawingOptions=Xi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:c(this,dl),color:[0,0,0],thickness:c(this,dl)?0:s});return this.addComment(a),t?(a.paths={lines:n,points:r},a.uuid=c(this,su),a.isCopy=!0):a.lines=n,c(this,Xs)&&(a.accessibilityData={type:"Figure",alt:c(this,Xs)}),a}static deserializeDraw(t,n,r,s,a,u){return u.areContours?C1.deserialize(t,n,r,s,a,u):Sg.deserialize(t,n,r,s,a,u)}static async deserialize(t,n,r){var a;const s=await super.deserialize(t,n,r);return b(s,dl,t.areContours),s.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",b(s,su,t.uuid),s}};dl=new WeakMap,Xs=new WeakMap,fl=new WeakMap,su=new WeakMap,le(Xi,"_type","signature"),le(Xi,"_editorType",He.SIGNATURE),le(Xi,"_defaultDrawingOptions",null);let N1=Xi;var Ot,Rn,pl,Go,ml,Td,qo,ou,Ks,fr,Pd,st,rp,sp,R0,N0,L0,D1,D0,SR;class L1 extends Tt{constructor(t){super({...t,name:"stampEditor"});_(this,st);_(this,Ot,null);_(this,Rn,null);_(this,pl,null);_(this,Go,null);_(this,ml,null);_(this,Td,"");_(this,qo,null);_(this,ou,!1);_(this,Ks,null);_(this,fr,!1);_(this,Pd,!1);b(this,Go,t.bitmapUrl),b(this,ml,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){Tt.initialize(t,n)}static isHandlingMimeForPasting(t){return yb.includes(t)}static paste(t,n){n.pasteEditor({mode:He.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:u}=t||this.copyCanvas(null,null,!0).imageData,h=await r.guess({name:"altText",request:{data:s,width:a,height:u,channels:s.length/(a*u)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;c(this,Rn)&&(b(this,Ot,null),this._uiManager.imageManager.deleteId(c(this,Rn)),(t=c(this,qo))==null||t.remove(),b(this,qo,null),c(this,Ks)&&(clearTimeout(c(this,Ks)),b(this,Ks,null))),super.remove()}rebuild(){if(!this.parent){c(this,Rn)&&P(this,st,R0).call(this);return}super.rebuild(),this.div!==null&&(c(this,Rn)&&c(this,qo)===null&&P(this,st,R0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,pl)||c(this,Ot)||c(this,Go)||c(this,ml)||c(this,Rn)||c(this,ou))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,ou)||(c(this,Ot)?P(this,st,N0).call(this):P(this,st,R0).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(b(this,Rn,r),s&&b(this,Ot,s),b(this,ou,!1),P(this,st,N0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Ks)!==null&&clearTimeout(c(this,Ks)),b(this,Ks,setTimeout(()=>{b(this,Ks,null),P(this,st,D1).call(this)},200))}copyCanvas(t,n,r=!1){t||(t=224);const{width:s,height:a}=c(this,Ot),u=new Zs;let h=c(this,Ot),d=s,p=a,m=null;if(n){if(s>n||a>n){const j=Math.min(n/s,n/a);d=Math.floor(s*j),p=Math.floor(a*j)}m=document.createElement("canvas");const v=m.width=Math.ceil(d*u.sx),E=m.height=Math.ceil(p*u.sy);c(this,fr)||(h=P(this,st,L0).call(this,v,E));const A=m.getContext("2d");A.filter=this._uiManager.hcmFilter;let k="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":RF.isDarkMode&&(k="#8f8f9d",C="#42414d");const N=15,T=N*u.sx,D=N*u.sy,F=new OffscreenCanvas(T*2,D*2),L=F.getContext("2d");L.fillStyle=k,L.fillRect(0,0,T*2,D*2),L.fillStyle=C,L.fillRect(0,0,T,D),L.fillRect(T,D,T,D),A.fillStyle=A.createPattern(F,"repeat"),A.fillRect(0,0,v,E),A.drawImage(h,0,0,h.width,h.height,0,0,v,E)}let y=null;if(r){let v,E;if(u.symmetric&&h.width<t&&h.height<t)v=h.width,E=h.height;else if(h=c(this,Ot),s>t||a>t){const C=Math.min(t/s,t/a);v=Math.floor(s*C),E=Math.floor(a*C),c(this,fr)||(h=P(this,st,L0).call(this,v,E))}const k=new OffscreenCanvas(v,E).getContext("2d",{willReadFrequently:!0});k.drawImage(h,0,0,h.width,h.height,0,0,v,E),y={width:v,height:E,data:k.getImageData(0,0,v,E).data}}return{canvas:m,width:d,height:p,imageData:y}}static async deserialize(t,n,r){var k;let s=null,a=!1;if(t instanceof jP){const{data:{rect:C,rotation:N,id:T,structParent:D,popupRef:F,richText:L,contentsObj:j,creationDate:G,modificationDate:K},container:ee,parent:{page:{pageNumber:q}},canvas:re}=t;let ue,ie;re?(delete t.canvas,{id:ue,bitmap:ie}=r.imageManager.getFromCanvas(ee.id,re),re.remove()):(a=!0,t._hasNoCanvas=!0);const Z=((k=await n._structTree.getAriaAttributes(`${Zu}${T}`))==null?void 0:k.get("aria-label"))||"";s=t={annotationType:He.STAMP,bitmapId:ue,bitmap:ie,pageIndex:q-1,rect:C.slice(0),rotation:N,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:Z},isSvg:!1,structParent:D,popupRef:F,richText:L,comment:(j==null?void 0:j.str)||null,creationDate:G,modificationDate:K}}const u=await super.deserialize(t,n,r),{rect:h,bitmap:d,bitmapUrl:p,bitmapId:m,isSvg:y,accessibilityData:v}=t;a?(r.addMissingCanvas(t.id,u),b(u,ou,!0)):m&&r.imageManager.isValidId(m)?(b(u,Rn,m),d&&b(u,Ot,d)):b(u,Go,p),b(u,fr,y);const[E,A]=u.pageDimensions;return u.width=(h[2]-h[0])/E,u.height=(h[3]-h[1])/A,v&&(u.altTextData=v),u._initialData=s,t.comment&&u.setCommentData(t),b(u,Pd,!!s),u}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:c(this,Rn),isSvg:c(this,fr)});if(this.addComment(r),t)return r.bitmapUrl=P(this,st,D0).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const h=P(this,st,SR).call(this,r);return h.isSame?null:(h.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const u=c(this,fr)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(c(this,Rn)))n.stamps.set(c(this,Rn),{area:u,serialized:r}),r.bitmap=P(this,st,D0).call(this,!1);else if(c(this,fr)){const h=n.stamps.get(c(this,Rn));u>h.area&&(h.area=u,h.serialized.bitmap.close(),h.serialized.bitmap=P(this,st,D0).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Ot=new WeakMap,Rn=new WeakMap,pl=new WeakMap,Go=new WeakMap,ml=new WeakMap,Td=new WeakMap,qo=new WeakMap,ou=new WeakMap,Ks=new WeakMap,fr=new WeakMap,Pd=new WeakMap,st=new WeakSet,rp=function(t,n=!1){if(!t){this.remove();return}b(this,Ot,t.bitmap),n||(b(this,Rn,t.id),b(this,fr,t.isSvg)),t.file&&b(this,Td,t.file.name),P(this,st,N0).call(this)},sp=function(){if(b(this,pl,null),this._uiManager.enableWaiting(!1),!!c(this,qo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ot)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ot)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},R0=function(){if(c(this,Rn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Rn)).then(r=>P(this,st,rp).call(this,r,!0)).finally(()=>P(this,st,sp).call(this));return}if(c(this,Go)){const r=c(this,Go);b(this,Go,null),this._uiManager.enableWaiting(!0),b(this,pl,this._uiManager.imageManager.getFromUrl(r).then(s=>P(this,st,rp).call(this,s)).finally(()=>P(this,st,sp).call(this)));return}if(c(this,ml)){const r=c(this,ml);b(this,ml,null),this._uiManager.enableWaiting(!0),b(this,pl,this._uiManager.imageManager.getFromFile(r).then(s=>P(this,st,rp).call(this,s)).finally(()=>P(this,st,sp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=yb.join(",");const n=this._uiManager._signal;b(this,pl,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),P(this,st,rp).call(this,s)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>P(this,st,sp).call(this))),t.click()},N0=function(){var d;const{div:t}=this;let{width:n,height:r}=c(this,Ot);const[s,a]=this.pageDimensions,u=.75;if(this.width)n=this.width*s,r=this.height*a;else if(n>u*s||r>u*a){const p=Math.min(u*s/n,u*a/r);n*=p,r*=p}this._uiManager.enableWaiting(!1);const h=b(this,qo,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/s,this.height=r/a,this.setDims(),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),P(this,st,D1).call(this),c(this,Pd)||(this.parent.addUndoableEditor(this),b(this,Pd,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Td)&&this.div.setAttribute("aria-description",c(this,Td)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},L0=function(t,n){const{width:r,height:s}=c(this,Ot);let a=r,u=s,h=c(this,Ot);for(;a>2*t||u>2*n;){const d=a,p=u;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const m=new OffscreenCanvas(a,u);m.getContext("2d").drawImage(h,0,0,d,p,0,0,a,u),h=m.transferToImageBitmap()}return h},D1=function(){const[t,n]=this.parentDimensions,{width:r,height:s}=this,a=new Zs,u=Math.ceil(r*t*a.sx),h=Math.ceil(s*n*a.sy),d=c(this,qo);if(!d||d.width===u&&d.height===h)return;d.width=u,d.height=h;const p=c(this,fr)?c(this,Ot):P(this,st,L0).call(this,u,h),m=d.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(p,0,0,p.width,p.height,0,0,u,h)},D0=function(t){if(t){if(c(this,fr)){const s=this._uiManager.imageManager.getSvgUrl(c(this,Rn));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,Ot),n.getContext("2d").drawImage(c(this,Ot),0,0),n.toDataURL()}if(c(this,fr)){const[n,r]=this.pageDimensions,s=Math.round(this.width*n*Sl.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Sl.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(s,a);return u.getContext("2d").drawImage(c(this,Ot),0,0,c(this,Ot).width,c(this,Ot).height,0,0,s,a),u.transferToImageBitmap()}return structuredClone(c(this,Ot))},SR=function(t){var u;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,s=t.pageIndex===n,a=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},le(L1,"_type","stamp"),le(L1,"_editorType",He.STAMP);var au,Rd,gl,yl,Xo,Ii,vl,Nd,Ld,us,Ko,Nn,Yo,xl,Dd,Te,wl,St,M1,ER,Cs,F1,O1,I0;const Zr=class Zr{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:u,textLayer:h,viewport:d,l10n:p}){_(this,St);_(this,au);_(this,Rd,!1);_(this,gl,null);_(this,yl,null);_(this,Xo,null);_(this,Ii,new Map);_(this,vl,!1);_(this,Nd,!1);_(this,Ld,!1);_(this,us,null);_(this,Ko,null);_(this,Nn,null);_(this,Yo,null);_(this,xl,null);_(this,Dd,-1);_(this,Te);const m=[...c(Zr,wl).values()];if(!Zr._initialized){Zr._initialized=!0;for(const y of m)y.initialize(p,e)}e.registerEditorTypes(m),b(this,Te,e),this.pageIndex=t,this.div=n,b(this,au,s),b(this,gl,a),this.viewport=d,b(this,Nn,h),this.drawLayer=u,this._structTree=r,c(this,Te).addLayer(this)}get isEmpty(){return c(this,Ii).size===0}get isInvisible(){return this.isEmpty&&c(this,Te).getMode()===He.NONE}updateToolbar(e){c(this,Te).updateToolbar(e)}updateMode(e=c(this,Te).getMode()){switch(P(this,St,I0).call(this),e){case He.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case He.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case He.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===He.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of c(Zr,wl).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,Nn))==null?void 0:t.div)}setEditingState(e){c(this,Te).setEditingState(e)}addCommands(e){c(this,Te).addCommands(e)}cleanUndoStack(e){c(this,Te).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,gl))==null||t.togglePointerEvents(e)}async enable(){var n;b(this,Ld,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=c(this,xl))==null||n.abort(),b(this,xl,null);const e=new Set;for(const r of c(this,St,M1))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,Te).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=c(this,gl);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),c(this,Te).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}b(this,Ld,!1),c(this,Te)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(b(this,Nd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,Nn)&&!c(this,xl)){b(this,xl,new AbortController);const s=c(this,Te).combinedSignal(c(this,xl));c(this,Nn).div.addEventListener("pointerdown",a=>{const{clientX:h,clientY:d,timeStamp:p}=a,m=c(this,Dd);if(p-m>500){b(this,Dd,p);return}b(this,Dd,-1);const{classList:y}=this.div;y.toggle("getElements",!0);const v=document.elementsFromPoint(h,d);if(y.toggle("getElements",!1),!this.div.contains(v[0]))return;let E;const A=new RegExp(`^${dp}[0-9]+$`);for(const C of v)if(A.test(C.id)){E=C.id;break}if(!E)return;const k=c(this,Ii).get(E);(k==null?void 0:k.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),k.dblclick(a))},{signal:s,capture:!0})}const e=c(this,gl),t=[];if(e){const s=new Map,a=new Map;for(const h of c(this,St,M1)){if(h.disableEditing(),!h.annotationElementId){t.push(h);continue}if(h.serialize()!==null){s.set(h.annotationElementId,h);continue}else a.set(h.annotationElementId,h);(r=this.getEditableAnnotation(h.annotationElementId))==null||r.show(),h.remove()}const u=e.getEditableAnnotations();for(const h of u){const{id:d}=h.data;if(c(this,Te).isDeletedAnnotationElement(d)){h.updateEdited({deleted:!0});continue}let p=a.get(d);if(p){p.resetAnnotationElement(h),p.show(!1),h.show();continue}p=s.get(d),p&&(c(this,Te).addChangedExistingAnnotation(p),p.renderAnnotationElement(h)&&p.show(!1)),h.show()}}P(this,St,I0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of c(Zr,wl).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),b(this,Nd,!1)}getEditableAnnotation(e){var t;return((t=c(this,gl))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,Te).getActive()!==e&&c(this,Te).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,Nn))!=null&&e.div&&!c(this,Yo)){b(this,Yo,new AbortController);const t=c(this,Te).combinedSignal(c(this,Yo));c(this,Nn).div.addEventListener("pointerdown",P(this,St,ER).bind(this),{signal:t}),c(this,Nn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,Nn))!=null&&e.div&&c(this,Yo)&&(c(this,Yo).abort(),b(this,Yo,null),c(this,Nn).div.classList.remove("highlighting"))}enableClick(){if(c(this,yl))return;b(this,yl,new AbortController);const e=c(this,Te).combinedSignal(c(this,yl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,yl))==null||e.abort(),b(this,yl,null)}attach(e){c(this,Ii).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,Te).isDeletedAnnotationElement(t)&&c(this,Te).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,Ii).delete(e.id),(t=c(this,au))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,Nd)&&e.annotationElementId&&c(this,Te).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,Te).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,Te).addDeletedAnnotationElement(e),Tt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,Te).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,Ld)),c(this,Te).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,Xo)&&(e._focusEventsAllowed=!1,b(this,Xo,setTimeout(()=>{b(this,Xo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,Te)._signal}),t.focus())},0))),e._structTreeParentId=(n=c(this,au))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of c(this,Ii).values())if(t.uid===e)return t;return null}getNextId(){return c(this,Te).getId()}combinedSignal(e){return c(this,Te).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,St,Cs))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,Te).updateMode(e.mode);const{offsetX:n,offsetY:r}=P(this,St,O1).call(this),s=this.getNextId(),a=P(this,St,F1).call(this,{parent:this,id:s,x:n,y:r,uiManager:c(this,Te),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=c(Zr,wl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,Te)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),s=P(this,St,F1).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,Te),isCentered:t,...n});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(P(this,St,O1).call(this),!0,e)}setSelected(e){c(this,Te).setSelected(e)}toggleSelected(e){c(this,Te).toggleSelected(e)}unselect(e){c(this,Te).unselect(e)}pointerup(e){var r;const{isMac:t}=bn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,vl)||(b(this,vl,!1),(r=c(this,St,Cs))!=null&&r.isDrawer&&c(this,St,Cs).supportMultipleDrawings))return;if(!c(this,Rd)){b(this,Rd,!0);return}const n=c(this,Te).getMode();if(n===He.STAMP||n===He.SIGNATURE){c(this,Te).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(c(this,Te).getMode()===He.HIGHLIGHT&&this.enableTextSelection(),c(this,vl)){b(this,vl,!1);return}const{isMac:t}=bn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(b(this,vl,!0),(r=c(this,St,Cs))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=c(this,Te).getActive();b(this,Rd,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,us)){c(this,St,Cs).startDrawing(this,c(this,Te),!1,e);return}c(this,Te).setCurrentDrawingSession(this),b(this,us,new AbortController);const t=c(this,Te).combinedSignal(c(this,us));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(b(this,Ko,null),this.commitOrRemove())},{signal:t}),c(this,St,Cs).startDrawing(this,c(this,Te),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&b(this,Ko,t);return}c(this,Ko)&&setTimeout(()=>{var t;(t=c(this,Ko))==null||t.focus(),b(this,Ko,null)},0)}endDrawingSession(e=!1){return c(this,us)?(c(this,Te).setCurrentDrawingSession(null),c(this,us).abort(),b(this,us,null),b(this,Ko,null),c(this,St,Cs).endDrawing(e)):null}findNewParent(e,t,n){const r=c(this,Te).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return c(this,us)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,us)&&c(this,St,Cs).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,Te).getActive())==null?void 0:e.parent)===this&&(c(this,Te).commitOrRemove(),c(this,Te).setActiveEditor(null)),c(this,Xo)&&(clearTimeout(c(this,Xo)),b(this,Xo,null));for(const n of c(this,Ii).values())(t=c(this,au))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,Ii).clear(),c(this,Te).removeLayer(this)}render({viewport:e}){this.viewport=e,hu(this.div,e);for(const t of c(this,Te).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,Te).commitOrRemove(),P(this,St,I0).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,hu(this.div,{rotation:n}),t!==n)for(const r of c(this,Ii).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,Te).viewParameters.realScale}};au=new WeakMap,Rd=new WeakMap,gl=new WeakMap,yl=new WeakMap,Xo=new WeakMap,Ii=new WeakMap,vl=new WeakMap,Nd=new WeakMap,Ld=new WeakMap,us=new WeakMap,Ko=new WeakMap,Nn=new WeakMap,Yo=new WeakMap,xl=new WeakMap,Dd=new WeakMap,Te=new WeakMap,wl=new WeakMap,St=new WeakSet,M1=function(){return c(this,Ii).size!==0?c(this,Ii).values():c(this,Te).getEditors(this.pageIndex)},ER=function(e){c(this,Te).unselectAll();const{target:t}=e;if(t===c(this,Nn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,Nn).div.contains(t)){const{isMac:n}=bn.platform;if(e.button!==0||e.ctrlKey&&n)return;c(this,Te).showAllEditors("highlight",!0,!0),c(this,Nn).div.classList.add("free"),this.toggleDrawing(),Q0.startHighlighting(this,c(this,Te).direction==="ltr",{target:c(this,Nn).div,x:e.x,y:e.y}),c(this,Nn).div.addEventListener("pointerup",()=>{c(this,Nn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Te)._signal}),e.preventDefault()}},Cs=function(){return c(Zr,wl).get(c(this,Te).getMode())},F1=function(e){const t=c(this,St,Cs);return t?new t.prototype.constructor(e):null},O1=function(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,t),u=Math.min(window.innerWidth,e+n),h=Math.min(window.innerHeight,t+r),d=(s+u)/2-e,p=(a+h)/2-t,[m,y]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:m,offsetY:y}},I0=function(){for(const e of c(this,Ii).values())e.isEmpty()&&e.remove()},le(Zr,"_initialized",!1),_(Zr,wl,new Map([m1,k1,L1,Q0,N1].map(e=>[e._editorType,e])));let I1=Zr;var hs,fi,lu,ag,wv,AR,to,B1,kR,z1;const yn=class yn{constructor({pageIndex:e}){_(this,to);_(this,hs,null);_(this,fi,new Map);_(this,lu,new Map);this.pageIndex=e}setParent(e){if(!c(this,hs)){b(this,hs,e);return}if(c(this,hs)!==e){if(c(this,fi).size>0)for(const t of c(this,fi).values())t.remove(),e.append(t);b(this,hs,e)}}static get _svgFactory(){return ze(this,"_svgFactory",new K0)}draw(e,t=!1,n=!1){const r=mn(yn,ag)._++,s=P(this,to,B1).call(this),a=yn._svgFactory.createElement("defs");s.append(a);const u=yn._svgFactory.createElement("path");a.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,lu).set(r,u);const d=n?P(this,to,kR).call(this,a,h):null,p=yn._svgFactory.createElement("use");return s.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(s,e),c(this,fi).set(r,s),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=mn(yn,ag)._++,r=P(this,to,B1).call(this),s=yn._svgFactory.createElement("defs");r.append(s);const a=yn._svgFactory.createElement("path");s.append(a);const u=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",u),a.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const m=yn._svgFactory.createElement("mask");s.append(m),h=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const y=yn._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=yn._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=yn._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${u}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return r.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,e),c(this,fi).set(n,r),n}finalizeDraw(e,t){c(this,lu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var h;if(!t)return;const{root:n,bbox:r,rootClass:s,path:a}=t,u=typeof e=="number"?c(this,fi).get(e):e;if(u){if(n&&P(this,to,z1).call(this,u,n),r&&P(h=yn,wv,AR).call(h,u,r),s){const{classList:d}=u;for(const[p,m]of Object.entries(s))d.toggle(p,m)}if(a){const p=u.firstElementChild.firstElementChild;P(this,to,z1).call(this,p,a)}}}updateParent(e,t){if(t===this)return;const n=c(this,fi).get(e);n&&(c(t,hs).append(n),c(this,fi).delete(e),c(t,fi).set(e,n))}remove(e){c(this,lu).delete(e),c(this,hs)!==null&&(c(this,fi).get(e).remove(),c(this,fi).delete(e))}destroy(){b(this,hs,null);for(const e of c(this,fi).values())e.remove();c(this,fi).clear(),c(this,lu).clear()}};hs=new WeakMap,fi=new WeakMap,lu=new WeakMap,ag=new WeakMap,wv=new WeakSet,AR=function(e,[t,n,r,s]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*s}%`},to=new WeakSet,B1=function(){const e=yn._svgFactory.create(1,1,!0);return c(this,hs).append(e),e.setAttribute("aria-hidden",!0),e},kR=function(e,t){const n=yn._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const s=yn._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},z1=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},_(yn,wv),_(yn,ag,0);let j1=yn;globalThis._pdfjsTestingUtils={HighlightOutliner:y1};globalThis.pdfjsLib={AbortException:bl,AnnotationEditorLayer:I1,AnnotationEditorParamsType:Je,AnnotationEditorType:He,AnnotationEditorUIManager:du,AnnotationLayer:f1,AnnotationMode:Ra,AnnotationType:ln,applyOpacity:LF,build:zO,ColorPicker:q0,createValidAbsoluteUrl:gT,CSSConstants:NF,DOMSVGFactory:K0,DrawLayer:j1,FeatureTest:bn,fetchData:yg,findContrastColor:DF,getDocument:pS,getFilenameFromUrl:kF,getPdfFilenameFromUrl:CF,getRGB:xg,getUuid:xT,getXfaPageViewport:TF,GlobalWorkerOptions:ds,ImageKind:t0,InvalidPDFException:mb,isDataScheme:Lv,isPdfFile:uS,isValidExplicitDest:VF,MathClamp:mi,noContextMenu:$r,normalizeUnicode:SF,OPS:fp,OutputScale:Zs,PasswordResponses:fF,PDFDataRangeTransport:AP,PDFDateString:U0,PDFWorker:gp,PermissionFlag:dF,PixelsPerInch:Sl,RenderingCancelledException:cS,renderRichText:ST,ResponseException:z0,setLayerDimensions:hu,shadow:ze,SignatureExtractor:Qo,stopEvent:Qt,SupportedImageMimeTypes:yb,TextLayer:mp,TouchManager:$0,updateUrlHash:yT,Util:we,VerbosityLevel:Pv,version:BO,XfaLayer:bT};ds.workerSrc="https://unpkg.com/pdfjs-dist@5.4.530/build/pdf.worker.min.mjs";const op=[{url:"https://corsproxy.io/?",name:"CorsProxy.io"},{url:"https://api.allorigins.win/raw?url=",name:"AllOrigins"},{url:"https://api.codetabs.com/v1/proxy?quest=",name:"CodeTabs"},{url:"",name:"Direct"}],CR=async(i,e={},t=3e4)=>{const n=new AbortController,r=setTimeout(()=>n.abort(),t);try{const s=await fetch(i,{...e,signal:n.signal});return clearTimeout(r),s}catch(s){throw clearTimeout(r),s.name==="AbortError"?new Error("   (30)"):s}},uj=i=>{if(!i||i.byteLength<5)return!1;const e=new Uint8Array(i,0,5);return e[0]===37&&e[1]===80&&e[2]===68&&e[3]===70&&e[4]===45},hj=async i=>{const e=[];for(let t=0;t<op.length;t++){const n=op[t],r=n.url?n.url+encodeURIComponent(i):i;try{console.log(` [${t+1}/${op.length}] Trying ${n.name}...`),console.log(`   URL: ${r.substring(0,100)}...`);const s=await CR(r,{method:"GET",headers:{Accept:"application/pdf, */*"}},3e4);if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const a=s.headers.get("content-type");console.log(`   Content-Type: ${a}`);const u=await s.arrayBuffer();if(u.byteLength<100)throw new Error(`   (${u.byteLength} bytes)`);if(!uj(u))throw new Error("PDF   (  )");return console.log(` Success! PDF size: ${(u.byteLength/1024).toFixed(2)} KB`),u}catch(s){const a=`${n.name} : ${s.message}`;if(console.warn(` ${a}`),e.push(a),t===op.length-1)throw new Error(`   .

 :
${e.map((h,d)=>`${d+1}. ${h}`).join(`
`)}

 URL: ${i}`);continue}}},dj=async i=>{try{console.log(" Loading PDF document...");const t=await pS({data:i}).promise;console.log(` PDF loaded: ${t.numPages} pages`);let n="";for(let s=1;s<=t.numPages;s++){const h=(await(await t.getPage(s)).getTextContent()).items.map(d=>d.str).join(" ").replace(/\s+/g," ").trim();if(n+=h+`

`,console.log(` Extracted page ${s}/${t.numPages} (${h.length} characters)`),s>=50){console.warn(" Reached 50 page limit, stopping extraction");break}}const r=n.trim();return console.log(` PDF extraction complete: ${r.length} total characters`),r}catch(e){throw console.error(" PDF text extraction error:",e),new Error("PDF   : "+e.message)}},fj=async i=>{console.log(" Extracting PDF link from HTML page...");try{const t=op[0].url+encodeURIComponent(i);console.log(`   Fetching HTML from: ${i}`),console.log(`   Via proxy: ${t.substring(0,120)}...`);const n=await CR(t,{method:"GET",headers:{Accept:"text/html, application/xhtml+xml, */*"}},3e4);if(console.log(`   Response status: ${n.status}`),!n.ok)throw new Error(`Failed to fetch HTML: ${n.status} ${n.statusText}`);const r=await n.text();console.log(`   HTML fetched: ${r.length} characters`),console.log(`   HTML preview: ${r.substring(0,500)}`);const s=[/href=["']([^"']*filedownload\.aspx[^"']*)["']/gi,/href=["']([^"']*\.pdf[^"']*)["']/gi,/window\.open\(['"]([^'"]*\.pdf[^'"]*)['"]\)/gi,/data-[^=]*=["']([^"']*\.pdf[^"']*)["']/gi,/["']([^"']*filedownload[^"']*)["']/gi];let a=[];for(const p of s){const y=[...r.matchAll(p)].map(v=>v[1]);y.length>0&&console.log(`   Pattern matched ${y.length} links:`,y),a.push(...y)}if(console.log(`   Total found ${a.length} potential PDF links`),a.length===0){const p=/href=["']([^"']*download[^"']*)["']/gi,m=[...r.matchAll(p)];m.length>0&&(a=m.map(y=>y[1]),console.log(`   Found ${a.length} alternative download links`))}if(a.length===0)throw new Error("HTML  PDF     .      .");const u=new URL(i),h=a[0];let d;return h.startsWith("http")?d=h:h.startsWith("/")?d=`${u.protocol}//${u.host}${h}`:h.startsWith("./")?d=`${u.protocol}//${u.host}${u.pathname.substring(0,u.pathname.lastIndexOf("/"))}/${h.substring(2)}`:d=`${u.protocol}//${u.host}${u.pathname.substring(0,u.pathname.lastIndexOf("/"))}/${h}`,d=d.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),console.log(` Extracted PDF URL: ${d}`),d}catch(e){throw console.error(" Failed to extract PDF link from HTML:"),console.error("   Error type:",e.name),console.error("   Error message:",e.message),console.error("   Full error:",e),new Error(`HTML PDF   : ${e.message}`)}},pj=i=>{const e=i.toLowerCase();return e.includes(".aspx")||e.includes(".html")||e.includes(".htm")||e.includes(".jsp")||e.includes(".php")||e.includes("research")&&!e.endsWith(".pdf")},mj=async i=>{try{if(console.log(" Starting PDF fetch and parse:",i),!i||typeof i!="string")throw new Error("Invalid PDF URL");let e=i;pj(i)?(console.log(" URL is a web page - extracting PDF link..."),e=await fj(i)):console.log(" URL appears to be a direct PDF");const t=await hj(e),n=await dj(t);if(!n||n.length<100)throw new Error("Extracted text is too short or empty. PDF may be image-based or corrupted.");return console.log(` Successfully extracted ${n.length} characters from PDF`),n}catch(e){throw console.error(" fetchAndParsePDF error:",e),e}},gj="1R2NeMNH13No1lX84UnEu-sRc7mXF1vGwB4BwmOu_i5A",yj="11Wi9s0Tve8rnG8U8kja-3ZbKXNIVGWfuevpvGeifn8c",vj="https://corsproxy.io/?",xj="AIzaSyCdh8HWsXB02ak23zg3o-x4PZKapkgijN4";function wj(){const[i,e]=$.useState([]),[t,n]=$.useState([]),[r,s]=$.useState(!0),[a,u]=$.useState(null),[h,d]=$.useState(!1),[p,m]=$.useState(null),[y,v]=$.useState(null),[E,A]=$.useState(null),[k,C]=$.useState(!1),[N,T]=$.useState(null),[D,F]=$.useState(!1),[L,j]=$.useState(null),[G,K]=$.useState(!1),[ee,q]=$.useState("");$.useEffect(()=>{(async()=>{s(!0),await Promise.all([ue(),ie()]),s(!1)})()},[]);const re=async()=>{K(!0),q("     ...");try{if(!(await fetch("https://script.google.com/macros/s/AKfycbwDxLi9XHy3bvz1vvY7jYxHS3sLWKDJ4ELHXsPoruQk7VF08yhaVyriNJ-an3uMNAYl/exec",{method:"GET",redirect:"follow"})).ok)throw new Error("  ");await ue(),q("  !"),setTimeout(()=>{q("")},2e3)}catch(U){console.error("Refresh failed:",U),q("  .  ."),setTimeout(()=>{q("")},3e3)}finally{K(!1)}},ue=async()=>{try{const U=`https://docs.google.com/spreadsheets/d/${gj}/export?format=csv`,de=(await(await fetch(U)).text()).split(`
`).slice(1).map((xe,Ee)=>{var tt,te,Me,je;const Re=xe.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);return Re.length<4?null:{id:Ee,date:(tt=Re[0])==null?void 0:tt.replace(/"/g,"").trim(),category:(te=Re[1])==null?void 0:te.replace(/"/g,"").trim(),title:(Me=Re[2])==null?void 0:Me.replace(/"/g,"").trim(),link:(je=Re[3])==null?void 0:je.replace(/"/g,"").trim()}}).filter(xe=>xe&&xe.title);e(de)}catch(U){console.error("Failed to fetch sheet:",U)}},ie=async()=>{try{const U=`https://docs.google.com/spreadsheets/d/${yj}/export?format=csv`,de=(await(await fetch(U)).text()).split(`
`).slice(1).map(xe=>{var Re;const Ee=xe.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);return Ee.length<1?null:{name:(Re=Ee[0])==null?void 0:Re.replace(/"/g,"").trim()}}).filter(xe=>xe&&xe.name);n(de)}catch(U){console.error("Failed to fetch portfolio:",U)}},Z=async U=>{try{let I="";if(U.category.toLowerCase()==="special"){console.log(" Special report - using pdfReader.js for:",U.link);try{I=await mj(U.link),console.log(` PDF extracted: ${I.length} characters`)}catch(pe){throw console.error(" PDF extraction failed:",pe),new Error(`PDF  : ${pe.message}`)}}else{const pe=`${vj}${encodeURIComponent(U.link)}`,ye=await fetch(pe);if(!ye.ok)throw new Error("  ");const de=await ye.text(),Ee=new DOMParser().parseFromString(de,"text/html"),Re=Ee.querySelector(".view_con")||Ee.querySelector("#content")||Ee.body;["script","style"].forEach(tt=>Re.querySelectorAll(tt).forEach(te=>te.remove())),I=Re.innerText}if(!I||I.trim().length<50)throw new Error("  ");return I.substring(0,15e3)}catch(I){throw new Error(`  : ${I.message}`)}},se=async(U,I)=>{const de=`
      ${(I==null?void 0:I.toLowerCase())==="special"?"    .  (7 ),  ( ),   .":"  .   ,   ,    ."}
      [ ]: ${U}
      [  (JSON)]:
      {
        "summary": " ",
        "insight": "  ",
        "quiz": { "question": "...", "options": ["..."], "correct_index": 0, "explanation": "..." }
      }
    `;return await Q(de)},J=async()=>{if(i.length!==0){F(!0),j(null);try{const U=i.filter(Ee=>Ee.category.toLowerCase()==="market").slice(0,3);if(U.length===0)throw new Error("   Market  .");const pe=(await Promise.all(U.map(async Ee=>{try{const Re=await Z(Ee);return`[: ${Ee.title}]
${Re.substring(0,5e3)}...`}catch(Re){return console.warn(`Failed to fetch ${Ee.title}`,Re),null}}))).filter(Ee=>Ee).join(`

=================

`),ye=t.map(Ee=>Ee.name).join(", "),de=`
         **   (PB)**.
         (PDF) ,  **Market **    .
        
        [   ]:
        ${pe}

        [  ]: ${ye}

        []:
           , **[  ]**   .
        
        1. **  **:    (: , AI,  ) .
        2. ** **:   **[ /  / ]**    .
        3. ****:    1  .
        4. ** **:   ,      1 .

        [  (JSON)]:
        {
          "target_title": " Market   ",
          "advice_list": [
            {
              "name": " ",
              "action": " or  or ",
              "reason": " "
            }
          ],
          "new_recommendation": {
             "name": " ",
             "reason": " "
          }
        }
      `,xe=await Q(de);T(xe)}catch(U){console.error("Portfolio diagnosis failed:",U),j(U.message)}finally{F(!1)}}},Q=async U=>{var de,xe,Ee;const pe=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${xj}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:U}]}],generationConfig:{responseMimeType:"application/json"},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_NONE"}]})})).json();if(!pe.candidates||pe.candidates.length===0){const Re=pe.error?pe.error.message:"Blocked or Empty";throw new Error(`AI  : ${Re}`)}const ye=(Ee=(xe=(de=pe.candidates[0].content)==null?void 0:de.parts)==null?void 0:xe[0])==null?void 0:Ee.text;return JSON.parse(ye)},me=async U=>{u(U),d(!0),m(null),v(null),A(null),C(!1);try{const I=await Z(U),pe=await se(I,U.category);m(pe)}catch(I){v(I.message)}finally{d(!1)}},M=()=>{u(null),m(null)},B=U=>{k||(A(U),C(!0))};return x.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans text-gray-900 pb-20",children:[x.jsxs("header",{className:"bg-white px-6 py-4 sticky top-0 z-10 shadow-sm flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:x.jsx(e0,{size:20})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"Daily Study"}),t.length>0&&x.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:["  ",t.length,"  "]})]})]}),x.jsx("button",{onClick:()=>window.location.reload(),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition",children:x.jsx(j0,{size:20})})]}),x.jsxs("main",{className:"max-w-md mx-auto px-4 mt-6 mb-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"  & "}),x.jsxs("button",{onClick:re,disabled:G,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:[x.jsx(j0,{size:16,className:G?"animate-spin":""}),x.jsx("span",{children:G?" ...":"  "})]})]}),ee&&x.jsx("div",{className:`mb-4 px-4 py-3 rounded-xl text-sm font-medium animate-in fade-in slide-in-from-top-2 ${ee.includes("")?"bg-green-50 text-green-700 border border-green-200":ee.includes("")?"bg-red-50 text-red-700 border border-red-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:ee}),r?x.jsx("div",{className:"space-y-4",children:[1,2,3].map(U=>x.jsx("div",{className:"h-28 bg-white rounded-2xl shadow-sm animate-pulse"},U))}):i.length===0?x.jsxs("div",{className:"text-center py-10 text-gray-500",children:[x.jsx(Mw,{className:"mx-auto mb-2"})," ."]}):x.jsx("div",{className:"space-y-3",children:i.map(U=>x.jsx(bj,{item:U,onClick:()=>me(U)},U.id))})]}),!r&&t.length>0&&x.jsx("section",{className:"max-w-md mx-auto px-4 mt-8 pb-10",children:x.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-6 text-white shadow-xl relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:x.jsx(nF,{size:120})}),x.jsxs("div",{className:"relative z-10",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2 text-blue-300",children:[x.jsx(B0,{size:20}),x.jsx("h3",{className:"font-bold text-lg",children:"  AI "})]}),N?x.jsxs("div",{className:"mt-4 animate-in fade-in slide-in-from-bottom-4",children:[x.jsxs("div",{className:"text-xs text-slate-400 mb-4 pb-4 border-b border-slate-700",children:[" : ",N.target_title]}),x.jsx("div",{className:"space-y-3 mb-6",children:N.advice_list.map((U,I)=>x.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-xl border border-slate-600",children:[x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsx("span",{className:"font-bold",children:U.name}),x.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${U.action.includes("")?"bg-red-500/20 text-red-300":U.action.includes("")?"bg-blue-500/20 text-blue-300":"bg-gray-500/20 text-gray-300"}`,children:U.action})]}),x.jsx("p",{className:"text-xs text-slate-300",children:U.reason})]},I))}),N.new_recommendation&&x.jsxs("div",{className:"bg-blue-500/10 p-4 rounded-xl border border-blue-500/30",children:[x.jsxs("div",{className:"flex items-center gap-2 text-blue-300 font-bold mb-1",children:[x.jsx(nC,{size:16})," AI  "]}),x.jsx("div",{className:"font-bold text-lg mb-1",children:N.new_recommendation.name}),x.jsx("p",{className:"text-xs text-blue-200/80",children:N.new_recommendation.reason})]}),x.jsx("button",{onClick:()=>T(null),className:"w-full mt-6 py-3 text-slate-400 text-sm hover:text-white transition",children:"  "})]}):x.jsxs("div",{className:"mt-4",children:[x.jsxs("p",{className:"text-slate-300 text-sm mb-6 leading-relaxed",children:[" ",x.jsx("span",{className:"font-semibold text-white",children:"MARKET "})," ",x.jsx("br",{}),"    ."]}),x.jsx("button",{onClick:J,disabled:D,className:"w-full bg-blue-500 hover:bg-blue-600 active:scale-95 transition-all text-white font-bold py-4 rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-blue-500/30",children:D?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"   ..."]}):x.jsxs(x.Fragment,{children:[x.jsx(XM,{size:20}),"  "]})}),L&&x.jsx("p",{className:"text-red-400 text-xs mt-3 text-center",children:L})]})]})]})}),a&&x.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-0",children:[x.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:M}),x.jsxs("div",{className:"relative bg-white w-full max-w-lg max-h-[90vh] rounded-3xl shadow-2xl overflow-hidden flex flex-col animate-in fade-in zoom-in duration-200",children:[x.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-start bg-white shrink-0",children:[x.jsxs("div",{className:"pr-8",children:[x.jsx("span",{className:`inline-block px-2 py-0.5 rounded-md text-xs font-semibold mb-2 ${_R(a.category)}`,children:a.category.toUpperCase()}),x.jsx("h3",{className:"text-lg font-bold leading-snug line-clamp-2",children:a.title})]}),x.jsx("button",{onClick:M,className:"p-2 -mr-2 text-gray-400 hover:text-gray-600",children:x.jsx(mT,{size:24})})]}),x.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:h?x.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[x.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),x.jsx("p",{className:"text-gray-500 font-medium animate-pulse text-center",children:"AI   ..."})]}):y?x.jsxs("div",{className:"text-center py-10 space-y-4",children:[x.jsx("div",{className:"bg-red-100 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto text-red-600",children:x.jsx(Mw,{size:32})}),x.jsx("h4",{className:"text-lg font-bold text-gray-800",children:" "}),x.jsx("p",{className:"text-gray-600 text-sm px-4",children:y})]}):p?x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3 text-blue-600",children:[x.jsx(db,{size:20}),x.jsx("h4",{className:"font-bold text-lg",children:" "})]}),x.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-[15px]",children:p.summary})]}),x.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 ring-1 ring-purple-100",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-600",children:[x.jsx(B0,{size:20}),x.jsx("h4",{className:"font-bold text-lg",children:"  "})]}),x.jsx("p",{className:"text-gray-700 leading-relaxed text-[15px]",children:p.insight})]}),x.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-5 rounded-2xl shadow-sm border border-indigo-100",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4 text-indigo-700",children:[x.jsx(qM,{size:20}),x.jsx("h4",{className:"font-bold text-lg",children:"  "})]}),x.jsxs("div",{className:"mb-4 text-gray-800 font-medium text-lg",children:["Q. ",p.quiz.question]}),x.jsx("div",{className:"space-y-2.5",children:p.quiz.options.map((U,I)=>{const pe=E===I,ye=I===p.quiz.correct_index;let de="w-full text-left p-4 rounded-xl border transition-all text-[15px] ";return k?ye?de+="bg-green-100 border-green-300 text-green-800 font-semibold":pe?de+="bg-red-50 border-red-200 text-red-700":de+="bg-white border-gray-200 opacity-50":de+="bg-white border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 active:scale-[0.98]",x.jsx("button",{onClick:()=>B(I),disabled:k,className:de,children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{children:U}),k&&ye&&x.jsx(GM,{size:18,className:"text-green-600"})]})},I)})}),k&&x.jsxs("div",{className:`mt-4 p-4 rounded-xl animate-in slide-in-from-top-2 border ${E===p.quiz.correct_index?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[x.jsx("div",{className:"font-bold text-lg mb-2 flex items-center gap-2",children:E===p.quiz.correct_index?x.jsxs(x.Fragment,{children:[" ",x.jsx(nC,{size:22,className:"text-green-600"})," ",x.jsx("span",{children:"!"})," "]}):x.jsxs(x.Fragment,{children:[" ",x.jsx(Mw,{size:22,className:"text-red-600"})," ",x.jsx("span",{children:", ."})," "]})}),x.jsxs("div",{className:"text-sm mt-1 text-gray-700 leading-relaxed",children:[x.jsx("span",{className:"font-bold mr-1 block mb-1",children:"    :"}),p.quiz.explanation]})]})]}),x.jsx("div",{className:"pt-4 pb-8 flex justify-center",children:x.jsxs("a",{href:a.link,target:"_blank",rel:"noreferrer",className:"text-gray-400 hover:text-gray-600 text-sm flex items-center gap-1 underline decoration-gray-300",children:["   ",x.jsx(KM,{size:12})]})})]}):null})]})]})]})}function bj({item:i,onClick:e}){return x.jsxs("div",{onClick:e,className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all cursor-pointer active:scale-[0.98]",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-bold ${_R(i.category)}`,children:i.category.toUpperCase()}),x.jsx("span",{className:"text-gray-400 text-xs",children:i.date})]}),x.jsx("h3",{className:"text-gray-900 font-bold text-lg leading-snug mb-3 line-clamp-2",children:i.title}),x.jsxs("div",{className:"flex items-center text-gray-400 text-sm gap-1 group",children:[x.jsx("span",{children:" "}),x.jsx(VM,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})]})}function _R(i){return(i==null?void 0:i.toLowerCase())==="special"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}ds.workerSrc="https://unpkg.com/pdfjs-dist@5.4.530/build/pdf.worker.min.mjs";const Sj=async i=>{try{console.log(" Starting PDF text extraction...");const e=await i.arrayBuffer(),n=await pS({data:e}).promise;console.log(` PDF loaded: ${n.numPages} pages`);let r="";for(let s=1;s<=n.numPages;s++){const h=(await(await n.getPage(s)).getTextContent()).items.map(d=>d.str).join(" ");r+=h+`

`,console.log(` Extracted page ${s}/${n.numPages}`)}return console.log(` PDF extraction complete: ${r.length} characters`),r.trim()}catch(e){throw console.error(" PDF extraction error:",e),new Error("PDF   : "+e.message)}},Ej=i=>{if(!i)throw new Error(" .");if(i.type!=="application/pdf")throw new Error("PDF   .");const e=10*1024*1024;if(i.size>e)throw new Error("  10MB  .");return!0},Aj=i=>({name:i.name,size:(i.size/1024).toFixed(2)+" KB",type:i.type,lastModified:new Date(i.lastModified).toLocaleDateString("ko-KR")}),RC="https://docs.google.com/spreadsheets/d/e/2PACX-1vTE6rU_HSro410_ho2cm9qlg-zgvNQuakmK_iYzRcCpRmS4ZFCnsM_GvZ4egwhTMWjpLs5zwYJB2SSh/pub",Z0=[{id:"mock-1",title:"[IBKS Daily] Morning Brief -    ",firm:"IBK",date:"26.01.14",views:"1,234",url:"https://finance.naver.com/research/market_info_read.naver?nid=34654"},{id:"mock-2",title:"DAILY RECAP - AI   ",firm:"SK",date:"26.01.14",views:"987",url:"https://finance.naver.com/research/market_info_read.naver?nid=34653"},{id:"mock-3",title:"KB  ",firm:"KB",date:"26.01.14",views:"856",url:"https://finance.naver.com/research/market_info_read.naver?nid=34652"},{id:"mock-4",title:"     ",firm:"",date:"26.01.13",views:"743",url:"https://finance.naver.com/research/market_info_read.naver?nid=34651"},{id:"mock-5",title:"2   ",firm:"",date:"26.01.13",views:"621",url:"https://finance.naver.com/research/market_info_read.naver?nid=34650"}],kj=i=>{const e=i.trim().split(`
`);if(e.length<3)return console.warn("CSV data is empty, using mock data"),Z0;const t=[];for(let n=2;n<e.length;n++){const r=e[n].trim();if(!r)continue;const a=(r.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g)||[]).map(d=>d.replace(/^"|"$/g,"").trim());if(a.length===0||!a[0]||a.some(d=>d.includes("#N/A")||d.includes("#ERROR")||d.includes("#REF!")))continue;const h={id:`report-${n}-${Date.now()}-${Math.random()}`,title:a[0]||"",firm:a[1]||"",date:a[3]||"",views:a[4]||"0",url:a[5]||""};h.title&&h.firm&&h.date&&t.push(h)}return t.length===0?(console.warn("No valid reports found in CSV, using mock data"),Z0):(t.sort((n,r)=>{const s=a=>{if(!a)return 0;const u=a.replace(/[./]/g,"");return parseInt(u,10)};return s(r.date)-s(n.date)}),console.log(` Parsed ${t.length} reports, sorted by date (newest first)`),t.length>0&&(console.log(` Latest: ${t[0].date} "${t[0].title.substring(0,30)}..."`),console.log(` Oldest: ${t[t.length-1].date} "${t[t.length-1].title.substring(0,30)}..."`)),t)},Cj=async()=>{try{console.log(" Fetching market reports from Naver Finance...");let i=`${RC}?gid=0&single=true&output=csv`,e=await fetch(i,{method:"GET",cache:"no-cache"});if(e.ok||(console.log("gid=0 failed, trying gid=1977864363..."),i=`${RC}?gid=1977864363&single=true&output=csv`,e=await fetch(i,{method:"GET",cache:"no-cache"})),!e.ok)return console.warn("Both gids failed, using mock data"),{reports:Z0,lastUpdated:new Date().toISOString()};const t=await e.text(),n=kj(t);return console.log(` Fetched ${n.length} market reports`),{reports:n,lastUpdated:new Date().toISOString()}}catch(i){return console.error(" Error fetching market reports:",i),console.warn("Using mock data due to error"),{reports:Z0,lastUpdated:new Date().toISOString()}}},_j="https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash:generateContent",Tj=()=>"AIzaSyCdh8HWsXB02ak23zg3o-x4PZKapkgijN4",Pj=async i=>{var s,a,u,h,d,p,m;const e=Tj(),t=`${_j}?key=${e}`,n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i}]}],generationConfig:{temperature:.7,topK:64,topP:.95,maxOutputTokens:8192}})});if(!n.ok){const y=await n.json().catch(()=>({}));if(n.status===429){const v=(a=(s=y.error)==null?void 0:s.message)==null?void 0:a.match(/retry in ([\d.]+)s/);if(v){const E=Math.ceil(parseFloat(v[1]));throw new Error(`API   . ${E}   . `)}throw new Error("API   .    .")}throw new Error(`Gemini API error (${n.status}): ${((u=y.error)==null?void 0:u.message)||n.statusText}`)}const r=await n.json();if(!r.candidates||!((m=(p=(d=(h=r.candidates[0])==null?void 0:h.content)==null?void 0:d.parts)==null?void 0:p[0])!=null&&m.text))throw new Error("Invalid response from Gemini API");return r.candidates[0].content.parts[0].text},Rj=async({portfolio:i,oversoldText:e,dailyReports:t,macroIndicators:n})=>{try{console.log(" Starting oversold stock analysis...");const r=i.map(d=>({name:d.name,ticker:d.ticker||d.name,quantity:d.quantity,avgPrice:d.avgPrice,currentPrice:d.currentPrice,profitLoss:((d.currentPrice-d.avgPrice)/d.avgPrice*100).toFixed(2),country:d.country})),s=t.slice(0,10).map(d=>`[${d.firm}] ${d.title}`),a=n.length>0?n.map(d=>`${d.name}: ${d.value} (${d.judgment})`).join(`
`):" ",u=`
#   
 **     **. " " 1   .

#    
 "    "  
 "  "  
 **3    '' ''  **  

#    (3  )

## 1:   
-   ** ** 
- " " vs " " 
- :
  -  : "   ", "  "
  -  : " ", "  ", " "

## 2:   
-    **  **  
- :
  -   "",   "  "   
  -   "",   "  "   

## 3:   
- (VIX, , ) **  ** 
- :
  - VIX 15  +      
  - VIX 20  +      

#   

##  
${JSON.stringify(r,null,2)}

##    ( )
${e}

##    (  )
${s.join(`
`)}

##  
${a}

---

#    (  )

##      

###    ( )
(3      )

**    :**
- ** / **
  - **   (3 )**:
    1. ** **: (  ,  )
    2. ** **: (     )
    3. ** **: (VIX ,  )
  - ****: [  /   /  X%]
  - ****: (   )

**:**
- ** / $120**
  - **  **:
    1. ** **: "AI   ,     "
    2. ** **: [IBKS Daily] "AI   " 
    3. ** **: VIX 14 ,   
  - ****:   (  3-5%),     
  - ****:     ,   -10% 

---

###    ( )
(3      )

**    :**
- ** / **
  - **   (  )**:
    1. ** **: ( ...)
    2. ** **: (       )
    3. ** **: (VIX   )
  - ****:   /    /   
  - ****: (     )

**:**
- ** / $180**
  - **  **:
    1. ** **: "     "
    2. ** **:      ,  
    3. ** **: VIX 18  ,   
  - ****:  ,    
  - ****:     

---

###    
(        )

**      :**
- ** ( %)**
  - **3  **: ( / )
  - ** **:
    -  :   ( )
    -  :   ,   
  - ** **: (  /  /  )

**    :**
-   ,   

---

##    

###    ()
1. ****: ( )
2. ****: ( )

###   
1. ****: ( )
2. ****: ( )

###    
-   :   X%
-   : Y% ( )

---

** **:
- ""   , **3    **
-   +   +   **   **
-   ** **
-        
`,h=await Pj(u);return console.log(" Oversold analysis generated successfully"),h}catch(r){throw console.error(" Error analyzing oversold stocks:",r),r.message.includes("API_KEY")?new Error("Gemini API   . .env  ."):new Error("AI    : "+r.message)}},xS="insightlog_weekly_reports",TR=(i=new Date)=>{const e=i.getFullYear(),t=i.getMonth()+1,n=new Date(e,t-1,1),r=i.getDate(),s=Math.ceil((r+n.getDay())/7);return`${e}-${String(t).padStart(2,"0")}-${s}`},Eg=()=>{try{const i=localStorage.getItem(xS);return i?JSON.parse(i).sort((t,n)=>new Date(n.createdAt)-new Date(t.createdAt)):[]}catch(i){return console.error("Error loading weekly reports:",i),[]}},Nj=({pdfFileName:i,aiAnalysis:e,rawSummary:t,portfolio:n=[]})=>{try{const r=Eg(),s=new Date,a={id:`weekly-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,week:TR(s),pdfFileName:i,aiAnalysis:e,rawSummary:t.substring(0,500)+"...",portfolio:n.map(u=>({name:u.name,profitLoss:((u.currentPrice-u.avgPrice)/u.avgPrice*100).toFixed(2)})),createdAt:s.toISOString(),date:s.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})};return r.unshift(a),localStorage.setItem(xS,JSON.stringify(r)),console.log(" Weekly report saved:",a.id),a}catch(r){throw console.error("Error saving weekly report:",r),new Error("   .")}},Lj=i=>{try{const e=Eg(),t=e.filter(n=>n.id!==i);return t.length===e.length?(console.warn("Weekly report not found:",i),!1):(localStorage.setItem(xS,JSON.stringify(t)),console.log(" Weekly report deleted:",i),!0)}catch(e){throw console.error("Error deleting weekly report:",e),new Error("   .")}},Dj=()=>{const i=Eg();return{total:i.length,thisMonth:i.filter(e=>{const t=new Date(e.createdAt),n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}).length,lastAnalyzed:i.length>0?i[0].date:null}},Ij=()=>{const i=Eg(),e=TR();return i.some(t=>t.week===e)};function Mj(i,e){const t={};return(i[i.length-1]===""?[...i,""]:i).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const Fj=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Oj=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,jj={};function NC(i,e){return(jj.jsx?Oj:Fj).test(i)}const Bj=/[ \t\n\f\r]/g;function zj(i){return typeof i=="object"?i.type==="text"?LC(i.value):!1:LC(i)}function LC(i){return i.replace(Bj,"")===""}class Ag{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}Ag.prototype.normal={};Ag.prototype.property={};Ag.prototype.space=void 0;function PR(i,e){const t={},n={};for(const r of i)Object.assign(t,r.property),Object.assign(n,r.normal);return new Ag(t,n,e)}function U1(i){return i.toLowerCase()}class Bi{constructor(e,t){this.attribute=t,this.property=e}}Bi.prototype.attribute="";Bi.prototype.booleanish=!1;Bi.prototype.boolean=!1;Bi.prototype.commaOrSpaceSeparated=!1;Bi.prototype.commaSeparated=!1;Bi.prototype.defined=!1;Bi.prototype.mustUseProperty=!1;Bi.prototype.number=!1;Bi.prototype.overloadedBoolean=!1;Bi.prototype.property="";Bi.prototype.spaceSeparated=!1;Bi.prototype.space=void 0;let Uj=0;const We=gu(),un=gu(),H1=gu(),he=gu(),_t=gu(),oh=gu(),qi=gu();function gu(){return 2**++Uj}const $1=Object.freeze(Object.defineProperty({__proto__:null,boolean:We,booleanish:un,commaOrSpaceSeparated:qi,commaSeparated:oh,number:he,overloadedBoolean:H1,spaceSeparated:_t},Symbol.toStringTag,{value:"Module"})),Ww=Object.keys($1);class wS extends Bi{constructor(e,t,n,r){let s=-1;if(super(e,t),DC(this,"space",r),typeof n=="number")for(;++s<Ww.length;){const a=Ww[s];DC(this,Ww[s],(n&$1[a])===$1[a])}}}wS.prototype.defined=!0;function DC(i,e,t){t&&(i[e]=t)}function Bd(i){const e={},t={};for(const[n,r]of Object.entries(i.properties)){const s=new wS(n,i.transform(i.attributes||{},n),r,i.space);i.mustUseProperty&&i.mustUseProperty.includes(n)&&(s.mustUseProperty=!0),e[n]=s,t[U1(n)]=n,t[U1(s.attribute)]=n}return new Ag(e,t,i.space)}const RR=Bd({properties:{ariaActiveDescendant:null,ariaAtomic:un,ariaAutoComplete:null,ariaBusy:un,ariaChecked:un,ariaColCount:he,ariaColIndex:he,ariaColSpan:he,ariaControls:_t,ariaCurrent:null,ariaDescribedBy:_t,ariaDetails:null,ariaDisabled:un,ariaDropEffect:_t,ariaErrorMessage:null,ariaExpanded:un,ariaFlowTo:_t,ariaGrabbed:un,ariaHasPopup:null,ariaHidden:un,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:_t,ariaLevel:he,ariaLive:null,ariaModal:un,ariaMultiLine:un,ariaMultiSelectable:un,ariaOrientation:null,ariaOwns:_t,ariaPlaceholder:null,ariaPosInSet:he,ariaPressed:un,ariaReadOnly:un,ariaRelevant:null,ariaRequired:un,ariaRoleDescription:_t,ariaRowCount:he,ariaRowIndex:he,ariaRowSpan:he,ariaSelected:un,ariaSetSize:he,ariaSort:null,ariaValueMax:he,ariaValueMin:he,ariaValueNow:he,ariaValueText:null,role:null},transform(i,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function NR(i,e){return e in i?i[e]:e}function LR(i,e){return NR(i,e.toLowerCase())}const Hj=Bd({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:oh,acceptCharset:_t,accessKey:_t,action:null,allow:null,allowFullScreen:We,allowPaymentRequest:We,allowUserMedia:We,alt:null,as:null,async:We,autoCapitalize:null,autoComplete:_t,autoFocus:We,autoPlay:We,blocking:_t,capture:null,charSet:null,checked:We,cite:null,className:_t,cols:he,colSpan:null,content:null,contentEditable:un,controls:We,controlsList:_t,coords:he|oh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:We,defer:We,dir:null,dirName:null,disabled:We,download:H1,draggable:un,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:We,formTarget:null,headers:_t,height:he,hidden:H1,high:he,href:null,hrefLang:null,htmlFor:_t,httpEquiv:_t,id:null,imageSizes:null,imageSrcSet:null,inert:We,inputMode:null,integrity:null,is:null,isMap:We,itemId:null,itemProp:_t,itemRef:_t,itemScope:We,itemType:_t,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:We,low:he,manifest:null,max:null,maxLength:he,media:null,method:null,min:null,minLength:he,multiple:We,muted:We,name:null,nonce:null,noModule:We,noValidate:We,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:We,optimum:he,pattern:null,ping:_t,placeholder:null,playsInline:We,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:We,referrerPolicy:null,rel:_t,required:We,reversed:We,rows:he,rowSpan:he,sandbox:_t,scope:null,scoped:We,seamless:We,selected:We,shadowRootClonable:We,shadowRootDelegatesFocus:We,shadowRootMode:null,shape:null,size:he,sizes:null,slot:null,span:he,spellCheck:un,src:null,srcDoc:null,srcLang:null,srcSet:null,start:he,step:null,style:null,tabIndex:he,target:null,title:null,translate:null,type:null,typeMustMatch:We,useMap:null,value:un,width:he,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:_t,axis:null,background:null,bgColor:null,border:he,borderColor:null,bottomMargin:he,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:We,declare:We,event:null,face:null,frame:null,frameBorder:null,hSpace:he,leftMargin:he,link:null,longDesc:null,lowSrc:null,marginHeight:he,marginWidth:he,noResize:We,noHref:We,noShade:We,noWrap:We,object:null,profile:null,prompt:null,rev:null,rightMargin:he,rules:null,scheme:null,scrolling:un,standby:null,summary:null,text:null,topMargin:he,valueType:null,version:null,vAlign:null,vLink:null,vSpace:he,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:We,disableRemotePlayback:We,prefix:null,property:null,results:he,security:null,unselectable:null},space:"html",transform:LR}),$j=Bd({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:qi,accentHeight:he,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:he,amplitude:he,arabicForm:null,ascent:he,attributeName:null,attributeType:null,azimuth:he,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:he,by:null,calcMode:null,capHeight:he,className:_t,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:he,diffuseConstant:he,direction:null,display:null,dur:null,divisor:he,dominantBaseline:null,download:We,dx:null,dy:null,edgeMode:null,editable:null,elevation:he,enableBackground:null,end:null,event:null,exponent:he,externalResourcesRequired:null,fill:null,fillOpacity:he,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:oh,g2:oh,glyphName:oh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:he,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:he,horizOriginX:he,horizOriginY:he,id:null,ideographic:he,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:he,k:he,k1:he,k2:he,k3:he,k4:he,kernelMatrix:qi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:he,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:he,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:he,overlineThickness:he,paintOrder:null,panose1:null,path:null,pathLength:he,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:_t,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:he,pointsAtY:he,pointsAtZ:he,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:qi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:qi,rev:qi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:qi,requiredFeatures:qi,requiredFonts:qi,requiredFormats:qi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:he,specularExponent:he,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:he,strikethroughThickness:he,string:null,stroke:null,strokeDashArray:qi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:he,strokeOpacity:he,strokeWidth:null,style:null,surfaceScale:he,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:qi,tabIndex:he,tableValues:null,target:null,targetX:he,targetY:he,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:qi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:he,underlineThickness:he,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:he,values:null,vAlphabetic:he,vMathematical:he,vectorEffect:null,vHanging:he,vIdeographic:he,version:null,vertAdvY:he,vertOriginX:he,vertOriginY:he,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:he,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:NR}),DR=Bd({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(i,e){return"xlink:"+e.slice(5).toLowerCase()}}),IR=Bd({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:LR}),MR=Bd({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(i,e){return"xml:"+e.slice(3).toLowerCase()}}),Vj={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Wj=/[A-Z]/g,IC=/-[a-z]/g,Gj=/^data[-\w.:]+$/i;function qj(i,e){const t=U1(e);let n=e,r=Bi;if(t in i.normal)return i.property[i.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&Gj.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(IC,Kj);n="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!IC.test(s)){let a=s.replace(Wj,Xj);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}r=wS}return new r(n,e)}function Xj(i){return"-"+i.toLowerCase()}function Kj(i){return i.charAt(1).toUpperCase()}const Yj=PR([RR,Hj,DR,IR,MR],"html"),bS=PR([RR,$j,DR,IR,MR],"svg");function Qj(i){return i.join(" ").trim()}var $u={},Gw,MC;function Jj(){if(MC)return Gw;MC=1;var i=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,u=/^\s+|\s+$/g,h=`
`,d="/",p="*",m="",y="comment",v="declaration";function E(k,C){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];C=C||{};var N=1,T=1;function D(ie){var Z=ie.match(e);Z&&(N+=Z.length);var se=ie.lastIndexOf(h);T=~se?ie.length-se:T+ie.length}function F(){var ie={line:N,column:T};return function(Z){return Z.position=new L(ie),K(),Z}}function L(ie){this.start=ie,this.end={line:N,column:T},this.source=C.source}L.prototype.content=k;function j(ie){var Z=new Error(C.source+":"+N+":"+T+": "+ie);if(Z.reason=ie,Z.filename=C.source,Z.line=N,Z.column=T,Z.source=k,!C.silent)throw Z}function G(ie){var Z=ie.exec(k);if(Z){var se=Z[0];return D(se),k=k.slice(se.length),Z}}function K(){G(t)}function ee(ie){var Z;for(ie=ie||[];Z=q();)Z!==!1&&ie.push(Z);return ie}function q(){var ie=F();if(!(d!=k.charAt(0)||p!=k.charAt(1))){for(var Z=2;m!=k.charAt(Z)&&(p!=k.charAt(Z)||d!=k.charAt(Z+1));)++Z;if(Z+=2,m===k.charAt(Z-1))return j("End of comment missing");var se=k.slice(2,Z-2);return T+=2,D(se),k=k.slice(Z),T+=2,ie({type:y,comment:se})}}function re(){var ie=F(),Z=G(n);if(Z){if(q(),!G(r))return j("property missing ':'");var se=G(s),J=ie({type:v,property:A(Z[0].replace(i,m)),value:se?A(se[0].replace(i,m)):m});return G(a),J}}function ue(){var ie=[];ee(ie);for(var Z;Z=re();)Z!==!1&&(ie.push(Z),ee(ie));return ie}return K(),ue()}function A(k){return k?k.replace(u,m):m}return Gw=E,Gw}var FC;function Zj(){if(FC)return $u;FC=1;var i=$u&&$u.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($u,"__esModule",{value:!0}),$u.default=t;const e=i(Jj());function t(n,r){let s=null;if(!n||typeof n!="string")return s;const a=(0,e.default)(n),u=typeof r=="function";return a.forEach(h=>{if(h.type!=="declaration")return;const{property:d,value:p}=h;u?r(d,p,h):p&&(s=s||{},s[d]=p)}),s}return $u}var Mf={},OC;function eB(){if(OC)return Mf;OC=1,Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.camelCase=void 0;var i=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(d){return!d||t.test(d)||i.test(d)},a=function(d,p){return p.toUpperCase()},u=function(d,p){return"".concat(p,"-")},h=function(d,p){return p===void 0&&(p={}),s(d)?d:(d=d.toLowerCase(),p.reactCompat?d=d.replace(r,u):d=d.replace(n,u),d.replace(e,a))};return Mf.camelCase=h,Mf}var Ff,jC;function tB(){if(jC)return Ff;jC=1;var i=Ff&&Ff.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=i(Zj()),t=eB();function n(r,s){var a={};return!r||typeof r!="string"||(0,e.default)(r,function(u,h){u&&h&&(a[(0,t.camelCase)(u,s)]=h)}),a}return n.default=n,Ff=n,Ff}var nB=tB();const iB=bv(nB),FR=OR("end"),SS=OR("start");function OR(i){return e;function e(t){const n=t&&t.position&&t.position[i]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function rB(i){const e=SS(i),t=FR(i);if(e&&t)return{start:e,end:t}}function ap(i){return!i||typeof i!="object"?"":"position"in i||"type"in i?BC(i.position):"start"in i||"end"in i?BC(i):"line"in i||"column"in i?V1(i):""}function V1(i){return zC(i&&i.line)+":"+zC(i&&i.column)}function BC(i){return V1(i&&i.start)+"-"+V1(i&&i.end)}function zC(i){return i&&typeof i=="number"?i:1}class oi extends Error{constructor(e,t,n){super(),typeof t=="string"&&(n=t,t=void 0);let r="",s={},a=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?r=e:!s.cause&&e&&(a=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof n=="string"){const h=n.indexOf(":");h===-1?s.ruleId=n:(s.source=n.slice(0,h),s.ruleId=n.slice(h+1))}if(!s.place&&s.ancestors&&s.ancestors){const h=s.ancestors[s.ancestors.length-1];h&&(s.place=h.position)}const u=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=u?u.line:void 0,this.name=ap(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}oi.prototype.file="";oi.prototype.name="";oi.prototype.reason="";oi.prototype.message="";oi.prototype.stack="";oi.prototype.column=void 0;oi.prototype.line=void 0;oi.prototype.ancestors=void 0;oi.prototype.cause=void 0;oi.prototype.fatal=void 0;oi.prototype.place=void 0;oi.prototype.ruleId=void 0;oi.prototype.source=void 0;const ES={}.hasOwnProperty,sB=new Map,oB=/[A-Z]/g,aB=new Set(["table","tbody","thead","tfoot","tr"]),lB=new Set(["td","th"]),jR="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function cB(i,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let n;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=yB(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=gB(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:n,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?bS:Yj,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=BR(r,i,void 0);return s&&typeof s!="string"?s:r.create(i,r.Fragment,{children:s||void 0},void 0)}function BR(i,e,t){if(e.type==="element")return uB(i,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return hB(i,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return fB(i,e,t);if(e.type==="mdxjsEsm")return dB(i,e);if(e.type==="root")return pB(i,e,t);if(e.type==="text")return mB(i,e)}function uB(i,e,t){const n=i.schema;let r=n;e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=bS,i.schema=r),i.ancestors.push(e);const s=UR(i,e.tagName,!1),a=vB(i,e);let u=kS(i,e);return aB.has(e.tagName)&&(u=u.filter(function(h){return typeof h=="string"?!zj(h):!0})),zR(i,a,s,e),AS(a,u),i.ancestors.pop(),i.schema=n,i.create(e,s,a,t)}function hB(i,e){if(e.data&&e.data.estree&&i.evaluater){const n=e.data.estree.body[0];return n.type,i.evaluater.evaluateExpression(n.expression)}yp(i,e.position)}function dB(i,e){if(e.data&&e.data.estree&&i.evaluater)return i.evaluater.evaluateProgram(e.data.estree);yp(i,e.position)}function fB(i,e,t){const n=i.schema;let r=n;e.name==="svg"&&n.space==="html"&&(r=bS,i.schema=r),i.ancestors.push(e);const s=e.name===null?i.Fragment:UR(i,e.name,!0),a=xB(i,e),u=kS(i,e);return zR(i,a,s,e),AS(a,u),i.ancestors.pop(),i.schema=n,i.create(e,s,a,t)}function pB(i,e,t){const n={};return AS(n,kS(i,e)),i.create(e,i.Fragment,n,t)}function mB(i,e){return e.value}function zR(i,e,t,n){typeof t!="string"&&t!==i.Fragment&&i.passNode&&(e.node=n)}function AS(i,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(i.children=t)}}function gB(i,e,t){return n;function n(r,s,a,u){const d=Array.isArray(a.children)?t:e;return u?d(s,a,u):d(s,a)}}function yB(i,e){return t;function t(n,r,s,a){const u=Array.isArray(s.children),h=SS(n);return e(r,s,a,u,{columnNumber:h?h.column-1:void 0,fileName:i,lineNumber:h?h.line:void 0},void 0)}}function vB(i,e){const t={};let n,r;for(r in e.properties)if(r!=="children"&&ES.call(e.properties,r)){const s=wB(i,r,e.properties[r]);if(s){const[a,u]=s;i.tableCellAlignToStyle&&a==="align"&&typeof u=="string"&&lB.has(e.tagName)?n=u:t[a]=u}}if(n){const s=t.style||(t.style={});s[i.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return t}function xB(i,e){const t={};for(const n of e.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&i.evaluater){const s=n.data.estree.body[0];s.type;const a=s.expression;a.type;const u=a.properties[0];u.type,Object.assign(t,i.evaluater.evaluateExpression(u.argument))}else yp(i,e.position);else{const r=n.name;let s;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&i.evaluater){const u=n.value.data.estree.body[0];u.type,s=i.evaluater.evaluateExpression(u.expression)}else yp(i,e.position);else s=n.value===null?!0:n.value;t[r]=s}return t}function kS(i,e){const t=[];let n=-1;const r=i.passKeys?new Map:sB;for(;++n<e.children.length;){const s=e.children[n];let a;if(i.passKeys){const h=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(h){const d=r.get(h)||0;a=h+"-"+d,r.set(h,d+1)}}const u=BR(i,s,a);u!==void 0&&t.push(u)}return t}function wB(i,e,t){const n=qj(i.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=n.commaSeparated?Mj(t):Qj(t)),n.property==="style"){let r=typeof t=="object"?t:bB(i,String(t));return i.stylePropertyNameCase==="css"&&(r=SB(r)),["style",r]}return[i.elementAttributeNameCase==="react"&&n.space?Vj[n.property]||n.property:n.attribute,t]}}function bB(i,e){try{return iB(e,{reactCompat:!0})}catch(t){if(i.ignoreInvalidStyle)return{};const n=t,r=new oi("Cannot parse `style` attribute",{ancestors:i.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=i.filePath||void 0,r.url=jR+"#cannot-parse-style-attribute",r}}function UR(i,e,t){let n;if(!t)n={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,a;for(;++s<r.length;){const u=NC(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};a=a?{type:"MemberExpression",object:a,property:u,computed:!!(s&&u.type==="Literal"),optional:!1}:u}n=a}else n=NC(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(n.type==="Literal"){const r=n.value;return ES.call(i.components,r)?i.components[r]:r}if(i.evaluater)return i.evaluater.evaluateExpression(n);yp(i)}function yp(i,e){const t=new oi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:i.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=i.filePath||void 0,t.url=jR+"#cannot-handle-mdx-estrees-without-createevaluater",t}function SB(i){const e={};let t;for(t in i)ES.call(i,t)&&(e[EB(t)]=i[t]);return e}function EB(i){let e=i.replace(oB,AB);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function AB(i){return"-"+i.toLowerCase()}const qw={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},kB={};function CB(i,e){const t=kB,n=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return HR(i,n,r)}function HR(i,e,t){if(_B(i)){if("value"in i)return i.type==="html"&&!t?"":i.value;if(e&&"alt"in i&&i.alt)return i.alt;if("children"in i)return UC(i.children,e,t)}return Array.isArray(i)?UC(i,e,t):""}function UC(i,e,t){const n=[];let r=-1;for(;++r<i.length;)n[r]=HR(i[r],e,t);return n.join("")}function _B(i){return!!(i&&typeof i=="object")}const HC=document.createElement("i");function CS(i){const e="&"+i+";";HC.innerHTML=e;const t=HC.textContent;return t.charCodeAt(t.length-1)===59&&i!=="semi"||t===e?!1:t}function eo(i,e,t,n){const r=i.length;let s=0,a;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,n.length<1e4)a=Array.from(n),a.unshift(e,t),i.splice(...a);else for(t&&i.splice(e,t);s<n.length;)a=n.slice(s,s+1e4),a.unshift(e,0),i.splice(...a),s+=1e4,e+=1e4}function zr(i,e){return i.length>0?(eo(i,i.length,0,e),i):e}const $C={}.hasOwnProperty;function TB(i){const e={};let t=-1;for(;++t<i.length;)PB(e,i[t]);return e}function PB(i,e){let t;for(t in e){const r=($C.call(i,t)?i[t]:void 0)||(i[t]={}),s=e[t];let a;if(s)for(a in s){$C.call(r,a)||(r[a]=[]);const u=s[a];RB(r[a],Array.isArray(u)?u:u?[u]:[])}}}function RB(i,e){let t=-1;const n=[];for(;++t<e.length;)(e[t].add==="after"?i:n).push(e[t]);eo(i,0,0,n)}function $R(i,e){const t=Number.parseInt(i,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function ah(i){return i.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Js=kl(/[A-Za-z]/),yr=kl(/[\dA-Za-z]/),NB=kl(/[#-'*+\--9=?A-Z^-~]/);function W1(i){return i!==null&&(i<32||i===127)}const G1=kl(/\d/),LB=kl(/[\dA-Fa-f]/),DB=kl(/[!-/:-@[-`{-~]/);function Oe(i){return i!==null&&i<-2}function ji(i){return i!==null&&(i<0||i===32)}function lt(i){return i===-2||i===-1||i===32}const IB=kl(new RegExp("\\p{P}|\\p{S}","u")),MB=kl(/\s/);function kl(i){return e;function e(t){return t!==null&&t>-1&&i.test(String.fromCharCode(t))}}function zd(i){const e=[];let t=-1,n=0,r=0;for(;++t<i.length;){const s=i.charCodeAt(t);let a="";if(s===37&&yr(i.charCodeAt(t+1))&&yr(i.charCodeAt(t+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const u=i.charCodeAt(t+1);s<56320&&u>56319&&u<57344?(a=String.fromCharCode(s,u),r=1):a=""}else a=String.fromCharCode(s);a&&(e.push(i.slice(n,t),encodeURIComponent(a)),n=t+r+1,a=""),r&&(t+=r,r=0)}return e.join("")+i.slice(n)}function Pt(i,e,t,n){const r=n?n-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(h){return lt(h)?(i.enter(t),u(h)):e(h)}function u(h){return lt(h)&&s++<r?(i.consume(h),u):(i.exit(t),e(h))}}const FB={tokenize:OB};function OB(i){const e=i.attempt(this.parser.constructs.contentInitial,n,r);let t;return e;function n(u){if(u===null){i.consume(u);return}return i.enter("lineEnding"),i.consume(u),i.exit("lineEnding"),Pt(i,e,"linePrefix")}function r(u){return i.enter("paragraph"),s(u)}function s(u){const h=i.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=h),t=h,a(u)}function a(u){if(u===null){i.exit("chunkText"),i.exit("paragraph"),i.consume(u);return}return Oe(u)?(i.consume(u),i.exit("chunkText"),s):(i.consume(u),a)}}const jB={tokenize:BB},VC={tokenize:zB};function BB(i){const e=this,t=[];let n=0,r,s,a;return u;function u(T){if(n<t.length){const D=t[n];return e.containerState=D[1],i.attempt(D[0].continuation,h,d)(T)}return d(T)}function h(T){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&N();const D=e.events.length;let F=D,L;for(;F--;)if(e.events[F][0]==="exit"&&e.events[F][1].type==="chunkFlow"){L=e.events[F][1].end;break}C(n);let j=D;for(;j<e.events.length;)e.events[j][1].end={...L},j++;return eo(e.events,F+1,0,e.events.slice(D)),e.events.length=j,d(T)}return u(T)}function d(T){if(n===t.length){if(!r)return y(T);if(r.currentConstruct&&r.currentConstruct.concrete)return E(T);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},i.check(VC,p,m)(T)}function p(T){return r&&N(),C(n),y(T)}function m(T){return e.parser.lazy[e.now().line]=n!==t.length,a=e.now().offset,E(T)}function y(T){return e.containerState={},i.attempt(VC,v,E)(T)}function v(T){return n++,t.push([e.currentConstruct,e.containerState]),y(T)}function E(T){if(T===null){r&&N(),C(0),i.consume(T);return}return r=r||e.parser.flow(e.now()),i.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),A(T)}function A(T){if(T===null){k(i.exit("chunkFlow"),!0),C(0),i.consume(T);return}return Oe(T)?(i.consume(T),k(i.exit("chunkFlow")),n=0,e.interrupt=void 0,u):(i.consume(T),A)}function k(T,D){const F=e.sliceStream(T);if(D&&F.push(null),T.previous=s,s&&(s.next=T),s=T,r.defineSkip(T.start),r.write(F),e.parser.lazy[T.start.line]){let L=r.events.length;for(;L--;)if(r.events[L][1].start.offset<a&&(!r.events[L][1].end||r.events[L][1].end.offset>a))return;const j=e.events.length;let G=j,K,ee;for(;G--;)if(e.events[G][0]==="exit"&&e.events[G][1].type==="chunkFlow"){if(K){ee=e.events[G][1].end;break}K=!0}for(C(n),L=j;L<e.events.length;)e.events[L][1].end={...ee},L++;eo(e.events,G+1,0,e.events.slice(j)),e.events.length=L}}function C(T){let D=t.length;for(;D-- >T;){const F=t[D];e.containerState=F[1],F[0].exit.call(e,i)}t.length=T}function N(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function zB(i,e,t){return Pt(i,i.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function WC(i){if(i===null||ji(i)||MB(i))return 1;if(IB(i))return 2}function _S(i,e,t){const n=[];let r=-1;for(;++r<i.length;){const s=i[r].resolveAll;s&&!n.includes(s)&&(e=s(e,t),n.push(s))}return e}const q1={name:"attention",resolveAll:UB,tokenize:HB};function UB(i,e){let t=-1,n,r,s,a,u,h,d,p;for(;++t<i.length;)if(i[t][0]==="enter"&&i[t][1].type==="attentionSequence"&&i[t][1]._close){for(n=t;n--;)if(i[n][0]==="exit"&&i[n][1].type==="attentionSequence"&&i[n][1]._open&&e.sliceSerialize(i[n][1]).charCodeAt(0)===e.sliceSerialize(i[t][1]).charCodeAt(0)){if((i[n][1]._close||i[t][1]._open)&&(i[t][1].end.offset-i[t][1].start.offset)%3&&!((i[n][1].end.offset-i[n][1].start.offset+i[t][1].end.offset-i[t][1].start.offset)%3))continue;h=i[n][1].end.offset-i[n][1].start.offset>1&&i[t][1].end.offset-i[t][1].start.offset>1?2:1;const m={...i[n][1].end},y={...i[t][1].start};GC(m,-h),GC(y,h),a={type:h>1?"strongSequence":"emphasisSequence",start:m,end:{...i[n][1].end}},u={type:h>1?"strongSequence":"emphasisSequence",start:{...i[t][1].start},end:y},s={type:h>1?"strongText":"emphasisText",start:{...i[n][1].end},end:{...i[t][1].start}},r={type:h>1?"strong":"emphasis",start:{...a.start},end:{...u.end}},i[n][1].end={...a.start},i[t][1].start={...u.end},d=[],i[n][1].end.offset-i[n][1].start.offset&&(d=zr(d,[["enter",i[n][1],e],["exit",i[n][1],e]])),d=zr(d,[["enter",r,e],["enter",a,e],["exit",a,e],["enter",s,e]]),d=zr(d,_S(e.parser.constructs.insideSpan.null,i.slice(n+1,t),e)),d=zr(d,[["exit",s,e],["enter",u,e],["exit",u,e],["exit",r,e]]),i[t][1].end.offset-i[t][1].start.offset?(p=2,d=zr(d,[["enter",i[t][1],e],["exit",i[t][1],e]])):p=0,eo(i,n-1,t-n+3,d),t=n+d.length-p-2;break}}for(t=-1;++t<i.length;)i[t][1].type==="attentionSequence"&&(i[t][1].type="data");return i}function HB(i,e){const t=this.parser.constructs.attentionMarkers.null,n=this.previous,r=WC(n);let s;return a;function a(h){return s=h,i.enter("attentionSequence"),u(h)}function u(h){if(h===s)return i.consume(h),u;const d=i.exit("attentionSequence"),p=WC(h),m=!p||p===2&&r||t.includes(h),y=!r||r===2&&p||t.includes(n);return d._open=!!(s===42?m:m&&(r||!y)),d._close=!!(s===42?y:y&&(p||!m)),e(h)}}function GC(i,e){i.column+=e,i.offset+=e,i._bufferIndex+=e}const $B={name:"autolink",tokenize:VB};function VB(i,e,t){let n=0;return r;function r(v){return i.enter("autolink"),i.enter("autolinkMarker"),i.consume(v),i.exit("autolinkMarker"),i.enter("autolinkProtocol"),s}function s(v){return Js(v)?(i.consume(v),a):v===64?t(v):d(v)}function a(v){return v===43||v===45||v===46||yr(v)?(n=1,u(v)):d(v)}function u(v){return v===58?(i.consume(v),n=0,h):(v===43||v===45||v===46||yr(v))&&n++<32?(i.consume(v),u):(n=0,d(v))}function h(v){return v===62?(i.exit("autolinkProtocol"),i.enter("autolinkMarker"),i.consume(v),i.exit("autolinkMarker"),i.exit("autolink"),e):v===null||v===32||v===60||W1(v)?t(v):(i.consume(v),h)}function d(v){return v===64?(i.consume(v),p):NB(v)?(i.consume(v),d):t(v)}function p(v){return yr(v)?m(v):t(v)}function m(v){return v===46?(i.consume(v),n=0,p):v===62?(i.exit("autolinkProtocol").type="autolinkEmail",i.enter("autolinkMarker"),i.consume(v),i.exit("autolinkMarker"),i.exit("autolink"),e):y(v)}function y(v){if((v===45||yr(v))&&n++<63){const E=v===45?y:m;return i.consume(v),E}return t(v)}}const Mv={partial:!0,tokenize:WB};function WB(i,e,t){return n;function n(s){return lt(s)?Pt(i,r,"linePrefix")(s):r(s)}function r(s){return s===null||Oe(s)?e(s):t(s)}}const VR={continuation:{tokenize:qB},exit:XB,name:"blockQuote",tokenize:GB};function GB(i,e,t){const n=this;return r;function r(a){if(a===62){const u=n.containerState;return u.open||(i.enter("blockQuote",{_container:!0}),u.open=!0),i.enter("blockQuotePrefix"),i.enter("blockQuoteMarker"),i.consume(a),i.exit("blockQuoteMarker"),s}return t(a)}function s(a){return lt(a)?(i.enter("blockQuotePrefixWhitespace"),i.consume(a),i.exit("blockQuotePrefixWhitespace"),i.exit("blockQuotePrefix"),e):(i.exit("blockQuotePrefix"),e(a))}}function qB(i,e,t){const n=this;return r;function r(a){return lt(a)?Pt(i,s,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return i.attempt(VR,e,t)(a)}}function XB(i){i.exit("blockQuote")}const WR={name:"characterEscape",tokenize:KB};function KB(i,e,t){return n;function n(s){return i.enter("characterEscape"),i.enter("escapeMarker"),i.consume(s),i.exit("escapeMarker"),r}function r(s){return DB(s)?(i.enter("characterEscapeValue"),i.consume(s),i.exit("characterEscapeValue"),i.exit("characterEscape"),e):t(s)}}const GR={name:"characterReference",tokenize:YB};function YB(i,e,t){const n=this;let r=0,s,a;return u;function u(m){return i.enter("characterReference"),i.enter("characterReferenceMarker"),i.consume(m),i.exit("characterReferenceMarker"),h}function h(m){return m===35?(i.enter("characterReferenceMarkerNumeric"),i.consume(m),i.exit("characterReferenceMarkerNumeric"),d):(i.enter("characterReferenceValue"),s=31,a=yr,p(m))}function d(m){return m===88||m===120?(i.enter("characterReferenceMarkerHexadecimal"),i.consume(m),i.exit("characterReferenceMarkerHexadecimal"),i.enter("characterReferenceValue"),s=6,a=LB,p):(i.enter("characterReferenceValue"),s=7,a=G1,p(m))}function p(m){if(m===59&&r){const y=i.exit("characterReferenceValue");return a===yr&&!CS(n.sliceSerialize(y))?t(m):(i.enter("characterReferenceMarker"),i.consume(m),i.exit("characterReferenceMarker"),i.exit("characterReference"),e)}return a(m)&&r++<s?(i.consume(m),p):t(m)}}const qC={partial:!0,tokenize:JB},XC={concrete:!0,name:"codeFenced",tokenize:QB};function QB(i,e,t){const n=this,r={partial:!0,tokenize:F};let s=0,a=0,u;return h;function h(L){return d(L)}function d(L){const j=n.events[n.events.length-1];return s=j&&j[1].type==="linePrefix"?j[2].sliceSerialize(j[1],!0).length:0,u=L,i.enter("codeFenced"),i.enter("codeFencedFence"),i.enter("codeFencedFenceSequence"),p(L)}function p(L){return L===u?(a++,i.consume(L),p):a<3?t(L):(i.exit("codeFencedFenceSequence"),lt(L)?Pt(i,m,"whitespace")(L):m(L))}function m(L){return L===null||Oe(L)?(i.exit("codeFencedFence"),n.interrupt?e(L):i.check(qC,A,D)(L)):(i.enter("codeFencedFenceInfo"),i.enter("chunkString",{contentType:"string"}),y(L))}function y(L){return L===null||Oe(L)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),m(L)):lt(L)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),Pt(i,v,"whitespace")(L)):L===96&&L===u?t(L):(i.consume(L),y)}function v(L){return L===null||Oe(L)?m(L):(i.enter("codeFencedFenceMeta"),i.enter("chunkString",{contentType:"string"}),E(L))}function E(L){return L===null||Oe(L)?(i.exit("chunkString"),i.exit("codeFencedFenceMeta"),m(L)):L===96&&L===u?t(L):(i.consume(L),E)}function A(L){return i.attempt(r,D,k)(L)}function k(L){return i.enter("lineEnding"),i.consume(L),i.exit("lineEnding"),C}function C(L){return s>0&&lt(L)?Pt(i,N,"linePrefix",s+1)(L):N(L)}function N(L){return L===null||Oe(L)?i.check(qC,A,D)(L):(i.enter("codeFlowValue"),T(L))}function T(L){return L===null||Oe(L)?(i.exit("codeFlowValue"),N(L)):(i.consume(L),T)}function D(L){return i.exit("codeFenced"),e(L)}function F(L,j,G){let K=0;return ee;function ee(Z){return L.enter("lineEnding"),L.consume(Z),L.exit("lineEnding"),q}function q(Z){return L.enter("codeFencedFence"),lt(Z)?Pt(L,re,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Z):re(Z)}function re(Z){return Z===u?(L.enter("codeFencedFenceSequence"),ue(Z)):G(Z)}function ue(Z){return Z===u?(K++,L.consume(Z),ue):K>=a?(L.exit("codeFencedFenceSequence"),lt(Z)?Pt(L,ie,"whitespace")(Z):ie(Z)):G(Z)}function ie(Z){return Z===null||Oe(Z)?(L.exit("codeFencedFence"),j(Z)):G(Z)}}}function JB(i,e,t){const n=this;return r;function r(a){return a===null?t(a):(i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),s)}function s(a){return n.parser.lazy[n.now().line]?t(a):e(a)}}const Xw={name:"codeIndented",tokenize:e3},ZB={partial:!0,tokenize:t3};function e3(i,e,t){const n=this;return r;function r(d){return i.enter("codeIndented"),Pt(i,s,"linePrefix",5)(d)}function s(d){const p=n.events[n.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?a(d):t(d)}function a(d){return d===null?h(d):Oe(d)?i.attempt(ZB,a,h)(d):(i.enter("codeFlowValue"),u(d))}function u(d){return d===null||Oe(d)?(i.exit("codeFlowValue"),a(d)):(i.consume(d),u)}function h(d){return i.exit("codeIndented"),e(d)}}function t3(i,e,t){const n=this;return r;function r(a){return n.parser.lazy[n.now().line]?t(a):Oe(a)?(i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),r):Pt(i,s,"linePrefix",5)(a)}function s(a){const u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(a):Oe(a)?r(a):t(a)}}const n3={name:"codeText",previous:r3,resolve:i3,tokenize:s3};function i3(i){let e=i.length-4,t=3,n,r;if((i[t][1].type==="lineEnding"||i[t][1].type==="space")&&(i[e][1].type==="lineEnding"||i[e][1].type==="space")){for(n=t;++n<e;)if(i[n][1].type==="codeTextData"){i[t][1].type="codeTextPadding",i[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(n=t-1,e++;++n<=e;)r===void 0?n!==e&&i[n][1].type!=="lineEnding"&&(r=n):(n===e||i[n][1].type==="lineEnding")&&(i[r][1].type="codeTextData",n!==r+2&&(i[r][1].end=i[n-1][1].end,i.splice(r+2,n-r-2),e-=n-r-2,n=r+2),r=void 0);return i}function r3(i){return i!==96||this.events[this.events.length-1][1].type==="characterEscape"}function s3(i,e,t){let n=0,r,s;return a;function a(m){return i.enter("codeText"),i.enter("codeTextSequence"),u(m)}function u(m){return m===96?(i.consume(m),n++,u):(i.exit("codeTextSequence"),h(m))}function h(m){return m===null?t(m):m===32?(i.enter("space"),i.consume(m),i.exit("space"),h):m===96?(s=i.enter("codeTextSequence"),r=0,p(m)):Oe(m)?(i.enter("lineEnding"),i.consume(m),i.exit("lineEnding"),h):(i.enter("codeTextData"),d(m))}function d(m){return m===null||m===32||m===96||Oe(m)?(i.exit("codeTextData"),h(m)):(i.consume(m),d)}function p(m){return m===96?(i.consume(m),r++,p):r===n?(i.exit("codeTextSequence"),i.exit("codeText"),e(m)):(s.type="codeTextData",d(m))}}class o3{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=t??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&Of(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Of(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Of(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Of(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Of(this.left,t.reverse())}}}function Of(i,e){let t=0;if(e.length<1e4)i.push(...e);else for(;t<e.length;)i.push(...e.slice(t,t+1e4)),t+=1e4}function qR(i){const e={};let t=-1,n,r,s,a,u,h,d;const p=new o3(i);for(;++t<p.length;){for(;t in e;)t=e[t];if(n=p.get(t),t&&n[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(h=n[1]._tokenizer.events,s=0,s<h.length&&h[s][1].type==="lineEndingBlank"&&(s+=2),s<h.length&&h[s][1].type==="content"))for(;++s<h.length&&h[s][1].type!=="content";)h[s][1].type==="chunkText"&&(h[s][1]._isInFirstContentOfListItem=!0,s++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,a3(p,t)),t=e[t],d=!0);else if(n[1]._container){for(s=t,r=void 0;s--;)if(a=p.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(r&&(p.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;r&&(n[1].end={...p.get(r)[1].start},u=p.slice(r,t),u.unshift(n),p.splice(r,t-r+1,u))}}return eo(i,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function a3(i,e){const t=i.get(e)[1],n=i.get(e)[2];let r=e-1;const s=[];let a=t._tokenizer;a||(a=n.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const u=a.events,h=[],d={};let p,m,y=-1,v=t,E=0,A=0;const k=[A];for(;v;){for(;i.get(++r)[1]!==v;);s.push(r),v._tokenizer||(p=n.sliceStream(v),v.next||p.push(null),m&&a.defineSkip(v.start),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(p),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),m=v,v=v.next}for(v=t;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(A=y+1,k.push(A),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(a.events=[],v?(v._tokenizer=void 0,v.previous=void 0):k.pop(),y=k.length;y--;){const C=u.slice(k[y],k[y+1]),N=s.pop();h.push([N,N+C.length-1]),i.splice(N,2,C)}for(h.reverse(),y=-1;++y<h.length;)d[E+h[y][0]]=E+h[y][1],E+=h[y][1]-h[y][0]-1;return d}const l3={resolve:u3,tokenize:h3},c3={partial:!0,tokenize:d3};function u3(i){return qR(i),i}function h3(i,e){let t;return n;function n(u){return i.enter("content"),t=i.enter("chunkContent",{contentType:"content"}),r(u)}function r(u){return u===null?s(u):Oe(u)?i.check(c3,a,s)(u):(i.consume(u),r)}function s(u){return i.exit("chunkContent"),i.exit("content"),e(u)}function a(u){return i.consume(u),i.exit("chunkContent"),t.next=i.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function d3(i,e,t){const n=this;return r;function r(a){return i.exit("chunkContent"),i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),Pt(i,s,"linePrefix")}function s(a){if(a===null||Oe(a))return t(a);const u=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(a):i.interrupt(n.parser.constructs.flow,t,e)(a)}}function XR(i,e,t,n,r,s,a,u,h){const d=h||Number.POSITIVE_INFINITY;let p=0;return m;function m(C){return C===60?(i.enter(n),i.enter(r),i.enter(s),i.consume(C),i.exit(s),y):C===null||C===32||C===41||W1(C)?t(C):(i.enter(n),i.enter(a),i.enter(u),i.enter("chunkString",{contentType:"string"}),A(C))}function y(C){return C===62?(i.enter(s),i.consume(C),i.exit(s),i.exit(r),i.exit(n),e):(i.enter(u),i.enter("chunkString",{contentType:"string"}),v(C))}function v(C){return C===62?(i.exit("chunkString"),i.exit(u),y(C)):C===null||C===60||Oe(C)?t(C):(i.consume(C),C===92?E:v)}function E(C){return C===60||C===62||C===92?(i.consume(C),v):v(C)}function A(C){return!p&&(C===null||C===41||ji(C))?(i.exit("chunkString"),i.exit(u),i.exit(a),i.exit(n),e(C)):p<d&&C===40?(i.consume(C),p++,A):C===41?(i.consume(C),p--,A):C===null||C===32||C===40||W1(C)?t(C):(i.consume(C),C===92?k:A)}function k(C){return C===40||C===41||C===92?(i.consume(C),A):A(C)}}function KR(i,e,t,n,r,s){const a=this;let u=0,h;return d;function d(v){return i.enter(n),i.enter(r),i.consume(v),i.exit(r),i.enter(s),p}function p(v){return u>999||v===null||v===91||v===93&&!h||v===94&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs?t(v):v===93?(i.exit(s),i.enter(r),i.consume(v),i.exit(r),i.exit(n),e):Oe(v)?(i.enter("lineEnding"),i.consume(v),i.exit("lineEnding"),p):(i.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===null||v===91||v===93||Oe(v)||u++>999?(i.exit("chunkString"),p(v)):(i.consume(v),h||(h=!lt(v)),v===92?y:m)}function y(v){return v===91||v===92||v===93?(i.consume(v),u++,m):m(v)}}function YR(i,e,t,n,r,s){let a;return u;function u(y){return y===34||y===39||y===40?(i.enter(n),i.enter(r),i.consume(y),i.exit(r),a=y===40?41:y,h):t(y)}function h(y){return y===a?(i.enter(r),i.consume(y),i.exit(r),i.exit(n),e):(i.enter(s),d(y))}function d(y){return y===a?(i.exit(s),h(a)):y===null?t(y):Oe(y)?(i.enter("lineEnding"),i.consume(y),i.exit("lineEnding"),Pt(i,d,"linePrefix")):(i.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===a||y===null||Oe(y)?(i.exit("chunkString"),d(y)):(i.consume(y),y===92?m:p)}function m(y){return y===a||y===92?(i.consume(y),p):p(y)}}function lp(i,e){let t;return n;function n(r){return Oe(r)?(i.enter("lineEnding"),i.consume(r),i.exit("lineEnding"),t=!0,n):lt(r)?Pt(i,n,t?"linePrefix":"lineSuffix")(r):e(r)}}const f3={name:"definition",tokenize:m3},p3={partial:!0,tokenize:g3};function m3(i,e,t){const n=this;let r;return s;function s(v){return i.enter("definition"),a(v)}function a(v){return KR.call(n,i,u,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function u(v){return r=ah(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),v===58?(i.enter("definitionMarker"),i.consume(v),i.exit("definitionMarker"),h):t(v)}function h(v){return ji(v)?lp(i,d)(v):d(v)}function d(v){return XR(i,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function p(v){return i.attempt(p3,m,m)(v)}function m(v){return lt(v)?Pt(i,y,"whitespace")(v):y(v)}function y(v){return v===null||Oe(v)?(i.exit("definition"),n.parser.defined.push(r),e(v)):t(v)}}function g3(i,e,t){return n;function n(u){return ji(u)?lp(i,r)(u):t(u)}function r(u){return YR(i,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function s(u){return lt(u)?Pt(i,a,"whitespace")(u):a(u)}function a(u){return u===null||Oe(u)?e(u):t(u)}}const y3={name:"hardBreakEscape",tokenize:v3};function v3(i,e,t){return n;function n(s){return i.enter("hardBreakEscape"),i.consume(s),r}function r(s){return Oe(s)?(i.exit("hardBreakEscape"),e(s)):t(s)}}const x3={name:"headingAtx",resolve:w3,tokenize:b3};function w3(i,e){let t=i.length-2,n=3,r,s;return i[n][1].type==="whitespace"&&(n+=2),t-2>n&&i[t][1].type==="whitespace"&&(t-=2),i[t][1].type==="atxHeadingSequence"&&(n===t-1||t-4>n&&i[t-2][1].type==="whitespace")&&(t-=n+1===t?2:4),t>n&&(r={type:"atxHeadingText",start:i[n][1].start,end:i[t][1].end},s={type:"chunkText",start:i[n][1].start,end:i[t][1].end,contentType:"text"},eo(i,n,t-n+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),i}function b3(i,e,t){let n=0;return r;function r(p){return i.enter("atxHeading"),s(p)}function s(p){return i.enter("atxHeadingSequence"),a(p)}function a(p){return p===35&&n++<6?(i.consume(p),a):p===null||ji(p)?(i.exit("atxHeadingSequence"),u(p)):t(p)}function u(p){return p===35?(i.enter("atxHeadingSequence"),h(p)):p===null||Oe(p)?(i.exit("atxHeading"),e(p)):lt(p)?Pt(i,u,"whitespace")(p):(i.enter("atxHeadingText"),d(p))}function h(p){return p===35?(i.consume(p),h):(i.exit("atxHeadingSequence"),u(p))}function d(p){return p===null||p===35||ji(p)?(i.exit("atxHeadingText"),u(p)):(i.consume(p),d)}}const S3=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],KC=["pre","script","style","textarea"],E3={concrete:!0,name:"htmlFlow",resolveTo:C3,tokenize:_3},A3={partial:!0,tokenize:P3},k3={partial:!0,tokenize:T3};function C3(i){let e=i.length;for(;e--&&!(i[e][0]==="enter"&&i[e][1].type==="htmlFlow"););return e>1&&i[e-2][1].type==="linePrefix"&&(i[e][1].start=i[e-2][1].start,i[e+1][1].start=i[e-2][1].start,i.splice(e-2,2)),i}function _3(i,e,t){const n=this;let r,s,a,u,h;return d;function d(I){return p(I)}function p(I){return i.enter("htmlFlow"),i.enter("htmlFlowData"),i.consume(I),m}function m(I){return I===33?(i.consume(I),y):I===47?(i.consume(I),s=!0,A):I===63?(i.consume(I),r=3,n.interrupt?e:M):Js(I)?(i.consume(I),a=String.fromCharCode(I),k):t(I)}function y(I){return I===45?(i.consume(I),r=2,v):I===91?(i.consume(I),r=5,u=0,E):Js(I)?(i.consume(I),r=4,n.interrupt?e:M):t(I)}function v(I){return I===45?(i.consume(I),n.interrupt?e:M):t(I)}function E(I){const pe="CDATA[";return I===pe.charCodeAt(u++)?(i.consume(I),u===pe.length?n.interrupt?e:re:E):t(I)}function A(I){return Js(I)?(i.consume(I),a=String.fromCharCode(I),k):t(I)}function k(I){if(I===null||I===47||I===62||ji(I)){const pe=I===47,ye=a.toLowerCase();return!pe&&!s&&KC.includes(ye)?(r=1,n.interrupt?e(I):re(I)):S3.includes(a.toLowerCase())?(r=6,pe?(i.consume(I),C):n.interrupt?e(I):re(I)):(r=7,n.interrupt&&!n.parser.lazy[n.now().line]?t(I):s?N(I):T(I))}return I===45||yr(I)?(i.consume(I),a+=String.fromCharCode(I),k):t(I)}function C(I){return I===62?(i.consume(I),n.interrupt?e:re):t(I)}function N(I){return lt(I)?(i.consume(I),N):ee(I)}function T(I){return I===47?(i.consume(I),ee):I===58||I===95||Js(I)?(i.consume(I),D):lt(I)?(i.consume(I),T):ee(I)}function D(I){return I===45||I===46||I===58||I===95||yr(I)?(i.consume(I),D):F(I)}function F(I){return I===61?(i.consume(I),L):lt(I)?(i.consume(I),F):T(I)}function L(I){return I===null||I===60||I===61||I===62||I===96?t(I):I===34||I===39?(i.consume(I),h=I,j):lt(I)?(i.consume(I),L):G(I)}function j(I){return I===h?(i.consume(I),h=null,K):I===null||Oe(I)?t(I):(i.consume(I),j)}function G(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||ji(I)?F(I):(i.consume(I),G)}function K(I){return I===47||I===62||lt(I)?T(I):t(I)}function ee(I){return I===62?(i.consume(I),q):t(I)}function q(I){return I===null||Oe(I)?re(I):lt(I)?(i.consume(I),q):t(I)}function re(I){return I===45&&r===2?(i.consume(I),se):I===60&&r===1?(i.consume(I),J):I===62&&r===4?(i.consume(I),B):I===63&&r===3?(i.consume(I),M):I===93&&r===5?(i.consume(I),me):Oe(I)&&(r===6||r===7)?(i.exit("htmlFlowData"),i.check(A3,U,ue)(I)):I===null||Oe(I)?(i.exit("htmlFlowData"),ue(I)):(i.consume(I),re)}function ue(I){return i.check(k3,ie,U)(I)}function ie(I){return i.enter("lineEnding"),i.consume(I),i.exit("lineEnding"),Z}function Z(I){return I===null||Oe(I)?ue(I):(i.enter("htmlFlowData"),re(I))}function se(I){return I===45?(i.consume(I),M):re(I)}function J(I){return I===47?(i.consume(I),a="",Q):re(I)}function Q(I){if(I===62){const pe=a.toLowerCase();return KC.includes(pe)?(i.consume(I),B):re(I)}return Js(I)&&a.length<8?(i.consume(I),a+=String.fromCharCode(I),Q):re(I)}function me(I){return I===93?(i.consume(I),M):re(I)}function M(I){return I===62?(i.consume(I),B):I===45&&r===2?(i.consume(I),M):re(I)}function B(I){return I===null||Oe(I)?(i.exit("htmlFlowData"),U(I)):(i.consume(I),B)}function U(I){return i.exit("htmlFlow"),e(I)}}function T3(i,e,t){const n=this;return r;function r(a){return Oe(a)?(i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),s):t(a)}function s(a){return n.parser.lazy[n.now().line]?t(a):e(a)}}function P3(i,e,t){return n;function n(r){return i.enter("lineEnding"),i.consume(r),i.exit("lineEnding"),i.attempt(Mv,e,t)}}const R3={name:"htmlText",tokenize:N3};function N3(i,e,t){const n=this;let r,s,a;return u;function u(M){return i.enter("htmlText"),i.enter("htmlTextData"),i.consume(M),h}function h(M){return M===33?(i.consume(M),d):M===47?(i.consume(M),F):M===63?(i.consume(M),T):Js(M)?(i.consume(M),G):t(M)}function d(M){return M===45?(i.consume(M),p):M===91?(i.consume(M),s=0,E):Js(M)?(i.consume(M),N):t(M)}function p(M){return M===45?(i.consume(M),v):t(M)}function m(M){return M===null?t(M):M===45?(i.consume(M),y):Oe(M)?(a=m,J(M)):(i.consume(M),m)}function y(M){return M===45?(i.consume(M),v):m(M)}function v(M){return M===62?se(M):M===45?y(M):m(M)}function E(M){const B="CDATA[";return M===B.charCodeAt(s++)?(i.consume(M),s===B.length?A:E):t(M)}function A(M){return M===null?t(M):M===93?(i.consume(M),k):Oe(M)?(a=A,J(M)):(i.consume(M),A)}function k(M){return M===93?(i.consume(M),C):A(M)}function C(M){return M===62?se(M):M===93?(i.consume(M),C):A(M)}function N(M){return M===null||M===62?se(M):Oe(M)?(a=N,J(M)):(i.consume(M),N)}function T(M){return M===null?t(M):M===63?(i.consume(M),D):Oe(M)?(a=T,J(M)):(i.consume(M),T)}function D(M){return M===62?se(M):T(M)}function F(M){return Js(M)?(i.consume(M),L):t(M)}function L(M){return M===45||yr(M)?(i.consume(M),L):j(M)}function j(M){return Oe(M)?(a=j,J(M)):lt(M)?(i.consume(M),j):se(M)}function G(M){return M===45||yr(M)?(i.consume(M),G):M===47||M===62||ji(M)?K(M):t(M)}function K(M){return M===47?(i.consume(M),se):M===58||M===95||Js(M)?(i.consume(M),ee):Oe(M)?(a=K,J(M)):lt(M)?(i.consume(M),K):se(M)}function ee(M){return M===45||M===46||M===58||M===95||yr(M)?(i.consume(M),ee):q(M)}function q(M){return M===61?(i.consume(M),re):Oe(M)?(a=q,J(M)):lt(M)?(i.consume(M),q):K(M)}function re(M){return M===null||M===60||M===61||M===62||M===96?t(M):M===34||M===39?(i.consume(M),r=M,ue):Oe(M)?(a=re,J(M)):lt(M)?(i.consume(M),re):(i.consume(M),ie)}function ue(M){return M===r?(i.consume(M),r=void 0,Z):M===null?t(M):Oe(M)?(a=ue,J(M)):(i.consume(M),ue)}function ie(M){return M===null||M===34||M===39||M===60||M===61||M===96?t(M):M===47||M===62||ji(M)?K(M):(i.consume(M),ie)}function Z(M){return M===47||M===62||ji(M)?K(M):t(M)}function se(M){return M===62?(i.consume(M),i.exit("htmlTextData"),i.exit("htmlText"),e):t(M)}function J(M){return i.exit("htmlTextData"),i.enter("lineEnding"),i.consume(M),i.exit("lineEnding"),Q}function Q(M){return lt(M)?Pt(i,me,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):me(M)}function me(M){return i.enter("htmlTextData"),a(M)}}const TS={name:"labelEnd",resolveAll:M3,resolveTo:F3,tokenize:O3},L3={tokenize:j3},D3={tokenize:B3},I3={tokenize:z3};function M3(i){let e=-1;const t=[];for(;++e<i.length;){const n=i[e][1];if(t.push(i[e]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const r=n.type==="labelImage"?4:2;n.type="data",e+=r}}return i.length!==t.length&&eo(i,0,i.length,t),i}function F3(i,e){let t=i.length,n=0,r,s,a,u;for(;t--;)if(r=i[t][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;i[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(i[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=t,r.type!=="labelLink")){n=2;break}}else r.type==="labelEnd"&&(a=t);const h={type:i[s][1].type==="labelLink"?"link":"image",start:{...i[s][1].start},end:{...i[i.length-1][1].end}},d={type:"label",start:{...i[s][1].start},end:{...i[a][1].end}},p={type:"labelText",start:{...i[s+n+2][1].end},end:{...i[a-2][1].start}};return u=[["enter",h,e],["enter",d,e]],u=zr(u,i.slice(s+1,s+n+3)),u=zr(u,[["enter",p,e]]),u=zr(u,_S(e.parser.constructs.insideSpan.null,i.slice(s+n+4,a-3),e)),u=zr(u,[["exit",p,e],i[a-2],i[a-1],["exit",d,e]]),u=zr(u,i.slice(a+1)),u=zr(u,[["exit",h,e]]),eo(i,s,i.length,u),i}function O3(i,e,t){const n=this;let r=n.events.length,s,a;for(;r--;)if((n.events[r][1].type==="labelImage"||n.events[r][1].type==="labelLink")&&!n.events[r][1]._balanced){s=n.events[r][1];break}return u;function u(y){return s?s._inactive?m(y):(a=n.parser.defined.includes(ah(n.sliceSerialize({start:s.end,end:n.now()}))),i.enter("labelEnd"),i.enter("labelMarker"),i.consume(y),i.exit("labelMarker"),i.exit("labelEnd"),h):t(y)}function h(y){return y===40?i.attempt(L3,p,a?p:m)(y):y===91?i.attempt(D3,p,a?d:m)(y):a?p(y):m(y)}function d(y){return i.attempt(I3,p,m)(y)}function p(y){return e(y)}function m(y){return s._balanced=!0,t(y)}}function j3(i,e,t){return n;function n(m){return i.enter("resource"),i.enter("resourceMarker"),i.consume(m),i.exit("resourceMarker"),r}function r(m){return ji(m)?lp(i,s)(m):s(m)}function s(m){return m===41?p(m):XR(i,a,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function a(m){return ji(m)?lp(i,h)(m):p(m)}function u(m){return t(m)}function h(m){return m===34||m===39||m===40?YR(i,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):p(m)}function d(m){return ji(m)?lp(i,p)(m):p(m)}function p(m){return m===41?(i.enter("resourceMarker"),i.consume(m),i.exit("resourceMarker"),i.exit("resource"),e):t(m)}}function B3(i,e,t){const n=this;return r;function r(u){return KR.call(n,i,s,a,"reference","referenceMarker","referenceString")(u)}function s(u){return n.parser.defined.includes(ah(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(u):t(u)}function a(u){return t(u)}}function z3(i,e,t){return n;function n(s){return i.enter("reference"),i.enter("referenceMarker"),i.consume(s),i.exit("referenceMarker"),r}function r(s){return s===93?(i.enter("referenceMarker"),i.consume(s),i.exit("referenceMarker"),i.exit("reference"),e):t(s)}}const U3={name:"labelStartImage",resolveAll:TS.resolveAll,tokenize:H3};function H3(i,e,t){const n=this;return r;function r(u){return i.enter("labelImage"),i.enter("labelImageMarker"),i.consume(u),i.exit("labelImageMarker"),s}function s(u){return u===91?(i.enter("labelMarker"),i.consume(u),i.exit("labelMarker"),i.exit("labelImage"),a):t(u)}function a(u){return u===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(u):e(u)}}const $3={name:"labelStartLink",resolveAll:TS.resolveAll,tokenize:V3};function V3(i,e,t){const n=this;return r;function r(a){return i.enter("labelLink"),i.enter("labelMarker"),i.consume(a),i.exit("labelMarker"),i.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(a):e(a)}}const Kw={name:"lineEnding",tokenize:W3};function W3(i,e){return t;function t(n){return i.enter("lineEnding"),i.consume(n),i.exit("lineEnding"),Pt(i,e,"linePrefix")}}const M0={name:"thematicBreak",tokenize:G3};function G3(i,e,t){let n=0,r;return s;function s(d){return i.enter("thematicBreak"),a(d)}function a(d){return r=d,u(d)}function u(d){return d===r?(i.enter("thematicBreakSequence"),h(d)):n>=3&&(d===null||Oe(d))?(i.exit("thematicBreak"),e(d)):t(d)}function h(d){return d===r?(i.consume(d),n++,h):(i.exit("thematicBreakSequence"),lt(d)?Pt(i,u,"whitespace")(d):u(d))}}const Ci={continuation:{tokenize:Y3},exit:J3,name:"list",tokenize:K3},q3={partial:!0,tokenize:Z3},X3={partial:!0,tokenize:Q3};function K3(i,e,t){const n=this,r=n.events[n.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return u;function u(v){const E=n.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!n.containerState.marker||v===n.containerState.marker:G1(v)){if(n.containerState.type||(n.containerState.type=E,i.enter(E,{_container:!0})),E==="listUnordered")return i.enter("listItemPrefix"),v===42||v===45?i.check(M0,t,d)(v):d(v);if(!n.interrupt||v===49)return i.enter("listItemPrefix"),i.enter("listItemValue"),h(v)}return t(v)}function h(v){return G1(v)&&++a<10?(i.consume(v),h):(!n.interrupt||a<2)&&(n.containerState.marker?v===n.containerState.marker:v===41||v===46)?(i.exit("listItemValue"),d(v)):t(v)}function d(v){return i.enter("listItemMarker"),i.consume(v),i.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||v,i.check(Mv,n.interrupt?t:p,i.attempt(q3,y,m))}function p(v){return n.containerState.initialBlankLine=!0,s++,y(v)}function m(v){return lt(v)?(i.enter("listItemPrefixWhitespace"),i.consume(v),i.exit("listItemPrefixWhitespace"),y):t(v)}function y(v){return n.containerState.size=s+n.sliceSerialize(i.exit("listItemPrefix"),!0).length,e(v)}}function Y3(i,e,t){const n=this;return n.containerState._closeFlow=void 0,i.check(Mv,r,s);function r(u){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Pt(i,e,"listItemIndent",n.containerState.size+1)(u)}function s(u){return n.containerState.furtherBlankLines||!lt(u)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(u)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,i.attempt(X3,e,a)(u))}function a(u){return n.containerState._closeFlow=!0,n.interrupt=void 0,Pt(i,i.attempt(Ci,e,t),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function Q3(i,e,t){const n=this;return Pt(i,r,"listItemIndent",n.containerState.size+1);function r(s){const a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?e(s):t(s)}}function J3(i){i.exit(this.containerState.type)}function Z3(i,e,t){const n=this;return Pt(i,r,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const a=n.events[n.events.length-1];return!lt(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const YC={name:"setextUnderline",resolveTo:e4,tokenize:t4};function e4(i,e){let t=i.length,n,r,s;for(;t--;)if(i[t][0]==="enter"){if(i[t][1].type==="content"){n=t;break}i[t][1].type==="paragraph"&&(r=t)}else i[t][1].type==="content"&&i.splice(t,1),!s&&i[t][1].type==="definition"&&(s=t);const a={type:"setextHeading",start:{...i[n][1].start},end:{...i[i.length-1][1].end}};return i[r][1].type="setextHeadingText",s?(i.splice(r,0,["enter",a,e]),i.splice(s+1,0,["exit",i[n][1],e]),i[n][1].end={...i[s][1].end}):i[n][1]=a,i.push(["exit",a,e]),i}function t4(i,e,t){const n=this;let r;return s;function s(d){let p=n.events.length,m;for(;p--;)if(n.events[p][1].type!=="lineEnding"&&n.events[p][1].type!=="linePrefix"&&n.events[p][1].type!=="content"){m=n.events[p][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||m)?(i.enter("setextHeadingLine"),r=d,a(d)):t(d)}function a(d){return i.enter("setextHeadingLineSequence"),u(d)}function u(d){return d===r?(i.consume(d),u):(i.exit("setextHeadingLineSequence"),lt(d)?Pt(i,h,"lineSuffix")(d):h(d))}function h(d){return d===null||Oe(d)?(i.exit("setextHeadingLine"),e(d)):t(d)}}const n4={tokenize:i4};function i4(i){const e=this,t=i.attempt(Mv,n,i.attempt(this.parser.constructs.flowInitial,r,Pt(i,i.attempt(this.parser.constructs.flow,r,i.attempt(l3,r)),"linePrefix")));return t;function n(s){if(s===null){i.consume(s);return}return i.enter("lineEndingBlank"),i.consume(s),i.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(s){if(s===null){i.consume(s);return}return i.enter("lineEnding"),i.consume(s),i.exit("lineEnding"),e.currentConstruct=void 0,t}}const r4={resolveAll:JR()},s4=QR("string"),o4=QR("text");function QR(i){return{resolveAll:JR(i==="text"?a4:void 0),tokenize:e};function e(t){const n=this,r=this.parser.constructs[i],s=t.attempt(r,a,u);return a;function a(p){return d(p)?s(p):u(p)}function u(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),h}function h(p){return d(p)?(t.exit("data"),s(p)):(t.consume(p),h)}function d(p){if(p===null)return!0;const m=r[p];let y=-1;if(m)for(;++y<m.length;){const v=m[y];if(!v.previous||v.previous.call(n,n.previous))return!0}return!1}}}function JR(i){return e;function e(t,n){let r=-1,s;for(;++r<=t.length;)s===void 0?t[r]&&t[r][1].type==="data"&&(s=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),r=s+2),s=void 0);return i?i(t,n):t}}function a4(i,e){let t=0;for(;++t<=i.length;)if((t===i.length||i[t][1].type==="lineEnding")&&i[t-1][1].type==="data"){const n=i[t-1][1],r=e.sliceStream(n);let s=r.length,a=-1,u=0,h;for(;s--;){const d=r[s];if(typeof d=="string"){for(a=d.length;d.charCodeAt(a-1)===32;)u++,a--;if(a)break;a=-1}else if(d===-2)h=!0,u++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===i.length&&(u=0),u){const d={type:t===i.length||h||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:n.start._bufferIndex+a,_index:n.start._index+s,line:n.end.line,column:n.end.column-u,offset:n.end.offset-u},end:{...n.end}};n.end={...d.start},n.start.offset===n.end.offset?Object.assign(n,d):(i.splice(t,0,["enter",d,e],["exit",d,e]),t+=2)}t++}return i}const l4={42:Ci,43:Ci,45:Ci,48:Ci,49:Ci,50:Ci,51:Ci,52:Ci,53:Ci,54:Ci,55:Ci,56:Ci,57:Ci,62:VR},c4={91:f3},u4={[-2]:Xw,[-1]:Xw,32:Xw},h4={35:x3,42:M0,45:[YC,M0],60:E3,61:YC,95:M0,96:XC,126:XC},d4={38:GR,92:WR},f4={[-5]:Kw,[-4]:Kw,[-3]:Kw,33:U3,38:GR,42:q1,60:[$B,R3],91:$3,92:[y3,WR],93:TS,95:q1,96:n3},p4={null:[q1,r4]},m4={null:[42,95]},g4={null:[]},y4=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:m4,contentInitial:c4,disable:g4,document:l4,flow:h4,flowInitial:u4,insideSpan:p4,string:d4,text:f4},Symbol.toStringTag,{value:"Module"}));function v4(i,e,t){let n={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},s=[];let a=[],u=[];const h={attempt:j(F),check:j(L),consume:N,enter:T,exit:D,interrupt:j(L,{interrupt:!0})},d={code:null,containerState:{},defineSkip:A,events:[],now:E,parser:i,previous:null,sliceSerialize:y,sliceStream:v,write:m};let p=e.tokenize.call(d,h);return e.resolveAll&&s.push(e),d;function m(q){return a=zr(a,q),k(),a[a.length-1]!==null?[]:(G(e,0),d.events=_S(s,d.events,d),d.events)}function y(q,re){return w4(v(q),re)}function v(q){return x4(a,q)}function E(){const{_bufferIndex:q,_index:re,line:ue,column:ie,offset:Z}=n;return{_bufferIndex:q,_index:re,line:ue,column:ie,offset:Z}}function A(q){r[q.line]=q.column,ee()}function k(){let q;for(;n._index<a.length;){const re=a[n._index];if(typeof re=="string")for(q=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===q&&n._bufferIndex<re.length;)C(re.charCodeAt(n._bufferIndex));else C(re)}}function C(q){p=p(q)}function N(q){Oe(q)?(n.line++,n.column=1,n.offset+=q===-3?2:1,ee()):q!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),d.previous=q}function T(q,re){const ue=re||{};return ue.type=q,ue.start=E(),d.events.push(["enter",ue,d]),u.push(ue),ue}function D(q){const re=u.pop();return re.end=E(),d.events.push(["exit",re,d]),re}function F(q,re){G(q,re.from)}function L(q,re){re.restore()}function j(q,re){return ue;function ue(ie,Z,se){let J,Q,me,M;return Array.isArray(ie)?U(ie):"tokenize"in ie?U([ie]):B(ie);function B(de){return xe;function xe(Ee){const Re=Ee!==null&&de[Ee],tt=Ee!==null&&de.null,te=[...Array.isArray(Re)?Re:Re?[Re]:[],...Array.isArray(tt)?tt:tt?[tt]:[]];return U(te)(Ee)}}function U(de){return J=de,Q=0,de.length===0?se:I(de[Q])}function I(de){return xe;function xe(Ee){return M=K(),me=de,de.partial||(d.currentConstruct=de),de.name&&d.parser.constructs.disable.null.includes(de.name)?ye():de.tokenize.call(re?Object.assign(Object.create(d),re):d,h,pe,ye)(Ee)}}function pe(de){return q(me,M),Z}function ye(de){return M.restore(),++Q<J.length?I(J[Q]):se}}}function G(q,re){q.resolveAll&&!s.includes(q)&&s.push(q),q.resolve&&eo(d.events,re,d.events.length-re,q.resolve(d.events.slice(re),d)),q.resolveTo&&(d.events=q.resolveTo(d.events,d))}function K(){const q=E(),re=d.previous,ue=d.currentConstruct,ie=d.events.length,Z=Array.from(u);return{from:ie,restore:se};function se(){n=q,d.previous=re,d.currentConstruct=ue,d.events.length=ie,u=Z,ee()}}function ee(){n.line in r&&n.column<2&&(n.column=r[n.line],n.offset+=r[n.line]-1)}}function x4(i,e){const t=e.start._index,n=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let a;if(t===r)a=[i[t].slice(n,s)];else{if(a=i.slice(t,r),n>-1){const u=a[0];typeof u=="string"?a[0]=u.slice(n):a.shift()}s>0&&a.push(i[r].slice(0,s))}return a}function w4(i,e){let t=-1;const n=[];let r;for(;++t<i.length;){const s=i[t];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&r)continue;a=" ";break}default:a=String.fromCharCode(s)}r=s===-2,n.push(a)}return n.join("")}function b4(i){const n={constructs:TB([y4,...(i||{}).extensions||[]]),content:r(FB),defined:[],document:r(jB),flow:r(n4),lazy:{},string:r(s4),text:r(o4)};return n;function r(s){return a;function a(u){return v4(n,s,u)}}}function S4(i){for(;!qR(i););return i}const QC=/[\0\t\n\r]/g;function E4(){let i=1,e="",t=!0,n;return r;function r(s,a,u){const h=[];let d,p,m,y,v;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),m=0,e="",t&&(s.charCodeAt(0)===65279&&m++,t=void 0);m<s.length;){if(QC.lastIndex=m,d=QC.exec(s),y=d&&d.index!==void 0?d.index:s.length,v=s.charCodeAt(y),!d){e=s.slice(m);break}if(v===10&&m===y&&n)h.push(-3),n=void 0;else switch(n&&(h.push(-5),n=void 0),m<y&&(h.push(s.slice(m,y)),i+=y-m),v){case 0:{h.push(65533),i++;break}case 9:{for(p=Math.ceil(i/4)*4,h.push(-2);i++<p;)h.push(-1);break}case 10:{h.push(-4),i=1;break}default:n=!0,i=1}m=y+1}return u&&(n&&h.push(-5),e&&h.push(e),h.push(null)),h}}const A4=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function k4(i){return i.replace(A4,C4)}function C4(i,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),s=r===120||r===88;return $R(t.slice(s?2:1),s?16:10)}return CS(t)||i}const ZR={}.hasOwnProperty;function _4(i,e,t){return typeof e!="string"&&(t=e,e=void 0),T4(t)(S4(b4(t).document().write(E4()(i,e,!0))))}function T4(i){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(en),autolinkProtocol:K,autolinkEmail:K,atxHeading:s(dn),blockQuote:s(tt),characterEscape:K,characterReference:K,codeFenced:s(te),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(te,a),codeText:s(Me,a),codeTextData:K,data:K,codeFlowValue:K,definition:s(je),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(et),hardBreakEscape:s(Ln),hardBreakTrailing:s(Ln),htmlFlow:s(Dt,a),htmlFlowData:K,htmlText:s(Dt,a),htmlTextData:K,image:s(vi),label:a,link:s(en),listItem:s(In),listItemValue:y,listOrdered:s(Dn,m),listUnordered:s(Dn),paragraph:s(xi),reference:I,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(dn),strong:s(zi),thematicBreak:s(Cl)},exit:{atxHeading:h(),atxHeadingSequence:F,autolink:h(),autolinkEmail:Re,autolinkProtocol:Ee,blockQuote:h(),characterEscapeValue:ee,characterReferenceMarkerHexadecimal:ye,characterReferenceMarkerNumeric:ye,characterReferenceValue:de,characterReference:xe,codeFenced:h(k),codeFencedFence:A,codeFencedFenceInfo:v,codeFencedFenceMeta:E,codeFlowValue:ee,codeIndented:h(C),codeText:h(Z),codeTextData:ee,data:ee,definition:h(),definitionDestinationString:D,definitionLabelString:N,definitionTitleString:T,emphasis:h(),hardBreakEscape:h(re),hardBreakTrailing:h(re),htmlFlow:h(ue),htmlFlowData:ee,htmlText:h(ie),htmlTextData:ee,image:h(J),label:me,labelText:Q,lineEnding:q,link:h(se),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:pe,resourceDestinationString:M,resourceTitleString:B,resource:U,setextHeading:h(G),setextHeadingLineSequence:j,setextHeadingText:L,strong:h(),thematicBreak:h()}};e2(e,(i||{}).mdastExtensions||[]);const t={};return n;function n(ne){let ge={type:"root",children:[]};const Ie={stack:[ge],tokenStack:[],config:e,enter:u,exit:d,buffer:a,resume:p,data:t},Xe=[];let nt=-1;for(;++nt<ne.length;)if(ne[nt][1].type==="listOrdered"||ne[nt][1].type==="listUnordered")if(ne[nt][0]==="enter")Xe.push(nt);else{const Mn=Xe.pop();nt=r(ne,Mn,nt)}for(nt=-1;++nt<ne.length;){const Mn=e[ne[nt][0]];ZR.call(Mn,ne[nt][1].type)&&Mn[ne[nt][1].type].call(Object.assign({sliceSerialize:ne[nt][2].sliceSerialize},Ie),ne[nt][1])}if(Ie.tokenStack.length>0){const Mn=Ie.tokenStack[Ie.tokenStack.length-1];(Mn[1]||JC).call(Ie,void 0,Mn[0])}for(ge.position={start:Ca(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Ca(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},nt=-1;++nt<e.transforms.length;)ge=e.transforms[nt](ge)||ge;return ge}function r(ne,ge,Ie){let Xe=ge-1,nt=-1,Mn=!1,no,xr,oa,_l;for(;++Xe<=Ie;){const Fn=ne[Xe];switch(Fn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Fn[0]==="enter"?nt++:nt--,_l=void 0;break}case"lineEndingBlank":{Fn[0]==="enter"&&(no&&!_l&&!nt&&!oa&&(oa=Xe),_l=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:_l=void 0}if(!nt&&Fn[0]==="enter"&&Fn[1].type==="listItemPrefix"||nt===-1&&Fn[0]==="exit"&&(Fn[1].type==="listUnordered"||Fn[1].type==="listOrdered")){if(no){let ys=Xe;for(xr=void 0;ys--;){const Hi=ne[ys];if(Hi[1].type==="lineEnding"||Hi[1].type==="lineEndingBlank"){if(Hi[0]==="exit")continue;xr&&(ne[xr][1].type="lineEndingBlank",Mn=!0),Hi[1].type="lineEnding",xr=ys}else if(!(Hi[1].type==="linePrefix"||Hi[1].type==="blockQuotePrefix"||Hi[1].type==="blockQuotePrefixWhitespace"||Hi[1].type==="blockQuoteMarker"||Hi[1].type==="listItemIndent"))break}oa&&(!xr||oa<xr)&&(no._spread=!0),no.end=Object.assign({},xr?ne[xr][1].start:Fn[1].end),ne.splice(xr||Xe,0,["exit",no,Fn[2]]),Xe++,Ie++}if(Fn[1].type==="listItemPrefix"){const ys={type:"listItem",_spread:!1,start:Object.assign({},Fn[1].start),end:void 0};no=ys,ne.splice(Xe,0,["enter",ys,Fn[2]]),Xe++,Ie++,oa=void 0,_l=!0}}}return ne[ge][1]._spread=Mn,Ie}function s(ne,ge){return Ie;function Ie(Xe){u.call(this,ne(Xe),Xe),ge&&ge.call(this,Xe)}}function a(){this.stack.push({type:"fragment",children:[]})}function u(ne,ge,Ie){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([ge,Ie||void 0]),ne.position={start:Ca(ge.start),end:void 0}}function h(ne){return ge;function ge(Ie){ne&&ne.call(this,Ie),d.call(this,Ie)}}function d(ne,ge){const Ie=this.stack.pop(),Xe=this.tokenStack.pop();if(Xe)Xe[0].type!==ne.type&&(ge?ge.call(this,ne,Xe[0]):(Xe[1]||JC).call(this,ne,Xe[0]));else throw new Error("Cannot close `"+ne.type+"` ("+ap({start:ne.start,end:ne.end})+"): its not open");Ie.position.end=Ca(ne.end)}function p(){return CB(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function y(ne){if(this.data.expectingFirstListItemValue){const ge=this.stack[this.stack.length-2];ge.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function v(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.lang=ne}function E(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.meta=ne}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne.replace(/(\r?\n|\r)$/g,"")}function N(ne){const ge=this.resume(),Ie=this.stack[this.stack.length-1];Ie.label=ge,Ie.identifier=ah(this.sliceSerialize(ne)).toLowerCase()}function T(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.title=ne}function D(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.url=ne}function F(ne){const ge=this.stack[this.stack.length-1];if(!ge.depth){const Ie=this.sliceSerialize(ne).length;ge.depth=Ie}}function L(){this.data.setextHeadingSlurpLineEnding=!0}function j(ne){const ge=this.stack[this.stack.length-1];ge.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function G(){this.data.setextHeadingSlurpLineEnding=void 0}function K(ne){const Ie=this.stack[this.stack.length-1].children;let Xe=Ie[Ie.length-1];(!Xe||Xe.type!=="text")&&(Xe=Ui(),Xe.position={start:Ca(ne.start),end:void 0},Ie.push(Xe)),this.stack.push(Xe)}function ee(ne){const ge=this.stack.pop();ge.value+=this.sliceSerialize(ne),ge.position.end=Ca(ne.end)}function q(ne){const ge=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ie=ge.children[ge.children.length-1];Ie.position.end=Ca(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ge.type)&&(K.call(this,ne),ee.call(this,ne))}function re(){this.data.atHardBreak=!0}function ue(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne}function ie(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne}function Z(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne}function se(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ge,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function J(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ge,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function Q(ne){const ge=this.sliceSerialize(ne),Ie=this.stack[this.stack.length-2];Ie.label=k4(ge),Ie.identifier=ah(ge).toLowerCase()}function me(){const ne=this.stack[this.stack.length-1],ge=this.resume(),Ie=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ie.type==="link"){const Xe=ne.children;Ie.children=Xe}else Ie.alt=ge}function M(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.url=ne}function B(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.title=ne}function U(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function pe(ne){const ge=this.resume(),Ie=this.stack[this.stack.length-1];Ie.label=ge,Ie.identifier=ah(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function ye(ne){this.data.characterReferenceType=ne.type}function de(ne){const ge=this.sliceSerialize(ne),Ie=this.data.characterReferenceType;let Xe;Ie?(Xe=$R(ge,Ie==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Xe=CS(ge);const nt=this.stack[this.stack.length-1];nt.value+=Xe}function xe(ne){const ge=this.stack.pop();ge.position.end=Ca(ne.end)}function Ee(ne){ee.call(this,ne);const ge=this.stack[this.stack.length-1];ge.url=this.sliceSerialize(ne)}function Re(ne){ee.call(this,ne);const ge=this.stack[this.stack.length-1];ge.url="mailto:"+this.sliceSerialize(ne)}function tt(){return{type:"blockquote",children:[]}}function te(){return{type:"code",lang:null,meta:null,value:""}}function Me(){return{type:"inlineCode",value:""}}function je(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function et(){return{type:"emphasis",children:[]}}function dn(){return{type:"heading",depth:0,children:[]}}function Ln(){return{type:"break"}}function Dt(){return{type:"html",value:""}}function vi(){return{type:"image",title:null,url:"",alt:null}}function en(){return{type:"link",title:null,url:"",children:[]}}function Dn(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function In(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function xi(){return{type:"paragraph",children:[]}}function zi(){return{type:"strong",children:[]}}function Ui(){return{type:"text",value:""}}function Cl(){return{type:"thematicBreak"}}}function Ca(i){return{line:i.line,column:i.column,offset:i.offset}}function e2(i,e){let t=-1;for(;++t<e.length;){const n=e[t];Array.isArray(n)?e2(i,n):P4(i,n)}}function P4(i,e){let t;for(t in e)if(ZR.call(e,t))switch(t){case"canContainEols":{const n=e[t];n&&i[t].push(...n);break}case"transforms":{const n=e[t];n&&i[t].push(...n);break}case"enter":case"exit":{const n=e[t];n&&Object.assign(i[t],n);break}}}function JC(i,e){throw i?new Error("Cannot close `"+i.type+"` ("+ap({start:i.start,end:i.end})+"): a different token (`"+e.type+"`, "+ap({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+ap({start:e.start,end:e.end})+") is still open")}function R4(i){const e=this;e.parser=t;function t(n){return _4(n,{...e.data("settings"),...i,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function N4(i,e){const t={type:"element",tagName:"blockquote",properties:{},children:i.wrap(i.all(e),!0)};return i.patch(e,t),i.applyData(e,t)}function L4(i,e){const t={type:"element",tagName:"br",properties:{},children:[]};return i.patch(e,t),[i.applyData(e,t),{type:"text",value:`
`}]}function D4(i,e){const t=e.value?e.value+`
`:"",n={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(n.className=["language-"+r[0]]);let s={type:"element",tagName:"code",properties:n,children:[{type:"text",value:t}]};return e.meta&&(s.data={meta:e.meta}),i.patch(e,s),s=i.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},i.patch(e,s),s}function I4(i,e){const t={type:"element",tagName:"del",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}function M4(i,e){const t={type:"element",tagName:"em",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}function F4(i,e){const t=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",n=String(e.identifier).toUpperCase(),r=zd(n.toLowerCase()),s=i.footnoteOrder.indexOf(n);let a,u=i.footnoteCounts.get(n);u===void 0?(u=0,i.footnoteOrder.push(n),a=i.footnoteOrder.length):a=s+1,u+=1,i.footnoteCounts.set(n,u);const h={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};i.patch(e,h);const d={type:"element",tagName:"sup",properties:{},children:[h]};return i.patch(e,d),i.applyData(e,d)}function O4(i,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}function j4(i,e){if(i.options.allowDangerousHtml){const t={type:"raw",value:e.value};return i.patch(e,t),i.applyData(e,t)}}function t2(i,e){const t=e.referenceType;let n="]";if(t==="collapsed"?n+="[]":t==="full"&&(n+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+n}];const r=i.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=n:r.push({type:"text",value:n}),r}function B4(i,e){const t=String(e.identifier).toUpperCase(),n=i.definitionById.get(t);if(!n)return t2(i,e);const r={src:zd(n.url||""),alt:e.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const s={type:"element",tagName:"img",properties:r,children:[]};return i.patch(e,s),i.applyData(e,s)}function z4(i,e){const t={src:zd(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"img",properties:t,children:[]};return i.patch(e,n),i.applyData(e,n)}function U4(i,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};i.patch(e,t);const n={type:"element",tagName:"code",properties:{},children:[t]};return i.patch(e,n),i.applyData(e,n)}function H4(i,e){const t=String(e.identifier).toUpperCase(),n=i.definitionById.get(t);if(!n)return t2(i,e);const r={href:zd(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const s={type:"element",tagName:"a",properties:r,children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function $4(i,e){const t={href:zd(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"a",properties:t,children:i.all(e)};return i.patch(e,n),i.applyData(e,n)}function V4(i,e,t){const n=i.all(e),r=t?W4(t):n2(e),s={},a=[];if(typeof e.checked=="boolean"){const p=n[0];let m;p&&p.type==="element"&&p.tagName==="p"?m=p:(m={type:"element",tagName:"p",properties:{},children:[]},n.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let u=-1;for(;++u<n.length;){const p=n[u];(r||u!==0||p.type!=="element"||p.tagName!=="p")&&a.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!r?a.push(...p.children):a.push(p)}const h=n[n.length-1];h&&(r||h.type!=="element"||h.tagName!=="p")&&a.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:a};return i.patch(e,d),i.applyData(e,d)}function W4(i){let e=!1;if(i.type==="list"){e=i.spread||!1;const t=i.children;let n=-1;for(;!e&&++n<t.length;)e=n2(t[n])}return e}function n2(i){const e=i.spread;return e??i.children.length>1}function G4(i,e){const t={},n=i.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<n.length;){const a=n[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:i.wrap(n,!0)};return i.patch(e,s),i.applyData(e,s)}function q4(i,e){const t={type:"element",tagName:"p",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}function X4(i,e){const t={type:"root",children:i.wrap(i.all(e))};return i.patch(e,t),i.applyData(e,t)}function K4(i,e){const t={type:"element",tagName:"strong",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}function Y4(i,e){const t=i.all(e),n=t.shift(),r=[];if(n){const a={type:"element",tagName:"thead",properties:{},children:i.wrap([n],!0)};i.patch(e.children[0],a),r.push(a)}if(t.length>0){const a={type:"element",tagName:"tbody",properties:{},children:i.wrap(t,!0)},u=SS(e.children[1]),h=FR(e.children[e.children.length-1]);u&&h&&(a.position={start:u,end:h}),r.push(a)}const s={type:"element",tagName:"table",properties:{},children:i.wrap(r,!0)};return i.patch(e,s),i.applyData(e,s)}function Q4(i,e,t){const n=t?t.children:void 0,s=(n?n.indexOf(e):1)===0?"th":"td",a=t&&t.type==="table"?t.align:void 0,u=a?a.length:e.children.length;let h=-1;const d=[];for(;++h<u;){const m=e.children[h],y={},v=a?a[h]:void 0;v&&(y.align=v);let E={type:"element",tagName:s,properties:y,children:[]};m&&(E.children=i.all(m),i.patch(m,E),E=i.applyData(m,E)),d.push(E)}const p={type:"element",tagName:"tr",properties:{},children:i.wrap(d,!0)};return i.patch(e,p),i.applyData(e,p)}function J4(i,e){const t={type:"element",tagName:"td",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}const ZC=9,e_=32;function Z4(i){const e=String(i),t=/\r?\n|\r/g;let n=t.exec(e),r=0;const s=[];for(;n;)s.push(t_(e.slice(r,n.index),r>0,!0),n[0]),r=n.index+n[0].length,n=t.exec(e);return s.push(t_(e.slice(r),r>0,!1)),s.join("")}function t_(i,e,t){let n=0,r=i.length;if(e){let s=i.codePointAt(n);for(;s===ZC||s===e_;)n++,s=i.codePointAt(n)}if(t){let s=i.codePointAt(r-1);for(;s===ZC||s===e_;)r--,s=i.codePointAt(r-1)}return r>n?i.slice(n,r):""}function ez(i,e){const t={type:"text",value:Z4(String(e.value))};return i.patch(e,t),i.applyData(e,t)}function tz(i,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return i.patch(e,t),i.applyData(e,t)}const nz={blockquote:N4,break:L4,code:D4,delete:I4,emphasis:M4,footnoteReference:F4,heading:O4,html:j4,imageReference:B4,image:z4,inlineCode:U4,linkReference:H4,link:$4,listItem:V4,list:G4,paragraph:q4,root:X4,strong:K4,table:Y4,tableCell:J4,tableRow:Q4,text:ez,thematicBreak:tz,toml:Gy,yaml:Gy,definition:Gy,footnoteDefinition:Gy};function Gy(){}const i2=-1,Fv=0,cp=1,ev=2,PS=3,RS=4,NS=5,LS=6,r2=7,s2=8,n_=typeof self=="object"?self:globalThis,iz=(i,e)=>{const t=(r,s)=>(i.set(s,r),r),n=r=>{if(i.has(r))return i.get(r);const[s,a]=e[r];switch(s){case Fv:case i2:return t(a,r);case cp:{const u=t([],r);for(const h of a)u.push(n(h));return u}case ev:{const u=t({},r);for(const[h,d]of a)u[n(h)]=n(d);return u}case PS:return t(new Date(a),r);case RS:{const{source:u,flags:h}=a;return t(new RegExp(u,h),r)}case NS:{const u=t(new Map,r);for(const[h,d]of a)u.set(n(h),n(d));return u}case LS:{const u=t(new Set,r);for(const h of a)u.add(n(h));return u}case r2:{const{name:u,message:h}=a;return t(new n_[u](h),r)}case s2:return t(BigInt(a),r);case"BigInt":return t(Object(BigInt(a)),r);case"ArrayBuffer":return t(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:u}=new Uint8Array(a);return t(new DataView(u),a)}}return t(new n_[s](a),r)};return n},i_=i=>iz(new Map,i)(0),Vu="",{toString:rz}={},{keys:sz}=Object,jf=i=>{const e=typeof i;if(e!=="object"||!i)return[Fv,e];const t=rz.call(i).slice(8,-1);switch(t){case"Array":return[cp,Vu];case"Object":return[ev,Vu];case"Date":return[PS,Vu];case"RegExp":return[RS,Vu];case"Map":return[NS,Vu];case"Set":return[LS,Vu];case"DataView":return[cp,t]}return t.includes("Array")?[cp,t]:t.includes("Error")?[r2,t]:[ev,t]},qy=([i,e])=>i===Fv&&(e==="function"||e==="symbol"),oz=(i,e,t,n)=>{const r=(a,u)=>{const h=n.push(a)-1;return t.set(u,h),h},s=a=>{if(t.has(a))return t.get(a);let[u,h]=jf(a);switch(u){case Fv:{let p=a;switch(h){case"bigint":u=s2,p=a.toString();break;case"function":case"symbol":if(i)throw new TypeError("unable to serialize "+h);p=null;break;case"undefined":return r([i2],a)}return r([u,p],a)}case cp:{if(h){let y=a;return h==="DataView"?y=new Uint8Array(a.buffer):h==="ArrayBuffer"&&(y=new Uint8Array(a)),r([h,[...y]],a)}const p=[],m=r([u,p],a);for(const y of a)p.push(s(y));return m}case ev:{if(h)switch(h){case"BigInt":return r([h,a.toString()],a);case"Boolean":case"Number":case"String":return r([h,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const p=[],m=r([u,p],a);for(const y of sz(a))(i||!qy(jf(a[y])))&&p.push([s(y),s(a[y])]);return m}case PS:return r([u,a.toISOString()],a);case RS:{const{source:p,flags:m}=a;return r([u,{source:p,flags:m}],a)}case NS:{const p=[],m=r([u,p],a);for(const[y,v]of a)(i||!(qy(jf(y))||qy(jf(v))))&&p.push([s(y),s(v)]);return m}case LS:{const p=[],m=r([u,p],a);for(const y of a)(i||!qy(jf(y)))&&p.push(s(y));return m}}const{message:d}=a;return r([u,{name:h,message:d}],a)};return s},r_=(i,{json:e,lossy:t}={})=>{const n=[];return oz(!(e||t),!!e,new Map,n)(i),n},tv=typeof structuredClone=="function"?(i,e)=>e&&("json"in e||"lossy"in e)?i_(r_(i,e)):structuredClone(i):(i,e)=>i_(r_(i,e));function az(i,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function lz(i,e){return"Back to reference "+(i+1)+(e>1?"-"+e:"")}function cz(i){const e=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",t=i.options.footnoteBackContent||az,n=i.options.footnoteBackLabel||lz,r=i.options.footnoteLabel||"Footnotes",s=i.options.footnoteLabelTagName||"h2",a=i.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let h=-1;for(;++h<i.footnoteOrder.length;){const d=i.footnoteById.get(i.footnoteOrder[h]);if(!d)continue;const p=i.all(d),m=String(d.identifier).toUpperCase(),y=zd(m.toLowerCase());let v=0;const E=[],A=i.footnoteCounts.get(m);for(;A!==void 0&&++v<=A;){E.length>0&&E.push({type:"text",value:" "});let N=typeof t=="string"?t:t(h,v);typeof N=="string"&&(N={type:"text",value:N}),E.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(h,v),className:["data-footnote-backref"]},children:Array.isArray(N)?N:[N]})}const k=p[p.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const N=k.children[k.children.length-1];N&&N.type==="text"?N.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...E)}else p.push(...E);const C={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:i.wrap(p,!0)};i.patch(d,C),u.push(C)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...tv(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:i.wrap(u,!0)},{type:"text",value:`
`}]}}const o2=(function(i){if(i==null)return fz;if(typeof i=="function")return Ov(i);if(typeof i=="object")return Array.isArray(i)?uz(i):hz(i);if(typeof i=="string")return dz(i);throw new Error("Expected function, string, or object as test")});function uz(i){const e=[];let t=-1;for(;++t<i.length;)e[t]=o2(i[t]);return Ov(n);function n(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function hz(i){const e=i;return Ov(t);function t(n){const r=n;let s;for(s in i)if(r[s]!==e[s])return!1;return!0}}function dz(i){return Ov(e);function e(t){return t&&t.type===i}}function Ov(i){return e;function e(t,n,r){return!!(pz(t)&&i.call(this,t,typeof n=="number"?n:void 0,r||void 0))}}function fz(){return!0}function pz(i){return i!==null&&typeof i=="object"&&"type"in i}const a2=[],mz=!0,s_=!1,gz="skip";function yz(i,e,t,n){let r;typeof e=="function"&&typeof t!="function"?(n=t,t=e):r=e;const s=o2(r),a=n?-1:1;u(i,void 0,[])();function u(h,d,p){const m=h&&typeof h=="object"?h:{};if(typeof m.type=="string"){const v=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(h.type+(v?"<"+v+">":""))+")"})}return y;function y(){let v=a2,E,A,k;if((!e||s(h,d,p[p.length-1]||void 0))&&(v=vz(t(h,p)),v[0]===s_))return v;if("children"in h&&h.children){const C=h;if(C.children&&v[0]!==gz)for(A=(n?C.children.length:-1)+a,k=p.concat(C);A>-1&&A<C.children.length;){const N=C.children[A];if(E=u(N,A,k)(),E[0]===s_)return E;A=typeof E[1]=="number"?E[1]:A+a}}return v}}}function vz(i){return Array.isArray(i)?i:typeof i=="number"?[mz,i]:i==null?a2:[i]}function l2(i,e,t,n){let r,s,a;typeof e=="function"&&typeof t!="function"?(s=void 0,a=e,r=t):(s=e,a=t,r=n),yz(i,s,u,r);function u(h,d){const p=d[d.length-1],m=p?p.children.indexOf(h):void 0;return a(h,m,p)}}const X1={}.hasOwnProperty,xz={};function wz(i,e){const t=e||xz,n=new Map,r=new Map,s=new Map,a={...nz,...t.handlers},u={all:d,applyData:Sz,definitionById:n,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:a,one:h,options:t,patch:bz,wrap:Az};return l2(i,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const m=p.type==="definition"?n:r,y=String(p.identifier).toUpperCase();m.has(y)||m.set(y,p)}}),u;function h(p,m){const y=p.type,v=u.handlers[y];if(X1.call(u.handlers,y)&&v)return v(u,p,m);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in p){const{children:A,...k}=p,C=tv(k);return C.children=u.all(p),C}return tv(p)}return(u.options.unknownHandler||Ez)(u,p,m)}function d(p){const m=[];if("children"in p){const y=p.children;let v=-1;for(;++v<y.length;){const E=u.one(y[v],p);if(E){if(v&&y[v-1].type==="break"&&(!Array.isArray(E)&&E.type==="text"&&(E.value=o_(E.value)),!Array.isArray(E)&&E.type==="element")){const A=E.children[0];A&&A.type==="text"&&(A.value=o_(A.value))}Array.isArray(E)?m.push(...E):m.push(E)}}}return m}}function bz(i,e){i.position&&(e.position=rB(i))}function Sz(i,e){let t=e;if(i&&i.data){const n=i.data.hName,r=i.data.hChildren,s=i.data.hProperties;if(typeof n=="string")if(t.type==="element")t.tagName=n;else{const a="children"in t?t.children:[t];t={type:"element",tagName:n,properties:{},children:a}}t.type==="element"&&s&&Object.assign(t.properties,tv(s)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function Ez(i,e){const t=e.data||{},n="value"in e&&!(X1.call(t,"hProperties")||X1.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:i.all(e)};return i.patch(e,n),i.applyData(e,n)}function Az(i,e){const t=[];let n=-1;for(e&&t.push({type:"text",value:`
`});++n<i.length;)n&&t.push({type:"text",value:`
`}),t.push(i[n]);return e&&i.length>0&&t.push({type:"text",value:`
`}),t}function o_(i){let e=0,t=i.charCodeAt(e);for(;t===9||t===32;)e++,t=i.charCodeAt(e);return i.slice(e)}function a_(i,e){const t=wz(i,e),n=t.one(i,void 0),r=cz(t),s=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function kz(i,e){return i&&"run"in i?async function(t,n){const r=a_(t,{file:n,...e});await i.run(r,n)}:function(t,n){return a_(t,{file:n,...i||e})}}function l_(i){if(i)throw i}var Yw,c_;function Cz(){if(c_)return Yw;c_=1;var i=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var p=i.call(d,"constructor"),m=d.constructor&&d.constructor.prototype&&i.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!m)return!1;var y;for(y in d);return typeof y>"u"||i.call(d,y)},a=function(d,p){t&&p.name==="__proto__"?t(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},u=function(d,p){if(p==="__proto__")if(i.call(d,p)){if(n)return n(d,p).value}else return;return d[p]};return Yw=function h(){var d,p,m,y,v,E,A=arguments[0],k=1,C=arguments.length,N=!1;for(typeof A=="boolean"&&(N=A,A=arguments[1]||{},k=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});k<C;++k)if(d=arguments[k],d!=null)for(p in d)m=u(A,p),y=u(d,p),A!==y&&(N&&y&&(s(y)||(v=r(y)))?(v?(v=!1,E=m&&r(m)?m:[]):E=m&&s(m)?m:{},a(A,{name:p,newValue:h(N,E,y)})):typeof y<"u"&&a(A,{name:p,newValue:y}));return A},Yw}var _z=Cz();const Qw=bv(_z);function K1(i){if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function Tz(){const i=[],e={run:t,use:n};return e;function t(...r){let s=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);u(null,...r);function u(h,...d){const p=i[++s];let m=-1;if(h){a(h);return}for(;++m<r.length;)(d[m]===null||d[m]===void 0)&&(d[m]=r[m]);r=d,p?Pz(p,u)(...d):a(null,...d)}}function n(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return i.push(r),e}}function Pz(i,e){let t;return n;function n(...a){const u=i.length>a.length;let h;u&&a.push(r);try{h=i.apply(this,a)}catch(d){const p=d;if(u&&t)throw p;return r(p)}u||(h&&h.then&&typeof h.then=="function"?h.then(s,r):h instanceof Error?r(h):s(h))}function r(a,...u){t||(t=!0,e(a,...u))}function s(a){r(null,a)}}const _s={basename:Rz,dirname:Nz,extname:Lz,join:Dz,sep:"/"};function Rz(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');kg(i);let t=0,n=-1,r=i.length,s;if(e===void 0||e.length===0||e.length>i.length){for(;r--;)if(i.codePointAt(r)===47){if(s){t=r+1;break}}else n<0&&(s=!0,n=r+1);return n<0?"":i.slice(t,n)}if(e===i)return"";let a=-1,u=e.length-1;for(;r--;)if(i.codePointAt(r)===47){if(s){t=r+1;break}}else a<0&&(s=!0,a=r+1),u>-1&&(i.codePointAt(r)===e.codePointAt(u--)?u<0&&(n=r):(u=-1,n=a));return t===n?n=a:n<0&&(n=i.length),i.slice(t,n)}function Nz(i){if(kg(i),i.length===0)return".";let e=-1,t=i.length,n;for(;--t;)if(i.codePointAt(t)===47){if(n){e=t;break}}else n||(n=!0);return e<0?i.codePointAt(0)===47?"/":".":e===1&&i.codePointAt(0)===47?"//":i.slice(0,e)}function Lz(i){kg(i);let e=i.length,t=-1,n=0,r=-1,s=0,a;for(;e--;){const u=i.codePointAt(e);if(u===47){if(a){n=e+1;break}continue}t<0&&(a=!0,t=e+1),u===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||t<0||s===0||s===1&&r===t-1&&r===n+1?"":i.slice(r,t)}function Dz(...i){let e=-1,t;for(;++e<i.length;)kg(i[e]),i[e]&&(t=t===void 0?i[e]:t+"/"+i[e]);return t===void 0?".":Iz(t)}function Iz(i){kg(i);const e=i.codePointAt(0)===47;let t=Mz(i,!e);return t.length===0&&!e&&(t="."),t.length>0&&i.codePointAt(i.length-1)===47&&(t+="/"),e?"/"+t:t}function Mz(i,e){let t="",n=0,r=-1,s=0,a=-1,u,h;for(;++a<=i.length;){if(a<i.length)u=i.codePointAt(a);else{if(u===47)break;u=47}if(u===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(t.length<2||n!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(h=t.lastIndexOf("/"),h!==t.length-1){h<0?(t="",n=0):(t=t.slice(0,h),n=t.length-1-t.lastIndexOf("/")),r=a,s=0;continue}}else if(t.length>0){t="",n=0,r=a,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",n=2)}else t.length>0?t+="/"+i.slice(r+1,a):t=i.slice(r+1,a),n=a-r-1;r=a,s=0}else u===46&&s>-1?s++:s=-1}return t}function kg(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}const Fz={cwd:Oz};function Oz(){return"/"}function Y1(i){return!!(i!==null&&typeof i=="object"&&"href"in i&&i.href&&"protocol"in i&&i.protocol&&i.auth===void 0)}function jz(i){if(typeof i=="string")i=new URL(i);else if(!Y1(i)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+i+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(i.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Bz(i)}function Bz(i){if(i.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=i.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const n=e.codePointAt(t+2);if(n===70||n===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const Jw=["history","path","basename","stem","extname","dirname"];class c2{constructor(e){let t;e?Y1(e)?t={path:e}:typeof e=="string"||zz(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":Fz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<Jw.length;){const s=Jw[n];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let r;for(r in t)Jw.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?_s.basename(this.path):void 0}set basename(e){eb(e,"basename"),Zw(e,"basename"),this.path=_s.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?_s.dirname(this.path):void 0}set dirname(e){u_(this.basename,"dirname"),this.path=_s.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?_s.extname(this.path):void 0}set extname(e){if(Zw(e,"extname"),u_(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_s.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Y1(e)&&(e=jz(e)),eb(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?_s.basename(this.path,this.extname):void 0}set stem(e){eb(e,"stem"),Zw(e,"stem"),this.path=_s.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new oi(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Zw(i,e){if(i&&i.includes(_s.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+_s.sep+"`")}function eb(i,e){if(!i)throw new Error("`"+e+"` cannot be empty")}function u_(i,e){if(!i)throw new Error("Setting `"+e+"` requires `path` to be set too")}function zz(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const Uz=(function(i){const n=this.constructor.prototype,r=n[i],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,n),s}),Hz={}.hasOwnProperty;class DS extends Uz{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Tz()}copy(){const e=new DS;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(Qw(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(ib("data",this.frozen),this.namespace[e]=t,this):Hz.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ib("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const r=t.call(e,...n);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Xy(e),n=this.parser||this.Parser;return tb("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),tb("process",this.parser||this.Parser),nb("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(s,a){const u=Xy(e),h=n.parse(u);n.run(h,u,function(p,m,y){if(p||!m||!y)return d(p);const v=m,E=n.stringify(v,y);Wz(E)?y.value=E:y.result=E,d(p,y)});function d(p,m){p||!m?a(p):s?s(m):t(void 0,m)}}}processSync(e){let t=!1,n;return this.freeze(),tb("processSync",this.parser||this.Parser),nb("processSync",this.compiler||this.Compiler),this.process(e,r),d_("processSync","process",t),n;function r(s,a){t=!0,l_(s),n=a}}run(e,t,n){h_(e),this.freeze();const r=this.transformers;return!n&&typeof t=="function"&&(n=t,t=void 0),n?s(void 0,n):new Promise(s);function s(a,u){const h=Xy(t);r.run(e,h,d);function d(p,m,y){const v=m||e;p?u(p):a?a(v):n(void 0,v,y)}}}runSync(e,t){let n=!1,r;return this.run(e,t,s),d_("runSync","run",n),r;function s(a,u){l_(a),r=u,n=!0}}stringify(e,t){this.freeze();const n=Xy(t),r=this.compiler||this.Compiler;return nb("stringify",r),h_(e),r(e,n)}use(e,...t){const n=this.attachers,r=this.namespace;if(ib("use",this.frozen),e!=null)if(typeof e=="function")h(e,t);else if(typeof e=="object")Array.isArray(e)?u(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")h(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...m]=d;h(p,m)}else a(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function a(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(d.plugins),d.settings&&(r.settings=Qw(!0,r.settings,d.settings))}function u(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const m=d[p];s(m)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function h(d,p){let m=-1,y=-1;for(;++m<n.length;)if(n[m][0]===d){y=m;break}if(y===-1)n.push([d,...p]);else if(p.length>0){let[v,...E]=p;const A=n[y][1];K1(A)&&K1(v)&&(v=Qw(!0,A,v)),n[y]=[d,v,...E]}}}}const $z=new DS().freeze();function tb(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `parser`")}function nb(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `compiler`")}function ib(i,e){if(e)throw new Error("Cannot call `"+i+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function h_(i){if(!K1(i)||typeof i.type!="string")throw new TypeError("Expected node, got `"+i+"`")}function d_(i,e,t){if(!t)throw new Error("`"+i+"` finished async. Use `"+e+"` instead")}function Xy(i){return Vz(i)?i:new c2(i)}function Vz(i){return!!(i&&typeof i=="object"&&"message"in i&&"messages"in i)}function Wz(i){return typeof i=="string"||Gz(i)}function Gz(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const qz="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",f_=[],p_={allowDangerousHtml:!0},Xz=/^(https?|ircs?|mailto|xmpp)$/i,Kz=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function m_(i){const e=Yz(i),t=Qz(i);return Jz(e.runSync(e.parse(t),t),i)}function Yz(i){const e=i.rehypePlugins||f_,t=i.remarkPlugins||f_,n=i.remarkRehypeOptions?{...i.remarkRehypeOptions,...p_}:p_;return $z().use(R4).use(t).use(kz,n).use(e)}function Qz(i){const e=i.children||"",t=new c2;return typeof e=="string"&&(t.value=e),t}function Jz(i,e){const t=e.allowedElements,n=e.allowElement,r=e.components,s=e.disallowedElements,a=e.skipHtml,u=e.unwrapDisallowed,h=e.urlTransform||Zz;for(const p of Kz)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+qz+p.id,void 0);return l2(i,d),cB(i,{Fragment:x.Fragment,components:r,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function d(p,m,y){if(p.type==="raw"&&y&&typeof m=="number")return a?y.children.splice(m,1):y.children[m]={type:"text",value:p.value},m;if(p.type==="element"){let v;for(v in qw)if(Object.hasOwn(qw,v)&&Object.hasOwn(p.properties,v)){const E=p.properties[v],A=qw[v];(A===null||A.includes(p.tagName))&&(p.properties[v]=h(String(E||""),v,p))}}if(p.type==="element"){let v=t?!t.includes(p.tagName):s?s.includes(p.tagName):!1;if(!v&&n&&typeof m=="number"&&(v=!n(p,m,y)),v&&y&&typeof m=="number")return u&&p.children?y.children.splice(m,1,...p.children):y.children.splice(m,1),m}}}function Zz(i){const e=i.indexOf(":"),t=i.indexOf("?"),n=i.indexOf("#"),r=i.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||n!==-1&&e>n||Xz.test(i.slice(0,e))?i:""}const eU=()=>{const{state:i}=mg(),{portfolio:e,macroIndicators:t}=i,[n,r]=$.useState(null),[s,a]=$.useState(null),[u,h]=$.useState(!1),[d,p]=$.useState(""),[m,y]=$.useState(null),[v,E]=$.useState(!1),[A,k]=$.useState(null),[C,N]=$.useState([]),[T,D]=$.useState([]),[F,L]=$.useState({total:0,thisMonth:0,lastAnalyzed:null}),[j,G]=$.useState(null);$.useEffect(()=>{K(),ee()},[]);const K=async()=>{try{const J=await Cj();J&&J.reports&&N(J.reports.slice(0,10))}catch(J){console.error("Failed to load reports:",J)}},ee=()=>{const J=Eg();D(J),L(Dj())},q=J=>{const Q=J.target.files[0];if(Q)try{Ej(Q),r(Q),a(Aj(Q)),k(null)}catch(me){alert(me.message),r(null),a(null)}},re=async()=>{if(!n){alert("PDF  .");return}if(e.length===0){alert("  .");return}E(!0),h(!0),k(null),y(null),p("");try{console.log(" Extracting PDF text...");const J=await Sj(n);p(J),console.log(" Analyzing with AI...");const Q=await Rj({portfolio:e,oversoldText:J,dailyReports:C,macroIndicators:t});y(Q),console.log(" Saving to archive..."),Nj({pdfFileName:n.name,aiAnalysis:Q,rawSummary:J,portfolio:e}),ee(),console.log(" Analysis complete and saved")}catch(J){console.error(" Analysis failed:",J),k(J.message||"AI    .")}finally{E(!1),h(!1)}},ue=J=>{if(window.confirm("   ?"))try{Lj(J),ee(),j===J&&G(null)}catch(me){alert(" : "+me.message)}},ie=J=>{G(j===J?null:J)},Z=()=>{r(null),a(null),p(""),y(null),k(null)},se=Ij();return x.jsx(Jt,{children:x.jsx(Jt.Content,{maxWidth:"large",children:x.jsxs("div",{className:"weekly-analysis-page",children:[x.jsxs("div",{className:"weekly-header",children:[x.jsxs("div",{className:"weekly-title-section",children:[x.jsxs("h1",{className:"weekly-title",children:[x.jsx(eF,{size:32}),"    "]}),x.jsx("p",{className:"weekly-subtitle",children:"  AI 3      "})]}),x.jsxs("div",{className:"weekly-stats",children:[x.jsxs("div",{className:"stat-item",children:[x.jsx("span",{className:"stat-label",children:" "}),x.jsx("span",{className:"stat-value",children:F.total})]}),x.jsxs("div",{className:"stat-item",children:[x.jsx("span",{className:"stat-label",children:" "}),x.jsx("span",{className:"stat-value",children:F.thisMonth})]}),se&&x.jsxs("div",{className:"stat-item highlight",children:[x.jsx(WM,{size:20}),x.jsx("span",{className:"stat-label",children:"  "})]})]})]}),x.jsx(vt,{title:" PDF  ",padding:"large",children:x.jsxs("div",{className:"upload-section",children:[x.jsxs("div",{className:"upload-description",children:[x.jsxs("p",{children:[" ",x.jsx("strong",{children:"  "}),"  AI  :"]}),x.jsxs("ul",{children:[x.jsx("li",{children:"    ( vs  )"}),x.jsx("li",{children:"     "}),x.jsx("li",{children:"     "}),x.jsx("li",{children:"   vs   "})]})]}),x.jsxs("div",{className:"file-input-wrapper",children:[x.jsx("input",{type:"file",accept:"application/pdf",onChange:q,id:"pdf-upload",className:"file-input",disabled:v}),x.jsxs("label",{htmlFor:"pdf-upload",className:"file-input-label",children:[x.jsx(tF,{size:20}),n?"  ":"PDF  "]})]}),s&&x.jsxs("div",{className:"file-info",children:[x.jsx(db,{size:20}),x.jsxs("div",{className:"file-details",children:[x.jsx("div",{className:"file-name",children:s.name}),x.jsxs("div",{className:"file-meta",children:[s.size,"  ",s.lastModified]})]})]}),n&&!m&&x.jsx("button",{className:"analyze-btn",onClick:re,disabled:v,children:v?x.jsx(x.Fragment,{children:" AI  ... (30~1 )"}):x.jsx(x.Fragment,{children:" PDF  "})})]})}),u&&x.jsx(vt,{padding:"large",children:x.jsxs("div",{className:"loading-state",children:[x.jsx("div",{className:"spinner"}),x.jsx("h3",{children:"  ..."}),x.jsx("p",{children:d?" PDF      AI  ...":" PDF   ..."})]})}),A&&x.jsx(vt,{padding:"large",children:x.jsxs("div",{className:"error-state",children:[x.jsx("div",{className:"error-icon",children:""}),x.jsx("h3",{children:" "}),x.jsx("p",{children:A}),x.jsx("button",{className:"retry-btn",onClick:re,children:" "})]})}),m&&x.jsx("div",{className:"analysis-result-section",children:x.jsxs(vt,{title:"    ",padding:"large",children:[x.jsx("div",{className:"analysis-content",children:x.jsx(m_,{children:m})}),x.jsxs("div",{className:"analysis-disclaimer",children:[" ",x.jsx("strong",{children:"3  "}),"   .   +   +    .",x.jsx("br",{}),x.jsx("small",{children:"        ."})]}),x.jsx("button",{className:"new-analysis-btn",onClick:Z,children:"  "})]})}),x.jsxs("div",{className:"weekly-archive-section",children:[x.jsxs("h2",{className:"archive-title",children:[x.jsx($M,{size:24}),"   (",T.length,")"]}),T.length===0?x.jsx(vt,{padding:"large",children:x.jsxs("div",{className:"empty-state",children:[x.jsx("div",{className:"empty-icon",children:""}),x.jsx("h3",{children:"    "}),x.jsx("p",{children:"PDF      !"})]})}):x.jsx("div",{className:"archive-list",children:T.map(J=>x.jsxs(vt,{padding:"large",className:"archive-card",children:[x.jsxs("div",{className:"archive-header",children:[x.jsxs("div",{className:"archive-meta",children:[x.jsx("div",{className:"archive-week",children:J.week}),x.jsx("div",{className:"archive-date",children:J.date})]}),x.jsx("button",{className:"delete-archive-btn",onClick:()=>ue(J.id),title:"",children:x.jsx(ZM,{size:16})})]}),x.jsxs("div",{className:"archive-filename",children:[x.jsx(db,{size:16}),J.pdfFileName]}),J.rawSummary&&x.jsxs("div",{className:"archive-summary",children:[x.jsx("strong",{children:"  :"}),x.jsx("p",{children:J.rawSummary})]}),x.jsx("button",{className:"expand-archive-btn",onClick:()=>ie(J.id),children:j===J.id?"AI   ":"AI    "}),j===J.id&&x.jsx("div",{className:"archive-analysis-full",children:x.jsx(m_,{children:J.aiAnalysis})})]},J.id))})]}),x.jsx(vt,{title:"  ",padding:"large",children:x.jsxs("div",{className:"guide-grid",children:[x.jsxs("div",{className:"guide-item",children:[x.jsx("div",{className:"guide-icon",children:""}),x.jsxs("div",{className:"guide-content",children:[x.jsx("h4",{children:"3  "}),x.jsx("p",{children:"  +   +       "})]})]}),x.jsxs("div",{className:"guide-item",children:[x.jsx("div",{className:"guide-icon",children:""}),x.jsxs("div",{className:"guide-content",children:[x.jsx("h4",{children:" "}),x.jsx("p",{children:'""   ,    '})]})]}),x.jsxs("div",{className:"guide-item",children:[x.jsx("div",{className:"guide-icon",children:""}),x.jsxs("div",{className:"guide-content",children:[x.jsx("h4",{children:" "}),x.jsx("p",{children:"          "})]})]})]})})]})})})},tU=()=>{const[i,e]=$.useState({theme:"light",language:"ko",currency:"KRW",emailNotifications:!0,pushNotifications:!0,priceAlerts:!0,newsAlerts:!1,defaultView:"grid",showPercentage:!0,autoRefresh:!0,refreshInterval:60,dataSharing:!1,analytics:!0}),t=a=>{e(u=>({...u,[a]:!u[a]}))},n=(a,u)=>{e(h=>({...h,[a]:u}))},r=()=>{localStorage.setItem("appSettings",JSON.stringify(i)),alert(" !")},s=()=>{window.confirm("  ?")&&(localStorage.removeItem("appSettings"),window.location.reload())};return x.jsx(Jt,{children:x.jsx(Jt.Content,{maxWidth:"large",children:x.jsxs(Jt.Section,{title:"",subtitle:"   ",children:[x.jsx(vt,{title:" ",padding:"large",children:x.jsxs("div",{className:"settings-group",children:[x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:""}),x.jsx("div",{className:"setting-description",children:"   "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("select",{value:i.theme,onChange:a=>n("theme",a.target.value),className:"setting-select",children:[x.jsx("option",{value:"light",children:""}),x.jsx("option",{value:"dark",children:""}),x.jsx("option",{value:"auto",children:""})]})})]}),x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:""}),x.jsx("div",{className:"setting-description",children:"   "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("select",{value:i.language,onChange:a=>n("language",a.target.value),className:"setting-select",children:[x.jsx("option",{value:"ko",children:""}),x.jsx("option",{value:"en",children:"English"}),x.jsx("option",{value:"ja",children:""})]})})]}),x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:""}),x.jsx("div",{className:"setting-description",children:"   "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("select",{value:i.currency,onChange:a=>n("currency",a.target.value),className:"setting-select",children:[x.jsx("option",{value:"KRW",children:"KRW ()"}),x.jsx("option",{value:"USD",children:"USD ($)"}),x.jsx("option",{value:"EUR",children:"EUR ()"})]})})]})]})}),x.jsx(vt,{title:" ",padding:"large",children:x.jsxs("div",{className:"settings-group",children:[x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"   "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("label",{className:"toggle-switch",children:[x.jsx("input",{type:"checkbox",checked:i.emailNotifications,onChange:()=>t("emailNotifications")}),x.jsx("span",{className:"toggle-slider"})]})})]}),x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"   "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("label",{className:"toggle-switch",children:[x.jsx("input",{type:"checkbox",checked:i.pushNotifications,onChange:()=>t("pushNotifications")}),x.jsx("span",{className:"toggle-slider"})]})})]}),x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"     "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("label",{className:"toggle-switch",children:[x.jsx("input",{type:"checkbox",checked:i.priceAlerts,onChange:()=>t("priceAlerts")}),x.jsx("span",{className:"toggle-slider"})]})})]}),x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"   "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("label",{className:"toggle-switch",children:[x.jsx("input",{type:"checkbox",checked:i.newsAlerts,onChange:()=>t("newsAlerts")}),x.jsx("span",{className:"toggle-slider"})]})})]})]})}),x.jsx(vt,{title:" ",padding:"large",children:x.jsxs("div",{className:"settings-group",children:[x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"   "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("select",{value:i.defaultView,onChange:a=>n("defaultView",a.target.value),className:"setting-select",children:[x.jsx("option",{value:"grid",children:""}),x.jsx("option",{value:"list",children:""}),x.jsx("option",{value:"table",children:""})]})})]}),x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"  "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("label",{className:"toggle-switch",children:[x.jsx("input",{type:"checkbox",checked:i.showPercentage,onChange:()=>t("showPercentage")}),x.jsx("span",{className:"toggle-slider"})]})})]}),x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"   "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("label",{className:"toggle-switch",children:[x.jsx("input",{type:"checkbox",checked:i.autoRefresh,onChange:()=>t("autoRefresh")}),x.jsx("span",{className:"toggle-slider"})]})})]}),i.autoRefresh&&x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"  "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("select",{value:i.refreshInterval,onChange:a=>n("refreshInterval",parseInt(a.target.value)),className:"setting-select",children:[x.jsx("option",{value:"30",children:"30"}),x.jsx("option",{value:"60",children:"1"}),x.jsx("option",{value:"300",children:"5"}),x.jsx("option",{value:"600",children:"10"})]})})]})]})}),x.jsx(vt,{title:"  ",padding:"large",children:x.jsxs("div",{className:"settings-group",children:[x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"   "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("label",{className:"toggle-switch",children:[x.jsx("input",{type:"checkbox",checked:i.dataSharing,onChange:()=>t("dataSharing")}),x.jsx("span",{className:"toggle-slider"})]})})]}),x.jsxs("div",{className:"setting-item",children:[x.jsxs("div",{className:"setting-info",children:[x.jsx("div",{className:"setting-label",children:" "}),x.jsx("div",{className:"setting-description",children:"     "})]}),x.jsx("div",{className:"setting-control",children:x.jsxs("label",{className:"toggle-switch",children:[x.jsx("input",{type:"checkbox",checked:i.analytics,onChange:()=>t("analytics")}),x.jsx("span",{className:"toggle-slider"})]})})]})]})}),x.jsx(vt,{title:" ",padding:"large",children:x.jsxs("div",{className:"about-section",children:[x.jsxs("div",{className:"about-item",children:[x.jsx("span",{className:"about-label",children:""}),x.jsx("span",{className:"about-value",children:"1.0.0"})]}),x.jsxs("div",{className:"about-item",children:[x.jsx("span",{className:"about-label",children:" "}),x.jsx("span",{className:"about-value",children:"2026-01-13"})]}),x.jsxs("div",{className:"about-item",children:[x.jsx("span",{className:"about-label",children:""}),x.jsx("span",{className:"about-value",children:"Stock Study Team"})]})]})}),x.jsxs("div",{className:"settings-actions",children:[x.jsx(hp,{variant:"primary",size:"large",onClick:r,children:" "}),x.jsx(hp,{variant:"secondary",size:"large",onClick:s,children:""})]})]})})})};function nU(){return x.jsx(OD,{children:x.jsxs("div",{className:"app",children:[x.jsx(qD,{}),x.jsxs(fD,{children:[x.jsx(_a,{path:"/",element:x.jsx(BM,{})}),x.jsx(_a,{path:"/portfolio",element:x.jsx(aF,{})}),x.jsx(_a,{path:"/macro",element:x.jsx(lF,{})}),x.jsx(_a,{path:"/learning",element:x.jsx(hF,{})}),x.jsx(_a,{path:"/daily-study",element:x.jsx(wj,{})}),x.jsx(_a,{path:"/weekly",element:x.jsx(eU,{})}),x.jsx(_a,{path:"/settings",element:x.jsx(tU,{})})]})]})})}gL.createRoot(document.getElementById("root")).render(x.jsx(cL.StrictMode,{children:x.jsx(IM,{children:x.jsx(nU,{})})}));
